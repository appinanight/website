{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///components/field/p-wysiwyg.vue","webpack:///./components/field/p-wysiwyg.vue?03de","webpack:///../node_modules/he/he.js","webpack:///./components/field/p-wysiwyg.vue?568d","webpack:///../node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///../node_modules/webpack/buildin/module.js","webpack:///./components/field/p-wysiwyg.vue?da59","webpack:///./components/field/p-wysiwyg.vue?d4d4","webpack:///./components/field/p-wysiwyg.vue?ec5f","webpack:///./components/field/p-wysiwyg.vue?fa25","webpack:///./lib/custom-plugins/kirby-imagemanager.js","webpack:///./lib/custom-plugins/pakt-limiter.js","webpack:///./lib/redactor/_langs/de.js","webpack:///./lib/redactor/_langs/nl.js","webpack:///./lib/redactor/_plugins/alignment/alignment.js","webpack:///./lib/redactor/_plugins/counter/counter.js","webpack:///./lib/redactor/_plugins/definedlinks/definedlinks.js","webpack:///./lib/redactor/_plugins/video/video.js","webpack:///./lib/redactor/redactor.js","webpack:///./main.js","webpack:///./scss/main.scss"],"names":["$R","add","translations","en","init","app","lang","opts","api","kirbyApi","endpoints","kirbyEndpoints","onmodal","image","open","$modal","$form","imageQuery","_load","$body","getBody","$box","dom","attr","get","addClass","hide","css","overflow","height","append","then","files","length","_parse","console","log","error","data","key","obj","$img","url","thumb","encodeURI","JSON","stringify","width","margin","cursor","on","_insert","bind","e","preventDefault","$el","target","parse","decodeURI","Redactor","modals","utils","editor","keycodes","onpasting","html","limiter","pasteText","removeInvisibleChars","replace","pasteText_decoded","he","text","_getText","len","sel_html","selection","getHtml","sel_text","sel_text_decoded","sel_length","input","options","title","name","commands","cancel","start","_count","$editor","getElement","_limit","stop","off","which","ctrl","ctrlKey","metaKey","arrows","BACKSPACE","DELETE","ESC","SHIFT","indexOf","count","block","toolbar","dropdown","left","args","center","right","justify","$button","addButton","setIcon","setDropdown","set","type","direction","_remove","style","toggle","remove","statusbar","words","characters","spaces","_clean","arrWords","split","arrSpaces","match","broadcast","trim","component","links","link","definedlinks","_build","ajax","success","$selector","find","$item","prepend","hasOwnProperty","$option","val","_select","formData","getData","setData","insertion","inspector","video","opened","getField","focus","insert","oncontextbar","contextbar","isComponentType","node","getComponent","buttons","addButtonAfter","handle","_matchData","_isVideoIframe","$video","create","insertHtml","iframeStart","iframeEnd","allowed","tags","$0","$1","toLowerCase","regex","youtube","vimeo","Ajax","settings","post","AjaxRequest","method","defaults","before","async","headers","p","extend","toUpperCase","prepareData","xhr","XMLHttpRequest","setHeaders","send","prototype","obj1","obj2","isFormData","toParams","setRequestHeader","window","FormData","isComplete","status","onload","loaded","call","response","json","parseJson","statusText","str","o","Object","keys","map","k","encodeURIComponent","join","DomCache","DomExpando","Date","getTime","DomHClass","DomHMClass","Dom","selector","context","ready","fn","document","readyState","addEventListener","sdom","nodes","reHtmlTest","nodeType","childNodes","test","_query","_slice","createElement","RegExp","elements","container","children","innerHTML","i","l","push","concat","_toArray","index","getAll","eq","first","last","contents","each","callback","is","filter","undefined","Node","matches","msMatchesSelector","webkitMatchesSelector","not","ns","parent","parentNode","parents","_getContext","closest","isNode","next","_getSibling","nextElement","prev","prevElement","value","_getHeightOrWidth","getComputedStyle","checked","_getBooleanFromStr","getAttribute","setAttribute","reDataAttr","attrs","attributes","replacer","g","nodeName","dataName","_isObjectString","_toObject","_isNumber","parseFloat","el","removeAttr","rmAttr","removeAttribute","forEach","removeData","rmData","dataset","dataindex","dataget","cacheIndex","nextCacheIndex","_eachClass","removeClass","toggleClass","hasClass","some","classList","contains","empty","textContent","after","_inject","frag","insertAdjacentHTML","elms","reverse","insertBefore","nextSibling","appendChild","firstChild","wrap","wrapper","unwrap","$node","replaceWith","docFrag","createDocumentFragment","result","replaceChild","removeChild","clone","events","copy","_clone","_cloneEvents","show","_hasDisplayNone","isHidden","isHiddenMobile","display","scrollTop","isWindow","isDocument","scrollingElement","body","documentElement","scrollTo","pageYOffset","offset","_getDim","position","adjust","_getSize","outerWidth","_getInnerOrOuter","outerHeight","innerWidth","innerHeight","click","_triggerEvent","trigger","names","ev","bubbles","cancelable","CustomEvent","createEvent","initCustomEvent","dispatchEvent","handler","one","event","_getEventName","namespace","_getEventNamespace","_getOneHandler","_e","testEvent","testNamespace","testEventNamespace","testPositive","_offEvent","serialize","asObject","disabled","z","opt","selected","_toParams","_queryContext","querySelectorAll","element","getElementById","slice","getElementsByClassName","getElementsByTagName","querySelector","res","_events","cloneNode","setClass","self","apply","arguments","arr","condition","handlers","toString","removeEventListener","splice","_getDocSize","Math","max","captype","round","_adjustResultHeightOrWidth","charAt","$targets","fixStyle","tmp","thisStyle","fix","isBorderBox","boxSizing","borderTopWidth","borderBottomWidth","marginTop","marginBottom","borderLeftWidth","borderRightWidth","marginLeft","marginRight","top","_getPosition","offsetTop","offsetLeft","_getOffset","rect","getBoundingClientRect","doc","ownerDocument","docElem","win","defaultView","clientTop","pageXOffset","clientLeft","sibling","NodeList","params","_encodeUri","Function","isNaN","search","currentStyle","uuid","RedactorApp","version","modules","services","classes","plugins","mixins","UP","DOWN","ENTER","SPACE","TAB","CTRL","META","ALT","RIGHT","LEFT","env","jQuery","$","redactor","toArray","Array","isArray","isApi","instance","App","isDestroy","methodValue","unshift","F","inherit","addLang","current","f","prop","__lookupGetter__","__defineGetter__","exception","extended","deep","merge","animation","spellcheck","structure","scrollTarget","styles","stylesClass","placeholder","source","showSource","inline","breakline","markup","enterKey","clickToEdit","clickToSave","clickToCancel","focusEnd","minHeight","maxHeight","maxWidth","callbacks","preClass","preSpaces","tabindex","tabAsSpaces","tabKey","autosave","autosaveName","autosaveData","toolbarFixed","toolbarFixedTarget","toolbarFixedTopOffset","toolbarExternal","toolbarContext","air","formatting","formattingAdd","formattingHide","buttonsTextLabeled","buttonsAdd","buttonsAddFirst","buttonsAddAfter","buttonsAddBefore","buttonsHide","buttonsHideOnMobile","imageUpload","imageUploadParam","imageData","imageEditable","imageCaption","imageLink","imagePosition","imageResizable","imageFloatMargin","imageFigure","imageObserve","fileUpload","fileUploadParam","fileData","fileAttachment","uploadData","dragUpload","multipleUpload","clipboardUpload","uploadBase64","linkTarget","linkTitle","linkNewTab","linkNofollow","linkSize","linkValidation","cleanOnEnter","cleanInlineOnEnter","paragraphize","removeScript","removeNewLines","removeComments","replaceTags","pastePlainText","pasteLinkTarget","pasteImages","pasteLinks","pasteClean","pasteKeepStyle","pasteKeepClass","pasteKeepAttrs","pasteBlockTags","pasteInlineTags","activeButtons","b","strong","em","del","strike","u","activeButtonsAdd","activeButtonsObservers","autoparse","autoparseStart","autoparsePaste","autoparseLinks","autoparseImages","autoparseVideo","shortcodes","format","shortcodesAdd","shortcuts","shortcutsAdd","grammarly","notranslate","bufferLimit","emptyHtml","markerChar","imageTypes","imageAttrs","inlineTags","blockTags","imageurl","zindex","modes","icon","undo","redo","tag","blockquote","pre","h1","h2","h3","h4","h5","h6","bold","tooltip","italic","deleted","underline","sup","sub","lists","observe","unorderedlist","orderedlist","outdent","indent","ul","ol","file","unlink","line","module","plugin","instances","started","stopped","rootElement","rootOpts","dragInside","dragComponentInside","$win","$doc","editorReadOnly","buildServices","buildModules","buildPlugins","isStarted","isStopped","core","bindable","service","inj","isDragInside","setDragInside","isDragComponentInside","setDragComponentInside","getDragComponentInside","isReadOnly","enableReadOnly","clearActive","disableButtons","disableReadOnly","enableButtons","callMessageHandler","func","checkProperty","moduleName","isApp","isCallback","isService","isPlugin","isModule","callInstanceMethod","isInstanceExists","Error","buildArgs","applyArgs","_clearAll","clearClass","save","$elements","getElements","_unwrapSpanWithoutAttr","restore","clearStyle","clearAttr","_removeAllAttr","className","newVal","oldVal","isRgb","rgb2hex","hex2long","compareNew","compareOld","_convertStyleQuotes","removeEmptyAttr","nodeAttr","removeAttributeNode","finalNodes","tagName","cmnt","vars","rebuild","_set","_loop","path","animationOpt","duration","iterate","delay","timing","prefix","AnimatePlay","effect","hidableEffects","prefixes","buildAnimationOff","isInanimate","inanimate","animate","isHidable","buildHideClass","isAnimated","setTimeout","complete","clean","setStart","_setCaret","setEnd","setBefore","setAfter","isStart","_isStartOrEnd","isEnd","setAtEnd","getTag","range","createRange","_isInPage","textNode","createInvisibleChar","selectNodeContents","collapse","setRange","setAtStart","isInline","isEmpty","insertNode","setAtBefore","setStartBefore","setAtAfter","setStartAfter","setAtPrev","previousSibling","_isEmptyTextNode","previousElementSibling","setAtNext","nextElementSibling","getNode","_setStart","isText","findFirstNode","item","getFirstElement","dataItem","isComponent","isFigcaption","code","findLastNode","table","getTable","tableData","setActive","_setInline","_setEnd","getLastElement","_setBefore","isFirstTableCell","isFirstListItem","getList","isBlock","_setAfter","isLastTableCell","_hasInlineChild","_getStartEndNode","trimSpaces","isComponentEditable","end","size","pos","getFirstNode","getLastNode","isInlineTag","getFigcaption","isTable","isList","containsNode","getSelection","Selection","containsNodePolyfill","polyfill","anchorNode","finalnode","focusNode","rectSelection","getRangeAt","rectBlock","sel","isInEditor","isEditor","isCollapsed","getRange","isBackwards","backwards","anchorOffset","focusOffset","collapsed","detach","isIn","getCurrent","getBlock","blocks","getBlocks","isTableCellTag","isAll","isNonEditable","isActive","output","htmlLen","outputLen","getText","hasNonEditable","$wrapper","removeAllRanges","addRange","setAll","saveScroll","disableNonEditables","marker","build","restoreMarkers","getComponentCodeElement","enableNonEditables","restoreScroll","rangeCount","getTextBeforeCaret","num","cloneRange","getTextAfterCaret","clonedRange","endContainer","endOffset","getPosition","startOffset","startContainer","bottom","getActive","getParent","isElement","getInline","_isInlineNode","getInlineFirst","getInlineAll","inlines","isBlockTag","getInlinesAllSelected","getInlines","all","textNodes","getNodes","textnodes","_isTextSelected","_filterNodesByTags","filteredNodes","_isInNodesArray","inside","_filterInlinesInside","_filterBlocksFirst","activeComponent","_getNodesComponent","_getRangeSelectedNodes","_filterServicesNodes","_filterEditor","_filterNodesTexts","_filterNodesElements","cloneContents","cleaner","clear","collapseToStart","collapseToEnd","saveActiveComponent","savedComponent","restoreActiveComponent","_clearSaved","savedElement","saved","caret","saveMarkers","_getNextNode","hasChildNodes","startNode","endNode","getChildNodes","commonAncestorContainer","skip","keepbr","passtexts","nodeTag","isFirst","isCellParent","escapeRegExp","$element","_buildType","isType","getType","scrolltop","pasting","isFocus","_isContenteditableFocus","startFocus","endFocus","isPasting","enablePasting","disablePasting","_getScrollTarget","$noneditables","isSourceMode","$source","keeplists","isEmptyHtml","$active","activeElement","isComponentSelected","setEmpty","editableElement","$target","$blockParent","$container","content","_buildName","_buildStartedContent","getCode","getName","getStartedContent","setCode","isNameGenerated","rebuildStartedContent","isTextarea","sourceElement","$statusbar","items","update","getItems","removeItems","dropdownOpened","buttonsObservers","_extendActiveButtons","stopObservers","$toolbar","setButtonsInactive","button","observer","getButton","_inlinesToTags","detector","isMobile","isAir","isFixed","isContextBar","$bar","isTarget","getWrapper","getDropdown","getTargetElement","$btn","_findButton","getButtons","_findButtons","getButtonsKeys","btnObj","addButtonFirst","addButtonBefore","addButtonObserver","setButtons","$buttons","setInactive","setButtonsActive","disable","enable","_init","isDisabled","hasIcon","message","setMessage","setApi","setTitle","setTooltip","$icon","_buildTooltip","hideTooltip","_parseTitle","_parseTooltip","_buildCallback","_buildAttributes","_buildObserver","_buildIcon","isHtml","isDesktop","created","arrowOffset","close","$items","isOpened","$dropdown","getItem","getItemsByClass","classname","_closeAll","_observe","_handleKeyboard","updatePosition","_isButton","_close","btnHeight","btnWidth","topOffset","leftOffset","winWidth","leftFix","leftPos","heightTolerance","winHeight","cropHeight","isDom","_buildDom","_buildItems","_buildFormattingItems","$span","getTitle","storedComponents","storedImages","storedLinks","deniedTags","convertRules","unconvertRules","reComments","reSpacedEmpty","reScriptTag","addConvertRules","addUnconvertRules","encodePreCode","converter","convert","storeComponents","_setSpanAttr","_setStyleCache","removeTags","_removeScriptTag","_replaceScriptTag","_isSpacedEmpty","restoreComponents","_cleanWrapped","buildWrapper","imageattrs","getWrapperHtml","removeMarkers","removeInvisibleSpaces","_isParagraphEmpty","removeServiceTagsAndAttrs","removeSpanWithoutAttributes","removeFirstBlockBreaklineInHtml","_unreplaceScriptTag","_setPreClass","_setLinkNofollow","cleanNewLines","unconvert","removeEmptyAttributes","cleanSpacesInPre","tidy","paste","isMsWord","_isHtmlMsWord","_cleanGDocs","_cleanMsWord","exceptedTags","removeTagsExcept","$elms","filterStyle","filterClass","filterAttrs","$li","storeLinks","storeImages","getPlainText","_replaceNlToBr","restoreLinks","restoreImages","getFlatText","$div","innerText","replaceToTag","replaceNbspToSpaces","replaceBlocksToBr","removeNl","removeBrAtEnd","denied","re","except","encodeHtml","encodeEntities","matched","_encodeOuter","_encodePreCodeLine","_decodeMarkers","decodeEntities","encodePhpCode","String","getElementsFromHtml","_storeMatched","_restoreMatched","floor","$parent","exec","parseInt","_parseWordLists","hasAttribute","lines","space","lastLevel","setPnt","$list","currentLevel","txt","listTag","$list2","stored","decodedMarkers","outerHTML","encoded","rules","_convertImage","_convertLine","_convertIframe","_convertTable","_convertForm","_convertCode","_convertWidget","_setContenteditableCode","isIe","_acceptExtraRules","_unconvertWidget","_unconvertForm","_unconvertTable","_unconvertImages","_removeTypes","$next","tbr","lastChild","_isNonEditable","getRandomId","$link","$figure","isImage","_setFigure","_wrapFigure","src","isVideo","hasFigcaption","hasStyle","removed","$code","remStart","remEnd","paragraphizeTags","_isConverted","_convert","tablemarkup","markupTag","_storeTags","storeComments","commentsMatch","_trimEmptyLines","_restoreTags","breaklineAttr","isUnwrap","replacement","createTextNode","_isDisabled","_isEmptyHtml","userAgent","navigator","isWebkit","isFirefox","v","documentMode","ie","isIpad","trimmed","$startNode","_getString","_setComponentOffset","charIndex","nodeStack","foundStart","pop","nextCharIndex","_isFigcaptionNext","nodeValue","_extendTags","_isTag","isHeadingTag","$component","getComponentType","isComponentActive","types","isPre","getPre","isCode","_getLastOrFirstListItem","isLastListItem","_getLastOrFirstTableCell","isHeading","getHeading","isBlockquote","getBlockquote","isDl","getDl","isParagraph","getParagraph","isLink","getLink","isFile","getFile","hasParent","_getClosestNode","getParentList","_getClosestUpNode","getListItem","getTableCell","$td","getImageElement","_getClosestElement","list","id","_getPos","buildHtml","side","atStart","cloned","setEndBefore","$context","$marker","_restoreInject","activeClass","findSiblings","cell","_find","$caret","_buildCaret","setOnEvent","contextmenu","executeScripts","scripts","$script","instgrm","Embeds","process","head","eval","fragment","isFragment","createFragment","_collapseSelection","_insertFragment","_sendNodes","insertBreakLine","insertNewline","insertText","insertChar","charhtml","insertRaw","insertToEnd","lastNode","$lastNode","$newNode","insertPoint","markerInserted","x","clientX","y","clientY","caretPositionFromPoint","offsetNode","caretRangeFromPoint","insertToPoint","point","pointInserted","insertToOffset","parsedInput","parseHtml","_insertToAllSelected","dataCurrent","_getCleanedInput","isFigure","_isFigure","isComponentSpan","_isComponentSpan","isInsertedText","_insertToEmptyEditor","_insertToWidget","_insertToInline","splitNode","_insertToCode","_insertToPre","_hasBlocksAndImages","_isPlainHtml","_containsTags","_buildList","insertedHtml","dataInserted","normalizeTextNodes","deleteContents","isLastInline","_isLastInline","ucfirst","isPreformatted","_getContainer","createTmpContainer","parentListTag","_hasFigureOrTable","_hasBlocks","_isHtmlString","_format","_apply","clearFormat","_clear","_getBlocks","_isToggleFormatType","replacedTag","_getReplacedTag","_replaceBlocks","_buildNodes","_restoreSelection","_getElements","finalBlocks","_isStandardParagraph","_isStandardDiv","_isBreaklineBlock","_isCurrentBlockOneAndEmpty","_applyArgs","_combinePre","_cleanBlocks","combinedNodes","$current","newline","headings","_cleanEmptyClass","_cleanEmptyStyle","keepStyleAndClass","keepAttrs","_isFormat","arrangeTag","formatCollapsed","formatUncollapsed","replaced","$inline","$secondPart","extractedContent","insertInline","dataInline","hasSameArgs","extractHtmlFromCaret","cloneAttributes","$breaked","$last","same","nodeAttrValue","origRules","styleToObj","innerCount","ruleName","ruleValue","_convertTags","_convertToStrike","execCommand","_clearDecoration","_revertToInlines","_clearEmptyStyle","_normalizeBlocks","_revertTags","_replaceToStrike","_forceRemoveClass","removeFromArrayByValue","textDecoration","textDecorationLine","_clearEmptyStyleAttr","$objects","$object","_isKey","reTags","imagesMatches","_formatLinks","_restoreReplaced","enter","isNotFormatted","_convertToRegExp","setSrc","$cloned","href","linkProtocol","regexB","substring","decodeURIComponent","regexp","classstr","observeImages","$images","_addImage","observeFiles","$files","_addFile","setStatus","getChanges","searchInvisibleChars","trimInvisibleChars","isSpace","firstNode","n","div","extractContents","createMarkup","createMarkupBefore","exclude","elems","mapping","thisArg","newArr","recursive","nestedNodes","getChildElements","_getFirst","_getLast","$replaced","a","ax","elFrom","elTo","rule","extendData","serializedData","_setData","normalize","rgb","s","possible","random","_is","_destroy","onstart","_startStop","onstop","onenable","ondisable","_buildModes","_buildMarkup","_redefineOptions","_isRootOption","autoparser","onenablefocus","_enableFocus","oncontextmenu","onclick","onkeyup","onenablereadonly","_enableReadOnly","ondisablereadonly","_disableReadOnly","onautoparseobserve","onplaceholder","_buildPlaceholder","_togglePlacehodler","_buildEvents","_buildOptions","_buildAccesibility","classesEditor","classesContainer","_destroyEvents","_disableBrowsersEditing","_enableFocusSource","_enableFocusEditor","setSelectionRange","attachEvent","returnValue","destroy","_getEditables","blurNamespace","eventsList","isFocused","isBlured","blur","targets","stopBlur","cut","_passSelectionToClipboard","drop","originalEvent","stopPropagation","_removeOverClass","$dragComponent","dt","dataTransfer","dragenter","dragstart","_setDragData","dragover","dragleave","detail","pad","posHeight","pageY","keydown","keyup","mouseup","touchstart","_passAllToClipboard","clipboard","clipboardData","effectAllowed","$label","syncedHtml","onstartcode","sourceContent","startContent","syncContent","onstartcodeshow","ontrytosync","sync","onhardsync","_syncing","_buildClasses","editorHeight","_onChangedSource","_onTabKey","_onFocus","codemirror","CodeMirror","fromTextArea","setSize","cm","changeObj","_disableButtons","_setActiveSourceButton","getValue","toTextArea","_enableButtons","_setInactiveSourceButton","_isSync","timeout","clearTimeout","keyCode","selectionStart","selectionEnd","observerUnit","MutationObserver","subtree","childList","characterData","characterDataOldValue","disconnect","mutations","mutation","onstartclicktoedit","_isEnabled","buttonSave","buttonCancel","_setFocus","objected","enabled","$contextbar","_buildPosition","barWidth","barHeight","docScrollTop","targetOffset","topFix","_buildTitle","_buildMessage","_toggle","toolbarModule","onsource","resetPosition","createSourceHelper","destroySourceHelper","closed","openSelected","ontoolbar","removeexternal","onobserve","onfocus","_setExternalOnFocus","onsourcefocus","onempty","_buildButtons","_initToolbar","_initButtons","_buildImageButton","_buildFileButton","_buildSourceButton","_buildAdditionalButtons","_buildHiddenButtons","imageManagerJson","_removeExistButtons","btns","setExternal","clicks","$airHelper","_isSelection","_open","_openCmd","_isOpened","dataTarget","isModalTarget","isButtonCall","isDropdownCall","_doOpen","containerOffset","toolbarWidth","selPos","$fixedTarget","reset","_doFixed","isHeight","toolbarHeight","toleranceEnd","boxOffset","boxEnd","scrollOffset","bs","bsFix","fixedScrollTimeout","isExternalMultiple","_findToolbars","$toolbars","$external","_buildExternal","_buildFixed","_initExternal","_hideToolbarsExceptFirst","$first","_buildWrapper","_buildElement","_initWrapper","isCurrentLink","currentText","_setFormData","_setFormFocus","_validateData","_update","_unlink","onbutton","_observeButton","ondropdown","_observeUnlink","_observeEdit","_getCurrent","$point","_truncateText","_buildCurrent","_getModalData","_getLinks","_resetCurrent","_setLinkData","_insertSingle","_removeInSelection","_insertMultiple","$clonedLink","_isCurrentTextChanged","_deleteContents","textContext","isTextChanged","linkData","parsed","_isLink","modalData","currentLink","setError","reUrl","_get","_get_target","_get_url","_get_title","_get_text","_findDeepestChild","_set_target","_set_text","_set_title","_set_url","_cleanUrl","_isMailto","_isUrl","depth","child","childResult","selectionMarkers","$overlay","resize","setWidth","_buildDefaults","_openUrl","_openTemplate","template","_createModal","_buildModalBox","_buildOverlay","_buildModal","_buildModalForm","_buildModalCommands","_broadcast","_buildModalTabs","_opened","_handleEscape","_handleEnter","_needToClose","_closed","$modalForm","setHeight","$footer","getFooter","_handleCommand","$tabs","_showTab","getForm","isCloseNode","command","getHeader","$modalHeader","$modalBody","$modalFooter","windowHeight","$modalClose","_buildClose","_buildHeader","_buildBody","_buildFooter","_buildTemplate","_getFieldEventName","_clearError","clearformat","clearstyle","clearclass","clearattr","onsynced","_send","_complete","lastShiftKey","onpaste","onkeydown","shortcut","altKey","_selectAll","arrowKeys","isKeys","isArrowKeys","isXKey","isAlphaKeys","shiftKey","_isArrowKey","_isDeleteKey","shortcode","_isRightLeftKey","_isExitVariable","_isRightDownKey","_isExitOnDownRight","_selectComponent","_isLeftUpKey","_isExitOnUpLeft","_exitPrevElement","isEndEditor","_exitNextElement","isNext","siblingBlock","_selectComponentItem","_removeActiveComponent","_removeAllSelectedTable","_detectVariableOrNonEditable","_traverseBackspace","_traverseDelete","_removeUnwantedStyles","_removeEmptySpans","_removeSpanTagsInHeadings","_removeInlineTagsInPre","isBlockStart","isBlockEnd","isCurrentStart","isCurrentEnd","isCurrentStartSpace","isCurrentEndSpace","_isVariable","_getBlock","dataNext","isNextBlock","$currentList","$lists","$prev","_replaceBlock","dataPrev","isPrevBlock","$newnode","$block","_isNeedToReplaceBlock","$tags","_disable","_insertBreak","_isExit","_traverse","isParagraphExit","_isExitableBlock","isBreaklineExit","_isExitableDblBreak","_exitFromElement","blockTag","$variable","_traverseDl","nextDd","nextDt","dd","_clearBlock","_isNeedToCleanBlockStyle","pasteHtml","dropPasted","isRawCode","_isPlainText","getAsFile","_insertFiles","returned","isClipboard","worked","hotkeys","hotkeysShiftNums","_handler","special","character","fromCharCode","modif","cmdKeys","specialKey","_insertHardTab","_tabCode","progress","paramName","_buildInput","_buildBox","$uploadbox","box","_onDropBox","_onDragOver","_onDragLeave","$placeholder","_onChange","_onClick","_onDrop","_setStatusDrop","_setStatusHover","_removeStatusHover","_setStatusError","_setStatusSuccess","_getUploadParam","_buildData","_sendData","Promise","$pre","_initElement","onform","storage","justResized","oninsert","_observeImages","onstarted","resizer","ondropimage","onbottomclick","onimageresizer","onupload","_uploadError","imageedit","_change","imagedrop","imagereplace","_setUpload","$image","_save","onimage","resized","_isImage","multiple","_createImageAndStore","inserted","_removeSpaceBeforeFigure","$inserted","img","_removeInvisibleSpace","caption","align","modal","changeImage","$previewBox","_setReplaceUpload","_buildPreview","_buildPreviewUpload","$tab","$preview","$previewImg","$desc","_set_src","_set_id","_set_caption","$figcaption","_set_align","imageFloat","imageMargin","textAlign","positions","alignClass","_set_link","_findLink","_get_src","_get_id","alt","_get_caption","_get_align","_get_link","_setResizerPosition","$resizableBox","$resizableImage","$resizer","offsetFix","resizerWidth","resizerHeight","resizeHandle","pageX","ratio","h","targetTouches","_start","_move","_stop","_getResizableBoxWidth","ondropfile","filedrop","$file","_createFileAndStore","_insertAsAttachment","wrapAttachment","modalFormData","_truncateUrl","$remover","removeAttachment","$a","state","passed","keyPressed","undoStorage","redoStorage","_listen","onsyncing","onbuffer","onstate","_isUndo","_isRedo","_saveState","_getUndo","_getRedo","_setUndo","cmd","_hasUndo","_removeOverStorage","_setRedo","buffer","_hasRedo","_observeDropdown","_isUnformat","_unformat","isIndent","$prevChild","$newList","$listItem","$liItem","nextItems","nextList","$nextList","isTop","isMiddle","isBottom","_getAllNext","_createUnformatContainer","$childList","countLists","_uniteBlocks","_createList","$oldList","_createListItem","lastcell","$cell","_isUniteBlock","selectedItems","_unformatEntire","_getItemsPosition","_unformatAtSide","ci","$secondList","$innerLists","sFirst","sLast","_observeButtonsList","itemOutdent","itemIndent","_observeIndent","param","_getHtml","panel","fields","Wysiwyg","components","props","column","field","computed","stripped"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA,MADA,kBACA;AACA;AACA,YADA;AAEA,qBAFA;AAGA;AAHA;AAKA,GAPA;AAQA,sBARA;AASA;AACA,iBADA;AAEA,gCAFA;AAGA,4BAHA;AAIA,2BAJA;AAKA,6BALA;AAMA,gBANA;AAOA,2BAPA;AAQA,qBARA;AASA,kBATA;AAUA,mBAVA;AAWA,yBAXA;AAYA,4BAZA;AAaA;AAbA,GATA;AAwBA;AACA,UADA,oBACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AANA,GAxBA;AAiCA;AAEA,eAFA,uBAEA,QAFA,EAEA,KAFA,EAEA,KAFA,EAEA;AACA;AACA;AACA,KALA;AAMA,gBANA,wBAMA,KANA,EAMA,KANA,EAMA,MANA,EAMA;AAEA;AACA,oBADA;AAEA,qBAFA;AAGA;AAHA;AAKA;AACA,qBACA,SADA,EAEA,SAFA,EAGA,cAHA,EAIA,oBAJA;;AAMA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA,uBADA;AAGA,0BAHA;AAIA,6CAJA;AAKA,2CALA;AAOA,2BAPA;AAQA,4CARA;AAUA,wBAVA;AAWA,gCAXA;AAaA,wBAbA;AAeA,6BAfA;AAgBA,+BAhBA;AAkBA,wCAlBA;AAoBA,2BApBA;AAsBA;AACA,0DACA,IADA,CACA,kBACA,CAFA,WAGA,kBACA;AACA,WALA,EADA,CAOA;AACA;AACA;AACA,SAhCA;AAiCA,qCAjCA;AAmCA;AACA;AACA;;AACA;AACA;AACA;AACA,WANA;AAOA;AACA;AACA;AACA;AACA,WAXA;AAYA;AACA,8CACA;AAFA;AAZA;AAnCA;AAqDA,KAhFA;AAiFA,cAjFA,sBAiFA,QAjFA,EAiFA;AACA;;AACA;AACA,2DACA,IADA,CACA;AACA;AACA,SAHA,WAIA;AACA;AACA,SANA;AAOA,OARA,MAQA;AACA;AACA;AACA;AA9FA,GAjCA;AAiIA,sBAjIA,kCAiIA;AAAA;AAAA;AAEA,GAnIA;AAoIA;AACA;AACA;AACA;AACA;AACA;AALA,GApIA;AA2IA,SA3IA,qBA2IA;AACA;AACA,GA7IA;AA8IA,SA9IA,qBA8IA;AACA;AACA;AAhJA,G;;;;;;;;;;;ACnBA,yC;;;;;;;;;;;ACAA;AACA,CAAC;;AAED;AACA,mBAAmB,KAA0B;;AAE7C;AACA,kBAAkB,KAAyB;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,8iBAA8iB,wZAAwZ,WAAW;;AAEn+B;AACA;AACA,cAAc;AACd,aAAa;AACb,eAAe;AACf,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA,wxfAAwxf,inBAAinB,6BAA6B,yBAAyB;AAC/7gB,kBAAkB,4teAA4te,wKAAwK,2uZAA2uZ,wKAAwK,6gFAA6gF;AACtz9B,wBAAwB;AACxB,yBAAyB;AACzB;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D;AAC1D;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC,mBAAmB,iBAAiB;AACpC,qBAAqB,MAAM,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,wCAAwC,EAAE;AAC1C,KAAK;AACL;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA,uCAAuC;AACvC,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE,IAEU;AACZ;AACA,EAAE,mCAAO;AACT;AACA,GAAG;AAAA,oGAAC;AACJ,EAAE,MAAM,YAUN;;AAEF,CAAC;;;;;;;;;;;;;;ACxVD;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,2CAA2C,iBAAiB,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrCA;AAAA;AAAA;;AAEA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5FA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","<template>\n    <k-field :input=\"uid\" v-bind=\"$props\" class=\"k-p-wysiwyg-field\">\n        <textarea ref=\"editor\" id=\"p-wysiwyg__editor\" class=\"p-wysiwyg__editor\"></textarea>\n        <k-input class=\"p-wysiwyg__output\" ref=\"input\" :id=\"_uid\" v-bind=\"$props\" type=\"text\" theme=\"field\"/>\n    </k-field>\n</template>\n\n<script>\nimport '../../lib/redactor/redactor.js';\nimport '../../lib/redactor/_plugins/video/video.js';\nimport '../../lib/redactor/_plugins/alignment/alignment.js';\nimport '../../lib/custom-plugins/pakt-limiter.js';\nimport '../../lib/redactor/_plugins/counter/counter.js';\nimport '../../lib/redactor/_plugins/definedlinks/definedlinks.js';\nimport '../../lib/custom-plugins/kirby-imagemanager.js';\n\nimport '../../lib/redactor/_langs/nl.js';\nimport '../../lib/redactor/_langs/de.js';\n\nexport default {\n    data () {\n        return {\n            id: '',\n            isLoaded: false,\n            redactorInstance: Object,\n        }\n    },\n    extends: 'k-field',\n    props: {\n        value: String,\n        formatting: [Boolean, Array],\n        pasteInlineTags: [ Array ],\n        pasteBlockTags: [ Array ],\n        buttons: [Boolean, Array],\n        size: String,\n        query: [Boolean, Array],\n        endpoints: Object,\n        pageId: String,\n        pageUid: String,\n        encodedPageId: String,\n        limit: [Boolean, Number],\n        lang: String\n    },\n    computed: { \n        styles() {\n            let sortedFormatting = Object.values(this.formatting).map(format => {\n                return format;\n            });\n            return sortedFormatting;\n        },\n    },\n\n    methods: {\n        \n        imageUpload(formData, files, event){\n            consol.log('image upload');\n            consol.log(formData, files, event);\n        },\n        loadRedactor(query, pages, images){\n\n            const sizes = {\n                'small' : 160, \n                'medium': 240, \n                'large' : 460, \n            }\n            let mySize = sizes[this.size] ? sizes[this.size] : sizes.small;\n            let plugins = [\n                'limiter',\n                'counter',\n                'definedlinks', \n                'kirby-imagemanager', \n            ];\n            if (this.buttons && this.buttons.indexOf('video') !== -1) {\n                plugins.push('video');\n            }\n            if (this.buttons && this.buttons.indexOf('alignment') !== -1) {\n                plugins.push('alignment');\n            }\n            let self = this;\n            $R(this.$refs.editor, {\n                lang: self.lang,\n\n                pasteImages: false,\n                pasteInlineTags: self.pasteInlineTags,\n                pasteBlockTags: self.pasteBlockTags,\n\n                kirbyApi: self.$api,\n                kirbyEndpoints: self.endpoints.field,\n\n                plugins: plugins,\n                minHeight: mySize+'px',\n\n                linkNewTab: true,\n\n                buttons: self.buttons,\n                formatting: self.styles,\n\n                definedlinks: pages ? pages : '',\n\n                limiter: self.limit,\n                \n                imageUpload: function(formData, files, event){\n                    self.$api.post('pages/' + self._uid + '/files')\n                    .then(files => {\n                    })\n                    .catch((error) => {\n                        // this.$store.dispatch('notification/error', 'The files query does not seem to be correct')\n                    })\n                    // ... your process for uploading an image ...\n                    //  in the end, you must return JSON or a string with the image URL\n                    // return json; or return '/images/my-image.jpg';\n                },\n                imageQuery: self.query.images,\n\n                callbacks: {\n                    started: function(){\n                        self.redactorInstance = this;\n                        if( self.value ){ \n                            this.source.setCode(self.value); \n                        }\n                    },\n                    changed: function( html ) {\n                        self.isLoaded = true;\n                        self.value = html;\n                        self.$emit('input', self.value);\n                    },\n                    image: {\n                        inserted: function(img){\n                        }\n                    }\n                }\n            });\n        },\n        checkQuery(hasQuery){\n            let self = this;\n            if (hasQuery) {\n                this.$api.get(this.endpoints.field + '/get-pages')\n                    .then(data => {\n                        self.loadRedactor(hasQuery, data.pages);\n                    })\n                    .catch((error) => {\n                        self.$store.dispatch('notification/error', error);\n                });\n            }else{\n                self.loadRedactor(hasQuery);\n            }\n        }\n    },\n    updateRedactorSource (val = '', valFrom = false ) {\n\n    },\n    watch: {\n        value: function (newVal, oldVal) {\n            if ( !this.isLoaded ) {\n                this.redactorInstance.source.setCode( newVal );\n            }\n        }\n    },\n    created () {\n        this.id = this._uid\n    },\n    mounted () {\n        this.checkQuery(this.query.pagelink);\n    },\n\n};\n</script>\n\n<style lang=\"scss\">\n    @import \"../../lib/redactor/redactor.css\";\n    // .p-wysiwyg__editor will get replaced by Redactor\n    .p-wysiwyg__editor {\n        height: 0;\n        padding: 0;\n        margin: 0;\n        opacity: 0;\n        overflow: hidden;\n    }\n    .p-wysiwyg__output {\n        height: 0;\n        overflow: hidden;\n        opacity: 0;\n        border: 0px !important;\n        position:absolute;\n    }\n</style>\n","// removed by extract-text-webpack-plugin","/*! https://mths.be/he v1.2.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t// All astral symbols.\n\tvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\t// All ASCII symbols (not just printable ASCII) except those listed in the\n\t// first column of the overrides table.\n\t// https://html.spec.whatwg.org/multipage/syntax.html#table-charref-overrides\n\tvar regexAsciiWhitelist = /[\\x01-\\x7F]/g;\n\t// All BMP symbols that are not ASCII newlines, printable ASCII symbols, or\n\t// code points listed in the first column of the overrides table on\n\t// https://html.spec.whatwg.org/multipage/syntax.html#table-charref-overrides.\n\tvar regexBmpWhitelist = /[\\x01-\\t\\x0B\\f\\x0E-\\x1F\\x7F\\x81\\x8D\\x8F\\x90\\x9D\\xA0-\\uFFFF]/g;\n\n\tvar regexEncodeNonAscii = /<\\u20D2|=\\u20E5|>\\u20D2|\\u205F\\u200A|\\u219D\\u0338|\\u2202\\u0338|\\u2220\\u20D2|\\u2229\\uFE00|\\u222A\\uFE00|\\u223C\\u20D2|\\u223D\\u0331|\\u223E\\u0333|\\u2242\\u0338|\\u224B\\u0338|\\u224D\\u20D2|\\u224E\\u0338|\\u224F\\u0338|\\u2250\\u0338|\\u2261\\u20E5|\\u2264\\u20D2|\\u2265\\u20D2|\\u2266\\u0338|\\u2267\\u0338|\\u2268\\uFE00|\\u2269\\uFE00|\\u226A\\u0338|\\u226A\\u20D2|\\u226B\\u0338|\\u226B\\u20D2|\\u227F\\u0338|\\u2282\\u20D2|\\u2283\\u20D2|\\u228A\\uFE00|\\u228B\\uFE00|\\u228F\\u0338|\\u2290\\u0338|\\u2293\\uFE00|\\u2294\\uFE00|\\u22B4\\u20D2|\\u22B5\\u20D2|\\u22D8\\u0338|\\u22D9\\u0338|\\u22DA\\uFE00|\\u22DB\\uFE00|\\u22F5\\u0338|\\u22F9\\u0338|\\u2933\\u0338|\\u29CF\\u0338|\\u29D0\\u0338|\\u2A6D\\u0338|\\u2A70\\u0338|\\u2A7D\\u0338|\\u2A7E\\u0338|\\u2AA1\\u0338|\\u2AA2\\u0338|\\u2AAC\\uFE00|\\u2AAD\\uFE00|\\u2AAF\\u0338|\\u2AB0\\u0338|\\u2AC5\\u0338|\\u2AC6\\u0338|\\u2ACB\\uFE00|\\u2ACC\\uFE00|\\u2AFD\\u20E5|[\\xA0-\\u0113\\u0116-\\u0122\\u0124-\\u012B\\u012E-\\u014D\\u0150-\\u017E\\u0192\\u01B5\\u01F5\\u0237\\u02C6\\u02C7\\u02D8-\\u02DD\\u0311\\u0391-\\u03A1\\u03A3-\\u03A9\\u03B1-\\u03C9\\u03D1\\u03D2\\u03D5\\u03D6\\u03DC\\u03DD\\u03F0\\u03F1\\u03F5\\u03F6\\u0401-\\u040C\\u040E-\\u044F\\u0451-\\u045C\\u045E\\u045F\\u2002-\\u2005\\u2007-\\u2010\\u2013-\\u2016\\u2018-\\u201A\\u201C-\\u201E\\u2020-\\u2022\\u2025\\u2026\\u2030-\\u2035\\u2039\\u203A\\u203E\\u2041\\u2043\\u2044\\u204F\\u2057\\u205F-\\u2063\\u20AC\\u20DB\\u20DC\\u2102\\u2105\\u210A-\\u2113\\u2115-\\u211E\\u2122\\u2124\\u2127-\\u2129\\u212C\\u212D\\u212F-\\u2131\\u2133-\\u2138\\u2145-\\u2148\\u2153-\\u215E\\u2190-\\u219B\\u219D-\\u21A7\\u21A9-\\u21AE\\u21B0-\\u21B3\\u21B5-\\u21B7\\u21BA-\\u21DB\\u21DD\\u21E4\\u21E5\\u21F5\\u21FD-\\u2205\\u2207-\\u2209\\u220B\\u220C\\u220F-\\u2214\\u2216-\\u2218\\u221A\\u221D-\\u2238\\u223A-\\u2257\\u2259\\u225A\\u225C\\u225F-\\u2262\\u2264-\\u228B\\u228D-\\u229B\\u229D-\\u22A5\\u22A7-\\u22B0\\u22B2-\\u22BB\\u22BD-\\u22DB\\u22DE-\\u22E3\\u22E6-\\u22F7\\u22F9-\\u22FE\\u2305\\u2306\\u2308-\\u2310\\u2312\\u2313\\u2315\\u2316\\u231C-\\u231F\\u2322\\u2323\\u232D\\u232E\\u2336\\u233D\\u233F\\u237C\\u23B0\\u23B1\\u23B4-\\u23B6\\u23DC-\\u23DF\\u23E2\\u23E7\\u2423\\u24C8\\u2500\\u2502\\u250C\\u2510\\u2514\\u2518\\u251C\\u2524\\u252C\\u2534\\u253C\\u2550-\\u256C\\u2580\\u2584\\u2588\\u2591-\\u2593\\u25A1\\u25AA\\u25AB\\u25AD\\u25AE\\u25B1\\u25B3-\\u25B5\\u25B8\\u25B9\\u25BD-\\u25BF\\u25C2\\u25C3\\u25CA\\u25CB\\u25EC\\u25EF\\u25F8-\\u25FC\\u2605\\u2606\\u260E\\u2640\\u2642\\u2660\\u2663\\u2665\\u2666\\u266A\\u266D-\\u266F\\u2713\\u2717\\u2720\\u2736\\u2758\\u2772\\u2773\\u27C8\\u27C9\\u27E6-\\u27ED\\u27F5-\\u27FA\\u27FC\\u27FF\\u2902-\\u2905\\u290C-\\u2913\\u2916\\u2919-\\u2920\\u2923-\\u292A\\u2933\\u2935-\\u2939\\u293C\\u293D\\u2945\\u2948-\\u294B\\u294E-\\u2976\\u2978\\u2979\\u297B-\\u297F\\u2985\\u2986\\u298B-\\u2996\\u299A\\u299C\\u299D\\u29A4-\\u29B7\\u29B9\\u29BB\\u29BC\\u29BE-\\u29C5\\u29C9\\u29CD-\\u29D0\\u29DC-\\u29DE\\u29E3-\\u29E5\\u29EB\\u29F4\\u29F6\\u2A00-\\u2A02\\u2A04\\u2A06\\u2A0C\\u2A0D\\u2A10-\\u2A17\\u2A22-\\u2A27\\u2A29\\u2A2A\\u2A2D-\\u2A31\\u2A33-\\u2A3C\\u2A3F\\u2A40\\u2A42-\\u2A4D\\u2A50\\u2A53-\\u2A58\\u2A5A-\\u2A5D\\u2A5F\\u2A66\\u2A6A\\u2A6D-\\u2A75\\u2A77-\\u2A9A\\u2A9D-\\u2AA2\\u2AA4-\\u2AB0\\u2AB3-\\u2AC8\\u2ACB\\u2ACC\\u2ACF-\\u2ADB\\u2AE4\\u2AE6-\\u2AE9\\u2AEB-\\u2AF3\\u2AFD\\uFB00-\\uFB04]|\\uD835[\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDCCF\\uDD04\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDD6B]/g;\n\tvar encodeMap = {'\\xAD':'shy','\\u200C':'zwnj','\\u200D':'zwj','\\u200E':'lrm','\\u2063':'ic','\\u2062':'it','\\u2061':'af','\\u200F':'rlm','\\u200B':'ZeroWidthSpace','\\u2060':'NoBreak','\\u0311':'DownBreve','\\u20DB':'tdot','\\u20DC':'DotDot','\\t':'Tab','\\n':'NewLine','\\u2008':'puncsp','\\u205F':'MediumSpace','\\u2009':'thinsp','\\u200A':'hairsp','\\u2004':'emsp13','\\u2002':'ensp','\\u2005':'emsp14','\\u2003':'emsp','\\u2007':'numsp','\\xA0':'nbsp','\\u205F\\u200A':'ThickSpace','\\u203E':'oline','_':'lowbar','\\u2010':'dash','\\u2013':'ndash','\\u2014':'mdash','\\u2015':'horbar',',':'comma',';':'semi','\\u204F':'bsemi',':':'colon','\\u2A74':'Colone','!':'excl','\\xA1':'iexcl','?':'quest','\\xBF':'iquest','.':'period','\\u2025':'nldr','\\u2026':'mldr','\\xB7':'middot','\\'':'apos','\\u2018':'lsquo','\\u2019':'rsquo','\\u201A':'sbquo','\\u2039':'lsaquo','\\u203A':'rsaquo','\"':'quot','\\u201C':'ldquo','\\u201D':'rdquo','\\u201E':'bdquo','\\xAB':'laquo','\\xBB':'raquo','(':'lpar',')':'rpar','[':'lsqb',']':'rsqb','{':'lcub','}':'rcub','\\u2308':'lceil','\\u2309':'rceil','\\u230A':'lfloor','\\u230B':'rfloor','\\u2985':'lopar','\\u2986':'ropar','\\u298B':'lbrke','\\u298C':'rbrke','\\u298D':'lbrkslu','\\u298E':'rbrksld','\\u298F':'lbrksld','\\u2990':'rbrkslu','\\u2991':'langd','\\u2992':'rangd','\\u2993':'lparlt','\\u2994':'rpargt','\\u2995':'gtlPar','\\u2996':'ltrPar','\\u27E6':'lobrk','\\u27E7':'robrk','\\u27E8':'lang','\\u27E9':'rang','\\u27EA':'Lang','\\u27EB':'Rang','\\u27EC':'loang','\\u27ED':'roang','\\u2772':'lbbrk','\\u2773':'rbbrk','\\u2016':'Vert','\\xA7':'sect','\\xB6':'para','@':'commat','*':'ast','/':'sol','undefined':null,'&':'amp','#':'num','%':'percnt','\\u2030':'permil','\\u2031':'pertenk','\\u2020':'dagger','\\u2021':'Dagger','\\u2022':'bull','\\u2043':'hybull','\\u2032':'prime','\\u2033':'Prime','\\u2034':'tprime','\\u2057':'qprime','\\u2035':'bprime','\\u2041':'caret','`':'grave','\\xB4':'acute','\\u02DC':'tilde','^':'Hat','\\xAF':'macr','\\u02D8':'breve','\\u02D9':'dot','\\xA8':'die','\\u02DA':'ring','\\u02DD':'dblac','\\xB8':'cedil','\\u02DB':'ogon','\\u02C6':'circ','\\u02C7':'caron','\\xB0':'deg','\\xA9':'copy','\\xAE':'reg','\\u2117':'copysr','\\u2118':'wp','\\u211E':'rx','\\u2127':'mho','\\u2129':'iiota','\\u2190':'larr','\\u219A':'nlarr','\\u2192':'rarr','\\u219B':'nrarr','\\u2191':'uarr','\\u2193':'darr','\\u2194':'harr','\\u21AE':'nharr','\\u2195':'varr','\\u2196':'nwarr','\\u2197':'nearr','\\u2198':'searr','\\u2199':'swarr','\\u219D':'rarrw','\\u219D\\u0338':'nrarrw','\\u219E':'Larr','\\u219F':'Uarr','\\u21A0':'Rarr','\\u21A1':'Darr','\\u21A2':'larrtl','\\u21A3':'rarrtl','\\u21A4':'mapstoleft','\\u21A5':'mapstoup','\\u21A6':'map','\\u21A7':'mapstodown','\\u21A9':'larrhk','\\u21AA':'rarrhk','\\u21AB':'larrlp','\\u21AC':'rarrlp','\\u21AD':'harrw','\\u21B0':'lsh','\\u21B1':'rsh','\\u21B2':'ldsh','\\u21B3':'rdsh','\\u21B5':'crarr','\\u21B6':'cularr','\\u21B7':'curarr','\\u21BA':'olarr','\\u21BB':'orarr','\\u21BC':'lharu','\\u21BD':'lhard','\\u21BE':'uharr','\\u21BF':'uharl','\\u21C0':'rharu','\\u21C1':'rhard','\\u21C2':'dharr','\\u21C3':'dharl','\\u21C4':'rlarr','\\u21C5':'udarr','\\u21C6':'lrarr','\\u21C7':'llarr','\\u21C8':'uuarr','\\u21C9':'rrarr','\\u21CA':'ddarr','\\u21CB':'lrhar','\\u21CC':'rlhar','\\u21D0':'lArr','\\u21CD':'nlArr','\\u21D1':'uArr','\\u21D2':'rArr','\\u21CF':'nrArr','\\u21D3':'dArr','\\u21D4':'iff','\\u21CE':'nhArr','\\u21D5':'vArr','\\u21D6':'nwArr','\\u21D7':'neArr','\\u21D8':'seArr','\\u21D9':'swArr','\\u21DA':'lAarr','\\u21DB':'rAarr','\\u21DD':'zigrarr','\\u21E4':'larrb','\\u21E5':'rarrb','\\u21F5':'duarr','\\u21FD':'loarr','\\u21FE':'roarr','\\u21FF':'hoarr','\\u2200':'forall','\\u2201':'comp','\\u2202':'part','\\u2202\\u0338':'npart','\\u2203':'exist','\\u2204':'nexist','\\u2205':'empty','\\u2207':'Del','\\u2208':'in','\\u2209':'notin','\\u220B':'ni','\\u220C':'notni','\\u03F6':'bepsi','\\u220F':'prod','\\u2210':'coprod','\\u2211':'sum','+':'plus','\\xB1':'pm','\\xF7':'div','\\xD7':'times','<':'lt','\\u226E':'nlt','<\\u20D2':'nvlt','=':'equals','\\u2260':'ne','=\\u20E5':'bne','\\u2A75':'Equal','>':'gt','\\u226F':'ngt','>\\u20D2':'nvgt','\\xAC':'not','|':'vert','\\xA6':'brvbar','\\u2212':'minus','\\u2213':'mp','\\u2214':'plusdo','\\u2044':'frasl','\\u2216':'setmn','\\u2217':'lowast','\\u2218':'compfn','\\u221A':'Sqrt','\\u221D':'prop','\\u221E':'infin','\\u221F':'angrt','\\u2220':'ang','\\u2220\\u20D2':'nang','\\u2221':'angmsd','\\u2222':'angsph','\\u2223':'mid','\\u2224':'nmid','\\u2225':'par','\\u2226':'npar','\\u2227':'and','\\u2228':'or','\\u2229':'cap','\\u2229\\uFE00':'caps','\\u222A':'cup','\\u222A\\uFE00':'cups','\\u222B':'int','\\u222C':'Int','\\u222D':'tint','\\u2A0C':'qint','\\u222E':'oint','\\u222F':'Conint','\\u2230':'Cconint','\\u2231':'cwint','\\u2232':'cwconint','\\u2233':'awconint','\\u2234':'there4','\\u2235':'becaus','\\u2236':'ratio','\\u2237':'Colon','\\u2238':'minusd','\\u223A':'mDDot','\\u223B':'homtht','\\u223C':'sim','\\u2241':'nsim','\\u223C\\u20D2':'nvsim','\\u223D':'bsim','\\u223D\\u0331':'race','\\u223E':'ac','\\u223E\\u0333':'acE','\\u223F':'acd','\\u2240':'wr','\\u2242':'esim','\\u2242\\u0338':'nesim','\\u2243':'sime','\\u2244':'nsime','\\u2245':'cong','\\u2247':'ncong','\\u2246':'simne','\\u2248':'ap','\\u2249':'nap','\\u224A':'ape','\\u224B':'apid','\\u224B\\u0338':'napid','\\u224C':'bcong','\\u224D':'CupCap','\\u226D':'NotCupCap','\\u224D\\u20D2':'nvap','\\u224E':'bump','\\u224E\\u0338':'nbump','\\u224F':'bumpe','\\u224F\\u0338':'nbumpe','\\u2250':'doteq','\\u2250\\u0338':'nedot','\\u2251':'eDot','\\u2252':'efDot','\\u2253':'erDot','\\u2254':'colone','\\u2255':'ecolon','\\u2256':'ecir','\\u2257':'cire','\\u2259':'wedgeq','\\u225A':'veeeq','\\u225C':'trie','\\u225F':'equest','\\u2261':'equiv','\\u2262':'nequiv','\\u2261\\u20E5':'bnequiv','\\u2264':'le','\\u2270':'nle','\\u2264\\u20D2':'nvle','\\u2265':'ge','\\u2271':'nge','\\u2265\\u20D2':'nvge','\\u2266':'lE','\\u2266\\u0338':'nlE','\\u2267':'gE','\\u2267\\u0338':'ngE','\\u2268\\uFE00':'lvnE','\\u2268':'lnE','\\u2269':'gnE','\\u2269\\uFE00':'gvnE','\\u226A':'ll','\\u226A\\u0338':'nLtv','\\u226A\\u20D2':'nLt','\\u226B':'gg','\\u226B\\u0338':'nGtv','\\u226B\\u20D2':'nGt','\\u226C':'twixt','\\u2272':'lsim','\\u2274':'nlsim','\\u2273':'gsim','\\u2275':'ngsim','\\u2276':'lg','\\u2278':'ntlg','\\u2277':'gl','\\u2279':'ntgl','\\u227A':'pr','\\u2280':'npr','\\u227B':'sc','\\u2281':'nsc','\\u227C':'prcue','\\u22E0':'nprcue','\\u227D':'sccue','\\u22E1':'nsccue','\\u227E':'prsim','\\u227F':'scsim','\\u227F\\u0338':'NotSucceedsTilde','\\u2282':'sub','\\u2284':'nsub','\\u2282\\u20D2':'vnsub','\\u2283':'sup','\\u2285':'nsup','\\u2283\\u20D2':'vnsup','\\u2286':'sube','\\u2288':'nsube','\\u2287':'supe','\\u2289':'nsupe','\\u228A\\uFE00':'vsubne','\\u228A':'subne','\\u228B\\uFE00':'vsupne','\\u228B':'supne','\\u228D':'cupdot','\\u228E':'uplus','\\u228F':'sqsub','\\u228F\\u0338':'NotSquareSubset','\\u2290':'sqsup','\\u2290\\u0338':'NotSquareSuperset','\\u2291':'sqsube','\\u22E2':'nsqsube','\\u2292':'sqsupe','\\u22E3':'nsqsupe','\\u2293':'sqcap','\\u2293\\uFE00':'sqcaps','\\u2294':'sqcup','\\u2294\\uFE00':'sqcups','\\u2295':'oplus','\\u2296':'ominus','\\u2297':'otimes','\\u2298':'osol','\\u2299':'odot','\\u229A':'ocir','\\u229B':'oast','\\u229D':'odash','\\u229E':'plusb','\\u229F':'minusb','\\u22A0':'timesb','\\u22A1':'sdotb','\\u22A2':'vdash','\\u22AC':'nvdash','\\u22A3':'dashv','\\u22A4':'top','\\u22A5':'bot','\\u22A7':'models','\\u22A8':'vDash','\\u22AD':'nvDash','\\u22A9':'Vdash','\\u22AE':'nVdash','\\u22AA':'Vvdash','\\u22AB':'VDash','\\u22AF':'nVDash','\\u22B0':'prurel','\\u22B2':'vltri','\\u22EA':'nltri','\\u22B3':'vrtri','\\u22EB':'nrtri','\\u22B4':'ltrie','\\u22EC':'nltrie','\\u22B4\\u20D2':'nvltrie','\\u22B5':'rtrie','\\u22ED':'nrtrie','\\u22B5\\u20D2':'nvrtrie','\\u22B6':'origof','\\u22B7':'imof','\\u22B8':'mumap','\\u22B9':'hercon','\\u22BA':'intcal','\\u22BB':'veebar','\\u22BD':'barvee','\\u22BE':'angrtvb','\\u22BF':'lrtri','\\u22C0':'Wedge','\\u22C1':'Vee','\\u22C2':'xcap','\\u22C3':'xcup','\\u22C4':'diam','\\u22C5':'sdot','\\u22C6':'Star','\\u22C7':'divonx','\\u22C8':'bowtie','\\u22C9':'ltimes','\\u22CA':'rtimes','\\u22CB':'lthree','\\u22CC':'rthree','\\u22CD':'bsime','\\u22CE':'cuvee','\\u22CF':'cuwed','\\u22D0':'Sub','\\u22D1':'Sup','\\u22D2':'Cap','\\u22D3':'Cup','\\u22D4':'fork','\\u22D5':'epar','\\u22D6':'ltdot','\\u22D7':'gtdot','\\u22D8':'Ll','\\u22D8\\u0338':'nLl','\\u22D9':'Gg','\\u22D9\\u0338':'nGg','\\u22DA\\uFE00':'lesg','\\u22DA':'leg','\\u22DB':'gel','\\u22DB\\uFE00':'gesl','\\u22DE':'cuepr','\\u22DF':'cuesc','\\u22E6':'lnsim','\\u22E7':'gnsim','\\u22E8':'prnsim','\\u22E9':'scnsim','\\u22EE':'vellip','\\u22EF':'ctdot','\\u22F0':'utdot','\\u22F1':'dtdot','\\u22F2':'disin','\\u22F3':'isinsv','\\u22F4':'isins','\\u22F5':'isindot','\\u22F5\\u0338':'notindot','\\u22F6':'notinvc','\\u22F7':'notinvb','\\u22F9':'isinE','\\u22F9\\u0338':'notinE','\\u22FA':'nisd','\\u22FB':'xnis','\\u22FC':'nis','\\u22FD':'notnivc','\\u22FE':'notnivb','\\u2305':'barwed','\\u2306':'Barwed','\\u230C':'drcrop','\\u230D':'dlcrop','\\u230E':'urcrop','\\u230F':'ulcrop','\\u2310':'bnot','\\u2312':'profline','\\u2313':'profsurf','\\u2315':'telrec','\\u2316':'target','\\u231C':'ulcorn','\\u231D':'urcorn','\\u231E':'dlcorn','\\u231F':'drcorn','\\u2322':'frown','\\u2323':'smile','\\u232D':'cylcty','\\u232E':'profalar','\\u2336':'topbot','\\u233D':'ovbar','\\u233F':'solbar','\\u237C':'angzarr','\\u23B0':'lmoust','\\u23B1':'rmoust','\\u23B4':'tbrk','\\u23B5':'bbrk','\\u23B6':'bbrktbrk','\\u23DC':'OverParenthesis','\\u23DD':'UnderParenthesis','\\u23DE':'OverBrace','\\u23DF':'UnderBrace','\\u23E2':'trpezium','\\u23E7':'elinters','\\u2423':'blank','\\u2500':'boxh','\\u2502':'boxv','\\u250C':'boxdr','\\u2510':'boxdl','\\u2514':'boxur','\\u2518':'boxul','\\u251C':'boxvr','\\u2524':'boxvl','\\u252C':'boxhd','\\u2534':'boxhu','\\u253C':'boxvh','\\u2550':'boxH','\\u2551':'boxV','\\u2552':'boxdR','\\u2553':'boxDr','\\u2554':'boxDR','\\u2555':'boxdL','\\u2556':'boxDl','\\u2557':'boxDL','\\u2558':'boxuR','\\u2559':'boxUr','\\u255A':'boxUR','\\u255B':'boxuL','\\u255C':'boxUl','\\u255D':'boxUL','\\u255E':'boxvR','\\u255F':'boxVr','\\u2560':'boxVR','\\u2561':'boxvL','\\u2562':'boxVl','\\u2563':'boxVL','\\u2564':'boxHd','\\u2565':'boxhD','\\u2566':'boxHD','\\u2567':'boxHu','\\u2568':'boxhU','\\u2569':'boxHU','\\u256A':'boxvH','\\u256B':'boxVh','\\u256C':'boxVH','\\u2580':'uhblk','\\u2584':'lhblk','\\u2588':'block','\\u2591':'blk14','\\u2592':'blk12','\\u2593':'blk34','\\u25A1':'squ','\\u25AA':'squf','\\u25AB':'EmptyVerySmallSquare','\\u25AD':'rect','\\u25AE':'marker','\\u25B1':'fltns','\\u25B3':'xutri','\\u25B4':'utrif','\\u25B5':'utri','\\u25B8':'rtrif','\\u25B9':'rtri','\\u25BD':'xdtri','\\u25BE':'dtrif','\\u25BF':'dtri','\\u25C2':'ltrif','\\u25C3':'ltri','\\u25CA':'loz','\\u25CB':'cir','\\u25EC':'tridot','\\u25EF':'xcirc','\\u25F8':'ultri','\\u25F9':'urtri','\\u25FA':'lltri','\\u25FB':'EmptySmallSquare','\\u25FC':'FilledSmallSquare','\\u2605':'starf','\\u2606':'star','\\u260E':'phone','\\u2640':'female','\\u2642':'male','\\u2660':'spades','\\u2663':'clubs','\\u2665':'hearts','\\u2666':'diams','\\u266A':'sung','\\u2713':'check','\\u2717':'cross','\\u2720':'malt','\\u2736':'sext','\\u2758':'VerticalSeparator','\\u27C8':'bsolhsub','\\u27C9':'suphsol','\\u27F5':'xlarr','\\u27F6':'xrarr','\\u27F7':'xharr','\\u27F8':'xlArr','\\u27F9':'xrArr','\\u27FA':'xhArr','\\u27FC':'xmap','\\u27FF':'dzigrarr','\\u2902':'nvlArr','\\u2903':'nvrArr','\\u2904':'nvHarr','\\u2905':'Map','\\u290C':'lbarr','\\u290D':'rbarr','\\u290E':'lBarr','\\u290F':'rBarr','\\u2910':'RBarr','\\u2911':'DDotrahd','\\u2912':'UpArrowBar','\\u2913':'DownArrowBar','\\u2916':'Rarrtl','\\u2919':'latail','\\u291A':'ratail','\\u291B':'lAtail','\\u291C':'rAtail','\\u291D':'larrfs','\\u291E':'rarrfs','\\u291F':'larrbfs','\\u2920':'rarrbfs','\\u2923':'nwarhk','\\u2924':'nearhk','\\u2925':'searhk','\\u2926':'swarhk','\\u2927':'nwnear','\\u2928':'toea','\\u2929':'tosa','\\u292A':'swnwar','\\u2933':'rarrc','\\u2933\\u0338':'nrarrc','\\u2935':'cudarrr','\\u2936':'ldca','\\u2937':'rdca','\\u2938':'cudarrl','\\u2939':'larrpl','\\u293C':'curarrm','\\u293D':'cularrp','\\u2945':'rarrpl','\\u2948':'harrcir','\\u2949':'Uarrocir','\\u294A':'lurdshar','\\u294B':'ldrushar','\\u294E':'LeftRightVector','\\u294F':'RightUpDownVector','\\u2950':'DownLeftRightVector','\\u2951':'LeftUpDownVector','\\u2952':'LeftVectorBar','\\u2953':'RightVectorBar','\\u2954':'RightUpVectorBar','\\u2955':'RightDownVectorBar','\\u2956':'DownLeftVectorBar','\\u2957':'DownRightVectorBar','\\u2958':'LeftUpVectorBar','\\u2959':'LeftDownVectorBar','\\u295A':'LeftTeeVector','\\u295B':'RightTeeVector','\\u295C':'RightUpTeeVector','\\u295D':'RightDownTeeVector','\\u295E':'DownLeftTeeVector','\\u295F':'DownRightTeeVector','\\u2960':'LeftUpTeeVector','\\u2961':'LeftDownTeeVector','\\u2962':'lHar','\\u2963':'uHar','\\u2964':'rHar','\\u2965':'dHar','\\u2966':'luruhar','\\u2967':'ldrdhar','\\u2968':'ruluhar','\\u2969':'rdldhar','\\u296A':'lharul','\\u296B':'llhard','\\u296C':'rharul','\\u296D':'lrhard','\\u296E':'udhar','\\u296F':'duhar','\\u2970':'RoundImplies','\\u2971':'erarr','\\u2972':'simrarr','\\u2973':'larrsim','\\u2974':'rarrsim','\\u2975':'rarrap','\\u2976':'ltlarr','\\u2978':'gtrarr','\\u2979':'subrarr','\\u297B':'suplarr','\\u297C':'lfisht','\\u297D':'rfisht','\\u297E':'ufisht','\\u297F':'dfisht','\\u299A':'vzigzag','\\u299C':'vangrt','\\u299D':'angrtvbd','\\u29A4':'ange','\\u29A5':'range','\\u29A6':'dwangle','\\u29A7':'uwangle','\\u29A8':'angmsdaa','\\u29A9':'angmsdab','\\u29AA':'angmsdac','\\u29AB':'angmsdad','\\u29AC':'angmsdae','\\u29AD':'angmsdaf','\\u29AE':'angmsdag','\\u29AF':'angmsdah','\\u29B0':'bemptyv','\\u29B1':'demptyv','\\u29B2':'cemptyv','\\u29B3':'raemptyv','\\u29B4':'laemptyv','\\u29B5':'ohbar','\\u29B6':'omid','\\u29B7':'opar','\\u29B9':'operp','\\u29BB':'olcross','\\u29BC':'odsold','\\u29BE':'olcir','\\u29BF':'ofcir','\\u29C0':'olt','\\u29C1':'ogt','\\u29C2':'cirscir','\\u29C3':'cirE','\\u29C4':'solb','\\u29C5':'bsolb','\\u29C9':'boxbox','\\u29CD':'trisb','\\u29CE':'rtriltri','\\u29CF':'LeftTriangleBar','\\u29CF\\u0338':'NotLeftTriangleBar','\\u29D0':'RightTriangleBar','\\u29D0\\u0338':'NotRightTriangleBar','\\u29DC':'iinfin','\\u29DD':'infintie','\\u29DE':'nvinfin','\\u29E3':'eparsl','\\u29E4':'smeparsl','\\u29E5':'eqvparsl','\\u29EB':'lozf','\\u29F4':'RuleDelayed','\\u29F6':'dsol','\\u2A00':'xodot','\\u2A01':'xoplus','\\u2A02':'xotime','\\u2A04':'xuplus','\\u2A06':'xsqcup','\\u2A0D':'fpartint','\\u2A10':'cirfnint','\\u2A11':'awint','\\u2A12':'rppolint','\\u2A13':'scpolint','\\u2A14':'npolint','\\u2A15':'pointint','\\u2A16':'quatint','\\u2A17':'intlarhk','\\u2A22':'pluscir','\\u2A23':'plusacir','\\u2A24':'simplus','\\u2A25':'plusdu','\\u2A26':'plussim','\\u2A27':'plustwo','\\u2A29':'mcomma','\\u2A2A':'minusdu','\\u2A2D':'loplus','\\u2A2E':'roplus','\\u2A2F':'Cross','\\u2A30':'timesd','\\u2A31':'timesbar','\\u2A33':'smashp','\\u2A34':'lotimes','\\u2A35':'rotimes','\\u2A36':'otimesas','\\u2A37':'Otimes','\\u2A38':'odiv','\\u2A39':'triplus','\\u2A3A':'triminus','\\u2A3B':'tritime','\\u2A3C':'iprod','\\u2A3F':'amalg','\\u2A40':'capdot','\\u2A42':'ncup','\\u2A43':'ncap','\\u2A44':'capand','\\u2A45':'cupor','\\u2A46':'cupcap','\\u2A47':'capcup','\\u2A48':'cupbrcap','\\u2A49':'capbrcup','\\u2A4A':'cupcup','\\u2A4B':'capcap','\\u2A4C':'ccups','\\u2A4D':'ccaps','\\u2A50':'ccupssm','\\u2A53':'And','\\u2A54':'Or','\\u2A55':'andand','\\u2A56':'oror','\\u2A57':'orslope','\\u2A58':'andslope','\\u2A5A':'andv','\\u2A5B':'orv','\\u2A5C':'andd','\\u2A5D':'ord','\\u2A5F':'wedbar','\\u2A66':'sdote','\\u2A6A':'simdot','\\u2A6D':'congdot','\\u2A6D\\u0338':'ncongdot','\\u2A6E':'easter','\\u2A6F':'apacir','\\u2A70':'apE','\\u2A70\\u0338':'napE','\\u2A71':'eplus','\\u2A72':'pluse','\\u2A73':'Esim','\\u2A77':'eDDot','\\u2A78':'equivDD','\\u2A79':'ltcir','\\u2A7A':'gtcir','\\u2A7B':'ltquest','\\u2A7C':'gtquest','\\u2A7D':'les','\\u2A7D\\u0338':'nles','\\u2A7E':'ges','\\u2A7E\\u0338':'nges','\\u2A7F':'lesdot','\\u2A80':'gesdot','\\u2A81':'lesdoto','\\u2A82':'gesdoto','\\u2A83':'lesdotor','\\u2A84':'gesdotol','\\u2A85':'lap','\\u2A86':'gap','\\u2A87':'lne','\\u2A88':'gne','\\u2A89':'lnap','\\u2A8A':'gnap','\\u2A8B':'lEg','\\u2A8C':'gEl','\\u2A8D':'lsime','\\u2A8E':'gsime','\\u2A8F':'lsimg','\\u2A90':'gsiml','\\u2A91':'lgE','\\u2A92':'glE','\\u2A93':'lesges','\\u2A94':'gesles','\\u2A95':'els','\\u2A96':'egs','\\u2A97':'elsdot','\\u2A98':'egsdot','\\u2A99':'el','\\u2A9A':'eg','\\u2A9D':'siml','\\u2A9E':'simg','\\u2A9F':'simlE','\\u2AA0':'simgE','\\u2AA1':'LessLess','\\u2AA1\\u0338':'NotNestedLessLess','\\u2AA2':'GreaterGreater','\\u2AA2\\u0338':'NotNestedGreaterGreater','\\u2AA4':'glj','\\u2AA5':'gla','\\u2AA6':'ltcc','\\u2AA7':'gtcc','\\u2AA8':'lescc','\\u2AA9':'gescc','\\u2AAA':'smt','\\u2AAB':'lat','\\u2AAC':'smte','\\u2AAC\\uFE00':'smtes','\\u2AAD':'late','\\u2AAD\\uFE00':'lates','\\u2AAE':'bumpE','\\u2AAF':'pre','\\u2AAF\\u0338':'npre','\\u2AB0':'sce','\\u2AB0\\u0338':'nsce','\\u2AB3':'prE','\\u2AB4':'scE','\\u2AB5':'prnE','\\u2AB6':'scnE','\\u2AB7':'prap','\\u2AB8':'scap','\\u2AB9':'prnap','\\u2ABA':'scnap','\\u2ABB':'Pr','\\u2ABC':'Sc','\\u2ABD':'subdot','\\u2ABE':'supdot','\\u2ABF':'subplus','\\u2AC0':'supplus','\\u2AC1':'submult','\\u2AC2':'supmult','\\u2AC3':'subedot','\\u2AC4':'supedot','\\u2AC5':'subE','\\u2AC5\\u0338':'nsubE','\\u2AC6':'supE','\\u2AC6\\u0338':'nsupE','\\u2AC7':'subsim','\\u2AC8':'supsim','\\u2ACB\\uFE00':'vsubnE','\\u2ACB':'subnE','\\u2ACC\\uFE00':'vsupnE','\\u2ACC':'supnE','\\u2ACF':'csub','\\u2AD0':'csup','\\u2AD1':'csube','\\u2AD2':'csupe','\\u2AD3':'subsup','\\u2AD4':'supsub','\\u2AD5':'subsub','\\u2AD6':'supsup','\\u2AD7':'suphsub','\\u2AD8':'supdsub','\\u2AD9':'forkv','\\u2ADA':'topfork','\\u2ADB':'mlcp','\\u2AE4':'Dashv','\\u2AE6':'Vdashl','\\u2AE7':'Barv','\\u2AE8':'vBar','\\u2AE9':'vBarv','\\u2AEB':'Vbar','\\u2AEC':'Not','\\u2AED':'bNot','\\u2AEE':'rnmid','\\u2AEF':'cirmid','\\u2AF0':'midcir','\\u2AF1':'topcir','\\u2AF2':'nhpar','\\u2AF3':'parsim','\\u2AFD':'parsl','\\u2AFD\\u20E5':'nparsl','\\u266D':'flat','\\u266E':'natur','\\u266F':'sharp','\\xA4':'curren','\\xA2':'cent','$':'dollar','\\xA3':'pound','\\xA5':'yen','\\u20AC':'euro','\\xB9':'sup1','\\xBD':'half','\\u2153':'frac13','\\xBC':'frac14','\\u2155':'frac15','\\u2159':'frac16','\\u215B':'frac18','\\xB2':'sup2','\\u2154':'frac23','\\u2156':'frac25','\\xB3':'sup3','\\xBE':'frac34','\\u2157':'frac35','\\u215C':'frac38','\\u2158':'frac45','\\u215A':'frac56','\\u215D':'frac58','\\u215E':'frac78','\\uD835\\uDCB6':'ascr','\\uD835\\uDD52':'aopf','\\uD835\\uDD1E':'afr','\\uD835\\uDD38':'Aopf','\\uD835\\uDD04':'Afr','\\uD835\\uDC9C':'Ascr','\\xAA':'ordf','\\xE1':'aacute','\\xC1':'Aacute','\\xE0':'agrave','\\xC0':'Agrave','\\u0103':'abreve','\\u0102':'Abreve','\\xE2':'acirc','\\xC2':'Acirc','\\xE5':'aring','\\xC5':'angst','\\xE4':'auml','\\xC4':'Auml','\\xE3':'atilde','\\xC3':'Atilde','\\u0105':'aogon','\\u0104':'Aogon','\\u0101':'amacr','\\u0100':'Amacr','\\xE6':'aelig','\\xC6':'AElig','\\uD835\\uDCB7':'bscr','\\uD835\\uDD53':'bopf','\\uD835\\uDD1F':'bfr','\\uD835\\uDD39':'Bopf','\\u212C':'Bscr','\\uD835\\uDD05':'Bfr','\\uD835\\uDD20':'cfr','\\uD835\\uDCB8':'cscr','\\uD835\\uDD54':'copf','\\u212D':'Cfr','\\uD835\\uDC9E':'Cscr','\\u2102':'Copf','\\u0107':'cacute','\\u0106':'Cacute','\\u0109':'ccirc','\\u0108':'Ccirc','\\u010D':'ccaron','\\u010C':'Ccaron','\\u010B':'cdot','\\u010A':'Cdot','\\xE7':'ccedil','\\xC7':'Ccedil','\\u2105':'incare','\\uD835\\uDD21':'dfr','\\u2146':'dd','\\uD835\\uDD55':'dopf','\\uD835\\uDCB9':'dscr','\\uD835\\uDC9F':'Dscr','\\uD835\\uDD07':'Dfr','\\u2145':'DD','\\uD835\\uDD3B':'Dopf','\\u010F':'dcaron','\\u010E':'Dcaron','\\u0111':'dstrok','\\u0110':'Dstrok','\\xF0':'eth','\\xD0':'ETH','\\u2147':'ee','\\u212F':'escr','\\uD835\\uDD22':'efr','\\uD835\\uDD56':'eopf','\\u2130':'Escr','\\uD835\\uDD08':'Efr','\\uD835\\uDD3C':'Eopf','\\xE9':'eacute','\\xC9':'Eacute','\\xE8':'egrave','\\xC8':'Egrave','\\xEA':'ecirc','\\xCA':'Ecirc','\\u011B':'ecaron','\\u011A':'Ecaron','\\xEB':'euml','\\xCB':'Euml','\\u0117':'edot','\\u0116':'Edot','\\u0119':'eogon','\\u0118':'Eogon','\\u0113':'emacr','\\u0112':'Emacr','\\uD835\\uDD23':'ffr','\\uD835\\uDD57':'fopf','\\uD835\\uDCBB':'fscr','\\uD835\\uDD09':'Ffr','\\uD835\\uDD3D':'Fopf','\\u2131':'Fscr','\\uFB00':'fflig','\\uFB03':'ffilig','\\uFB04':'ffllig','\\uFB01':'filig','fj':'fjlig','\\uFB02':'fllig','\\u0192':'fnof','\\u210A':'gscr','\\uD835\\uDD58':'gopf','\\uD835\\uDD24':'gfr','\\uD835\\uDCA2':'Gscr','\\uD835\\uDD3E':'Gopf','\\uD835\\uDD0A':'Gfr','\\u01F5':'gacute','\\u011F':'gbreve','\\u011E':'Gbreve','\\u011D':'gcirc','\\u011C':'Gcirc','\\u0121':'gdot','\\u0120':'Gdot','\\u0122':'Gcedil','\\uD835\\uDD25':'hfr','\\u210E':'planckh','\\uD835\\uDCBD':'hscr','\\uD835\\uDD59':'hopf','\\u210B':'Hscr','\\u210C':'Hfr','\\u210D':'Hopf','\\u0125':'hcirc','\\u0124':'Hcirc','\\u210F':'hbar','\\u0127':'hstrok','\\u0126':'Hstrok','\\uD835\\uDD5A':'iopf','\\uD835\\uDD26':'ifr','\\uD835\\uDCBE':'iscr','\\u2148':'ii','\\uD835\\uDD40':'Iopf','\\u2110':'Iscr','\\u2111':'Im','\\xED':'iacute','\\xCD':'Iacute','\\xEC':'igrave','\\xCC':'Igrave','\\xEE':'icirc','\\xCE':'Icirc','\\xEF':'iuml','\\xCF':'Iuml','\\u0129':'itilde','\\u0128':'Itilde','\\u0130':'Idot','\\u012F':'iogon','\\u012E':'Iogon','\\u012B':'imacr','\\u012A':'Imacr','\\u0133':'ijlig','\\u0132':'IJlig','\\u0131':'imath','\\uD835\\uDCBF':'jscr','\\uD835\\uDD5B':'jopf','\\uD835\\uDD27':'jfr','\\uD835\\uDCA5':'Jscr','\\uD835\\uDD0D':'Jfr','\\uD835\\uDD41':'Jopf','\\u0135':'jcirc','\\u0134':'Jcirc','\\u0237':'jmath','\\uD835\\uDD5C':'kopf','\\uD835\\uDCC0':'kscr','\\uD835\\uDD28':'kfr','\\uD835\\uDCA6':'Kscr','\\uD835\\uDD42':'Kopf','\\uD835\\uDD0E':'Kfr','\\u0137':'kcedil','\\u0136':'Kcedil','\\uD835\\uDD29':'lfr','\\uD835\\uDCC1':'lscr','\\u2113':'ell','\\uD835\\uDD5D':'lopf','\\u2112':'Lscr','\\uD835\\uDD0F':'Lfr','\\uD835\\uDD43':'Lopf','\\u013A':'lacute','\\u0139':'Lacute','\\u013E':'lcaron','\\u013D':'Lcaron','\\u013C':'lcedil','\\u013B':'Lcedil','\\u0142':'lstrok','\\u0141':'Lstrok','\\u0140':'lmidot','\\u013F':'Lmidot','\\uD835\\uDD2A':'mfr','\\uD835\\uDD5E':'mopf','\\uD835\\uDCC2':'mscr','\\uD835\\uDD10':'Mfr','\\uD835\\uDD44':'Mopf','\\u2133':'Mscr','\\uD835\\uDD2B':'nfr','\\uD835\\uDD5F':'nopf','\\uD835\\uDCC3':'nscr','\\u2115':'Nopf','\\uD835\\uDCA9':'Nscr','\\uD835\\uDD11':'Nfr','\\u0144':'nacute','\\u0143':'Nacute','\\u0148':'ncaron','\\u0147':'Ncaron','\\xF1':'ntilde','\\xD1':'Ntilde','\\u0146':'ncedil','\\u0145':'Ncedil','\\u2116':'numero','\\u014B':'eng','\\u014A':'ENG','\\uD835\\uDD60':'oopf','\\uD835\\uDD2C':'ofr','\\u2134':'oscr','\\uD835\\uDCAA':'Oscr','\\uD835\\uDD12':'Ofr','\\uD835\\uDD46':'Oopf','\\xBA':'ordm','\\xF3':'oacute','\\xD3':'Oacute','\\xF2':'ograve','\\xD2':'Ograve','\\xF4':'ocirc','\\xD4':'Ocirc','\\xF6':'ouml','\\xD6':'Ouml','\\u0151':'odblac','\\u0150':'Odblac','\\xF5':'otilde','\\xD5':'Otilde','\\xF8':'oslash','\\xD8':'Oslash','\\u014D':'omacr','\\u014C':'Omacr','\\u0153':'oelig','\\u0152':'OElig','\\uD835\\uDD2D':'pfr','\\uD835\\uDCC5':'pscr','\\uD835\\uDD61':'popf','\\u2119':'Popf','\\uD835\\uDD13':'Pfr','\\uD835\\uDCAB':'Pscr','\\uD835\\uDD62':'qopf','\\uD835\\uDD2E':'qfr','\\uD835\\uDCC6':'qscr','\\uD835\\uDCAC':'Qscr','\\uD835\\uDD14':'Qfr','\\u211A':'Qopf','\\u0138':'kgreen','\\uD835\\uDD2F':'rfr','\\uD835\\uDD63':'ropf','\\uD835\\uDCC7':'rscr','\\u211B':'Rscr','\\u211C':'Re','\\u211D':'Ropf','\\u0155':'racute','\\u0154':'Racute','\\u0159':'rcaron','\\u0158':'Rcaron','\\u0157':'rcedil','\\u0156':'Rcedil','\\uD835\\uDD64':'sopf','\\uD835\\uDCC8':'sscr','\\uD835\\uDD30':'sfr','\\uD835\\uDD4A':'Sopf','\\uD835\\uDD16':'Sfr','\\uD835\\uDCAE':'Sscr','\\u24C8':'oS','\\u015B':'sacute','\\u015A':'Sacute','\\u015D':'scirc','\\u015C':'Scirc','\\u0161':'scaron','\\u0160':'Scaron','\\u015F':'scedil','\\u015E':'Scedil','\\xDF':'szlig','\\uD835\\uDD31':'tfr','\\uD835\\uDCC9':'tscr','\\uD835\\uDD65':'topf','\\uD835\\uDCAF':'Tscr','\\uD835\\uDD17':'Tfr','\\uD835\\uDD4B':'Topf','\\u0165':'tcaron','\\u0164':'Tcaron','\\u0163':'tcedil','\\u0162':'Tcedil','\\u2122':'trade','\\u0167':'tstrok','\\u0166':'Tstrok','\\uD835\\uDCCA':'uscr','\\uD835\\uDD66':'uopf','\\uD835\\uDD32':'ufr','\\uD835\\uDD4C':'Uopf','\\uD835\\uDD18':'Ufr','\\uD835\\uDCB0':'Uscr','\\xFA':'uacute','\\xDA':'Uacute','\\xF9':'ugrave','\\xD9':'Ugrave','\\u016D':'ubreve','\\u016C':'Ubreve','\\xFB':'ucirc','\\xDB':'Ucirc','\\u016F':'uring','\\u016E':'Uring','\\xFC':'uuml','\\xDC':'Uuml','\\u0171':'udblac','\\u0170':'Udblac','\\u0169':'utilde','\\u0168':'Utilde','\\u0173':'uogon','\\u0172':'Uogon','\\u016B':'umacr','\\u016A':'Umacr','\\uD835\\uDD33':'vfr','\\uD835\\uDD67':'vopf','\\uD835\\uDCCB':'vscr','\\uD835\\uDD19':'Vfr','\\uD835\\uDD4D':'Vopf','\\uD835\\uDCB1':'Vscr','\\uD835\\uDD68':'wopf','\\uD835\\uDCCC':'wscr','\\uD835\\uDD34':'wfr','\\uD835\\uDCB2':'Wscr','\\uD835\\uDD4E':'Wopf','\\uD835\\uDD1A':'Wfr','\\u0175':'wcirc','\\u0174':'Wcirc','\\uD835\\uDD35':'xfr','\\uD835\\uDCCD':'xscr','\\uD835\\uDD69':'xopf','\\uD835\\uDD4F':'Xopf','\\uD835\\uDD1B':'Xfr','\\uD835\\uDCB3':'Xscr','\\uD835\\uDD36':'yfr','\\uD835\\uDCCE':'yscr','\\uD835\\uDD6A':'yopf','\\uD835\\uDCB4':'Yscr','\\uD835\\uDD1C':'Yfr','\\uD835\\uDD50':'Yopf','\\xFD':'yacute','\\xDD':'Yacute','\\u0177':'ycirc','\\u0176':'Ycirc','\\xFF':'yuml','\\u0178':'Yuml','\\uD835\\uDCCF':'zscr','\\uD835\\uDD37':'zfr','\\uD835\\uDD6B':'zopf','\\u2128':'Zfr','\\u2124':'Zopf','\\uD835\\uDCB5':'Zscr','\\u017A':'zacute','\\u0179':'Zacute','\\u017E':'zcaron','\\u017D':'Zcaron','\\u017C':'zdot','\\u017B':'Zdot','\\u01B5':'imped','\\xFE':'thorn','\\xDE':'THORN','\\u0149':'napos','\\u03B1':'alpha','\\u0391':'Alpha','\\u03B2':'beta','\\u0392':'Beta','\\u03B3':'gamma','\\u0393':'Gamma','\\u03B4':'delta','\\u0394':'Delta','\\u03B5':'epsi','\\u03F5':'epsiv','\\u0395':'Epsilon','\\u03DD':'gammad','\\u03DC':'Gammad','\\u03B6':'zeta','\\u0396':'Zeta','\\u03B7':'eta','\\u0397':'Eta','\\u03B8':'theta','\\u03D1':'thetav','\\u0398':'Theta','\\u03B9':'iota','\\u0399':'Iota','\\u03BA':'kappa','\\u03F0':'kappav','\\u039A':'Kappa','\\u03BB':'lambda','\\u039B':'Lambda','\\u03BC':'mu','\\xB5':'micro','\\u039C':'Mu','\\u03BD':'nu','\\u039D':'Nu','\\u03BE':'xi','\\u039E':'Xi','\\u03BF':'omicron','\\u039F':'Omicron','\\u03C0':'pi','\\u03D6':'piv','\\u03A0':'Pi','\\u03C1':'rho','\\u03F1':'rhov','\\u03A1':'Rho','\\u03C3':'sigma','\\u03A3':'Sigma','\\u03C2':'sigmaf','\\u03C4':'tau','\\u03A4':'Tau','\\u03C5':'upsi','\\u03A5':'Upsilon','\\u03D2':'Upsi','\\u03C6':'phi','\\u03D5':'phiv','\\u03A6':'Phi','\\u03C7':'chi','\\u03A7':'Chi','\\u03C8':'psi','\\u03A8':'Psi','\\u03C9':'omega','\\u03A9':'ohm','\\u0430':'acy','\\u0410':'Acy','\\u0431':'bcy','\\u0411':'Bcy','\\u0432':'vcy','\\u0412':'Vcy','\\u0433':'gcy','\\u0413':'Gcy','\\u0453':'gjcy','\\u0403':'GJcy','\\u0434':'dcy','\\u0414':'Dcy','\\u0452':'djcy','\\u0402':'DJcy','\\u0435':'iecy','\\u0415':'IEcy','\\u0451':'iocy','\\u0401':'IOcy','\\u0454':'jukcy','\\u0404':'Jukcy','\\u0436':'zhcy','\\u0416':'ZHcy','\\u0437':'zcy','\\u0417':'Zcy','\\u0455':'dscy','\\u0405':'DScy','\\u0438':'icy','\\u0418':'Icy','\\u0456':'iukcy','\\u0406':'Iukcy','\\u0457':'yicy','\\u0407':'YIcy','\\u0439':'jcy','\\u0419':'Jcy','\\u0458':'jsercy','\\u0408':'Jsercy','\\u043A':'kcy','\\u041A':'Kcy','\\u045C':'kjcy','\\u040C':'KJcy','\\u043B':'lcy','\\u041B':'Lcy','\\u0459':'ljcy','\\u0409':'LJcy','\\u043C':'mcy','\\u041C':'Mcy','\\u043D':'ncy','\\u041D':'Ncy','\\u045A':'njcy','\\u040A':'NJcy','\\u043E':'ocy','\\u041E':'Ocy','\\u043F':'pcy','\\u041F':'Pcy','\\u0440':'rcy','\\u0420':'Rcy','\\u0441':'scy','\\u0421':'Scy','\\u0442':'tcy','\\u0422':'Tcy','\\u045B':'tshcy','\\u040B':'TSHcy','\\u0443':'ucy','\\u0423':'Ucy','\\u045E':'ubrcy','\\u040E':'Ubrcy','\\u0444':'fcy','\\u0424':'Fcy','\\u0445':'khcy','\\u0425':'KHcy','\\u0446':'tscy','\\u0426':'TScy','\\u0447':'chcy','\\u0427':'CHcy','\\u045F':'dzcy','\\u040F':'DZcy','\\u0448':'shcy','\\u0428':'SHcy','\\u0449':'shchcy','\\u0429':'SHCHcy','\\u044A':'hardcy','\\u042A':'HARDcy','\\u044B':'ycy','\\u042B':'Ycy','\\u044C':'softcy','\\u042C':'SOFTcy','\\u044D':'ecy','\\u042D':'Ecy','\\u044E':'yucy','\\u042E':'YUcy','\\u044F':'yacy','\\u042F':'YAcy','\\u2135':'aleph','\\u2136':'beth','\\u2137':'gimel','\\u2138':'daleth'};\n\n\tvar regexEscape = /[\"&'<>`]/g;\n\tvar escapeMap = {\n\t\t'\"': '&quot;',\n\t\t'&': '&amp;',\n\t\t'\\'': '&#x27;',\n\t\t'<': '&lt;',\n\t\t// See https://mathiasbynens.be/notes/ambiguous-ampersands: in HTML, the\n\t\t// following is not strictly necessary unless its part of a tag or an\n\t\t// unquoted attribute value. Were only escaping it to support those\n\t\t// situations, and for XML support.\n\t\t'>': '&gt;',\n\t\t// In Internet Explorer  8, the backtick character can be used\n\t\t// to break out of (un)quoted attribute values or HTML comments.\n\t\t// See http://html5sec.org/#102, http://html5sec.org/#108, and\n\t\t// http://html5sec.org/#133.\n\t\t'`': '&#x60;'\n\t};\n\n\tvar regexInvalidEntity = /&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/;\n\tvar regexInvalidRawCodePoint = /[\\0-\\x08\\x0B\\x0E-\\x1F\\x7F-\\x9F\\uFDD0-\\uFDEF\\uFFFE\\uFFFF]|[\\uD83F\\uD87F\\uD8BF\\uD8FF\\uD93F\\uD97F\\uD9BF\\uD9FF\\uDA3F\\uDA7F\\uDABF\\uDAFF\\uDB3F\\uDB7F\\uDBBF\\uDBFF][\\uDFFE\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n\tvar regexDecode = /&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g;\n\tvar decodeMap = {'aacute':'\\xE1','Aacute':'\\xC1','abreve':'\\u0103','Abreve':'\\u0102','ac':'\\u223E','acd':'\\u223F','acE':'\\u223E\\u0333','acirc':'\\xE2','Acirc':'\\xC2','acute':'\\xB4','acy':'\\u0430','Acy':'\\u0410','aelig':'\\xE6','AElig':'\\xC6','af':'\\u2061','afr':'\\uD835\\uDD1E','Afr':'\\uD835\\uDD04','agrave':'\\xE0','Agrave':'\\xC0','alefsym':'\\u2135','aleph':'\\u2135','alpha':'\\u03B1','Alpha':'\\u0391','amacr':'\\u0101','Amacr':'\\u0100','amalg':'\\u2A3F','amp':'&','AMP':'&','and':'\\u2227','And':'\\u2A53','andand':'\\u2A55','andd':'\\u2A5C','andslope':'\\u2A58','andv':'\\u2A5A','ang':'\\u2220','ange':'\\u29A4','angle':'\\u2220','angmsd':'\\u2221','angmsdaa':'\\u29A8','angmsdab':'\\u29A9','angmsdac':'\\u29AA','angmsdad':'\\u29AB','angmsdae':'\\u29AC','angmsdaf':'\\u29AD','angmsdag':'\\u29AE','angmsdah':'\\u29AF','angrt':'\\u221F','angrtvb':'\\u22BE','angrtvbd':'\\u299D','angsph':'\\u2222','angst':'\\xC5','angzarr':'\\u237C','aogon':'\\u0105','Aogon':'\\u0104','aopf':'\\uD835\\uDD52','Aopf':'\\uD835\\uDD38','ap':'\\u2248','apacir':'\\u2A6F','ape':'\\u224A','apE':'\\u2A70','apid':'\\u224B','apos':'\\'','ApplyFunction':'\\u2061','approx':'\\u2248','approxeq':'\\u224A','aring':'\\xE5','Aring':'\\xC5','ascr':'\\uD835\\uDCB6','Ascr':'\\uD835\\uDC9C','Assign':'\\u2254','ast':'*','asymp':'\\u2248','asympeq':'\\u224D','atilde':'\\xE3','Atilde':'\\xC3','auml':'\\xE4','Auml':'\\xC4','awconint':'\\u2233','awint':'\\u2A11','backcong':'\\u224C','backepsilon':'\\u03F6','backprime':'\\u2035','backsim':'\\u223D','backsimeq':'\\u22CD','Backslash':'\\u2216','Barv':'\\u2AE7','barvee':'\\u22BD','barwed':'\\u2305','Barwed':'\\u2306','barwedge':'\\u2305','bbrk':'\\u23B5','bbrktbrk':'\\u23B6','bcong':'\\u224C','bcy':'\\u0431','Bcy':'\\u0411','bdquo':'\\u201E','becaus':'\\u2235','because':'\\u2235','Because':'\\u2235','bemptyv':'\\u29B0','bepsi':'\\u03F6','bernou':'\\u212C','Bernoullis':'\\u212C','beta':'\\u03B2','Beta':'\\u0392','beth':'\\u2136','between':'\\u226C','bfr':'\\uD835\\uDD1F','Bfr':'\\uD835\\uDD05','bigcap':'\\u22C2','bigcirc':'\\u25EF','bigcup':'\\u22C3','bigodot':'\\u2A00','bigoplus':'\\u2A01','bigotimes':'\\u2A02','bigsqcup':'\\u2A06','bigstar':'\\u2605','bigtriangledown':'\\u25BD','bigtriangleup':'\\u25B3','biguplus':'\\u2A04','bigvee':'\\u22C1','bigwedge':'\\u22C0','bkarow':'\\u290D','blacklozenge':'\\u29EB','blacksquare':'\\u25AA','blacktriangle':'\\u25B4','blacktriangledown':'\\u25BE','blacktriangleleft':'\\u25C2','blacktriangleright':'\\u25B8','blank':'\\u2423','blk12':'\\u2592','blk14':'\\u2591','blk34':'\\u2593','block':'\\u2588','bne':'=\\u20E5','bnequiv':'\\u2261\\u20E5','bnot':'\\u2310','bNot':'\\u2AED','bopf':'\\uD835\\uDD53','Bopf':'\\uD835\\uDD39','bot':'\\u22A5','bottom':'\\u22A5','bowtie':'\\u22C8','boxbox':'\\u29C9','boxdl':'\\u2510','boxdL':'\\u2555','boxDl':'\\u2556','boxDL':'\\u2557','boxdr':'\\u250C','boxdR':'\\u2552','boxDr':'\\u2553','boxDR':'\\u2554','boxh':'\\u2500','boxH':'\\u2550','boxhd':'\\u252C','boxhD':'\\u2565','boxHd':'\\u2564','boxHD':'\\u2566','boxhu':'\\u2534','boxhU':'\\u2568','boxHu':'\\u2567','boxHU':'\\u2569','boxminus':'\\u229F','boxplus':'\\u229E','boxtimes':'\\u22A0','boxul':'\\u2518','boxuL':'\\u255B','boxUl':'\\u255C','boxUL':'\\u255D','boxur':'\\u2514','boxuR':'\\u2558','boxUr':'\\u2559','boxUR':'\\u255A','boxv':'\\u2502','boxV':'\\u2551','boxvh':'\\u253C','boxvH':'\\u256A','boxVh':'\\u256B','boxVH':'\\u256C','boxvl':'\\u2524','boxvL':'\\u2561','boxVl':'\\u2562','boxVL':'\\u2563','boxvr':'\\u251C','boxvR':'\\u255E','boxVr':'\\u255F','boxVR':'\\u2560','bprime':'\\u2035','breve':'\\u02D8','Breve':'\\u02D8','brvbar':'\\xA6','bscr':'\\uD835\\uDCB7','Bscr':'\\u212C','bsemi':'\\u204F','bsim':'\\u223D','bsime':'\\u22CD','bsol':'\\\\','bsolb':'\\u29C5','bsolhsub':'\\u27C8','bull':'\\u2022','bullet':'\\u2022','bump':'\\u224E','bumpe':'\\u224F','bumpE':'\\u2AAE','bumpeq':'\\u224F','Bumpeq':'\\u224E','cacute':'\\u0107','Cacute':'\\u0106','cap':'\\u2229','Cap':'\\u22D2','capand':'\\u2A44','capbrcup':'\\u2A49','capcap':'\\u2A4B','capcup':'\\u2A47','capdot':'\\u2A40','CapitalDifferentialD':'\\u2145','caps':'\\u2229\\uFE00','caret':'\\u2041','caron':'\\u02C7','Cayleys':'\\u212D','ccaps':'\\u2A4D','ccaron':'\\u010D','Ccaron':'\\u010C','ccedil':'\\xE7','Ccedil':'\\xC7','ccirc':'\\u0109','Ccirc':'\\u0108','Cconint':'\\u2230','ccups':'\\u2A4C','ccupssm':'\\u2A50','cdot':'\\u010B','Cdot':'\\u010A','cedil':'\\xB8','Cedilla':'\\xB8','cemptyv':'\\u29B2','cent':'\\xA2','centerdot':'\\xB7','CenterDot':'\\xB7','cfr':'\\uD835\\uDD20','Cfr':'\\u212D','chcy':'\\u0447','CHcy':'\\u0427','check':'\\u2713','checkmark':'\\u2713','chi':'\\u03C7','Chi':'\\u03A7','cir':'\\u25CB','circ':'\\u02C6','circeq':'\\u2257','circlearrowleft':'\\u21BA','circlearrowright':'\\u21BB','circledast':'\\u229B','circledcirc':'\\u229A','circleddash':'\\u229D','CircleDot':'\\u2299','circledR':'\\xAE','circledS':'\\u24C8','CircleMinus':'\\u2296','CirclePlus':'\\u2295','CircleTimes':'\\u2297','cire':'\\u2257','cirE':'\\u29C3','cirfnint':'\\u2A10','cirmid':'\\u2AEF','cirscir':'\\u29C2','ClockwiseContourIntegral':'\\u2232','CloseCurlyDoubleQuote':'\\u201D','CloseCurlyQuote':'\\u2019','clubs':'\\u2663','clubsuit':'\\u2663','colon':':','Colon':'\\u2237','colone':'\\u2254','Colone':'\\u2A74','coloneq':'\\u2254','comma':',','commat':'@','comp':'\\u2201','compfn':'\\u2218','complement':'\\u2201','complexes':'\\u2102','cong':'\\u2245','congdot':'\\u2A6D','Congruent':'\\u2261','conint':'\\u222E','Conint':'\\u222F','ContourIntegral':'\\u222E','copf':'\\uD835\\uDD54','Copf':'\\u2102','coprod':'\\u2210','Coproduct':'\\u2210','copy':'\\xA9','COPY':'\\xA9','copysr':'\\u2117','CounterClockwiseContourIntegral':'\\u2233','crarr':'\\u21B5','cross':'\\u2717','Cross':'\\u2A2F','cscr':'\\uD835\\uDCB8','Cscr':'\\uD835\\uDC9E','csub':'\\u2ACF','csube':'\\u2AD1','csup':'\\u2AD0','csupe':'\\u2AD2','ctdot':'\\u22EF','cudarrl':'\\u2938','cudarrr':'\\u2935','cuepr':'\\u22DE','cuesc':'\\u22DF','cularr':'\\u21B6','cularrp':'\\u293D','cup':'\\u222A','Cup':'\\u22D3','cupbrcap':'\\u2A48','cupcap':'\\u2A46','CupCap':'\\u224D','cupcup':'\\u2A4A','cupdot':'\\u228D','cupor':'\\u2A45','cups':'\\u222A\\uFE00','curarr':'\\u21B7','curarrm':'\\u293C','curlyeqprec':'\\u22DE','curlyeqsucc':'\\u22DF','curlyvee':'\\u22CE','curlywedge':'\\u22CF','curren':'\\xA4','curvearrowleft':'\\u21B6','curvearrowright':'\\u21B7','cuvee':'\\u22CE','cuwed':'\\u22CF','cwconint':'\\u2232','cwint':'\\u2231','cylcty':'\\u232D','dagger':'\\u2020','Dagger':'\\u2021','daleth':'\\u2138','darr':'\\u2193','dArr':'\\u21D3','Darr':'\\u21A1','dash':'\\u2010','dashv':'\\u22A3','Dashv':'\\u2AE4','dbkarow':'\\u290F','dblac':'\\u02DD','dcaron':'\\u010F','Dcaron':'\\u010E','dcy':'\\u0434','Dcy':'\\u0414','dd':'\\u2146','DD':'\\u2145','ddagger':'\\u2021','ddarr':'\\u21CA','DDotrahd':'\\u2911','ddotseq':'\\u2A77','deg':'\\xB0','Del':'\\u2207','delta':'\\u03B4','Delta':'\\u0394','demptyv':'\\u29B1','dfisht':'\\u297F','dfr':'\\uD835\\uDD21','Dfr':'\\uD835\\uDD07','dHar':'\\u2965','dharl':'\\u21C3','dharr':'\\u21C2','DiacriticalAcute':'\\xB4','DiacriticalDot':'\\u02D9','DiacriticalDoubleAcute':'\\u02DD','DiacriticalGrave':'`','DiacriticalTilde':'\\u02DC','diam':'\\u22C4','diamond':'\\u22C4','Diamond':'\\u22C4','diamondsuit':'\\u2666','diams':'\\u2666','die':'\\xA8','DifferentialD':'\\u2146','digamma':'\\u03DD','disin':'\\u22F2','div':'\\xF7','divide':'\\xF7','divideontimes':'\\u22C7','divonx':'\\u22C7','djcy':'\\u0452','DJcy':'\\u0402','dlcorn':'\\u231E','dlcrop':'\\u230D','dollar':'$','dopf':'\\uD835\\uDD55','Dopf':'\\uD835\\uDD3B','dot':'\\u02D9','Dot':'\\xA8','DotDot':'\\u20DC','doteq':'\\u2250','doteqdot':'\\u2251','DotEqual':'\\u2250','dotminus':'\\u2238','dotplus':'\\u2214','dotsquare':'\\u22A1','doublebarwedge':'\\u2306','DoubleContourIntegral':'\\u222F','DoubleDot':'\\xA8','DoubleDownArrow':'\\u21D3','DoubleLeftArrow':'\\u21D0','DoubleLeftRightArrow':'\\u21D4','DoubleLeftTee':'\\u2AE4','DoubleLongLeftArrow':'\\u27F8','DoubleLongLeftRightArrow':'\\u27FA','DoubleLongRightArrow':'\\u27F9','DoubleRightArrow':'\\u21D2','DoubleRightTee':'\\u22A8','DoubleUpArrow':'\\u21D1','DoubleUpDownArrow':'\\u21D5','DoubleVerticalBar':'\\u2225','downarrow':'\\u2193','Downarrow':'\\u21D3','DownArrow':'\\u2193','DownArrowBar':'\\u2913','DownArrowUpArrow':'\\u21F5','DownBreve':'\\u0311','downdownarrows':'\\u21CA','downharpoonleft':'\\u21C3','downharpoonright':'\\u21C2','DownLeftRightVector':'\\u2950','DownLeftTeeVector':'\\u295E','DownLeftVector':'\\u21BD','DownLeftVectorBar':'\\u2956','DownRightTeeVector':'\\u295F','DownRightVector':'\\u21C1','DownRightVectorBar':'\\u2957','DownTee':'\\u22A4','DownTeeArrow':'\\u21A7','drbkarow':'\\u2910','drcorn':'\\u231F','drcrop':'\\u230C','dscr':'\\uD835\\uDCB9','Dscr':'\\uD835\\uDC9F','dscy':'\\u0455','DScy':'\\u0405','dsol':'\\u29F6','dstrok':'\\u0111','Dstrok':'\\u0110','dtdot':'\\u22F1','dtri':'\\u25BF','dtrif':'\\u25BE','duarr':'\\u21F5','duhar':'\\u296F','dwangle':'\\u29A6','dzcy':'\\u045F','DZcy':'\\u040F','dzigrarr':'\\u27FF','eacute':'\\xE9','Eacute':'\\xC9','easter':'\\u2A6E','ecaron':'\\u011B','Ecaron':'\\u011A','ecir':'\\u2256','ecirc':'\\xEA','Ecirc':'\\xCA','ecolon':'\\u2255','ecy':'\\u044D','Ecy':'\\u042D','eDDot':'\\u2A77','edot':'\\u0117','eDot':'\\u2251','Edot':'\\u0116','ee':'\\u2147','efDot':'\\u2252','efr':'\\uD835\\uDD22','Efr':'\\uD835\\uDD08','eg':'\\u2A9A','egrave':'\\xE8','Egrave':'\\xC8','egs':'\\u2A96','egsdot':'\\u2A98','el':'\\u2A99','Element':'\\u2208','elinters':'\\u23E7','ell':'\\u2113','els':'\\u2A95','elsdot':'\\u2A97','emacr':'\\u0113','Emacr':'\\u0112','empty':'\\u2205','emptyset':'\\u2205','EmptySmallSquare':'\\u25FB','emptyv':'\\u2205','EmptyVerySmallSquare':'\\u25AB','emsp':'\\u2003','emsp13':'\\u2004','emsp14':'\\u2005','eng':'\\u014B','ENG':'\\u014A','ensp':'\\u2002','eogon':'\\u0119','Eogon':'\\u0118','eopf':'\\uD835\\uDD56','Eopf':'\\uD835\\uDD3C','epar':'\\u22D5','eparsl':'\\u29E3','eplus':'\\u2A71','epsi':'\\u03B5','epsilon':'\\u03B5','Epsilon':'\\u0395','epsiv':'\\u03F5','eqcirc':'\\u2256','eqcolon':'\\u2255','eqsim':'\\u2242','eqslantgtr':'\\u2A96','eqslantless':'\\u2A95','Equal':'\\u2A75','equals':'=','EqualTilde':'\\u2242','equest':'\\u225F','Equilibrium':'\\u21CC','equiv':'\\u2261','equivDD':'\\u2A78','eqvparsl':'\\u29E5','erarr':'\\u2971','erDot':'\\u2253','escr':'\\u212F','Escr':'\\u2130','esdot':'\\u2250','esim':'\\u2242','Esim':'\\u2A73','eta':'\\u03B7','Eta':'\\u0397','eth':'\\xF0','ETH':'\\xD0','euml':'\\xEB','Euml':'\\xCB','euro':'\\u20AC','excl':'!','exist':'\\u2203','Exists':'\\u2203','expectation':'\\u2130','exponentiale':'\\u2147','ExponentialE':'\\u2147','fallingdotseq':'\\u2252','fcy':'\\u0444','Fcy':'\\u0424','female':'\\u2640','ffilig':'\\uFB03','fflig':'\\uFB00','ffllig':'\\uFB04','ffr':'\\uD835\\uDD23','Ffr':'\\uD835\\uDD09','filig':'\\uFB01','FilledSmallSquare':'\\u25FC','FilledVerySmallSquare':'\\u25AA','fjlig':'fj','flat':'\\u266D','fllig':'\\uFB02','fltns':'\\u25B1','fnof':'\\u0192','fopf':'\\uD835\\uDD57','Fopf':'\\uD835\\uDD3D','forall':'\\u2200','ForAll':'\\u2200','fork':'\\u22D4','forkv':'\\u2AD9','Fouriertrf':'\\u2131','fpartint':'\\u2A0D','frac12':'\\xBD','frac13':'\\u2153','frac14':'\\xBC','frac15':'\\u2155','frac16':'\\u2159','frac18':'\\u215B','frac23':'\\u2154','frac25':'\\u2156','frac34':'\\xBE','frac35':'\\u2157','frac38':'\\u215C','frac45':'\\u2158','frac56':'\\u215A','frac58':'\\u215D','frac78':'\\u215E','frasl':'\\u2044','frown':'\\u2322','fscr':'\\uD835\\uDCBB','Fscr':'\\u2131','gacute':'\\u01F5','gamma':'\\u03B3','Gamma':'\\u0393','gammad':'\\u03DD','Gammad':'\\u03DC','gap':'\\u2A86','gbreve':'\\u011F','Gbreve':'\\u011E','Gcedil':'\\u0122','gcirc':'\\u011D','Gcirc':'\\u011C','gcy':'\\u0433','Gcy':'\\u0413','gdot':'\\u0121','Gdot':'\\u0120','ge':'\\u2265','gE':'\\u2267','gel':'\\u22DB','gEl':'\\u2A8C','geq':'\\u2265','geqq':'\\u2267','geqslant':'\\u2A7E','ges':'\\u2A7E','gescc':'\\u2AA9','gesdot':'\\u2A80','gesdoto':'\\u2A82','gesdotol':'\\u2A84','gesl':'\\u22DB\\uFE00','gesles':'\\u2A94','gfr':'\\uD835\\uDD24','Gfr':'\\uD835\\uDD0A','gg':'\\u226B','Gg':'\\u22D9','ggg':'\\u22D9','gimel':'\\u2137','gjcy':'\\u0453','GJcy':'\\u0403','gl':'\\u2277','gla':'\\u2AA5','glE':'\\u2A92','glj':'\\u2AA4','gnap':'\\u2A8A','gnapprox':'\\u2A8A','gne':'\\u2A88','gnE':'\\u2269','gneq':'\\u2A88','gneqq':'\\u2269','gnsim':'\\u22E7','gopf':'\\uD835\\uDD58','Gopf':'\\uD835\\uDD3E','grave':'`','GreaterEqual':'\\u2265','GreaterEqualLess':'\\u22DB','GreaterFullEqual':'\\u2267','GreaterGreater':'\\u2AA2','GreaterLess':'\\u2277','GreaterSlantEqual':'\\u2A7E','GreaterTilde':'\\u2273','gscr':'\\u210A','Gscr':'\\uD835\\uDCA2','gsim':'\\u2273','gsime':'\\u2A8E','gsiml':'\\u2A90','gt':'>','Gt':'\\u226B','GT':'>','gtcc':'\\u2AA7','gtcir':'\\u2A7A','gtdot':'\\u22D7','gtlPar':'\\u2995','gtquest':'\\u2A7C','gtrapprox':'\\u2A86','gtrarr':'\\u2978','gtrdot':'\\u22D7','gtreqless':'\\u22DB','gtreqqless':'\\u2A8C','gtrless':'\\u2277','gtrsim':'\\u2273','gvertneqq':'\\u2269\\uFE00','gvnE':'\\u2269\\uFE00','Hacek':'\\u02C7','hairsp':'\\u200A','half':'\\xBD','hamilt':'\\u210B','hardcy':'\\u044A','HARDcy':'\\u042A','harr':'\\u2194','hArr':'\\u21D4','harrcir':'\\u2948','harrw':'\\u21AD','Hat':'^','hbar':'\\u210F','hcirc':'\\u0125','Hcirc':'\\u0124','hearts':'\\u2665','heartsuit':'\\u2665','hellip':'\\u2026','hercon':'\\u22B9','hfr':'\\uD835\\uDD25','Hfr':'\\u210C','HilbertSpace':'\\u210B','hksearow':'\\u2925','hkswarow':'\\u2926','hoarr':'\\u21FF','homtht':'\\u223B','hookleftarrow':'\\u21A9','hookrightarrow':'\\u21AA','hopf':'\\uD835\\uDD59','Hopf':'\\u210D','horbar':'\\u2015','HorizontalLine':'\\u2500','hscr':'\\uD835\\uDCBD','Hscr':'\\u210B','hslash':'\\u210F','hstrok':'\\u0127','Hstrok':'\\u0126','HumpDownHump':'\\u224E','HumpEqual':'\\u224F','hybull':'\\u2043','hyphen':'\\u2010','iacute':'\\xED','Iacute':'\\xCD','ic':'\\u2063','icirc':'\\xEE','Icirc':'\\xCE','icy':'\\u0438','Icy':'\\u0418','Idot':'\\u0130','iecy':'\\u0435','IEcy':'\\u0415','iexcl':'\\xA1','iff':'\\u21D4','ifr':'\\uD835\\uDD26','Ifr':'\\u2111','igrave':'\\xEC','Igrave':'\\xCC','ii':'\\u2148','iiiint':'\\u2A0C','iiint':'\\u222D','iinfin':'\\u29DC','iiota':'\\u2129','ijlig':'\\u0133','IJlig':'\\u0132','Im':'\\u2111','imacr':'\\u012B','Imacr':'\\u012A','image':'\\u2111','ImaginaryI':'\\u2148','imagline':'\\u2110','imagpart':'\\u2111','imath':'\\u0131','imof':'\\u22B7','imped':'\\u01B5','Implies':'\\u21D2','in':'\\u2208','incare':'\\u2105','infin':'\\u221E','infintie':'\\u29DD','inodot':'\\u0131','int':'\\u222B','Int':'\\u222C','intcal':'\\u22BA','integers':'\\u2124','Integral':'\\u222B','intercal':'\\u22BA','Intersection':'\\u22C2','intlarhk':'\\u2A17','intprod':'\\u2A3C','InvisibleComma':'\\u2063','InvisibleTimes':'\\u2062','iocy':'\\u0451','IOcy':'\\u0401','iogon':'\\u012F','Iogon':'\\u012E','iopf':'\\uD835\\uDD5A','Iopf':'\\uD835\\uDD40','iota':'\\u03B9','Iota':'\\u0399','iprod':'\\u2A3C','iquest':'\\xBF','iscr':'\\uD835\\uDCBE','Iscr':'\\u2110','isin':'\\u2208','isindot':'\\u22F5','isinE':'\\u22F9','isins':'\\u22F4','isinsv':'\\u22F3','isinv':'\\u2208','it':'\\u2062','itilde':'\\u0129','Itilde':'\\u0128','iukcy':'\\u0456','Iukcy':'\\u0406','iuml':'\\xEF','Iuml':'\\xCF','jcirc':'\\u0135','Jcirc':'\\u0134','jcy':'\\u0439','Jcy':'\\u0419','jfr':'\\uD835\\uDD27','Jfr':'\\uD835\\uDD0D','jmath':'\\u0237','jopf':'\\uD835\\uDD5B','Jopf':'\\uD835\\uDD41','jscr':'\\uD835\\uDCBF','Jscr':'\\uD835\\uDCA5','jsercy':'\\u0458','Jsercy':'\\u0408','jukcy':'\\u0454','Jukcy':'\\u0404','kappa':'\\u03BA','Kappa':'\\u039A','kappav':'\\u03F0','kcedil':'\\u0137','Kcedil':'\\u0136','kcy':'\\u043A','Kcy':'\\u041A','kfr':'\\uD835\\uDD28','Kfr':'\\uD835\\uDD0E','kgreen':'\\u0138','khcy':'\\u0445','KHcy':'\\u0425','kjcy':'\\u045C','KJcy':'\\u040C','kopf':'\\uD835\\uDD5C','Kopf':'\\uD835\\uDD42','kscr':'\\uD835\\uDCC0','Kscr':'\\uD835\\uDCA6','lAarr':'\\u21DA','lacute':'\\u013A','Lacute':'\\u0139','laemptyv':'\\u29B4','lagran':'\\u2112','lambda':'\\u03BB','Lambda':'\\u039B','lang':'\\u27E8','Lang':'\\u27EA','langd':'\\u2991','langle':'\\u27E8','lap':'\\u2A85','Laplacetrf':'\\u2112','laquo':'\\xAB','larr':'\\u2190','lArr':'\\u21D0','Larr':'\\u219E','larrb':'\\u21E4','larrbfs':'\\u291F','larrfs':'\\u291D','larrhk':'\\u21A9','larrlp':'\\u21AB','larrpl':'\\u2939','larrsim':'\\u2973','larrtl':'\\u21A2','lat':'\\u2AAB','latail':'\\u2919','lAtail':'\\u291B','late':'\\u2AAD','lates':'\\u2AAD\\uFE00','lbarr':'\\u290C','lBarr':'\\u290E','lbbrk':'\\u2772','lbrace':'{','lbrack':'[','lbrke':'\\u298B','lbrksld':'\\u298F','lbrkslu':'\\u298D','lcaron':'\\u013E','Lcaron':'\\u013D','lcedil':'\\u013C','Lcedil':'\\u013B','lceil':'\\u2308','lcub':'{','lcy':'\\u043B','Lcy':'\\u041B','ldca':'\\u2936','ldquo':'\\u201C','ldquor':'\\u201E','ldrdhar':'\\u2967','ldrushar':'\\u294B','ldsh':'\\u21B2','le':'\\u2264','lE':'\\u2266','LeftAngleBracket':'\\u27E8','leftarrow':'\\u2190','Leftarrow':'\\u21D0','LeftArrow':'\\u2190','LeftArrowBar':'\\u21E4','LeftArrowRightArrow':'\\u21C6','leftarrowtail':'\\u21A2','LeftCeiling':'\\u2308','LeftDoubleBracket':'\\u27E6','LeftDownTeeVector':'\\u2961','LeftDownVector':'\\u21C3','LeftDownVectorBar':'\\u2959','LeftFloor':'\\u230A','leftharpoondown':'\\u21BD','leftharpoonup':'\\u21BC','leftleftarrows':'\\u21C7','leftrightarrow':'\\u2194','Leftrightarrow':'\\u21D4','LeftRightArrow':'\\u2194','leftrightarrows':'\\u21C6','leftrightharpoons':'\\u21CB','leftrightsquigarrow':'\\u21AD','LeftRightVector':'\\u294E','LeftTee':'\\u22A3','LeftTeeArrow':'\\u21A4','LeftTeeVector':'\\u295A','leftthreetimes':'\\u22CB','LeftTriangle':'\\u22B2','LeftTriangleBar':'\\u29CF','LeftTriangleEqual':'\\u22B4','LeftUpDownVector':'\\u2951','LeftUpTeeVector':'\\u2960','LeftUpVector':'\\u21BF','LeftUpVectorBar':'\\u2958','LeftVector':'\\u21BC','LeftVectorBar':'\\u2952','leg':'\\u22DA','lEg':'\\u2A8B','leq':'\\u2264','leqq':'\\u2266','leqslant':'\\u2A7D','les':'\\u2A7D','lescc':'\\u2AA8','lesdot':'\\u2A7F','lesdoto':'\\u2A81','lesdotor':'\\u2A83','lesg':'\\u22DA\\uFE00','lesges':'\\u2A93','lessapprox':'\\u2A85','lessdot':'\\u22D6','lesseqgtr':'\\u22DA','lesseqqgtr':'\\u2A8B','LessEqualGreater':'\\u22DA','LessFullEqual':'\\u2266','LessGreater':'\\u2276','lessgtr':'\\u2276','LessLess':'\\u2AA1','lesssim':'\\u2272','LessSlantEqual':'\\u2A7D','LessTilde':'\\u2272','lfisht':'\\u297C','lfloor':'\\u230A','lfr':'\\uD835\\uDD29','Lfr':'\\uD835\\uDD0F','lg':'\\u2276','lgE':'\\u2A91','lHar':'\\u2962','lhard':'\\u21BD','lharu':'\\u21BC','lharul':'\\u296A','lhblk':'\\u2584','ljcy':'\\u0459','LJcy':'\\u0409','ll':'\\u226A','Ll':'\\u22D8','llarr':'\\u21C7','llcorner':'\\u231E','Lleftarrow':'\\u21DA','llhard':'\\u296B','lltri':'\\u25FA','lmidot':'\\u0140','Lmidot':'\\u013F','lmoust':'\\u23B0','lmoustache':'\\u23B0','lnap':'\\u2A89','lnapprox':'\\u2A89','lne':'\\u2A87','lnE':'\\u2268','lneq':'\\u2A87','lneqq':'\\u2268','lnsim':'\\u22E6','loang':'\\u27EC','loarr':'\\u21FD','lobrk':'\\u27E6','longleftarrow':'\\u27F5','Longleftarrow':'\\u27F8','LongLeftArrow':'\\u27F5','longleftrightarrow':'\\u27F7','Longleftrightarrow':'\\u27FA','LongLeftRightArrow':'\\u27F7','longmapsto':'\\u27FC','longrightarrow':'\\u27F6','Longrightarrow':'\\u27F9','LongRightArrow':'\\u27F6','looparrowleft':'\\u21AB','looparrowright':'\\u21AC','lopar':'\\u2985','lopf':'\\uD835\\uDD5D','Lopf':'\\uD835\\uDD43','loplus':'\\u2A2D','lotimes':'\\u2A34','lowast':'\\u2217','lowbar':'_','LowerLeftArrow':'\\u2199','LowerRightArrow':'\\u2198','loz':'\\u25CA','lozenge':'\\u25CA','lozf':'\\u29EB','lpar':'(','lparlt':'\\u2993','lrarr':'\\u21C6','lrcorner':'\\u231F','lrhar':'\\u21CB','lrhard':'\\u296D','lrm':'\\u200E','lrtri':'\\u22BF','lsaquo':'\\u2039','lscr':'\\uD835\\uDCC1','Lscr':'\\u2112','lsh':'\\u21B0','Lsh':'\\u21B0','lsim':'\\u2272','lsime':'\\u2A8D','lsimg':'\\u2A8F','lsqb':'[','lsquo':'\\u2018','lsquor':'\\u201A','lstrok':'\\u0142','Lstrok':'\\u0141','lt':'<','Lt':'\\u226A','LT':'<','ltcc':'\\u2AA6','ltcir':'\\u2A79','ltdot':'\\u22D6','lthree':'\\u22CB','ltimes':'\\u22C9','ltlarr':'\\u2976','ltquest':'\\u2A7B','ltri':'\\u25C3','ltrie':'\\u22B4','ltrif':'\\u25C2','ltrPar':'\\u2996','lurdshar':'\\u294A','luruhar':'\\u2966','lvertneqq':'\\u2268\\uFE00','lvnE':'\\u2268\\uFE00','macr':'\\xAF','male':'\\u2642','malt':'\\u2720','maltese':'\\u2720','map':'\\u21A6','Map':'\\u2905','mapsto':'\\u21A6','mapstodown':'\\u21A7','mapstoleft':'\\u21A4','mapstoup':'\\u21A5','marker':'\\u25AE','mcomma':'\\u2A29','mcy':'\\u043C','Mcy':'\\u041C','mdash':'\\u2014','mDDot':'\\u223A','measuredangle':'\\u2221','MediumSpace':'\\u205F','Mellintrf':'\\u2133','mfr':'\\uD835\\uDD2A','Mfr':'\\uD835\\uDD10','mho':'\\u2127','micro':'\\xB5','mid':'\\u2223','midast':'*','midcir':'\\u2AF0','middot':'\\xB7','minus':'\\u2212','minusb':'\\u229F','minusd':'\\u2238','minusdu':'\\u2A2A','MinusPlus':'\\u2213','mlcp':'\\u2ADB','mldr':'\\u2026','mnplus':'\\u2213','models':'\\u22A7','mopf':'\\uD835\\uDD5E','Mopf':'\\uD835\\uDD44','mp':'\\u2213','mscr':'\\uD835\\uDCC2','Mscr':'\\u2133','mstpos':'\\u223E','mu':'\\u03BC','Mu':'\\u039C','multimap':'\\u22B8','mumap':'\\u22B8','nabla':'\\u2207','nacute':'\\u0144','Nacute':'\\u0143','nang':'\\u2220\\u20D2','nap':'\\u2249','napE':'\\u2A70\\u0338','napid':'\\u224B\\u0338','napos':'\\u0149','napprox':'\\u2249','natur':'\\u266E','natural':'\\u266E','naturals':'\\u2115','nbsp':'\\xA0','nbump':'\\u224E\\u0338','nbumpe':'\\u224F\\u0338','ncap':'\\u2A43','ncaron':'\\u0148','Ncaron':'\\u0147','ncedil':'\\u0146','Ncedil':'\\u0145','ncong':'\\u2247','ncongdot':'\\u2A6D\\u0338','ncup':'\\u2A42','ncy':'\\u043D','Ncy':'\\u041D','ndash':'\\u2013','ne':'\\u2260','nearhk':'\\u2924','nearr':'\\u2197','neArr':'\\u21D7','nearrow':'\\u2197','nedot':'\\u2250\\u0338','NegativeMediumSpace':'\\u200B','NegativeThickSpace':'\\u200B','NegativeThinSpace':'\\u200B','NegativeVeryThinSpace':'\\u200B','nequiv':'\\u2262','nesear':'\\u2928','nesim':'\\u2242\\u0338','NestedGreaterGreater':'\\u226B','NestedLessLess':'\\u226A','NewLine':'\\n','nexist':'\\u2204','nexists':'\\u2204','nfr':'\\uD835\\uDD2B','Nfr':'\\uD835\\uDD11','nge':'\\u2271','ngE':'\\u2267\\u0338','ngeq':'\\u2271','ngeqq':'\\u2267\\u0338','ngeqslant':'\\u2A7E\\u0338','nges':'\\u2A7E\\u0338','nGg':'\\u22D9\\u0338','ngsim':'\\u2275','ngt':'\\u226F','nGt':'\\u226B\\u20D2','ngtr':'\\u226F','nGtv':'\\u226B\\u0338','nharr':'\\u21AE','nhArr':'\\u21CE','nhpar':'\\u2AF2','ni':'\\u220B','nis':'\\u22FC','nisd':'\\u22FA','niv':'\\u220B','njcy':'\\u045A','NJcy':'\\u040A','nlarr':'\\u219A','nlArr':'\\u21CD','nldr':'\\u2025','nle':'\\u2270','nlE':'\\u2266\\u0338','nleftarrow':'\\u219A','nLeftarrow':'\\u21CD','nleftrightarrow':'\\u21AE','nLeftrightarrow':'\\u21CE','nleq':'\\u2270','nleqq':'\\u2266\\u0338','nleqslant':'\\u2A7D\\u0338','nles':'\\u2A7D\\u0338','nless':'\\u226E','nLl':'\\u22D8\\u0338','nlsim':'\\u2274','nlt':'\\u226E','nLt':'\\u226A\\u20D2','nltri':'\\u22EA','nltrie':'\\u22EC','nLtv':'\\u226A\\u0338','nmid':'\\u2224','NoBreak':'\\u2060','NonBreakingSpace':'\\xA0','nopf':'\\uD835\\uDD5F','Nopf':'\\u2115','not':'\\xAC','Not':'\\u2AEC','NotCongruent':'\\u2262','NotCupCap':'\\u226D','NotDoubleVerticalBar':'\\u2226','NotElement':'\\u2209','NotEqual':'\\u2260','NotEqualTilde':'\\u2242\\u0338','NotExists':'\\u2204','NotGreater':'\\u226F','NotGreaterEqual':'\\u2271','NotGreaterFullEqual':'\\u2267\\u0338','NotGreaterGreater':'\\u226B\\u0338','NotGreaterLess':'\\u2279','NotGreaterSlantEqual':'\\u2A7E\\u0338','NotGreaterTilde':'\\u2275','NotHumpDownHump':'\\u224E\\u0338','NotHumpEqual':'\\u224F\\u0338','notin':'\\u2209','notindot':'\\u22F5\\u0338','notinE':'\\u22F9\\u0338','notinva':'\\u2209','notinvb':'\\u22F7','notinvc':'\\u22F6','NotLeftTriangle':'\\u22EA','NotLeftTriangleBar':'\\u29CF\\u0338','NotLeftTriangleEqual':'\\u22EC','NotLess':'\\u226E','NotLessEqual':'\\u2270','NotLessGreater':'\\u2278','NotLessLess':'\\u226A\\u0338','NotLessSlantEqual':'\\u2A7D\\u0338','NotLessTilde':'\\u2274','NotNestedGreaterGreater':'\\u2AA2\\u0338','NotNestedLessLess':'\\u2AA1\\u0338','notni':'\\u220C','notniva':'\\u220C','notnivb':'\\u22FE','notnivc':'\\u22FD','NotPrecedes':'\\u2280','NotPrecedesEqual':'\\u2AAF\\u0338','NotPrecedesSlantEqual':'\\u22E0','NotReverseElement':'\\u220C','NotRightTriangle':'\\u22EB','NotRightTriangleBar':'\\u29D0\\u0338','NotRightTriangleEqual':'\\u22ED','NotSquareSubset':'\\u228F\\u0338','NotSquareSubsetEqual':'\\u22E2','NotSquareSuperset':'\\u2290\\u0338','NotSquareSupersetEqual':'\\u22E3','NotSubset':'\\u2282\\u20D2','NotSubsetEqual':'\\u2288','NotSucceeds':'\\u2281','NotSucceedsEqual':'\\u2AB0\\u0338','NotSucceedsSlantEqual':'\\u22E1','NotSucceedsTilde':'\\u227F\\u0338','NotSuperset':'\\u2283\\u20D2','NotSupersetEqual':'\\u2289','NotTilde':'\\u2241','NotTildeEqual':'\\u2244','NotTildeFullEqual':'\\u2247','NotTildeTilde':'\\u2249','NotVerticalBar':'\\u2224','npar':'\\u2226','nparallel':'\\u2226','nparsl':'\\u2AFD\\u20E5','npart':'\\u2202\\u0338','npolint':'\\u2A14','npr':'\\u2280','nprcue':'\\u22E0','npre':'\\u2AAF\\u0338','nprec':'\\u2280','npreceq':'\\u2AAF\\u0338','nrarr':'\\u219B','nrArr':'\\u21CF','nrarrc':'\\u2933\\u0338','nrarrw':'\\u219D\\u0338','nrightarrow':'\\u219B','nRightarrow':'\\u21CF','nrtri':'\\u22EB','nrtrie':'\\u22ED','nsc':'\\u2281','nsccue':'\\u22E1','nsce':'\\u2AB0\\u0338','nscr':'\\uD835\\uDCC3','Nscr':'\\uD835\\uDCA9','nshortmid':'\\u2224','nshortparallel':'\\u2226','nsim':'\\u2241','nsime':'\\u2244','nsimeq':'\\u2244','nsmid':'\\u2224','nspar':'\\u2226','nsqsube':'\\u22E2','nsqsupe':'\\u22E3','nsub':'\\u2284','nsube':'\\u2288','nsubE':'\\u2AC5\\u0338','nsubset':'\\u2282\\u20D2','nsubseteq':'\\u2288','nsubseteqq':'\\u2AC5\\u0338','nsucc':'\\u2281','nsucceq':'\\u2AB0\\u0338','nsup':'\\u2285','nsupe':'\\u2289','nsupE':'\\u2AC6\\u0338','nsupset':'\\u2283\\u20D2','nsupseteq':'\\u2289','nsupseteqq':'\\u2AC6\\u0338','ntgl':'\\u2279','ntilde':'\\xF1','Ntilde':'\\xD1','ntlg':'\\u2278','ntriangleleft':'\\u22EA','ntrianglelefteq':'\\u22EC','ntriangleright':'\\u22EB','ntrianglerighteq':'\\u22ED','nu':'\\u03BD','Nu':'\\u039D','num':'#','numero':'\\u2116','numsp':'\\u2007','nvap':'\\u224D\\u20D2','nvdash':'\\u22AC','nvDash':'\\u22AD','nVdash':'\\u22AE','nVDash':'\\u22AF','nvge':'\\u2265\\u20D2','nvgt':'>\\u20D2','nvHarr':'\\u2904','nvinfin':'\\u29DE','nvlArr':'\\u2902','nvle':'\\u2264\\u20D2','nvlt':'<\\u20D2','nvltrie':'\\u22B4\\u20D2','nvrArr':'\\u2903','nvrtrie':'\\u22B5\\u20D2','nvsim':'\\u223C\\u20D2','nwarhk':'\\u2923','nwarr':'\\u2196','nwArr':'\\u21D6','nwarrow':'\\u2196','nwnear':'\\u2927','oacute':'\\xF3','Oacute':'\\xD3','oast':'\\u229B','ocir':'\\u229A','ocirc':'\\xF4','Ocirc':'\\xD4','ocy':'\\u043E','Ocy':'\\u041E','odash':'\\u229D','odblac':'\\u0151','Odblac':'\\u0150','odiv':'\\u2A38','odot':'\\u2299','odsold':'\\u29BC','oelig':'\\u0153','OElig':'\\u0152','ofcir':'\\u29BF','ofr':'\\uD835\\uDD2C','Ofr':'\\uD835\\uDD12','ogon':'\\u02DB','ograve':'\\xF2','Ograve':'\\xD2','ogt':'\\u29C1','ohbar':'\\u29B5','ohm':'\\u03A9','oint':'\\u222E','olarr':'\\u21BA','olcir':'\\u29BE','olcross':'\\u29BB','oline':'\\u203E','olt':'\\u29C0','omacr':'\\u014D','Omacr':'\\u014C','omega':'\\u03C9','Omega':'\\u03A9','omicron':'\\u03BF','Omicron':'\\u039F','omid':'\\u29B6','ominus':'\\u2296','oopf':'\\uD835\\uDD60','Oopf':'\\uD835\\uDD46','opar':'\\u29B7','OpenCurlyDoubleQuote':'\\u201C','OpenCurlyQuote':'\\u2018','operp':'\\u29B9','oplus':'\\u2295','or':'\\u2228','Or':'\\u2A54','orarr':'\\u21BB','ord':'\\u2A5D','order':'\\u2134','orderof':'\\u2134','ordf':'\\xAA','ordm':'\\xBA','origof':'\\u22B6','oror':'\\u2A56','orslope':'\\u2A57','orv':'\\u2A5B','oS':'\\u24C8','oscr':'\\u2134','Oscr':'\\uD835\\uDCAA','oslash':'\\xF8','Oslash':'\\xD8','osol':'\\u2298','otilde':'\\xF5','Otilde':'\\xD5','otimes':'\\u2297','Otimes':'\\u2A37','otimesas':'\\u2A36','ouml':'\\xF6','Ouml':'\\xD6','ovbar':'\\u233D','OverBar':'\\u203E','OverBrace':'\\u23DE','OverBracket':'\\u23B4','OverParenthesis':'\\u23DC','par':'\\u2225','para':'\\xB6','parallel':'\\u2225','parsim':'\\u2AF3','parsl':'\\u2AFD','part':'\\u2202','PartialD':'\\u2202','pcy':'\\u043F','Pcy':'\\u041F','percnt':'%','period':'.','permil':'\\u2030','perp':'\\u22A5','pertenk':'\\u2031','pfr':'\\uD835\\uDD2D','Pfr':'\\uD835\\uDD13','phi':'\\u03C6','Phi':'\\u03A6','phiv':'\\u03D5','phmmat':'\\u2133','phone':'\\u260E','pi':'\\u03C0','Pi':'\\u03A0','pitchfork':'\\u22D4','piv':'\\u03D6','planck':'\\u210F','planckh':'\\u210E','plankv':'\\u210F','plus':'+','plusacir':'\\u2A23','plusb':'\\u229E','pluscir':'\\u2A22','plusdo':'\\u2214','plusdu':'\\u2A25','pluse':'\\u2A72','PlusMinus':'\\xB1','plusmn':'\\xB1','plussim':'\\u2A26','plustwo':'\\u2A27','pm':'\\xB1','Poincareplane':'\\u210C','pointint':'\\u2A15','popf':'\\uD835\\uDD61','Popf':'\\u2119','pound':'\\xA3','pr':'\\u227A','Pr':'\\u2ABB','prap':'\\u2AB7','prcue':'\\u227C','pre':'\\u2AAF','prE':'\\u2AB3','prec':'\\u227A','precapprox':'\\u2AB7','preccurlyeq':'\\u227C','Precedes':'\\u227A','PrecedesEqual':'\\u2AAF','PrecedesSlantEqual':'\\u227C','PrecedesTilde':'\\u227E','preceq':'\\u2AAF','precnapprox':'\\u2AB9','precneqq':'\\u2AB5','precnsim':'\\u22E8','precsim':'\\u227E','prime':'\\u2032','Prime':'\\u2033','primes':'\\u2119','prnap':'\\u2AB9','prnE':'\\u2AB5','prnsim':'\\u22E8','prod':'\\u220F','Product':'\\u220F','profalar':'\\u232E','profline':'\\u2312','profsurf':'\\u2313','prop':'\\u221D','Proportion':'\\u2237','Proportional':'\\u221D','propto':'\\u221D','prsim':'\\u227E','prurel':'\\u22B0','pscr':'\\uD835\\uDCC5','Pscr':'\\uD835\\uDCAB','psi':'\\u03C8','Psi':'\\u03A8','puncsp':'\\u2008','qfr':'\\uD835\\uDD2E','Qfr':'\\uD835\\uDD14','qint':'\\u2A0C','qopf':'\\uD835\\uDD62','Qopf':'\\u211A','qprime':'\\u2057','qscr':'\\uD835\\uDCC6','Qscr':'\\uD835\\uDCAC','quaternions':'\\u210D','quatint':'\\u2A16','quest':'?','questeq':'\\u225F','quot':'\"','QUOT':'\"','rAarr':'\\u21DB','race':'\\u223D\\u0331','racute':'\\u0155','Racute':'\\u0154','radic':'\\u221A','raemptyv':'\\u29B3','rang':'\\u27E9','Rang':'\\u27EB','rangd':'\\u2992','range':'\\u29A5','rangle':'\\u27E9','raquo':'\\xBB','rarr':'\\u2192','rArr':'\\u21D2','Rarr':'\\u21A0','rarrap':'\\u2975','rarrb':'\\u21E5','rarrbfs':'\\u2920','rarrc':'\\u2933','rarrfs':'\\u291E','rarrhk':'\\u21AA','rarrlp':'\\u21AC','rarrpl':'\\u2945','rarrsim':'\\u2974','rarrtl':'\\u21A3','Rarrtl':'\\u2916','rarrw':'\\u219D','ratail':'\\u291A','rAtail':'\\u291C','ratio':'\\u2236','rationals':'\\u211A','rbarr':'\\u290D','rBarr':'\\u290F','RBarr':'\\u2910','rbbrk':'\\u2773','rbrace':'}','rbrack':']','rbrke':'\\u298C','rbrksld':'\\u298E','rbrkslu':'\\u2990','rcaron':'\\u0159','Rcaron':'\\u0158','rcedil':'\\u0157','Rcedil':'\\u0156','rceil':'\\u2309','rcub':'}','rcy':'\\u0440','Rcy':'\\u0420','rdca':'\\u2937','rdldhar':'\\u2969','rdquo':'\\u201D','rdquor':'\\u201D','rdsh':'\\u21B3','Re':'\\u211C','real':'\\u211C','realine':'\\u211B','realpart':'\\u211C','reals':'\\u211D','rect':'\\u25AD','reg':'\\xAE','REG':'\\xAE','ReverseElement':'\\u220B','ReverseEquilibrium':'\\u21CB','ReverseUpEquilibrium':'\\u296F','rfisht':'\\u297D','rfloor':'\\u230B','rfr':'\\uD835\\uDD2F','Rfr':'\\u211C','rHar':'\\u2964','rhard':'\\u21C1','rharu':'\\u21C0','rharul':'\\u296C','rho':'\\u03C1','Rho':'\\u03A1','rhov':'\\u03F1','RightAngleBracket':'\\u27E9','rightarrow':'\\u2192','Rightarrow':'\\u21D2','RightArrow':'\\u2192','RightArrowBar':'\\u21E5','RightArrowLeftArrow':'\\u21C4','rightarrowtail':'\\u21A3','RightCeiling':'\\u2309','RightDoubleBracket':'\\u27E7','RightDownTeeVector':'\\u295D','RightDownVector':'\\u21C2','RightDownVectorBar':'\\u2955','RightFloor':'\\u230B','rightharpoondown':'\\u21C1','rightharpoonup':'\\u21C0','rightleftarrows':'\\u21C4','rightleftharpoons':'\\u21CC','rightrightarrows':'\\u21C9','rightsquigarrow':'\\u219D','RightTee':'\\u22A2','RightTeeArrow':'\\u21A6','RightTeeVector':'\\u295B','rightthreetimes':'\\u22CC','RightTriangle':'\\u22B3','RightTriangleBar':'\\u29D0','RightTriangleEqual':'\\u22B5','RightUpDownVector':'\\u294F','RightUpTeeVector':'\\u295C','RightUpVector':'\\u21BE','RightUpVectorBar':'\\u2954','RightVector':'\\u21C0','RightVectorBar':'\\u2953','ring':'\\u02DA','risingdotseq':'\\u2253','rlarr':'\\u21C4','rlhar':'\\u21CC','rlm':'\\u200F','rmoust':'\\u23B1','rmoustache':'\\u23B1','rnmid':'\\u2AEE','roang':'\\u27ED','roarr':'\\u21FE','robrk':'\\u27E7','ropar':'\\u2986','ropf':'\\uD835\\uDD63','Ropf':'\\u211D','roplus':'\\u2A2E','rotimes':'\\u2A35','RoundImplies':'\\u2970','rpar':')','rpargt':'\\u2994','rppolint':'\\u2A12','rrarr':'\\u21C9','Rrightarrow':'\\u21DB','rsaquo':'\\u203A','rscr':'\\uD835\\uDCC7','Rscr':'\\u211B','rsh':'\\u21B1','Rsh':'\\u21B1','rsqb':']','rsquo':'\\u2019','rsquor':'\\u2019','rthree':'\\u22CC','rtimes':'\\u22CA','rtri':'\\u25B9','rtrie':'\\u22B5','rtrif':'\\u25B8','rtriltri':'\\u29CE','RuleDelayed':'\\u29F4','ruluhar':'\\u2968','rx':'\\u211E','sacute':'\\u015B','Sacute':'\\u015A','sbquo':'\\u201A','sc':'\\u227B','Sc':'\\u2ABC','scap':'\\u2AB8','scaron':'\\u0161','Scaron':'\\u0160','sccue':'\\u227D','sce':'\\u2AB0','scE':'\\u2AB4','scedil':'\\u015F','Scedil':'\\u015E','scirc':'\\u015D','Scirc':'\\u015C','scnap':'\\u2ABA','scnE':'\\u2AB6','scnsim':'\\u22E9','scpolint':'\\u2A13','scsim':'\\u227F','scy':'\\u0441','Scy':'\\u0421','sdot':'\\u22C5','sdotb':'\\u22A1','sdote':'\\u2A66','searhk':'\\u2925','searr':'\\u2198','seArr':'\\u21D8','searrow':'\\u2198','sect':'\\xA7','semi':';','seswar':'\\u2929','setminus':'\\u2216','setmn':'\\u2216','sext':'\\u2736','sfr':'\\uD835\\uDD30','Sfr':'\\uD835\\uDD16','sfrown':'\\u2322','sharp':'\\u266F','shchcy':'\\u0449','SHCHcy':'\\u0429','shcy':'\\u0448','SHcy':'\\u0428','ShortDownArrow':'\\u2193','ShortLeftArrow':'\\u2190','shortmid':'\\u2223','shortparallel':'\\u2225','ShortRightArrow':'\\u2192','ShortUpArrow':'\\u2191','shy':'\\xAD','sigma':'\\u03C3','Sigma':'\\u03A3','sigmaf':'\\u03C2','sigmav':'\\u03C2','sim':'\\u223C','simdot':'\\u2A6A','sime':'\\u2243','simeq':'\\u2243','simg':'\\u2A9E','simgE':'\\u2AA0','siml':'\\u2A9D','simlE':'\\u2A9F','simne':'\\u2246','simplus':'\\u2A24','simrarr':'\\u2972','slarr':'\\u2190','SmallCircle':'\\u2218','smallsetminus':'\\u2216','smashp':'\\u2A33','smeparsl':'\\u29E4','smid':'\\u2223','smile':'\\u2323','smt':'\\u2AAA','smte':'\\u2AAC','smtes':'\\u2AAC\\uFE00','softcy':'\\u044C','SOFTcy':'\\u042C','sol':'/','solb':'\\u29C4','solbar':'\\u233F','sopf':'\\uD835\\uDD64','Sopf':'\\uD835\\uDD4A','spades':'\\u2660','spadesuit':'\\u2660','spar':'\\u2225','sqcap':'\\u2293','sqcaps':'\\u2293\\uFE00','sqcup':'\\u2294','sqcups':'\\u2294\\uFE00','Sqrt':'\\u221A','sqsub':'\\u228F','sqsube':'\\u2291','sqsubset':'\\u228F','sqsubseteq':'\\u2291','sqsup':'\\u2290','sqsupe':'\\u2292','sqsupset':'\\u2290','sqsupseteq':'\\u2292','squ':'\\u25A1','square':'\\u25A1','Square':'\\u25A1','SquareIntersection':'\\u2293','SquareSubset':'\\u228F','SquareSubsetEqual':'\\u2291','SquareSuperset':'\\u2290','SquareSupersetEqual':'\\u2292','SquareUnion':'\\u2294','squarf':'\\u25AA','squf':'\\u25AA','srarr':'\\u2192','sscr':'\\uD835\\uDCC8','Sscr':'\\uD835\\uDCAE','ssetmn':'\\u2216','ssmile':'\\u2323','sstarf':'\\u22C6','star':'\\u2606','Star':'\\u22C6','starf':'\\u2605','straightepsilon':'\\u03F5','straightphi':'\\u03D5','strns':'\\xAF','sub':'\\u2282','Sub':'\\u22D0','subdot':'\\u2ABD','sube':'\\u2286','subE':'\\u2AC5','subedot':'\\u2AC3','submult':'\\u2AC1','subne':'\\u228A','subnE':'\\u2ACB','subplus':'\\u2ABF','subrarr':'\\u2979','subset':'\\u2282','Subset':'\\u22D0','subseteq':'\\u2286','subseteqq':'\\u2AC5','SubsetEqual':'\\u2286','subsetneq':'\\u228A','subsetneqq':'\\u2ACB','subsim':'\\u2AC7','subsub':'\\u2AD5','subsup':'\\u2AD3','succ':'\\u227B','succapprox':'\\u2AB8','succcurlyeq':'\\u227D','Succeeds':'\\u227B','SucceedsEqual':'\\u2AB0','SucceedsSlantEqual':'\\u227D','SucceedsTilde':'\\u227F','succeq':'\\u2AB0','succnapprox':'\\u2ABA','succneqq':'\\u2AB6','succnsim':'\\u22E9','succsim':'\\u227F','SuchThat':'\\u220B','sum':'\\u2211','Sum':'\\u2211','sung':'\\u266A','sup':'\\u2283','Sup':'\\u22D1','sup1':'\\xB9','sup2':'\\xB2','sup3':'\\xB3','supdot':'\\u2ABE','supdsub':'\\u2AD8','supe':'\\u2287','supE':'\\u2AC6','supedot':'\\u2AC4','Superset':'\\u2283','SupersetEqual':'\\u2287','suphsol':'\\u27C9','suphsub':'\\u2AD7','suplarr':'\\u297B','supmult':'\\u2AC2','supne':'\\u228B','supnE':'\\u2ACC','supplus':'\\u2AC0','supset':'\\u2283','Supset':'\\u22D1','supseteq':'\\u2287','supseteqq':'\\u2AC6','supsetneq':'\\u228B','supsetneqq':'\\u2ACC','supsim':'\\u2AC8','supsub':'\\u2AD4','supsup':'\\u2AD6','swarhk':'\\u2926','swarr':'\\u2199','swArr':'\\u21D9','swarrow':'\\u2199','swnwar':'\\u292A','szlig':'\\xDF','Tab':'\\t','target':'\\u2316','tau':'\\u03C4','Tau':'\\u03A4','tbrk':'\\u23B4','tcaron':'\\u0165','Tcaron':'\\u0164','tcedil':'\\u0163','Tcedil':'\\u0162','tcy':'\\u0442','Tcy':'\\u0422','tdot':'\\u20DB','telrec':'\\u2315','tfr':'\\uD835\\uDD31','Tfr':'\\uD835\\uDD17','there4':'\\u2234','therefore':'\\u2234','Therefore':'\\u2234','theta':'\\u03B8','Theta':'\\u0398','thetasym':'\\u03D1','thetav':'\\u03D1','thickapprox':'\\u2248','thicksim':'\\u223C','ThickSpace':'\\u205F\\u200A','thinsp':'\\u2009','ThinSpace':'\\u2009','thkap':'\\u2248','thksim':'\\u223C','thorn':'\\xFE','THORN':'\\xDE','tilde':'\\u02DC','Tilde':'\\u223C','TildeEqual':'\\u2243','TildeFullEqual':'\\u2245','TildeTilde':'\\u2248','times':'\\xD7','timesb':'\\u22A0','timesbar':'\\u2A31','timesd':'\\u2A30','tint':'\\u222D','toea':'\\u2928','top':'\\u22A4','topbot':'\\u2336','topcir':'\\u2AF1','topf':'\\uD835\\uDD65','Topf':'\\uD835\\uDD4B','topfork':'\\u2ADA','tosa':'\\u2929','tprime':'\\u2034','trade':'\\u2122','TRADE':'\\u2122','triangle':'\\u25B5','triangledown':'\\u25BF','triangleleft':'\\u25C3','trianglelefteq':'\\u22B4','triangleq':'\\u225C','triangleright':'\\u25B9','trianglerighteq':'\\u22B5','tridot':'\\u25EC','trie':'\\u225C','triminus':'\\u2A3A','TripleDot':'\\u20DB','triplus':'\\u2A39','trisb':'\\u29CD','tritime':'\\u2A3B','trpezium':'\\u23E2','tscr':'\\uD835\\uDCC9','Tscr':'\\uD835\\uDCAF','tscy':'\\u0446','TScy':'\\u0426','tshcy':'\\u045B','TSHcy':'\\u040B','tstrok':'\\u0167','Tstrok':'\\u0166','twixt':'\\u226C','twoheadleftarrow':'\\u219E','twoheadrightarrow':'\\u21A0','uacute':'\\xFA','Uacute':'\\xDA','uarr':'\\u2191','uArr':'\\u21D1','Uarr':'\\u219F','Uarrocir':'\\u2949','ubrcy':'\\u045E','Ubrcy':'\\u040E','ubreve':'\\u016D','Ubreve':'\\u016C','ucirc':'\\xFB','Ucirc':'\\xDB','ucy':'\\u0443','Ucy':'\\u0423','udarr':'\\u21C5','udblac':'\\u0171','Udblac':'\\u0170','udhar':'\\u296E','ufisht':'\\u297E','ufr':'\\uD835\\uDD32','Ufr':'\\uD835\\uDD18','ugrave':'\\xF9','Ugrave':'\\xD9','uHar':'\\u2963','uharl':'\\u21BF','uharr':'\\u21BE','uhblk':'\\u2580','ulcorn':'\\u231C','ulcorner':'\\u231C','ulcrop':'\\u230F','ultri':'\\u25F8','umacr':'\\u016B','Umacr':'\\u016A','uml':'\\xA8','UnderBar':'_','UnderBrace':'\\u23DF','UnderBracket':'\\u23B5','UnderParenthesis':'\\u23DD','Union':'\\u22C3','UnionPlus':'\\u228E','uogon':'\\u0173','Uogon':'\\u0172','uopf':'\\uD835\\uDD66','Uopf':'\\uD835\\uDD4C','uparrow':'\\u2191','Uparrow':'\\u21D1','UpArrow':'\\u2191','UpArrowBar':'\\u2912','UpArrowDownArrow':'\\u21C5','updownarrow':'\\u2195','Updownarrow':'\\u21D5','UpDownArrow':'\\u2195','UpEquilibrium':'\\u296E','upharpoonleft':'\\u21BF','upharpoonright':'\\u21BE','uplus':'\\u228E','UpperLeftArrow':'\\u2196','UpperRightArrow':'\\u2197','upsi':'\\u03C5','Upsi':'\\u03D2','upsih':'\\u03D2','upsilon':'\\u03C5','Upsilon':'\\u03A5','UpTee':'\\u22A5','UpTeeArrow':'\\u21A5','upuparrows':'\\u21C8','urcorn':'\\u231D','urcorner':'\\u231D','urcrop':'\\u230E','uring':'\\u016F','Uring':'\\u016E','urtri':'\\u25F9','uscr':'\\uD835\\uDCCA','Uscr':'\\uD835\\uDCB0','utdot':'\\u22F0','utilde':'\\u0169','Utilde':'\\u0168','utri':'\\u25B5','utrif':'\\u25B4','uuarr':'\\u21C8','uuml':'\\xFC','Uuml':'\\xDC','uwangle':'\\u29A7','vangrt':'\\u299C','varepsilon':'\\u03F5','varkappa':'\\u03F0','varnothing':'\\u2205','varphi':'\\u03D5','varpi':'\\u03D6','varpropto':'\\u221D','varr':'\\u2195','vArr':'\\u21D5','varrho':'\\u03F1','varsigma':'\\u03C2','varsubsetneq':'\\u228A\\uFE00','varsubsetneqq':'\\u2ACB\\uFE00','varsupsetneq':'\\u228B\\uFE00','varsupsetneqq':'\\u2ACC\\uFE00','vartheta':'\\u03D1','vartriangleleft':'\\u22B2','vartriangleright':'\\u22B3','vBar':'\\u2AE8','Vbar':'\\u2AEB','vBarv':'\\u2AE9','vcy':'\\u0432','Vcy':'\\u0412','vdash':'\\u22A2','vDash':'\\u22A8','Vdash':'\\u22A9','VDash':'\\u22AB','Vdashl':'\\u2AE6','vee':'\\u2228','Vee':'\\u22C1','veebar':'\\u22BB','veeeq':'\\u225A','vellip':'\\u22EE','verbar':'|','Verbar':'\\u2016','vert':'|','Vert':'\\u2016','VerticalBar':'\\u2223','VerticalLine':'|','VerticalSeparator':'\\u2758','VerticalTilde':'\\u2240','VeryThinSpace':'\\u200A','vfr':'\\uD835\\uDD33','Vfr':'\\uD835\\uDD19','vltri':'\\u22B2','vnsub':'\\u2282\\u20D2','vnsup':'\\u2283\\u20D2','vopf':'\\uD835\\uDD67','Vopf':'\\uD835\\uDD4D','vprop':'\\u221D','vrtri':'\\u22B3','vscr':'\\uD835\\uDCCB','Vscr':'\\uD835\\uDCB1','vsubne':'\\u228A\\uFE00','vsubnE':'\\u2ACB\\uFE00','vsupne':'\\u228B\\uFE00','vsupnE':'\\u2ACC\\uFE00','Vvdash':'\\u22AA','vzigzag':'\\u299A','wcirc':'\\u0175','Wcirc':'\\u0174','wedbar':'\\u2A5F','wedge':'\\u2227','Wedge':'\\u22C0','wedgeq':'\\u2259','weierp':'\\u2118','wfr':'\\uD835\\uDD34','Wfr':'\\uD835\\uDD1A','wopf':'\\uD835\\uDD68','Wopf':'\\uD835\\uDD4E','wp':'\\u2118','wr':'\\u2240','wreath':'\\u2240','wscr':'\\uD835\\uDCCC','Wscr':'\\uD835\\uDCB2','xcap':'\\u22C2','xcirc':'\\u25EF','xcup':'\\u22C3','xdtri':'\\u25BD','xfr':'\\uD835\\uDD35','Xfr':'\\uD835\\uDD1B','xharr':'\\u27F7','xhArr':'\\u27FA','xi':'\\u03BE','Xi':'\\u039E','xlarr':'\\u27F5','xlArr':'\\u27F8','xmap':'\\u27FC','xnis':'\\u22FB','xodot':'\\u2A00','xopf':'\\uD835\\uDD69','Xopf':'\\uD835\\uDD4F','xoplus':'\\u2A01','xotime':'\\u2A02','xrarr':'\\u27F6','xrArr':'\\u27F9','xscr':'\\uD835\\uDCCD','Xscr':'\\uD835\\uDCB3','xsqcup':'\\u2A06','xuplus':'\\u2A04','xutri':'\\u25B3','xvee':'\\u22C1','xwedge':'\\u22C0','yacute':'\\xFD','Yacute':'\\xDD','yacy':'\\u044F','YAcy':'\\u042F','ycirc':'\\u0177','Ycirc':'\\u0176','ycy':'\\u044B','Ycy':'\\u042B','yen':'\\xA5','yfr':'\\uD835\\uDD36','Yfr':'\\uD835\\uDD1C','yicy':'\\u0457','YIcy':'\\u0407','yopf':'\\uD835\\uDD6A','Yopf':'\\uD835\\uDD50','yscr':'\\uD835\\uDCCE','Yscr':'\\uD835\\uDCB4','yucy':'\\u044E','YUcy':'\\u042E','yuml':'\\xFF','Yuml':'\\u0178','zacute':'\\u017A','Zacute':'\\u0179','zcaron':'\\u017E','Zcaron':'\\u017D','zcy':'\\u0437','Zcy':'\\u0417','zdot':'\\u017C','Zdot':'\\u017B','zeetrf':'\\u2128','ZeroWidthSpace':'\\u200B','zeta':'\\u03B6','Zeta':'\\u0396','zfr':'\\uD835\\uDD37','Zfr':'\\u2128','zhcy':'\\u0436','ZHcy':'\\u0416','zigrarr':'\\u21DD','zopf':'\\uD835\\uDD6B','Zopf':'\\u2124','zscr':'\\uD835\\uDCCF','Zscr':'\\uD835\\uDCB5','zwj':'\\u200D','zwnj':'\\u200C'};\n\tvar decodeMapLegacy = {'aacute':'\\xE1','Aacute':'\\xC1','acirc':'\\xE2','Acirc':'\\xC2','acute':'\\xB4','aelig':'\\xE6','AElig':'\\xC6','agrave':'\\xE0','Agrave':'\\xC0','amp':'&','AMP':'&','aring':'\\xE5','Aring':'\\xC5','atilde':'\\xE3','Atilde':'\\xC3','auml':'\\xE4','Auml':'\\xC4','brvbar':'\\xA6','ccedil':'\\xE7','Ccedil':'\\xC7','cedil':'\\xB8','cent':'\\xA2','copy':'\\xA9','COPY':'\\xA9','curren':'\\xA4','deg':'\\xB0','divide':'\\xF7','eacute':'\\xE9','Eacute':'\\xC9','ecirc':'\\xEA','Ecirc':'\\xCA','egrave':'\\xE8','Egrave':'\\xC8','eth':'\\xF0','ETH':'\\xD0','euml':'\\xEB','Euml':'\\xCB','frac12':'\\xBD','frac14':'\\xBC','frac34':'\\xBE','gt':'>','GT':'>','iacute':'\\xED','Iacute':'\\xCD','icirc':'\\xEE','Icirc':'\\xCE','iexcl':'\\xA1','igrave':'\\xEC','Igrave':'\\xCC','iquest':'\\xBF','iuml':'\\xEF','Iuml':'\\xCF','laquo':'\\xAB','lt':'<','LT':'<','macr':'\\xAF','micro':'\\xB5','middot':'\\xB7','nbsp':'\\xA0','not':'\\xAC','ntilde':'\\xF1','Ntilde':'\\xD1','oacute':'\\xF3','Oacute':'\\xD3','ocirc':'\\xF4','Ocirc':'\\xD4','ograve':'\\xF2','Ograve':'\\xD2','ordf':'\\xAA','ordm':'\\xBA','oslash':'\\xF8','Oslash':'\\xD8','otilde':'\\xF5','Otilde':'\\xD5','ouml':'\\xF6','Ouml':'\\xD6','para':'\\xB6','plusmn':'\\xB1','pound':'\\xA3','quot':'\"','QUOT':'\"','raquo':'\\xBB','reg':'\\xAE','REG':'\\xAE','sect':'\\xA7','shy':'\\xAD','sup1':'\\xB9','sup2':'\\xB2','sup3':'\\xB3','szlig':'\\xDF','thorn':'\\xFE','THORN':'\\xDE','times':'\\xD7','uacute':'\\xFA','Uacute':'\\xDA','ucirc':'\\xFB','Ucirc':'\\xDB','ugrave':'\\xF9','Ugrave':'\\xD9','uml':'\\xA8','uuml':'\\xFC','Uuml':'\\xDC','yacute':'\\xFD','Yacute':'\\xDD','yen':'\\xA5','yuml':'\\xFF'};\n\tvar decodeMapNumeric = {'0':'\\uFFFD','128':'\\u20AC','130':'\\u201A','131':'\\u0192','132':'\\u201E','133':'\\u2026','134':'\\u2020','135':'\\u2021','136':'\\u02C6','137':'\\u2030','138':'\\u0160','139':'\\u2039','140':'\\u0152','142':'\\u017D','145':'\\u2018','146':'\\u2019','147':'\\u201C','148':'\\u201D','149':'\\u2022','150':'\\u2013','151':'\\u2014','152':'\\u02DC','153':'\\u2122','154':'\\u0161','155':'\\u203A','156':'\\u0153','158':'\\u017E','159':'\\u0178'};\n\tvar invalidReferenceCodePoints = [1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65000,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\tvar object = {};\n\tvar hasOwnProperty = object.hasOwnProperty;\n\tvar has = function(object, propertyName) {\n\t\treturn hasOwnProperty.call(object, propertyName);\n\t};\n\n\tvar contains = function(array, value) {\n\t\tvar index = -1;\n\t\tvar length = array.length;\n\t\twhile (++index < length) {\n\t\t\tif (array[index] == value) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar merge = function(options, defaults) {\n\t\tif (!options) {\n\t\t\treturn defaults;\n\t\t}\n\t\tvar result = {};\n\t\tvar key;\n\t\tfor (key in defaults) {\n\t\t\t// A `hasOwnProperty` check is not needed here, since only recognized\n\t\t\t// option names are used anyway. Any others are ignored.\n\t\t\tresult[key] = has(options, key) ? options[key] : defaults[key];\n\t\t}\n\t\treturn result;\n\t};\n\n\t// Modified version of `ucs2encode`; see https://mths.be/punycode.\n\tvar codePointToSymbol = function(codePoint, strict) {\n\t\tvar output = '';\n\t\tif ((codePoint >= 0xD800 && codePoint <= 0xDFFF) || codePoint > 0x10FFFF) {\n\t\t\t// See issue #4:\n\t\t\t// Otherwise, if the number is in the range 0xD800 to 0xDFFF or is\n\t\t\t// greater than 0x10FFFF, then this is a parse error. Return a U+FFFD\n\t\t\t// REPLACEMENT CHARACTER.\n\t\t\tif (strict) {\n\t\t\t\tparseError('character reference outside the permissible Unicode range');\n\t\t\t}\n\t\t\treturn '\\uFFFD';\n\t\t}\n\t\tif (has(decodeMapNumeric, codePoint)) {\n\t\t\tif (strict) {\n\t\t\t\tparseError('disallowed character reference');\n\t\t\t}\n\t\t\treturn decodeMapNumeric[codePoint];\n\t\t}\n\t\tif (strict && contains(invalidReferenceCodePoints, codePoint)) {\n\t\t\tparseError('disallowed character reference');\n\t\t}\n\t\tif (codePoint > 0xFFFF) {\n\t\t\tcodePoint -= 0x10000;\n\t\t\toutput += stringFromCharCode(codePoint >>> 10 & 0x3FF | 0xD800);\n\t\t\tcodePoint = 0xDC00 | codePoint & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(codePoint);\n\t\treturn output;\n\t};\n\n\tvar hexEscape = function(codePoint) {\n\t\treturn '&#x' + codePoint.toString(16).toUpperCase() + ';';\n\t};\n\n\tvar decEscape = function(codePoint) {\n\t\treturn '&#' + codePoint + ';';\n\t};\n\n\tvar parseError = function(message) {\n\t\tthrow Error('Parse error: ' + message);\n\t};\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar encode = function(string, options) {\n\t\toptions = merge(options, encode.options);\n\t\tvar strict = options.strict;\n\t\tif (strict && regexInvalidRawCodePoint.test(string)) {\n\t\t\tparseError('forbidden code point');\n\t\t}\n\t\tvar encodeEverything = options.encodeEverything;\n\t\tvar useNamedReferences = options.useNamedReferences;\n\t\tvar allowUnsafeSymbols = options.allowUnsafeSymbols;\n\t\tvar escapeCodePoint = options.decimal ? decEscape : hexEscape;\n\n\t\tvar escapeBmpSymbol = function(symbol) {\n\t\t\treturn escapeCodePoint(symbol.charCodeAt(0));\n\t\t};\n\n\t\tif (encodeEverything) {\n\t\t\t// Encode ASCII symbols.\n\t\t\tstring = string.replace(regexAsciiWhitelist, function(symbol) {\n\t\t\t\t// Use named references if requested & possible.\n\t\t\t\tif (useNamedReferences && has(encodeMap, symbol)) {\n\t\t\t\t\treturn '&' + encodeMap[symbol] + ';';\n\t\t\t\t}\n\t\t\t\treturn escapeBmpSymbol(symbol);\n\t\t\t});\n\t\t\t// Shorten a few escapes that represent two symbols, of which at least one\n\t\t\t// is within the ASCII range.\n\t\t\tif (useNamedReferences) {\n\t\t\t\tstring = string\n\t\t\t\t\t.replace(/&gt;\\u20D2/g, '&nvgt;')\n\t\t\t\t\t.replace(/&lt;\\u20D2/g, '&nvlt;')\n\t\t\t\t\t.replace(/&#x66;&#x6A;/g, '&fjlig;');\n\t\t\t}\n\t\t\t// Encode non-ASCII symbols.\n\t\t\tif (useNamedReferences) {\n\t\t\t\t// Encode non-ASCII symbols that can be replaced with a named reference.\n\t\t\t\tstring = string.replace(regexEncodeNonAscii, function(string) {\n\t\t\t\t\t// Note: there is no need to check `has(encodeMap, string)` here.\n\t\t\t\t\treturn '&' + encodeMap[string] + ';';\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Note: any remaining non-ASCII symbols are handled outside of the `if`.\n\t\t} else if (useNamedReferences) {\n\t\t\t// Apply named character references.\n\t\t\t// Encode `<>\"'&` using named character references.\n\t\t\tif (!allowUnsafeSymbols) {\n\t\t\t\tstring = string.replace(regexEscape, function(string) {\n\t\t\t\t\treturn '&' + encodeMap[string] + ';'; // no need to check `has()` here\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Shorten escapes that represent two symbols, of which at least one is\n\t\t\t// `<>\"'&`.\n\t\t\tstring = string\n\t\t\t\t.replace(/&gt;\\u20D2/g, '&nvgt;')\n\t\t\t\t.replace(/&lt;\\u20D2/g, '&nvlt;');\n\t\t\t// Encode non-ASCII symbols that can be replaced with a named reference.\n\t\t\tstring = string.replace(regexEncodeNonAscii, function(string) {\n\t\t\t\t// Note: there is no need to check `has(encodeMap, string)` here.\n\t\t\t\treturn '&' + encodeMap[string] + ';';\n\t\t\t});\n\t\t} else if (!allowUnsafeSymbols) {\n\t\t\t// Encode `<>\"'&` using hexadecimal escapes, now that theyre not handled\n\t\t\t// using named character references.\n\t\t\tstring = string.replace(regexEscape, escapeBmpSymbol);\n\t\t}\n\t\treturn string\n\t\t\t// Encode astral symbols.\n\t\t\t.replace(regexAstralSymbols, function($0) {\n\t\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\t\tvar high = $0.charCodeAt(0);\n\t\t\t\tvar low = $0.charCodeAt(1);\n\t\t\t\tvar codePoint = (high - 0xD800) * 0x400 + low - 0xDC00 + 0x10000;\n\t\t\t\treturn escapeCodePoint(codePoint);\n\t\t\t})\n\t\t\t// Encode any remaining BMP symbols that are not printable ASCII symbols\n\t\t\t// using a hexadecimal escape.\n\t\t\t.replace(regexBmpWhitelist, escapeBmpSymbol);\n\t};\n\t// Expose default options (so they can be overridden globally).\n\tencode.options = {\n\t\t'allowUnsafeSymbols': false,\n\t\t'encodeEverything': false,\n\t\t'strict': false,\n\t\t'useNamedReferences': false,\n\t\t'decimal' : false\n\t};\n\n\tvar decode = function(html, options) {\n\t\toptions = merge(options, decode.options);\n\t\tvar strict = options.strict;\n\t\tif (strict && regexInvalidEntity.test(html)) {\n\t\t\tparseError('malformed character reference');\n\t\t}\n\t\treturn html.replace(regexDecode, function($0, $1, $2, $3, $4, $5, $6, $7, $8) {\n\t\t\tvar codePoint;\n\t\t\tvar semicolon;\n\t\t\tvar decDigits;\n\t\t\tvar hexDigits;\n\t\t\tvar reference;\n\t\t\tvar next;\n\n\t\t\tif ($1) {\n\t\t\t\treference = $1;\n\t\t\t\t// Note: there is no need to check `has(decodeMap, reference)`.\n\t\t\t\treturn decodeMap[reference];\n\t\t\t}\n\n\t\t\tif ($2) {\n\t\t\t\t// Decode named character references without trailing `;`, e.g. `&amp`.\n\t\t\t\t// This is only a parse error if it gets converted to `&`, or if it is\n\t\t\t\t// followed by `=` in an attribute context.\n\t\t\t\treference = $2;\n\t\t\t\tnext = $3;\n\t\t\t\tif (next && options.isAttributeValue) {\n\t\t\t\t\tif (strict && next == '=') {\n\t\t\t\t\t\tparseError('`&` did not start a character reference');\n\t\t\t\t\t}\n\t\t\t\t\treturn $0;\n\t\t\t\t} else {\n\t\t\t\t\tif (strict) {\n\t\t\t\t\t\tparseError(\n\t\t\t\t\t\t\t'named character reference was not terminated by a semicolon'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t// Note: there is no need to check `has(decodeMapLegacy, reference)`.\n\t\t\t\t\treturn decodeMapLegacy[reference] + (next || '');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($4) {\n\t\t\t\t// Decode decimal escapes, e.g. `&#119558;`.\n\t\t\t\tdecDigits = $4;\n\t\t\t\tsemicolon = $5;\n\t\t\t\tif (strict && !semicolon) {\n\t\t\t\t\tparseError('character reference was not terminated by a semicolon');\n\t\t\t\t}\n\t\t\t\tcodePoint = parseInt(decDigits, 10);\n\t\t\t\treturn codePointToSymbol(codePoint, strict);\n\t\t\t}\n\n\t\t\tif ($6) {\n\t\t\t\t// Decode hexadecimal escapes, e.g. `&#x1D306;`.\n\t\t\t\thexDigits = $6;\n\t\t\t\tsemicolon = $7;\n\t\t\t\tif (strict && !semicolon) {\n\t\t\t\t\tparseError('character reference was not terminated by a semicolon');\n\t\t\t\t}\n\t\t\t\tcodePoint = parseInt(hexDigits, 16);\n\t\t\t\treturn codePointToSymbol(codePoint, strict);\n\t\t\t}\n\n\t\t\t// If were still here, `if ($7)` is implied; its an ambiguous\n\t\t\t// ampersand for sure. https://mths.be/notes/ambiguous-ampersands\n\t\t\tif (strict) {\n\t\t\t\tparseError(\n\t\t\t\t\t'named character reference was not terminated by a semicolon'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn $0;\n\t\t});\n\t};\n\t// Expose default options (so they can be overridden globally).\n\tdecode.options = {\n\t\t'isAttributeValue': false,\n\t\t'strict': false\n\t};\n\n\tvar escape = function(string) {\n\t\treturn string.replace(regexEscape, function($0) {\n\t\t\t// Note: there is no need to check `has(escapeMap, $0)` here.\n\t\t\treturn escapeMap[$0];\n\t\t});\n\t};\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar he = {\n\t\t'version': '1.2.0',\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'escape': escape,\n\t\t'unescape': decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn he;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = he;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in he) {\n\t\t\t\thas(he, key) && (freeExports[key] = he[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.he = he;\n\t}\n\n}(this));\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"k-field\",\n    _vm._b(\n      { staticClass: \"k-p-wysiwyg-field\", attrs: { input: _vm.uid } },\n      \"k-field\",\n      _vm.$props,\n      false\n    ),\n    [\n      _c(\"textarea\", {\n        ref: \"editor\",\n        staticClass: \"p-wysiwyg__editor\",\n        attrs: { id: \"p-wysiwyg__editor\" }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"k-input\",\n        _vm._b(\n          {\n            ref: \"input\",\n            staticClass: \"p-wysiwyg__output\",\n            attrs: { id: _vm._uid, type: \"text\", theme: \"field\" }\n          },\n          \"k-input\",\n          _vm.$props,\n          false\n        )\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { render, staticRenderFns } from \"./p-wysiwyg.vue?vue&type=template&id=6ff72620&\"\nimport script from \"./p-wysiwyg.vue?vue&type=script&lang=js&\"\nexport * from \"./p-wysiwyg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./p-wysiwyg.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/sietse/Desktop/projects/leidenbiosciencepark-2020/site/plugins/kirby-wysiwig/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6ff72620', component.options)\n    } else {\n      api.reload('6ff72620', component.options)\n    }\n    module.hot.accept(\"./p-wysiwyg.vue?vue&type=template&id=6ff72620&\", function () {\n      api.rerender('6ff72620', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"components/field/p-wysiwyg.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./p-wysiwyg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./p-wysiwyg.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!../../../node_modules/css-loader/index.js??ref--1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--1-2!../../../node_modules/sass-loader/lib/loader.js??ref--1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./p-wysiwyg.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--1-0!../../../node_modules/css-loader/index.js??ref--1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--1-2!../../../node_modules/sass-loader/lib/loader.js??ref--1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./p-wysiwyg.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./p-wysiwyg.vue?vue&type=template&id=6ff72620&\"","(function($R)\n{\n    $R.add('plugin', 'kirby-imagemanager', {\n        translations: {\n    \t\ten: {\n    \t\t\t\"choose\": \"Choose\"\n    \t\t}\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.lang = app.lang;\n            this.opts = app.opts;\n            this.api = app.opts.kirbyApi\n            this.endpoints = app.opts.kirbyEndpoints\n        },\n        // messages\n        onmodal: {\n            image: {\n                open: function($modal, $form)\n                {\n                    if (!this.opts.imageQuery) return;\n                    this._load($modal)\n                }\n            }\n        },\n\n\t\t// private\n\t\t_load: function($modal)\n\t\t{\n\t\t\tvar $body = $modal.getBody();\n\n\t\t\tthis.$box = $R.dom('<div>');\n\t\t\tthis.$box.attr('data-title', this.lang.get('choose'));\n\t\t\tthis.$box.addClass('redactor-modal-tab');\n\t\t\tthis.$box.hide();\n\t\t\tthis.$box.css({\n    \t\t\toverflow: 'auto',\n    \t\t\theight: '300px',\n    \t\t\t'line-height': 1\n\t\t\t});\n\n\t\t\t$body.append(this.$box);\n\n            this.api.get(this.endpoints + '/get-images')\n            .then(files => {\n                // if there are files to pick from\n                if(files.length) {\n                    this._parse(files)\n                }\n                // else: show an error dialog\n                else {\n                    // this.$store.dispatch('notification/error', 'The page has no '+ dialog)\n                    console.log('no images');\n                }\n            })\n            .catch((error) => {\n                console.log(error);\n                // this.$store.dispatch('notification/error', 'The files query does not seem to be correct')\n            })\n\t\t},\n\t\t_parse: function(data)\n\t\t{\n            for (var key in data)\n            {\n                var obj = data[key];\n                if (typeof obj !== 'object') continue;\n                var $img = $R.dom('<img>');\n                var url = (obj.thumb) ? obj.thumb : obj.url;\n                $img.attr('src', url);\n                $img.attr('data-params', encodeURI(JSON.stringify(obj)));\n                $img.css({\n                    width: '25%',\n                    height: 'auto',\n                    margin: '0 4px 2px 0',\n                    cursor: 'pointer'\n                });\n\n                $img.on('click', this._insert.bind(this));\n\n\t\t\t\tthis.$box.append($img);\n            }\n\t\t},\n\t\t_insert: function(e)\n\t\t{\n    \t\te.preventDefault();\n\n\t\t\tvar $el = $R.dom(e.target);\n\t\t\tvar data = JSON.parse(decodeURI($el.attr('data-params')));\n\n\t\t\tthis.app.api('module.image.insert', { image: data });\n\t\t}\n    });\n})(Redactor);","import * as he from 'he';\n\n(function($R)\n{\n    $R.add('plugin', 'limiter', {\n\t\tmodals: {\n            // this is variable with modal HTML body\n            'notify_modal': '<div>'\n                + '<div class=\"\">'\n                    + '<h2 style=\"padding-bottom: 0.6em\">Whooops</h2>'\n                    + '<p>De tekst die je probeert te plakken heeft teveel karakters</p>'\n                + '</div>'\n            + '</div>'\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.utils = app.utils;\n            this.opts = app.opts;\n            this.editor = app.editor;\n            this.keycodes = app.keycodes;\n        },\n        // events\n        onpasting: function(html)\n        {\n            if (!this.opts.limiter) return;\n\n            var pasteText = this.utils.removeInvisibleChars(html).replace(/<[^>]+>/g, '');\n\t\t\tvar pasteText_decoded = he.decode( pasteText );\n\n            var text = this._getText(); // Text allready in the editor\n            var len = pasteText_decoded.length + text.length;\n\n\t\t\tvar sel_html = he.decode( this.app.selection.getHtml() );\n\t\t\tvar sel_text = this.utils.removeInvisibleChars(sel_html).replace(/<[^>]+>/g, ''); \n\t\t\tvar sel_text_decoded = he.decode( sel_text ); \n\t\t\t\n\t\t\tvar sel_length = sel_text_decoded.length;\n\n\t\t\t// Open a modal if the lenght gets to long\n\t\t\tif( ( len - sel_length )  >= this.opts.limiter ) {\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t\tthis.opts.input = !(( len - sel_length ) >= this.opts.limiter);\n        },\n\t\topen: function()\n        {\n\t\t\tconsole.log('open please')\n\t\t\tvar options = {\n\t\t\t\ttitle: 'Whooops...', // the modal title\n\t\t\t\tname: 'notify_modal', // the modal variable in modals object\n\t\t\t\tcommands: {\n\t\t\t\t\tcancel: { title: 'Sluiten' } \n\t\t\t\t}\n\t\t\t};\n\t\t\n\t\t\t// open the modal with API\n\t\t\tthis.app.api('module.modal.build', options);\n        },\n        // public\n        start: function()\n        {\n\t\t\tif (!this.opts.limiter) return;\n            this._count();\n\n            var $editor = this.editor.getElement();\n            $editor.on('keydown.redactor-plugin-limiter', this._limit.bind(this));\n\t\t},\n\t\tstop: function()\n\t\t{\n            var $editor = this.editor.getElement();\n            $editor.off('.redactor-plugin-limiter');\n\n            this.opts.input = true;\n\t\t},\n\n\t\t// private\n\t\t_limit: function(e)\n\t\t{\n    \t\tvar key = e.which;\n\t\t\tvar ctrl = e.ctrlKey || e.metaKey;\n\t\t\tvar arrows = [37, 38, 39, 40];\n\n\t\t\tif (key === this.keycodes.BACKSPACE\n\t\t\t   \t|| key === this.keycodes.DELETE\n\t\t\t    || key === this.keycodes.ESC\n\t\t\t    || key === this.keycodes.SHIFT\n\t\t\t    || (ctrl && key === 65)\n\t\t\t    || (ctrl && key === 88)\n\t\t\t    || (ctrl && key === 82)\n\t\t\t    || (ctrl && key === 116)\n\t\t\t    || (arrows.indexOf(key) !== -1)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n            this._count(e);\n\t\t},\n\t\t_count: function(e)\n\t\t{\n            var text = this._getText();\n\t\t\tvar count = text.length;\n\t\t\tif (count >= this.opts.limiter)\n\t\t\t{\n                if (e) e.preventDefault();\n                this.opts.input = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n    \t\t\tthis.opts.input = true;\n\t\t\t}\n\t\t},\n\t\t_getText: function()\n\t\t{\n            var $editor = this.editor.getElement();\n\t\t\tvar text = $editor.text();\n\n\t\t\treturn this.utils.removeInvisibleChars(text);\n\t\t}\n    });\n})(Redactor);","(function($R)\n{\n    $R.lang['de'] = {\n        \"format\": \"Format\",\n        \"image\": \"Bild\",\n        \"file\": \"Datei\",\n        \"link\": \"Link\",\n        \"bold\": \"Fett\",\n        \"italic\": \"Kursiv\",\n        \"deleted\": \"Durchgestrichen\",\n        \"underline\": \"Unterstrichen\",\n        \"superscript\": \"Hochgestellt\",\n        \"subscript\": \"Tiefgestellt\",\n        \"bold-abbr\": \"B\",\n        \"italic-abbr\": \"I\",\n        \"deleted-abbr\": \"S\",\n        \"underline-abbr\": \"U\",\n        \"superscript-abbr\": \"Hoch\",\n        \"subscript-abbr\": \"Tief\",\n        \"lists\": \"Liste\",\n        \"link-insert\": \"Link einfgen\",\n        \"link-edit\": \"Link bearbeiten\",\n        \"link-in-new-tab\": \"Link in neuem Tab ffnen\",\n        \"unlink\": \"Link entfernen\",\n        \"cancel\": \"Abbrechen\",\n        \"close\": \"Schlieen\",\n        \"insert\": \"Einfgen\",\n        \"save\": \"Speichern\",\n        \"delete\": \"Lschen\",\n        \"text\": \"Text\",\n        \"edit\": \"Bearbeiten\",\n        \"title\": \"Titel\",\n        \"paragraph\": \"Normaler Text\",\n        \"quote\": \"Zitat\",\n        \"code\": \"Code\",\n        \"heading1\": \"berschrift 1\",\n        \"heading2\": \"berschrift 2\",\n        \"heading3\": \"berschrift 3\",\n        \"heading4\": \"berschrift 4\",\n        \"heading5\": \"berschrift 5\",\n        \"heading6\": \"berschrift 6\",\n        \"filename\": \"Name\",\n        \"optional\": \"Optional\",\n        \"unorderedlist\": \"Aufzhlung\",\n        \"orderedlist\": \"Nummerierung\",\n        \"outdent\": \"Einzug verkleinern\",\n        \"indent\": \"Einzug vergrern\",\n        \"horizontalrule\": \"Linie\",\n        \"upload\": \"Upload\",\n        \"upload-label\": \"Bilder hier ablegen oder fr Upload klicken\",\n        \"upload-change-label\": \"Neues Bild hier ablegen\",\n        \"accessibility-help-label\": \"Rich-Text-Editor\",\n        \"caption\": \"Beschriftung\",\n        \"bulletslist\": \"Aufzhlung\",\n        \"numberslist\": \"Nummerierung\",\n        \"image-position\": \"Position\",\n        \"none\": \"Keine\",\n        \"left\": \"Links\",\n        \"right\": \"Rechts\",\n        \"center\": \"Mitte\",\n        \"undo\": \"Rckgngig\",\n        \"redo\": \"Wiederholen\"\n    };\n})(Redactor);","(function($R)\n{\n    $R.lang['nl'] = {\n        \"format\": \"Format\",\n        \"image\": \"Afbeelding\",\n        \"file\": \"Bestand\",\n        \"link\": \"Link\",\n        \"bold\": \"Vet\",\n        \"italic\": \"Cursief\",\n        \"deleted\": \"Doorstreept\",\n        \"underline\": \"Onderstreept\",\n        \"superscript\": \"Superscript\",\n        \"subscript\": \"Subscript\",\n        \"bold-abbr\": \"B\",\n        \"italic-abbr\": \"I\",\n        \"deleted-abbr\": \"S\",\n        \"underline-abbr\": \"U\",\n        \"superscript-abbr\": \"Sup\",\n        \"subscript-abbr\": \"Sub\",\n        \"lists\": \"Lijsten\",\n        \"link-insert\": \"Link invoegen\",\n        \"link-edit\": \"Link Bewerken\",\n        \"link-in-new-tab\": \"Open link in nieuw tabblad\",\n        \"unlink\": \"Ontkoppelen\",\n        \"cancel\": \"Annuleren\",\n        \"close\": \"Afsluiten\",\n        \"insert\": \"Invoegen\",\n        \"save\": \"Opslaan\",\n        \"delete\": \"Verwijder\",\n        \"text\": \"Tekst\",\n        \"edit\": \"Bewerken\",\n        \"title\": \"Titel\",\n        \"paragraph\": \"Normale tekst\",\n        \"quote\": \"Citaat\",\n        \"code\": \"Code\",\n        \"heading1\": \"Koptekst 1\",\n        \"heading2\": \"Koptekst 2\",\n        \"heading3\": \"Koptekst 3\",\n        \"heading4\": \"Koptekst 4\",\n        \"heading5\": \"Koptekst 5\",\n        \"heading6\": \"Koptekst 6\",\n        \"filename\": \"Bestandsnaam\",\n        \"optional\": \"Optioneel\",\n        \"unorderedlist\": \"Ongeordende lijst\",\n        \"orderedlist\": \"Geordende lijst\",\n        \"outdent\": \"Uitspringen\",\n        \"indent\": \"Inspringen\",\n        \"horizontalrule\": \"Streep\",\n        \"upload\": \"Upload\",\n        \"upload-label\": \"Drop files here or click to upload\",\n        \"upload-change-label\": \"Drop a new image to change\",\n        \"accessibility-help-label\": \"RTF editor\",\n        \"caption\": \"Caption\",\n        \"bulletslist\": \"Bullets\",\n        \"numberslist\": \"Numbers\",\n        \"image-position\": \"Positie\",\n        \"none\": \"None\",\n        \"left\": \"Links\",\n        \"right\": \"Rechts\",\n        \"center\": \"Gecentreerd\",\n        \"undo\": \"Undo\",\n        \"redo\": \"Redo\",\n        \"words\": \"Woorden\",\n        \"chars\": \"Leestekens\"\n    };\n})(Redactor);","(function($R)\n{\n    $R.add('plugin', 'alignment', {\n        translations: {\n    \t\ten: {\n    \t\t\t\"align\": \"Align\",\n    \t\t\t\"align-left\": \"Align Left\",\n    \t\t\t\"align-center\": \"Align Center\",\n    \t\t\t\"align-right\": \"Align Right\",\n    \t\t\t\"align-justify\": \"Align Justify\"\n    \t\t}\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.opts = app.opts;\n            this.lang = app.lang;\n            this.block = app.block;\n            this.toolbar = app.toolbar;\n        },\n        // public\n        start: function()\n        {\n            var dropdown = {};\n\n    \t\tdropdown.left = { title: this.lang.get('align-left'), api: 'plugin.alignment.set', args: 'left' };\n    \t\tdropdown.center = { title: this.lang.get('align-center'), api: 'plugin.alignment.set', args: 'center' };\n    \t\tdropdown.right = { title: this.lang.get('align-right'), api: 'plugin.alignment.set', args: 'right' };\n    \t\tdropdown.justify = { title: this.lang.get('align-justify'), api: 'plugin.alignment.set', args: 'justify' };\n\n            var $button = this.toolbar.addButton('alignment', { title: this.lang.get('align') });\n            $button.setIcon('<i class=\"re-icon-alignment\"></i>');\n\t\t\t$button.setDropdown(dropdown);\n        },\n        set: function(type)\n\t\t{\n    \t\tif (type === 'left' && this.opts.direction === 'ltr')\n    \t\t{\n        \t\treturn this._remove();\n    \t\t}\n\n    \t\tvar args = {\n        \t    style: { 'text-align': type }\n    \t\t};\n\n\t\t\tthis.block.toggle(args);\n\t\t},\n\n\t\t// private\n\t\t_remove: function()\n\t\t{\n\t\t    this.block.remove({ style: 'text-align' });\n\t\t}\n    });\n})(Redactor);","(function($R)\n{\n    $R.add('plugin', 'counter', {\n        translations: {\n    \t\ten: {\n    \t\t\t\"words\": \"words\",\n    \t\t\t\"chars\": \"chars\"\n    \t\t}\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.lang = app.lang;\n            this.utils = app.utils;\n            this.editor = app.editor;\n            this.statusbar = app.statusbar;\n        },\n        // public\n        start: function()\n        {\n            var $editor = this.editor.getElement();\n            $editor.on('keyup.redactor-plugin-counter', this.count.bind(this));\n\n            this.count();\n        },\n        stop: function()\n        {\n            var $editor = this.editor.getElement();\n            $editor.off('.redactor-plugin-counter');\n\n            this.statusbar.remove('words');\n            this.statusbar.remove('chars');\n        },\n\t\tcount: function()\n\t\t{\n\t\t\tvar words = 0, characters = 0, spaces = 0;\n\t\t\tvar $editor = this.editor.getElement();\n\t\t\tvar html = $editor.html();\n\n\t\t\thtml = this._clean(html)\n\t\t\tif (html !== '')\n\t\t\t{\n\t\t\t\tvar arrWords = html.split(/\\s+/);\n\t\t\t\tvar arrSpaces = html.match(/\\s/g);\n\n\t\t\t\twords = (arrWords) ? arrWords.length : 0;\n\t\t\t\tspaces = (arrSpaces) ? arrSpaces.length : 0;\n\n\t\t\t\tcharacters = html.length;\n\t\t\t}\n\n            var data = { words: words, characters: characters, spaces: spaces };\n\n            // callback\n\t\t\tthis.app.broadcast('counter', data);\n\n            // statusbar\n            this.statusbar.add('words', this.lang.get('words') + ': ' + data.words);\n            this.statusbar.add('chars', this.lang.get('chars') + ': ' + data.characters);\n\t\t},\n\n        // private\n        _clean: function(html)\n        {\n\t\t\thtml = html.replace(/<\\/(.*?)>/gi, ' ');\n\t\t\thtml = html.replace(/<(.*?)>/gi, '');\n\t\t\thtml = html.replace(/\\t/gi, '');\n\t\t\thtml = html.replace(/\\n/gi, ' ');\n\t\t\thtml = html.replace(/\\r/gi, ' ');\n\t\t\thtml = html.replace(/&nbsp;/g, '1');\n\t\t\thtml = html.trim();\n\t\t\thtml = this.utils.removeInvisibleChars(html);\n\n\t\t\treturn html;\n        }\n    });\n})(Redactor);","(function($R)\n{\n    $R.add('plugin', 'definedlinks', {\n        init: function(app)\n        {\n            this.app = app;\n            this.opts = app.opts;\n\n            this.component = app.component;\n\n            // local\n            this.links = [];\n        },\n        // messages\n        onmodal: {\n            link: {\n                open: function($modal, $form)\n                {\n                    if (!this.opts.definedlinks) return;\n\n                    this.$modal = $modal;\n                    this.$form = $form;\n\n                    this._load();\n                }\n            }\n\t\t},\n\n\t\t// private\n\t\t_load: function()\n\t\t{\n    \t\tif (typeof this.opts.definedlinks === 'object')\n    \t\t{\n                this._build(this.opts.definedlinks);\n    \t\t}\n            else\n            {\n        \t\t$R.ajax.get({\n            \t\turl: this.opts.definedlinks,\n            \t\tsuccess: this._build.bind(this)\n        \t\t});\n    \t\t}\n\t\t},\n\t\t_build: function(data)\n\t\t{\n            var $selector = this.$modal.find('#redactor-defined-links');\n            if ($selector.length === 0)\n            {\n                var $body = this.$modal.getBody();\n                var $item = $R.dom('<div class=\"form-item\" />');\n                var $selector = $R.dom('<select id=\"redactor-defined-links\" />');\n\n                $item.append($selector);\n                $body.prepend($item);\n            }\n\n            this.links = [];\n\n            $selector.html('');\n            $selector.off('change');\n\n            for (var key in data)\n            {\n                if (!data.hasOwnProperty(key) || typeof data[key] !== 'object')\n                {\n                    continue;\n                }\n\n                this.links[key] = data[key];\n\n                var $option = $R.dom('<option>');\n                $option.val(key);\n                $option.html(data[key].name);\n\n                $selector.append($option);\n            }\n\n            $selector.on('change', this._select.bind(this));\n\t\t},\n\t\t_select: function(e)\n\t\t{\n\t\t\tvar formData = this.$form.getData();\n\t\t\tvar key = $R.dom(e.target).val();\n\t\t\tvar data = { text: '', url: '' };\n\n\t\t\tif (key !== '0')\n\t\t\t{\n\t\t\t\tdata.text = this.links[key].name;\n\t\t\t\tdata.url = this.links[key].url;\n\t\t\t}\n\n\t\t\tif (formData.text !== '')\n\t\t\t{\n    \t\t\tdata = { url: data.url };\n\t\t\t}\n\n\t\t\tthis.$form.setData(data);\n\t\t}\n    });\n})(Redactor);","(function($R)\n{\n    $R.add('plugin', 'video', {\n        translations: {\n            en: {\n                \"video\": \"Video\",\n                \"video-html-code\": \"Video Embed Code or Youtube/Vimeo Link\"\n            }\n        },\n        modals: {\n            'video':\n                '<form action=\"\"> \\\n                    <div class=\"form-item\"> \\\n                        <label for=\"modal-video-input\">## video-html-code ##</label> \\\n                        <textarea id=\"modal-video-input\" name=\"video\" style=\"height: 160px;\"></textarea> \\\n                    </div> \\\n                </form>'\n        },\n        init: function(app)\n        {\n            this.app = app;\n            this.lang = app.lang;\n            this.opts = app.opts;\n            this.toolbar = app.toolbar;\n            this.component = app.component;\n            this.insertion = app.insertion;\n            this.inspector = app.inspector;\n        },\n        // messages\n        onmodal: {\n            video: {\n                opened: function($modal, $form)\n                {\n                    $form.getField('video').focus();\n                },\n                insert: function($modal, $form)\n                {\n                    var data = $form.getData();\n                    this._insert(data);\n                }\n            }\n        },\n        oncontextbar: function(e, contextbar)\n        {\n            var data = this.inspector.parse(e.target)\n            if (data.isComponentType('video'))\n            {\n                var node = data.getComponent();\n                var buttons = {\n                    \"remove\": {\n                        title: this.lang.get('delete'),\n                        api: 'plugin.video.remove',\n                        args: node\n                    }\n                };\n\n                contextbar.set(e, node, buttons, 'bottom');\n            }\n\n        },\n\n        // public\n        start: function()\n        {\n            var obj = {\n                title: this.lang.get('video'),\n                api: 'plugin.video.open'\n            };\n\n            var $button = this.toolbar.addButtonAfter('image', 'video', obj);\n            $button.setIcon('<i class=\"re-icon-video\"></i>');\n        },\n        open: function()\n\t\t{\n            var options = {\n                title: this.lang.get('video'),\n                width: '600px',\n                name: 'video',\n                handle: 'insert',\n                commands: {\n                    insert: { title: this.lang.get('insert') },\n                    cancel: { title: this.lang.get('cancel') }\n                }\n            };\n\n            this.app.api('module.modal.build', options);\n\t\t},\n        remove: function(node)\n        {\n            this.component.remove(node);\n        },\n\n        // private\n\t\t_insert: function(data)\n\t\t{\n    \t\tthis.app.api('module.modal.close');\n\n    \t\tif (data.video.trim() === '')\n    \t\t{\n        \t    return;\n    \t\t}\n\n            // parsing\n            data.video = this._matchData(data.video);\n\n            // inserting\n            if (this._isVideoIframe(data.video))\n            {\n                var $video = this.component.create('video', data.video);\n                this.insertion.insertHtml($video);\n            }\n\t\t},\n\n\t\t_isVideoIframe: function(data)\n\t\t{\n            return (data.match(/<iframe|<video/gi) !== null);\n\t\t},\n\t\t_matchData: function(data)\n\t\t{\n\t\t\tvar iframeStart = '<iframe style=\"width: 500px; height: 281px;\" src=\"';\n\t\t\tvar iframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n            if (this._isVideoIframe(data))\n\t\t\t{\n\t\t\t\tvar allowed = ['iframe', 'video', 'source'];\n\t\t\t\tvar tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n\n                data = data.replace(/<p(.*?[^>]?)>([\\w\\W]*?)<\\/p>/gi, '');\n\t\t\t    data = data.replace(tags, function ($0, $1)\n\t\t\t    {\n\t\t\t        return (allowed.indexOf($1.toLowerCase()) === -1) ? '' : $0;\n\t\t\t    });\n\t\t\t}\n            else\n            {\n    \t\t\tif (data.match(this.opts.regex.youtube))\n    \t\t\t{\n    \t\t\t\tdata = data.replace(this.opts.regex.youtube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);\n    \t\t\t}\n    \t\t\telse if (data.match(this.opts.regex.vimeo))\n    \t\t\t{\n\n    \t\t\t\tdata = data.replace(this.opts.regex.vimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);\n    \t\t\t}\n\t\t\t}\n\n\n\t\t\treturn data;\n\t\t}\n    });\n})(Redactor);","/*\n    Redactor\n    Version 3.3.2\n    Updated: November 7, 2019\n\n    http://imperavi.com/redactor/\n\n    Copyright (c) 2009-2019, Imperavi Ltd.\n    License: http://imperavi.com/redactor/license/\n*/\n(function() {\nvar Ajax = {};\n\nAjax.settings = {};\nAjax.post = function(options) { return new AjaxRequest('post', options); };\nAjax.get = function(options) { return new AjaxRequest('get', options); };\n\nvar AjaxRequest = function(method, options)\n{\n    var defaults = {\n        method: method,\n        url: '',\n        before: function() {},\n        success: function() {},\n        error: function() {},\n        data: false,\n        async: true,\n        headers: {}\n    };\n\n    this.p = this.extend(defaults, options);\n    this.p = this.extend(this.p, Ajax.settings);\n    this.p.method = this.p.method.toUpperCase();\n\n    this.prepareData();\n\n    this.xhr = new XMLHttpRequest();\n    this.xhr.open(this.p.method, this.p.url, this.p.async);\n\n    this.setHeaders();\n\n    var before = (typeof this.p.before === 'function') ? this.p.before(this.xhr) : true;\n    if (before !== false)\n    {\n        this.send();\n    }\n};\n\nAjaxRequest.prototype = {\n    extend: function(obj1, obj2)\n    {\n        if (obj2) for (var name in obj2) { obj1[name] = obj2[name]; }\n        return obj1;\n    },\n    prepareData: function()\n    {\n        if (this.p.method === 'POST' && !this.isFormData()) this.p.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n        if (typeof this.p.data === 'object' && !this.isFormData()) this.p.data = this.toParams(this.p.data);\n        if (this.p.method === 'GET') this.p.url = (this.p.data) ? this.p.url + '?' + this.p.data : this.p.url;\n    },\n    setHeaders: function()\n    {\n        this.xhr.setRequestHeader('X-Requested-With', this.p.headers['X-Requested-With'] || 'XMLHttpRequest');\n        for (var name in this.p.headers)\n        {\n            this.xhr.setRequestHeader(name, this.p.headers[name]);\n        }\n    },\n    isFormData: function()\n    {\n        return (typeof window.FormData !== 'undefined' && this.p.data instanceof window.FormData);\n    },\n    isComplete: function()\n    {\n        return !(this.xhr.status < 200 || this.xhr.status >= 300 && this.xhr.status !== 304);\n    },\n    send: function()\n    {\n        if (this.p.async)\n        {\n            this.xhr.onload = this.loaded.bind(this);\n            this.xhr.send(this.p.data);\n        }\n        else\n        {\n            this.xhr.send(this.p.data);\n            this.loaded.call(this);\n        }\n    },\n    loaded: function()\n    {\n        if (this.isComplete())\n        {\n            var response = this.xhr.response;\n            var json = this.parseJson(response);\n            response = (json) ? json : response;\n\n            if (typeof this.p.success === 'function') this.p.success(response, this.xhr);\n        }\n        else\n        {\n            if (typeof this.p.error === 'function') this.p.error(this.xhr.statusText);\n        }\n    },\n    parseJson: function(str)\n    {\n        try {\n            var o = JSON.parse(str);\n            if (o && typeof o === 'object')\n            {\n                return o;\n            }\n\n        } catch (e) {}\n\n        return false;\n    },\n    toParams: function (obj)\n    {\n        return Object.keys(obj).map(\n            function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(obj[k]); }\n        ).join('&');\n    }\n};\nvar DomCache = [0];\nvar DomExpando = 'data' + new Date().getTime();\nvar DomHClass = 'is-hidden';\nvar DomHMClass = 'is-hidden-mobile';\n\nvar Dom = function(selector, context)\n{\n    return this.parse(selector, context);\n};\n\nDom.ready = function(fn)\n{\n    if (document.readyState != 'loading') fn();\n    else document.addEventListener('DOMContentLoaded', fn);\n};\n\nDom.prototype = {\n    get sdom()\n    {\n        return true;\n    },\n    get length()\n    {\n        return this.nodes.length;\n    },\n    parse: function(selector, context)\n    {\n        var nodes;\n        var reHtmlTest = /^\\s*<(\\w+|!)[^>]*>/;\n\n        if (!selector)\n        {\n            nodes = [];\n        }\n        else if (selector.sdom)\n        {\n            this.nodes = selector.nodes;\n            return selector;\n        }\n        else if (typeof selector !== 'string')\n        {\n            if (selector.nodeType && selector.nodeType === 11)\n            {\n                nodes = selector.childNodes;\n            }\n            else\n            {\n                nodes = (selector.nodeType || selector === window) ? [selector] : selector;\n            }\n        }\n        else if (reHtmlTest.test(selector))\n        {\n            nodes = this.create(selector);\n        }\n        else\n        {\n            nodes = this._query(selector, context);\n        }\n\n        this.nodes = this._slice(nodes);\n    },\n    create: function(html)\n    {\n        if (/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/.test(html))\n        {\n            return [document.createElement(RegExp.$1)];\n        }\n\n        var elements = [];\n        var container = document.createElement('div');\n        var children = container.childNodes;\n\n        container.innerHTML = html;\n\n        for (var i = 0, l = children.length; i < l; i++)\n        {\n            elements.push(children[i]);\n        }\n\n        return elements;\n    },\n\n    // add\n    add: function(nodes)\n    {\n        this.nodes = this.nodes.concat(this._toArray(nodes));\n    },\n\n    // get\n    get: function(index)\n    {\n        return this.nodes[(index || 0)] || false;\n    },\n    getAll: function()\n    {\n        return this.nodes;\n    },\n    eq: function(index)\n    {\n        return new Dom(this.nodes[index]);\n    },\n    first: function()\n    {\n        return new Dom(this.nodes[0]);\n    },\n    last: function()\n    {\n        return new Dom(this.nodes[this.nodes.length - 1]);\n    },\n    contents: function()\n    {\n        return this.get().childNodes;\n    },\n\n    // loop\n    each: function(callback)\n    {\n        var len = this.nodes.length;\n        for (var i = 0; i < len; i++)\n        {\n            callback.call(this, (this.nodes[i].sdom) ? this.nodes[i].get() : this.nodes[i], i);\n        }\n\n        return this;\n    },\n\n    // traversing\n    is: function(selector)\n    {\n        return (this.filter(selector).length > 0);\n    },\n    filter: function (selector)\n    {\n        var callback;\n        if (selector === undefined)\n        {\n            return this;\n        }\n        else if (typeof selector === 'function')\n        {\n            callback = selector;\n        }\n        else\n        {\n            callback = function(node)\n            {\n                if (selector instanceof Node)\n                {\n                    return (selector === node);\n                }\n                else if (selector && selector.sdom)\n                {\n                    return ((selector.nodes).indexOf(node) !== -1);\n                }\n                else\n                {\n                    node.matches = node.matches || node.msMatchesSelector || node.webkitMatchesSelector;\n                    return (node.nodeType === 1) ? node.matches(selector || '*') : false;\n                }\n            };\n        }\n\n        return new Dom(this.nodes.filter(callback));\n    },\n    not: function(filter)\n    {\n        return this.filter(function(node)\n        {\n            return !new Dom(node).is(filter || true);\n        });\n    },\n    find: function(selector)\n    {\n        var nodes = [];\n        this.each(function(node)\n        {\n            var ns = this._query(selector || '*', node);\n            for (var i = 0; i < ns.length; i++)\n            {\n                nodes.push(ns[i]);\n            }\n        });\n\n        return new Dom(nodes);\n    },\n    children: function(selector)\n    {\n        var nodes = [];\n        this.each(function(node)\n        {\n            if (node.children)\n            {\n                var ns = node.children;\n                for (var i = 0; i < ns.length; i++)\n                {\n                    nodes.push(ns[i]);\n                }\n            }\n        });\n\n        return new Dom(nodes).filter(selector);\n    },\n    parent: function(selector)\n    {\n        var nodes = [];\n        this.each(function(node)\n        {\n            if (node.parentNode) nodes.push(node.parentNode);\n        });\n\n        return new Dom(nodes).filter(selector);\n    },\n    parents: function(selector, context)\n    {\n        context = this._getContext(context);\n\n        var nodes = [];\n        this.each(function(node)\n        {\n            var parent = node.parentNode;\n            while (parent && parent !== context)\n            {\n                if (selector)\n                {\n                    if (new Dom(parent).is(selector)) { nodes.push(parent); }\n                }\n                else\n                {\n                    nodes.push(parent);\n                }\n\n                parent = parent.parentNode;\n            }\n        });\n\n        return new Dom(nodes);\n    },\n    closest: function(selector, context)\n    {\n        context = this._getContext(context);\n        selector = (selector.sdom) ? selector.get() : selector;\n\n        var nodes = [];\n        var isNode = (selector && selector.nodeType);\n        this.each(function(node)\n        {\n            do {\n                if ((isNode && node === selector) || new Dom(node).is(selector)) return nodes.push(node);\n            } while ((node = node.parentNode) && node !== context);\n        });\n\n        return new Dom(nodes);\n    },\n    next: function(selector)\n    {\n         return this._getSibling(selector, 'nextSibling');\n    },\n    nextElement: function(selector)\n    {\n        return this._getSibling(selector, 'nextElementSibling');\n    },\n    prev: function(selector)\n    {\n        return this._getSibling(selector, 'previousSibling');\n    },\n    prevElement: function(selector)\n    {\n        return this._getSibling(selector, 'previousElementSibling');\n    },\n\n    // css\n    css: function(name, value)\n    {\n        if (value === undefined && (typeof name !== 'object'))\n        {\n            var node = this.get();\n            if (name === 'width' || name === 'height')\n            {\n                return (node.style) ? this._getHeightOrWidth(name, node, false) + 'px' : undefined;\n            }\n            else\n            {\n                return (node.style) ? getComputedStyle(node, null)[name] : undefined;\n            }\n        }\n\n        // set\n        return this.each(function(node)\n        {\n            var obj = {};\n            if (typeof name === 'object') obj = name;\n            else obj[name] = value;\n\n            for (var key in obj)\n            {\n                if (node.style) node.style[key] = obj[key];\n            }\n        });\n    },\n\n    // attr\n    attr: function(name, value, data)\n    {\n        data = (data) ? 'data-' : '';\n\n        if (value === undefined && (typeof name !== 'object'))\n        {\n            var node = this.get();\n            if (node && node.nodeType !== 3)\n            {\n                return (name === 'checked') ? node.checked : this._getBooleanFromStr(node.getAttribute(data + name));\n            }\n            else return;\n        }\n\n        // set\n        return this.each(function(node)\n        {\n            var obj = {};\n            if (typeof name === 'object') obj = name;\n            else obj[name] = value;\n\n            for (var key in obj)\n            {\n                if (node.nodeType !== 3)\n                {\n                    if (key === 'checked') node.checked = obj[key];\n                    else node.setAttribute(data + key, obj[key]);\n                }\n            }\n        });\n    },\n    data: function(name, value)\n    {\n        if (name === undefined)\n        {\n            var reDataAttr = /^data\\-(.+)$/;\n            var attrs = this.get().attributes;\n\n            var data = {};\n            var replacer = function (g) { return g[1].toUpperCase(); };\n\n            for (var key in attrs)\n            {\n                if (attrs[key] && reDataAttr.test(attrs[key].nodeName))\n                {\n                    var dataName = attrs[key].nodeName.match(reDataAttr)[1];\n                    var val = attrs[key].value;\n                    dataName = dataName.replace(/-([a-z])/g, replacer);\n\n                    if (this._isObjectString(val)) val = this._toObject(val);\n                    else val = (this._isNumber(val)) ? parseFloat(val) : this._getBooleanFromStr(val);\n\n                    data[dataName] = val;\n                }\n            }\n\n            return data;\n        }\n\n        return this.attr(name, value, true);\n    },\n    val: function(value)\n    {\n        if (value === undefined)\n        {\n            var el = this.get();\n            if (el.type && el.type === 'checkbox') return el.checked;\n            else return el.value;\n        }\n\n        return this.each(function(node)\n        {\n            node.value = value;\n        });\n    },\n    removeAttr: function(value)\n    {\n        return this.each(function(node)\n        {\n            var rmAttr = function(name) { if (node.nodeType !== 3) node.removeAttribute(name); };\n            value.split(' ').forEach(rmAttr);\n        });\n    },\n    removeData: function(value)\n    {\n        return this.each(function(node)\n        {\n            var rmData = function(name) { if (node.nodeType !== 3) node.removeAttribute('data-' + name); };\n            value.split(' ').forEach(rmData);\n        });\n    },\n\n    // dataset/dataget\n    dataset: function(key, value)\n    {\n        return this.each(function(node)\n        {\n            DomCache[this.dataindex(node)][key] = value;\n        });\n    },\n    dataget: function(key)\n    {\n        return DomCache[this.dataindex(this.get())][key];\n    },\n    dataindex: function(el)\n    {\n        var cacheIndex = el[DomExpando];\n        var nextCacheIndex = DomCache.length;\n\n        if (!cacheIndex)\n        {\n            cacheIndex = el[DomExpando] = nextCacheIndex;\n            DomCache[cacheIndex] = {};\n        }\n\n        return cacheIndex;\n    },\n\n\n    // class\n    addClass: function(value)\n    {\n        return this._eachClass(value, 'add');\n    },\n    removeClass: function(value)\n    {\n        return this._eachClass(value, 'remove');\n    },\n    toggleClass: function(value)\n    {\n        return this._eachClass(value, 'toggle');\n    },\n    hasClass: function(value)\n    {\n        return this.nodes.some(function(node)\n        {\n            return (node.classList) ? node.classList.contains(value) : false;\n        });\n    },\n\n    // html & text\n    empty: function()\n    {\n        return this.each(function(node)\n        {\n            node.innerHTML = '';\n        });\n    },\n    html: function(html)\n    {\n        return (html === undefined) ? (this.get().innerHTML || '') : this.empty().append(html);\n    },\n    text: function(text)\n    {\n        return (text === undefined) ? (this.get().textContent || '') : this.each(function(node) { node.textContent = text; });\n    },\n\n    // manipulation\n    after: function(html)\n    {\n        return this._inject(html, function(frag, node)\n        {\n            if (typeof frag === 'string')\n            {\n                node.insertAdjacentHTML('afterend', frag);\n            }\n            else\n            {\n                var elms = (frag instanceof Node) ? [frag] : this._toArray(frag).reverse();\n                for (var i = 0; i < elms.length; i++)\n                {\n                    node.parentNode.insertBefore(elms[i], node.nextSibling);\n                }\n            }\n\n            return node;\n\n        });\n    },\n    before: function(html)\n    {\n        return this._inject(html, function(frag, node)\n        {\n            if (typeof frag === 'string')\n            {\n                node.insertAdjacentHTML('beforebegin', frag);\n            }\n            else\n            {\n                var elms = (frag instanceof Node) ? [frag] : this._toArray(frag);\n                for (var i = 0; i < elms.length; i++)\n                {\n                    node.parentNode.insertBefore(elms[i], node);\n                }\n            }\n\n            return node;\n        });\n    },\n    append: function(html)\n    {\n        return this._inject(html, function(frag, node)\n        {\n            if (typeof frag === 'string' || typeof frag === 'number')\n            {\n                node.insertAdjacentHTML('beforeend', frag);\n            }\n            else\n            {\n                var elms = (frag instanceof Node) ? [frag] : this._toArray(frag);\n                for (var i = 0; i < elms.length; i++)\n                {\n                    node.appendChild(elms[i]);\n                }\n            }\n\n            return node;\n        });\n    },\n    prepend: function(html)\n    {\n        return this._inject(html, function(frag, node)\n        {\n            if (typeof frag === 'string' || typeof frag === 'number')\n            {\n                node.insertAdjacentHTML('afterbegin', frag);\n            }\n            else\n            {\n                var elms = (frag instanceof Node) ? [frag] : this._toArray(frag).reverse();\n                for (var i = 0; i < elms.length; i++)\n                {\n                    node.insertBefore(elms[i], node.firstChild);\n                }\n            }\n\n            return node;\n        });\n    },\n    wrap: function(html)\n    {\n        return this._inject(html, function(frag, node)\n        {\n            var wrapper = (typeof frag === 'string' || typeof frag === 'number') ? this.create(frag)[0] : (frag instanceof Node) ? frag : this._toArray(frag)[0];\n\n            if (node.parentNode)\n            {\n                node.parentNode.insertBefore(wrapper, node);\n            }\n\n            wrapper.appendChild(node);\n\n            return new Dom(wrapper);\n\n        });\n    },\n    unwrap: function()\n    {\n        return this.each(function(node)\n        {\n            var $node = new Dom(node);\n\n            return $node.replaceWith($node.contents());\n        });\n    },\n    replaceWith: function(html)\n    {\n        return this._inject(html, function(frag, node)\n        {\n            var docFrag = document.createDocumentFragment();\n            var elms = (typeof frag === 'string' || typeof frag === 'number') ? this.create(frag) : (frag instanceof Node) ? [frag] : this._toArray(frag);\n\n            for (var i = 0; i < elms.length; i++)\n            {\n                docFrag.appendChild(elms[i]);\n            }\n\n            var result = docFrag.childNodes[0];\n            node.parentNode.replaceChild(docFrag, node);\n\n            return result;\n\n        });\n    },\n    remove: function()\n    {\n        return this.each(function(node)\n        {\n            if (node.parentNode) node.parentNode.removeChild(node);\n        });\n    },\n    clone: function(events)\n    {\n        var nodes = [];\n        this.each(function(node)\n        {\n            var copy = this._clone(node);\n            if (events) copy = this._cloneEvents(node, copy);\n            nodes.push(copy);\n        });\n\n        return new Dom(nodes);\n    },\n\n    // show/hide\n    show: function()\n    {\n        return this.each(function(node)\n        {\n            if (!node.style || !this._hasDisplayNone(node)) return;\n\n            var target = node.getAttribute('domTargetShow');\n            var isHidden = (node.classList) ? node.classList.contains(DomHClass) : false;\n            var isHiddenMobile = (node.classList) ? node.classList.contains(DomHMClass) : false;\n            var type;\n\n            if (isHidden)\n            {\n                type = DomHClass;\n                node.classList.remove(DomHClass);\n            }\n            else if (isHiddenMobile)\n            {\n                type = DomHMClass;\n                node.classList.remove(DomHMClass);\n            }\n            else\n            {\n                node.style.display = (target) ? target : 'block';\n            }\n\n            if (type) node.setAttribute('domTargetHide', type);\n            node.removeAttribute('domTargetShow');\n\n        }.bind(this));\n    },\n    hide: function()\n    {\n        return this.each(function(node)\n        {\n            if (!node.style || this._hasDisplayNone(node)) return;\n\n            var display = node.style.display;\n            var target = node.getAttribute('domTargetHide');\n\n            if (target === DomHClass)\n            {\n                node.classList.add(DomHClass);\n            }\n            else if (target === DomHMClass)\n            {\n                node.classList.add(DomHMClass);\n            }\n            else\n            {\n                if (display !== 'block') node.setAttribute('domTargetShow', display);\n                node.style.display = 'none';\n            }\n\n            node.removeAttribute('domTargetHide');\n\n        });\n    },\n\n    // dimensions\n    scrollTop: function(value)\n    {\n        var node = this.get();\n        var isWindow = (node === window);\n        var isDocument = (node.nodeType === 9);\n        var el = (isDocument) ? (document.scrollingElement || document.body.parentNode || document.body || document.documentElement) : node;\n\n        if (value !== undefined)\n        {\n            if (isWindow) window.scrollTo(0, value);\n            else el.scrollTop = value;\n            return;\n        }\n\n        if (isDocument)\n        {\n            return (typeof window.pageYOffset != 'undefined') ? window.pageYOffset : ((document.documentElement.scrollTop) ? document.documentElement.scrollTop : ((document.body.scrollTop) ? document.body.scrollTop : 0));\n        }\n        else\n        {\n            return (isWindow) ? window.pageYOffset : el.scrollTop;\n        }\n    },\n    offset: function()\n    {\n        return this._getDim('Offset');\n    },\n    position: function()\n    {\n        return this._getDim('Position');\n    },\n    width: function(value, adjust)\n    {\n        return this._getSize('width', 'Width', value, adjust);\n    },\n    height: function(value, adjust)\n    {\n        return this._getSize('height', 'Height', value, adjust);\n    },\n    outerWidth: function()\n    {\n        return this._getInnerOrOuter('width', 'outer');\n    },\n    outerHeight: function()\n    {\n        return this._getInnerOrOuter('height', 'outer');\n    },\n    innerWidth: function()\n    {\n        return this._getInnerOrOuter('width', 'inner');\n    },\n    innerHeight: function()\n    {\n        return this._getInnerOrOuter('height', 'inner');\n    },\n\n    // events\n    click: function()\n    {\n        return this._triggerEvent('click');\n    },\n    focus: function()\n    {\n        return this._triggerEvent('focus');\n    },\n    trigger: function(names)\n    {\n        return this.each(function(node)\n        {\n            var events = names.split(' ');\n            for (var i = 0; i < events.length; i++)\n            {\n                var ev;\n                var opts = { bubbles: true, cancelable: true };\n\n                try {\n                    ev = new window.CustomEvent(events[i], opts);\n                } catch(e) {\n                    ev = document.createEvent('CustomEvent');\n                    ev.initCustomEvent(events[i], true, true);\n                }\n\n                node.dispatchEvent(ev);\n            }\n        });\n    },\n    on: function(names, handler, one)\n    {\n        return this.each(function(node)\n        {\n            var events = names.split(' ');\n            for (var i = 0; i < events.length; i++)\n            {\n                var event = this._getEventName(events[i]);\n                var namespace = this._getEventNamespace(events[i]);\n\n                handler = (one) ? this._getOneHandler(handler, names) : handler;\n                node.addEventListener(event, handler);\n\n                node._e = node._e || {};\n                node._e[namespace] = node._e[namespace] || {};\n                node._e[namespace][event] = node._e[namespace][event] || [];\n                node._e[namespace][event].push(handler);\n            }\n\n        });\n    },\n    one: function(events, handler)\n    {\n        return this.on(events, handler, true);\n    },\n    off: function(names, handler)\n    {\n        var testEvent = function(name, key, event) { return (name === event); };\n        var testNamespace = function(name, key, event, namespace) { return (key === namespace); };\n        var testEventNamespace = function(name, key, event, namespace) { return (name === event && key === namespace); };\n        var testPositive = function() { return true; };\n\n        if (names === undefined)\n        {\n            // ALL\n            return this.each(function(node)\n            {\n                this._offEvent(node, false, false, handler, testPositive);\n            });\n        }\n\n        return this.each(function(node)\n        {\n            var events = names.split(' ');\n\n            for (var i = 0; i < events.length; i++)\n            {\n                var event = this._getEventName(events[i]);\n                var namespace = this._getEventNamespace(events[i]);\n\n                // 1) event without namespace\n                if (namespace === '_events') this._offEvent(node, event, namespace, handler, testEvent);\n                // 2) only namespace\n                else if (!event && namespace !== '_events') this._offEvent(node, event, namespace, handler, testNamespace);\n                // 3) event + namespace\n                else this._offEvent(node, event, namespace, handler, testEventNamespace);\n            }\n        });\n    },\n\n    // form\n    serialize: function(asObject)\n    {\n        var obj = {};\n        var elms = this.get().elements;\n        for (var i = 0; i < elms.length; i++)\n        {\n            var el = elms[i];\n            if (/(checkbox|radio)/.test(el.type) && !el.checked) continue;\n            if (!el.name || el.disabled || el.type === 'file') continue;\n\n            if (el.type === 'select-multiple')\n            {\n                for (var z = 0; z < el.options.length; z++)\n                {\n                    var opt = el.options[z];\n                    if (opt.selected) obj[el.name] = opt.value;\n                }\n            }\n\n            obj[el.name] = (this._isNumber(el.value)) ? parseFloat(el.value) : this._getBooleanFromStr(el.value);\n        }\n\n        return (asObject) ? obj : this._toParams(obj);\n    },\n    ajax: function(success, error)\n    {\n        if (typeof AjaxRequest !== 'undefined')\n        {\n            var method = this.attr('method') || 'post';\n            var options = {\n                url: this.attr('action'),\n                data: this.serialize(),\n                success: success,\n                error: error\n            };\n\n            return new AjaxRequest(method, options);\n        }\n    },\n\n    // private\n    _queryContext: function(selector, context)\n    {\n        context = this._getContext(context);\n\n        return (context.nodeType !== 3 && typeof context.querySelectorAll === 'function') ? context.querySelectorAll(selector) : [];\n    },\n    _query: function(selector, context)\n    {\n        if (context)\n        {\n            return this._queryContext(selector, context);\n        }\n        else if (/^[.#]?[\\w-]*$/.test(selector))\n        {\n            if (selector[0] === '#')\n            {\n                var element = document.getElementById(selector.slice(1));\n                return element ? [element] : [];\n            }\n\n            if (selector[0] === '.')\n            {\n                return document.getElementsByClassName(selector.slice(1));\n            }\n\n            return document.getElementsByTagName(selector);\n        }\n\n        return document.querySelectorAll(selector);\n    },\n    _getContext: function(context)\n    {\n        context = (typeof context === 'string') ? document.querySelector(context) : context;\n\n        return (context && context.sdom) ? context.get() : (context || document);\n    },\n    _inject: function(html, fn)\n    {\n        var len = this.nodes.length;\n        var nodes = [];\n        while (len--)\n        {\n            var res = (typeof html === 'function') ? html.call(this, this.nodes[len]) : html;\n            var el = (len === 0) ? res : this._clone(res);\n            var node = fn.call(this, el, this.nodes[len]);\n\n            if (node)\n            {\n                if (node.sdom) nodes.push(node.get());\n                else nodes.push(node);\n            }\n        }\n\n        return new Dom(nodes);\n    },\n    _cloneEvents: function(node, copy)\n    {\n        var events = node._e;\n        if (events)\n        {\n            copy._e = events;\n            for (var name in events._events)\n            {\n                for (var i = 0; i < events._events[name].length; i++)\n                {\n                    copy.addEventListener(name, events._events[name][i]);\n                }\n            }\n        }\n\n        return copy;\n    },\n    _clone: function(node)\n    {\n        if (typeof node === 'undefined') return;\n        if (typeof node === 'string') return node;\n        else if (node instanceof Node || node.nodeType) return node.cloneNode(true);\n        else if ('length' in node)\n        {\n            return [].map.call(this._toArray(node), function(el) { return el.cloneNode(true); });\n        }\n    },\n    _slice: function(obj)\n    {\n        return (!obj || obj.length === 0) ? [] : (obj.length) ? [].slice.call(obj.nodes || obj) : [obj];\n    },\n    _eachClass: function(value, type)\n    {\n        return this.each(function(node)\n        {\n            if (value)\n            {\n                var setClass = function(name) { if (node.classList) node.classList[type](name); };\n                value.split(' ').forEach(setClass);\n            }\n        });\n    },\n    _triggerEvent: function(name)\n    {\n        var node = this.get();\n        if (node && node.nodeType !== 3) node[name]();\n        return this;\n    },\n    _getOneHandler: function(handler, events)\n    {\n        var self = this;\n        return function()\n        {\n            handler.apply(this, arguments);\n            self.off(events);\n        };\n    },\n    _getEventNamespace: function(event)\n    {\n        var arr = event.split('.');\n        var namespace = (arr[1]) ? arr[1] : '_events';\n        return (arr[2]) ? namespace + arr[2] : namespace;\n    },\n    _getEventName: function(event)\n    {\n        return event.split('.')[0];\n    },\n    _offEvent: function(node, event, namespace, handler, condition)\n    {\n        for (var key in node._e)\n        {\n            for (var name in node._e[key])\n            {\n                if (condition(name, key, event, namespace))\n                {\n                    var handlers = node._e[key][name];\n                    for (var i = 0; i < handlers.length; i++)\n                    {\n                        if (typeof handler !== 'undefined' && handlers[i].toString() !== handler.toString())\n                        {\n                            continue;\n                        }\n\n                        node.removeEventListener(name, handlers[i]);\n                        node._e[key][name].splice(i, 1);\n\n                        if (node._e[key][name].length === 0) delete node._e[key][name];\n                        if (Object.keys(node._e[key]).length === 0) delete node._e[key];\n                    }\n                }\n            }\n        }\n    },\n    _getInnerOrOuter: function(method, type)\n    {\n        return this[method](undefined, type);\n    },\n    _getDocSize: function(node, type)\n    {\n        var body = node.body, html = node.documentElement;\n        return Math.max(body['scroll' + type], body['offset' + type], html['client' + type], html['scroll' + type], html['offset' + type]);\n    },\n    _getSize: function(type, captype, value, adjust)\n    {\n        if (value === undefined)\n        {\n            var el = this.get();\n            if (el.nodeType === 3)      value = 0;\n            else if (el.nodeType === 9) value = this._getDocSize(el, captype);\n            else if (el === window)     value = window['inner' + captype];\n            else                        value = this._getHeightOrWidth(type, el, adjust || 'normal');\n\n            return Math.round(value);\n        }\n\n        return this.each(function(node)\n        {\n            value = parseFloat(value);\n            value = value + this._adjustResultHeightOrWidth(type, node, adjust || 'normal');\n\n            new Dom(node).css(type, value + 'px');\n\n        }.bind(this));\n    },\n    _getHeightOrWidth: function(type, el, adjust)\n    {\n        if (!el) return 0;\n\n        var name = type.charAt(0).toUpperCase() + type.slice(1);\n        var result = 0;\n        var style = getComputedStyle(el, null);\n        var $el = new Dom(el);\n        var $targets = $el.parents().filter(function(node)\n        {\n            return (node.nodeType === 1 && getComputedStyle(node, null).display === 'none') ? node : false;\n        });\n\n        if (style.display === 'none') $targets.add(el);\n        if ($targets.length !== 0)\n        {\n            var fixStyle = 'visibility: hidden !important; display: block !important;';\n            var tmp = [];\n\n            $targets.each(function(node)\n            {\n                var $node = new Dom(node);\n                var thisStyle = $node.attr('style');\n                if (thisStyle !== null) tmp.push(thisStyle);\n                $node.attr('style', (thisStyle !== null) ? thisStyle + ';' + fixStyle : fixStyle);\n            });\n\n            result = $el.get()['offset' + name] - this._adjustResultHeightOrWidth(type, el, adjust);\n\n            $targets.each(function(node, i)\n            {\n                var $node = new Dom(node);\n                if (tmp[i] === undefined) $node.removeAttr('style');\n                else $node.attr('style', tmp[i]);\n            });\n        }\n        else\n        {\n            result = el['offset' + name] - this._adjustResultHeightOrWidth(type, el, adjust);\n        }\n\n        return result;\n    },\n    _adjustResultHeightOrWidth: function(type, el, adjust)\n    {\n        if (!el || adjust === false) return 0;\n\n        var fix = 0;\n        var style = getComputedStyle(el, null);\n        var isBorderBox = (style.boxSizing === \"border-box\");\n\n        if (type === 'height')\n        {\n            if (adjust === 'inner' || (adjust === 'normal' && isBorderBox))\n            {\n                fix += (parseFloat(style.borderTopWidth) || 0) + (parseFloat(style.borderBottomWidth) || 0);\n            }\n\n            if (adjust === 'outer') fix -= (parseFloat(style.marginTop) || 0) + (parseFloat(style.marginBottom) || 0);\n        }\n        else\n        {\n            if (adjust === 'inner' || (adjust === 'normal' && isBorderBox))\n            {\n                fix += (parseFloat(style.borderLeftWidth) || 0) + (parseFloat(style.borderRightWidth) || 0);\n            }\n\n            if (adjust === 'outer') fix -= (parseFloat(style.marginLeft) || 0) + (parseFloat(style.marginRight) || 0);\n        }\n\n        return fix;\n    },\n    _getDim: function(type)\n    {\n        var node = this.get();\n        return (node.nodeType === 3) ? { top: 0, left: 0 } : this['_get' + type](node);\n    },\n    _getPosition: function(node)\n    {\n        return { top: node.offsetTop, left: node.offsetLeft };\n    },\n    _getOffset: function(node)\n    {\n        var rect = node.getBoundingClientRect();\n        var doc = node.ownerDocument;\n\t\tvar docElem = doc.documentElement;\n\t\tvar win = doc.defaultView;\n\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset - docElem.clientTop,\n\t\t\tleft: rect.left + win.pageXOffset - docElem.clientLeft\n\t\t};\n    },\n    _getSibling: function(selector, method)\n    {\n        selector = (selector && selector.sdom) ? selector.get() : selector;\n\n        var isNode = (selector && selector.nodeType);\n        var sibling;\n\n        this.each(function(node)\n        {\n            while (node = node[method])\n            {\n                if ((isNode && node === selector) || new Dom(node).is(selector))\n                {\n                    sibling = node;\n                    return;\n                }\n            }\n        });\n\n        return new Dom(sibling);\n    },\n    _toArray: function(obj)\n    {\n        if (obj instanceof NodeList)\n        {\n            var arr = [];\n            for (var i = 0; i < obj.length; i++)\n            {\n                arr[i] = obj[i];\n            }\n\n            return arr;\n        }\n        else if (obj === undefined) return [];\n        else\n        {\n            return (obj.sdom) ? obj.nodes : obj;\n        }\n    },\n    _toParams: function(obj)\n    {\n        var params = '';\n        for (var key in obj)\n        {\n            params += '&' + this._encodeUri(key) + '=' + this._encodeUri(obj[key]);\n        }\n\n        return params.replace(/^&/, '');\n    },\n    _toObject: function(str)\n    {\n        return (new Function(\"return \" + str))();\n    },\n    _encodeUri: function(str)\n    {\n        return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\\(/g, '%28').replace(/\\)/g, '%29').replace(/\\*/g, '%2A').replace(/%20/g, '+');\n    },\n    _isNumber: function(str)\n    {\n        return !isNaN(str) && !isNaN(parseFloat(str));\n    },\n    _isObjectString: function(str)\n    {\n        return (str.search(/^{/) !== -1);\n    },\n    _getBooleanFromStr: function(str)\n    {\n        if (str === 'true') return true;\n        else if (str === 'false') return false;\n\n        return str;\n    },\n    _hasDisplayNone: function(el)\n    {\n        return (el.style.display === 'none') || ((el.currentStyle) ? el.currentStyle.display : getComputedStyle(el, null).display) === 'none';\n    }\n};\n// Unique ID\nvar uuid = 0;\n\n// Wrapper\nvar $R = function(selector, options)\n{\n    return RedactorApp(selector, options, [].slice.call(arguments, 2));\n};\n\n// Globals\n$R.app = [];\n$R.version = '3.3.2';\n$R.options = {};\n$R.modules = {};\n$R.services = {};\n$R.classes = {};\n$R.plugins = {};\n$R.mixins = {};\n$R.modals = {};\n$R.lang = {};\n$R.dom = function(selector, context) { return new Dom(selector, context); };\n$R.ajax = Ajax;\n$R.Dom = Dom;\n$R.keycodes = {\n\tBACKSPACE: 8,\n\tDELETE: 46,\n\tUP: 38,\n\tDOWN: 40,\n\tENTER: 13,\n\tSPACE: 32,\n\tESC: 27,\n\tTAB: 9,\n\tCTRL: 17,\n\tMETA: 91,\n\tSHIFT: 16,\n\tALT: 18,\n\tRIGHT: 39,\n\tLEFT: 37\n};\n$R.env = {\n    'plugin': 'plugins',\n    'module': 'modules',\n    'service': 'services',\n    'class': 'classes',\n    'mixin': 'mixins'\n};\n\n// jQuery Wrapper\n/*eslint-env jquery*/\nif (typeof jQuery !== 'undefined')\n{\n    (function($) { $.fn.redactor = function(options) { return RedactorApp(this.toArray(), options, [].slice.call(arguments, 1)); }; })(jQuery);\n}\n\n// Class\nvar RedactorApp = function(selector, options, args)\n{\n    var namespace = 'redactor';\n    var nodes = (Array.isArray(selector)) ? selector : (selector && selector.nodeType) ? [selector] : document.querySelectorAll(selector);\n    var isApi = (typeof options === 'string' || typeof options === 'function');\n    var value = [];\n    var instance;\n\n    for (var i = 0; i < nodes.length; i++)\n    {\n        var el = nodes[i];\n        var $el = $R.dom(el);\n\n        instance = $el.dataget(namespace);\n        if (!instance && !isApi)\n        {\n            // Initialization\n            instance = new App(el, options, uuid);\n            $el.dataset(namespace, instance);\n            $R.app[uuid] = instance;\n            uuid++;\n        }\n\n        // API\n        if (instance && isApi)\n        {\n            var isDestroy = (options === 'destroy');\n            options = (isDestroy) ? 'stop' : options;\n\n            var methodValue;\n            if (typeof options === 'function')\n            {\n                methodValue = options.apply(instance, args);\n            }\n            else\n            {\n                args.unshift(options);\n                methodValue = instance.api.apply(instance, args);\n            }\n            if (methodValue !== undefined) value.push(methodValue);\n\n            if (isDestroy) $el.dataset(namespace, false);\n        }\n    }\n\n    return (value.length === 0 || value.length === 1) ? ((value.length === 0) ? instance : value[0]) : value;\n};\n\n// add\n$R.add = function(type, name, obj)\n{\n    if (typeof $R.env[type] === 'undefined') return;\n\n    // translations\n    if (obj.translations)\n    {\n        $R.lang = $R.extend(true, {}, $R.lang, obj.translations);\n    }\n\n    // modals\n    if (obj.modals)\n    {\n        $R.modals = $R.extend(true, {}, $R.modals, obj.modals);\n    }\n\n    // mixin\n    if (type === 'mixin')\n    {\n        $R[$R.env[type]][name] = obj;\n    }\n    else\n    {\n        // prototype\n        var F = function() {};\n        F.prototype = obj;\n\n        // mixins\n        if (obj.mixins)\n        {\n            for (var i = 0; i < obj.mixins.length; i++)\n            {\n                $R.inherit(F, $R.mixins[obj.mixins[i]]);\n            }\n        }\n\n        $R[$R.env[type]][name] = F;\n    }\n};\n\n// add lang\n$R.addLang = function(lang, obj)\n{\n    if (typeof $R.lang[lang] === 'undefined')\n    {\n        $R.lang[lang] = {};\n    }\n\n    $R.lang[lang] = $R.extend($R.lang[lang], obj);\n};\n\n// create\n$R.create = function(name)\n{\n    var arr = name.split('.');\n    var args = [].slice.call(arguments, 1);\n\n    var type = 'classes';\n    if (typeof $R.env[arr[0]] !== 'undefined')\n    {\n        type = $R.env[arr[0]];\n        name = arr.slice(1).join('.');\n    }\n\n    // construct\n    var instance = new $R[type][name]();\n\n    // init\n    if (instance.init)\n    {\n        var res = instance.init.apply(instance, args);\n\n        return (res) ? res : instance;\n    }\n\n    return instance;\n};\n\n// inherit\n$R.inherit = function(current, parent)\n{\n    var F = function () {};\n    F.prototype = parent;\n    var f = new F();\n\n    for (var prop in current.prototype)\n    {\n        if (current.prototype.__lookupGetter__(prop)) f.__defineGetter__(prop, current.prototype.__lookupGetter__(prop));\n        else f[prop] = current.prototype[prop];\n    }\n\n    current.prototype = f;\n    current.prototype.super = parent;\n\n    return current;\n};\n\n// error\n$R.error = function(exception)\n{\n    throw exception;\n};\n\n// extend\n$R.extend = function()\n{\n    var extended = {};\n    var deep = false;\n    var i = 0;\n    var length = arguments.length;\n\n    if (Object.prototype.toString.call( arguments[0] ) === '[object Boolean]')\n    {\n        deep = arguments[0];\n        i++;\n    }\n\n    var merge = function(obj)\n    {\n        for (var prop in obj)\n        {\n            if (Object.prototype.hasOwnProperty.call(obj, prop))\n            {\n                if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') extended[prop] = $R.extend(true, extended[prop], obj[prop]);\n                else extended[prop] = obj[prop];\n            }\n        }\n    };\n\n    for (; i < length; i++ )\n    {\n        var obj = arguments[i];\n        merge(obj);\n    }\n\n    return extended;\n};\n$R.opts = {\n    animation: true,\n    lang: 'en',\n    direction: 'ltr',\n    spellcheck: true,\n    structure: false,\n    scrollTarget: false,\n    styles: true,\n    stylesClass: 'redactor-styles',\n    placeholder: false,\n\n    source: true,\n    showSource: false,\n\n    inline: false,\n\n    breakline: false,\n    markup: 'p',\n    enterKey: true,\n\n    clickToEdit: false,\n    clickToSave: false,\n    clickToCancel: false,\n\n    focus: false,\n    focusEnd: false,\n\n    minHeight: false, // string, '100px'\n    maxHeight: false, // string, '100px'\n    maxWidth: false, // string, '700px'\n\n    plugins: [], // array\n    callbacks: {},\n\n    // pre & tab\n    preClass: false, // string\n    preSpaces: 4, // or false\n    tabindex: false, // int\n    tabAsSpaces: false, // true or number of spaces\n    tabKey: true,\n\n    // autosave\n    autosave: false, // false or url\n    autosaveName: false,\n    autosaveData: false,\n\n    // toolbar\n    toolbar: true,\n    toolbarFixed: true,\n    toolbarFixedTarget: document,\n    toolbarFixedTopOffset: 0, // pixels\n    toolbarExternal: false, // ID selector\n    toolbarContext: true,\n\n    // air\n    air: false,\n\n    // formatting\n    formatting: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n    formattingAdd: false,\n    formattingHide: false,\n\n    // buttons\n    buttons: ['html', 'format', 'bold', 'italic', 'deleted', 'lists', 'image', 'file', 'link'],\n    // + 'line', 'redo', 'undo', 'underline', 'ol', 'ul', 'indent', 'outdent'\n    buttonsTextLabeled: false,\n    buttonsAdd: [],\n    buttonsAddFirst: [],\n    buttonsAddAfter: false,\n    buttonsAddBefore: false,\n    buttonsHide: [],\n    buttonsHideOnMobile: [],\n\n    // image\n    imageUpload: false,\n    imageUploadParam: 'file',\n    imageData: false,\n    imageEditable: true,\n    imageCaption: true,\n    imageLink: true,\n    imagePosition: false,\n    imageResizable: false,\n    imageFloatMargin: '10px',\n    imageFigure: true,\n    imageObserve: true,\n\n    // file\n    fileUpload: false,\n    fileUploadParam: 'file',\n    fileData: false,\n    fileAttachment: false,\n\n    // upload opts\n    uploadData: false,\n    dragUpload: true,\n    multipleUpload: true,\n    clipboardUpload: true,\n    uploadBase64: false,\n\n    // link\n    linkTarget: false,\n    linkTitle: false,\n    linkNewTab: false,\n    linkNofollow: false,\n    linkSize: 30,\n    linkValidation: true,\n\n    // clean\n    cleanOnEnter: true,\n    cleanInlineOnEnter: false,\n    paragraphize: true,\n    removeScript: true,\n    removeNewLines: false,\n    removeComments: true,\n    replaceTags: {\n        'b': 'strong',\n        'i': 'em',\n        'strike': 'del'\n    },\n\n    // paste\n    pastePlainText: false,\n    pasteLinkTarget: false,\n    pasteImages: true,\n    pasteLinks: true,\n    pasteClean: true,\n    pasteKeepStyle: [],\n    pasteKeepClass: [],\n    pasteKeepAttrs: ['td', 'th'],\n    pasteBlockTags: ['pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'table', 'tbody', 'thead', 'tfoot', 'th', 'tr', 'td', 'ul', 'ol', 'li', 'blockquote', 'p', 'figure', 'figcaption'],\n    pasteInlineTags: ['a', 'img', 'br', 'strong', 'ins', 'code', 'del', 'span', 'samp', 'kbd', 'sup', 'sub', 'mark', 'var', 'cite', 'small', 'b', 'u', 'em', 'i', 'abbr'],\n\n    // active buttons\n    activeButtons: {\n        b: 'bold',\n        strong: 'bold',\n        i: 'italic',\n        em: 'italic',\n        del: 'deleted',\n        strike: 'deleted',\n        u: 'underline'\n    },\n    activeButtonsAdd: {},\n    activeButtonsObservers: {},\n\n    // autoparser\n    autoparse: true,\n    autoparseStart: true,\n    autoparsePaste: true,\n    autoparseLinks: true,\n    autoparseImages: true,\n    autoparseVideo: true,\n\n    // shortcodes\n    shortcodes: {\n        'p.': { format: 'p' },\n        'quote.': { format: 'blockquote' },\n        'pre.': { format: 'pre' },\n        'h1.': { format: 'h1' },\n        'h2.': { format: 'h2' },\n        'h3.': { format: 'h3' },\n        'h4.': { format: 'h4' },\n        'h5.': { format: 'h5' },\n        'h6.': { format: 'h6' },\n        //'1.': { format: 'ol' },\n        '*.': { format: 'ul' }\n    },\n    shortcodesAdd: false, // object\n\n    // shortcuts\n    shortcuts: {\n        'ctrl+shift+m, meta+shift+m': { api: 'module.inline.clearformat' },\n        'ctrl+b, meta+b': { api: 'module.inline.format', args: 'b' },\n        'ctrl+i, meta+i': { api: 'module.inline.format', args: 'i' },\n        'ctrl+u, meta+u': { api: 'module.inline.format', args: 'u' },\n        'ctrl+h, meta+h': { api: 'module.inline.format', args: 'sup' },\n        'ctrl+l, meta+l': { api: 'module.inline.format', args: 'sub' },\n        'ctrl+k, meta+k': { api: 'module.link.open' },\n        'ctrl+alt+0, meta+alt+0': { api: 'module.block.format', args: 'p' },\n        'ctrl+alt+1, meta+alt+1': { api: 'module.block.format', args: 'h1' },\n        'ctrl+alt+2, meta+alt+2': { api: 'module.block.format', args: 'h2' },\n        'ctrl+alt+3, meta+alt+3': { api: 'module.block.format', args: 'h3' },\n        'ctrl+alt+4, meta+alt+4': { api: 'module.block.format', args: 'h4' },\n        'ctrl+alt+5, meta+alt+5': { api: 'module.block.format', args: 'h5' },\n        'ctrl+alt+6, meta+alt+6': { api: 'module.block.format', args: 'h6' },\n        'ctrl+shift+7, meta+shift+7': { api: 'module.list.toggle', args: 'ol' },\n        'ctrl+shift+8, meta+shift+8': { api: 'module.list.toggle', args: 'ul' }\n    },\n    shortcutsAdd: false, // object\n\n    // misc\n    grammarly: true,\n    notranslate: false,\n\n    // private\n    bufferLimit: 100,\n    emptyHtml: '<p></p>',\n    markerChar: '\\ufeff',\n    imageTypes: ['image/png', 'image/jpeg', 'image/gif'],\n    imageAttrs: ['alt', 'title', 'src', 'class', 'width', 'height', 'srcset'],\n    inlineTags: ['a', 'span', 'strong', 'strike', 'b', 'u', 'em', 'i', 'code', 'del', 'ins', 'samp', 'kbd', 'sup', 'sub', 'mark', 'var', 'cite', 'small', 'abbr'],\n    blockTags: ['pre', 'ul', 'ol', 'li', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',  'dl', 'dt', 'dd', 'div', 'table', 'tbody', 'thead', 'tfoot', 'tr', 'th', 'td', 'blockquote', 'output', 'figcaption', 'figure', 'address', 'section', 'header', 'footer', 'aside', 'article', 'iframe'],\n    regex: {\n        youtube: /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/gi,\n        vimeo: /(http|https)?:\\/\\/(?:www.|player.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_-]+)?/gi,\n        imageurl: /((https?|www)[^\\s]+\\.)(jpe?g|png|gif)(\\?[^\\s-]+)?/gi,\n        url: /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/gi\n    },\n    input: true,\n    zindex: false,\n    modes: {\n        \"inline\": {\n            pastePlainText: true,\n            pasteImages: false,\n            enterKey: false,\n            toolbar: false,\n            autoparse: false,\n            source: false,\n            showSource: false,\n            styles: false,\n            air: false\n        },\n        \"original\": {\n            styles: false\n        }\n    }\n};\n$R.lang['en'] = {\n    \"format\": \"Format\",\n    \"image\": \"Image\",\n    \"file\": \"File\",\n    \"link\": \"Link\",\n    \"bold\": \"Bold\",\n    \"italic\": \"Italic\",\n    \"deleted\": \"Strikethrough\",\n    \"underline\": \"Underline\",\n    \"superscript\": \"Superscript\",\n    \"subscript\": \"Subscript\",\n    \"bold-abbr\": \"B\",\n    \"italic-abbr\": \"I\",\n    \"deleted-abbr\": \"S\",\n    \"underline-abbr\": \"U\",\n    \"superscript-abbr\": \"Sup\",\n    \"subscript-abbr\": \"Sub\",\n    \"lists\": \"Lists\",\n    \"link-insert\": \"Insert Link\",\n    \"link-edit\": \"Edit Link\",\n    \"link-in-new-tab\": \"Open link in new tab\",\n    \"unlink\": \"Unlink\",\n    \"cancel\": \"Cancel\",\n    \"close\": \"Close\",\n    \"insert\": \"Insert\",\n    \"save\": \"Save\",\n    \"delete\": \"Delete\",\n    \"text\": \"Text\",\n    \"edit\": \"Edit\",\n    \"title\": \"Alt\",\n    \"paragraph\": \"Normal text\",\n    \"quote\": \"Quote\",\n    \"code\": \"Code\",\n    \"heading1\": \"Heading 1\",\n    \"heading2\": \"Heading 2\",\n    \"heading3\": \"Heading 3\",\n    \"heading4\": \"Heading 4\",\n    \"heading5\": \"Heading 5\",\n    \"heading6\": \"Heading 6\",\n    \"filename\": \"Name\",\n    \"optional\": \"optional\",\n    \"unorderedlist\": \"Unordered List\",\n    \"orderedlist\": \"Ordered List\",\n    \"outdent\": \"Outdent\",\n    \"indent\": \"Indent\",\n    \"horizontalrule\": \"Line\",\n    \"upload\": \"Upload\",\n    \"upload-label\": \"Drop files here or click to upload\",\n    \"accessibility-help-label\": \"Rich text editor\",\n    \"caption\": \"Caption\",\n    \"bulletslist\": \"Bullets\",\n    \"numberslist\": \"Numbers\",\n    \"image-position\": \"Position\",\n    \"none\": \"None\",\n    \"left\": \"Left\",\n    \"right\": \"Right\",\n    \"center\": \"Center\",\n    \"undo\": \"Undo\",\n    \"redo\": \"Redo\"\n};\n$R.buttons = {\n    html: {\n        title: 'HTML',\n        icon: true,\n        api: 'module.source.toggle'\n    },\n    undo: {\n        title: '## undo ##',\n        icon: true,\n        api: 'module.buffer.undo'\n    },\n    redo: {\n        title: '## redo ##',\n        icon: true,\n        api: 'module.buffer.redo'\n    },\n    format: {\n        title: '## format ##',\n        icon: true,\n        dropdown: {\n            p: {\n                title: '## paragraph ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'p'\n                }\n            },\n            blockquote: {\n                title: '## quote ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'blockquote'\n                }\n            },\n            pre: {\n                title: '## code ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'pre'\n                }\n            },\n            h1: {\n                title: '## heading1 ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'h1'\n                }\n            },\n            h2: {\n                title: '## heading2 ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'h2'\n                }\n            },\n            h3: {\n                title: '## heading3 ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'h3'\n                }\n            },\n            h4: {\n                title: '## heading4 ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'h4'\n                }\n            },\n            h5: {\n                title: '## heading5 ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'h5'\n                }\n            },\n            h6: {\n                title: '## heading6 ##',\n                api: 'module.block.format',\n                args: {\n                    tag: 'h6'\n                }\n            }\n        }\n    },\n    bold: {\n        title: '## bold-abbr ##',\n        icon: true,\n        tooltip: '## bold ##',\n        api: 'module.inline.format',\n        args: {\n            tag: 'b'\n        }\n    },\n    italic: {\n        title: '## italic-abbr ##',\n        icon: true,\n        tooltip: '## italic ##',\n        api: 'module.inline.format',\n        args: {\n            tag: 'i'\n        }\n    },\n    deleted: {\n        title: '## deleted-abbr ##',\n        icon: true,\n        tooltip: '## deleted ##',\n        api: 'module.inline.format',\n        args: {\n            tag: 'del'\n        }\n    },\n    underline: {\n        title: '## underline-abbr ##',\n        icon: true,\n        tooltip: '## underline ##',\n        api: 'module.inline.format',\n        args: {\n            tag: 'u'\n        }\n    },\n    sup: {\n        title: '## superscript-abbr ##',\n        icon: true,\n        tooltip: '## superscript ##',\n        api: 'module.inline.format',\n        args: {\n            tag: 'sup'\n        }\n    },\n    sub: {\n        title: '## subscript-abbr ##',\n        icon: true,\n        tooltip: '## subscript ##',\n        api: 'module.inline.format',\n        args: {\n            tag: 'sub'\n        }\n    },\n    lists: {\n        title: '## lists ##',\n        icon: true,\n        observe: 'list',\n        dropdown: {\n            observe: 'list',\n            unorderedlist: {\n                title: '&bull; ## unorderedlist ##',\n                api: 'module.list.toggle',\n                args: 'ul'\n            },\n            orderedlist: {\n                title: '1. ## orderedlist ##',\n                api: 'module.list.toggle',\n                args: 'ol'\n            },\n            outdent: {\n                title: '< ## outdent ##',\n                api: 'module.list.outdent'\n            },\n            indent: {\n                title: '> ## indent ##',\n                api: 'module.list.indent'\n            }\n        }\n    },\n    ul: {\n        title: '&bull; ## bulletslist ##',\n        icon: true,\n        api: 'module.list.toggle',\n        observe: 'list',\n        args: 'ul'\n    },\n    ol: {\n        title: '1. ## numberslist ##',\n        icon: true,\n        api: 'module.list.toggle',\n        observe: 'list',\n        args: 'ol'\n    },\n    outdent: {\n        title: '## outdent ##',\n        icon: true,\n        api: 'module.list.outdent',\n        observe: 'list'\n    },\n    indent: {\n        title: '## indent ##',\n        icon: true,\n        api: 'module.list.indent',\n        observe: 'list'\n    },\n    image: {\n        title: '## image ##',\n        icon: true,\n        api: 'module.image.open'\n    },\n    file: {\n        title: '## file ##',\n        icon: true,\n        api: 'module.file.open'\n    },\n    link: {\n        title: '## link ##',\n        icon: true,\n        observe: 'link',\n        dropdown: {\n            observe: 'link',\n            link: {\n                title: '## link-insert ##',\n                api: 'module.link.open'\n            },\n            unlink: {\n                title: '## unlink ##',\n                api: 'module.link.unlink'\n            }\n        }\n    },\n    line: {\n        title: '## horizontalrule ##',\n        icon: true,\n        api: 'module.line.insert'\n    }\n};\nvar App = function(element, options, uuid)\n{\n    this.module = {};\n    this.plugin = {};\n    this.instances = {};\n\n    // start/stop\n    this.started = false;\n    this.stopped = false;\n\n    // environment\n    this.uuid = uuid;\n    this.rootElement = element;\n    this.rootOpts = options;\n    this.dragInside = false;\n    this.dragComponentInside = false;\n    this.keycodes = $R.keycodes;\n    this.namespace = 'redactor';\n    this.$win = $R.dom(window);\n    this.$doc = $R.dom(document);\n    this.$body = $R.dom('body');\n    this.editorReadOnly = false;\n\n    // core services\n    this.opts = $R.create('service.options', options, element);\n    this.lang = $R.create('service.lang', this);\n\n    // build\n    this.buildServices();\n    this.buildModules();\n    this.buildPlugins();\n\n    // start\n    this.start();\n};\n\nApp.prototype = {\n    start: function()\n    {\n        // start\n        this.stopped = false;\n        this.broadcast('start');\n        this.broadcast('startcode');\n\n        if (this.opts.clickToEdit)\n        {\n            this.broadcast('startclicktoedit');\n        }\n        else\n        {\n            this.broadcast('enable');\n            if (this.opts.showSource) this.broadcast('startcodeshow');\n            this.broadcast('enablefocus');\n        }\n\n        // started\n        this.broadcast('started');\n        this.started = true;\n    },\n    stop: function()\n    {\n        this.started = false;\n        this.stopped = true;\n\n        this.broadcast('stop');\n        this.broadcast('disable');\n        this.broadcast('stopped');\n    },\n\n    // started & stopped\n    isStarted: function()\n    {\n        return this.started;\n    },\n    isStopped: function()\n    {\n        return this.stopped;\n    },\n\n    // build\n    buildServices: function()\n    {\n        var core = ['options', 'lang'];\n        var bindable = ['uuid', 'keycodes', 'opts', 'lang', '$win', '$doc', '$body'];\n        var services = [];\n        for (var name in $R.services)\n        {\n            if (core.indexOf(name) === -1)\n            {\n                this[name] = $R.create('service.' + name, this);\n                services.push(name);\n                bindable.push(name);\n            }\n        }\n\n        // binding\n        for (var i = 0; i < services.length; i++)\n        {\n            var service = services[i];\n            for (var z = 0; z < bindable.length; z++)\n            {\n                var inj = bindable[z];\n                if (service !== inj)\n                {\n                    this[service][inj] = this[inj];\n                }\n            }\n        }\n    },\n    buildModules: function()\n    {\n        for (var name in $R.modules)\n        {\n            this.module[name] = $R.create('module.' + name, this);\n            this.instances[name] = this.module[name];\n        }\n    },\n    buildPlugins: function()\n    {\n        var plugins = this.opts.plugins;\n        for (var i = 0; i < plugins.length; i++)\n        {\n            var name = plugins[i];\n            if (typeof $R.plugins[name] !== 'undefined')\n            {\n                this.plugin[name] = $R.create('plugin.' + name, this);\n                this.instances[name] = this.plugin[name];\n            }\n        }\n    },\n\n    // draginside\n    isDragInside: function()\n    {\n        return this.dragInside;\n    },\n    setDragInside: function(dragInside)\n    {\n        this.dragInside = dragInside;\n    },\n    isDragComponentInside: function()\n    {\n        return this.dragComponentInside;\n    },\n    setDragComponentInside: function(dragInside)\n    {\n        this.dragComponentInside = dragInside;\n    },\n    getDragComponentInside: function()\n    {\n        return this.dragComponentInside;\n    },\n\n    // readonly\n    isReadOnly: function()\n    {\n        return this.editorReadOnly;\n    },\n    enableReadOnly: function()\n    {\n        this.editorReadOnly = true;\n        this.broadcast('enablereadonly');\n        this.component.clearActive();\n        this.toolbar.disableButtons();\n    },\n    disableReadOnly: function()\n    {\n        this.editorReadOnly = false;\n        this.broadcast('disablereadonly');\n        this.toolbar.enableButtons();\n    },\n\n    // messaging\n    callMessageHandler: function(instance, name, args)\n    {\n        var arr = name.split('.');\n        if (arr.length === 1)\n        {\n            if (typeof instance['on' + name] === 'function')\n            {\n                instance['on' + name].apply(instance, args);\n            }\n        }\n        else\n        {\n            arr[0] = 'on' + arr[0];\n\n            var func = this.utils.checkProperty(instance, arr);\n            if (typeof func === 'function')\n            {\n                func.apply(instance, args);\n            }\n        }\n    },\n    broadcast: function(name)\n    {\n        var args = [].slice.call(arguments, 1);\n        for (var moduleName in this.instances)\n        {\n            this.callMessageHandler(this.instances[moduleName], name, args);\n        }\n\n        // callback\n        return this.callback.trigger(name, args);\n    },\n\n    // callback\n    on: function(name, func)\n    {\n        this.callback.add(name, func);\n    },\n    off: function(name, func)\n    {\n        this.callback.remove(name, func);\n    },\n\n    // api\n    api: function(name)\n    {\n        if (!this.isStarted() && name !== 'start') return;\n        if (this.isReadOnly() && name !== 'disableReadOnly') return;\n\n        this.broadcast('state');\n\n        var args = [].slice.call(arguments, 1);\n        var arr = name.split('.');\n\n        var isApp = (arr.length === 1);\n        var isCallback = (arr[0] === 'on' || arr[0] === 'off');\n        var isService = (!isCallback && arr.length === 2);\n        var isPlugin = (arr[0] === 'plugin');\n        var isModule = (arr[0] === 'module');\n\n        // app\n        if (isApp)\n        {\n            if (typeof this[arr[0]] === 'function')\n            {\n                return this.callInstanceMethod(this, arr[0], args);\n            }\n        }\n        // callback\n        else if (isCallback)\n        {\n            return (arr[0] === 'on') ? this.on(arr[1], args[0]) : this.off(arr[1], args[0] || undefined);\n        }\n        // service\n        else if (isService)\n        {\n            if (this.isInstanceExists(this, arr[0]))\n            {\n                return this.callInstanceMethod(this[arr[0]], arr[1], args);\n            }\n            else\n            {\n                $R.error(new Error('Service \"' + arr[0] + '\" not found'));\n            }\n        }\n        // plugin\n        else if (isPlugin)\n        {\n            if (this.isInstanceExists(this.plugin, arr[1]))\n            {\n                return this.callInstanceMethod(this.plugin[arr[1]], arr[2], args);\n            }\n            else\n            {\n                $R.error(new Error('Plugin \"' + arr[1] + '\" not found'));\n            }\n        }\n        // module\n        else if (isModule)\n        {\n            if (this.isInstanceExists(this.module, arr[1]))\n            {\n                return this.callInstanceMethod(this.module[arr[1]], arr[2], args);\n            }\n            else\n            {\n                $R.error(new Error('Module \"' + arr[1] + '\" not found'));\n            }\n        }\n\n    },\n    isInstanceExists: function(obj, name)\n    {\n        return (typeof obj[name] !== 'undefined');\n    },\n    callInstanceMethod: function(instance, method, args)\n    {\n        if (typeof instance[method] === 'function')\n        {\n            return instance[method].apply(instance, args);\n        }\n    }\n};\n$R.add('mixin', 'formatter', {\n\n    // public\n    buildArgs: function(args)\n    {\n        this.args = {\n            'class': args['class'] || false,\n            'style': args['style'] || false,\n            'attr': args['attr'] || false\n        };\n\n        if (!this.args['class'] && !this.args['style'] && !this.args['attr'])\n        {\n            this.args = false;\n        }\n    },\n    applyArgs: function(nodes, selection)\n    {\n        if (this.args)\n        {\n            nodes = this[this.type](this.args, false, nodes, selection);\n        }\n        else\n        {\n            nodes = this._clearAll(nodes, selection);\n        }\n\n        return nodes;\n    },\n    clearClass: function(tags, nodes)\n    {\n        this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags, true);\n        $elements.removeAttr('class');\n\n        nodes = this._unwrapSpanWithoutAttr($elements.getAll());\n\n        this.selection.restore();\n\n        return nodes;\n    },\n    clearStyle: function(tags, nodes)\n    {\n        this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags, true);\n        $elements.removeAttr('style');\n\n        nodes = this._unwrapSpanWithoutAttr($elements.getAll());\n\n        this.selection.restore();\n\n        return nodes;\n    },\n    clearAttr: function(tags, nodes)\n    {\n        this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags, true);\n        this._removeAllAttr($elements);\n\n        nodes = this._unwrapSpanWithoutAttr($elements.getAll());\n\n        this.selection.restore();\n\n        return nodes;\n    },\n    set: function(args, tags, nodes, selection)\n    {\n        if (selection !== false) this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags);\n\n        if (args['class'])\n        {\n            $elements.removeAttr('class');\n            $elements.addClass(args['class']);\n        }\n\n        if (args['style'])\n        {\n            $elements.removeAttr('style');\n            $elements.css(args['style']);\n            $elements.each(function(node)\n            {\n                var $node = $R.dom(node);\n                $node.attr('data-redactor-style-cache', $node.attr('style'));\n            });\n        }\n\n        if (args['attr'])\n        {\n            this._removeAllAttr($elements);\n            $elements.attr(args['attr']);\n        }\n\n        if (selection !== false) this.selection.restore();\n\n        return $elements.getAll();\n    },\n    toggle: function(args, tags, nodes, selection)\n    {\n        if (selection !== false) this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags);\n\n        if (args['class'])\n        {\n            $elements.toggleClass(args['class']);\n            $elements.each(function(node)\n            {\n                if (node.className === '') node.removeAttribute('class');\n            });\n        }\n\n        var params;\n        if (args['style'])\n        {\n            params = args['style'];\n            $elements.each(function(node)\n            {\n                var $node = $R.dom(node);\n                for (var key in params)\n                {\n                    var newVal = params[key];\n                    var oldVal = $node.css(key);\n\n                    oldVal = (this.utils.isRgb(oldVal)) ? this.utils.rgb2hex(oldVal) : oldVal.replace(/\"/g, '');\n                    newVal = (this.utils.isRgb(newVal)) ? this.utils.rgb2hex(newVal) : newVal.replace(/\"/g, '');\n\n                    oldVal = this.utils.hex2long(oldVal);\n                    newVal = this.utils.hex2long(newVal);\n\n                    var compareNew = (typeof newVal === 'string') ? newVal.toLowerCase() : newVal;\n                    var compareOld = (typeof oldVal === 'string') ? oldVal.toLowerCase() : oldVal;\n\n                    if (compareNew === compareOld) $node.css(key, '');\n                    else $node.css(key, newVal);\n                }\n\n                this._convertStyleQuotes($node);\n                if (this.utils.removeEmptyAttr(node, 'style'))\n                {\n                    $node.removeAttr('data-redactor-style-cache');\n                }\n                else\n                {\n                    $node.attr('data-redactor-style-cache', $node.attr('style'));\n                }\n\n            }.bind(this));\n        }\n\n        if (args['attr'])\n        {\n            params = args['attr'];\n            $elements.each(function(node)\n            {\n                var $node = $R.dom(node);\n                for (var key in params)\n                {\n                    if ($node.attr(key)) $node.removeAttr(key);\n                    else $node.attr(key, params[key]);\n                }\n            });\n\n        }\n\n        if (selection !== false) this.selection.restore();\n\n        return $elements.getAll();\n    },\n    add: function(args, tags, nodes, selection)\n    {\n        if (selection !== false) this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags);\n\n        if (args['class'])\n        {\n            $elements.addClass(args['class']);\n        }\n\n        if (args['style'])\n        {\n            var params = args['style'];\n            $elements.each(function(node)\n            {\n                var $node = $R.dom(node);\n                $node.css(params);\n                $node.attr('data-redactor-style-cache', $node.attr('style'));\n\n                this._convertStyleQuotes($node);\n\n            }.bind(this));\n        }\n\n        if (args['attr'])\n        {\n            $elements.attr(args['attr']);\n        }\n\n        if (selection !== false) this.selection.restore();\n\n        return $elements.getAll();\n    },\n    remove: function(args, tags, nodes, selection)\n    {\n        if (selection !== false) this.selection.save();\n\n        var $elements = (nodes) ? $R.dom(nodes) : this.getElements(tags);\n\n        if (args['class'])\n        {\n            $elements.removeClass(args['class']);\n            $elements.each(function(node)\n            {\n                if (node.className === '') node.removeAttribute('class');\n            });\n        }\n\n        if (args['style'])\n        {\n            var name = args['style'];\n            $elements.each(function(node)\n            {\n                var $node = $R.dom(node);\n                $node.css(name, '');\n\n                if (this.utils.removeEmptyAttr(node, 'style'))\n                {\n                    $node.removeAttr('data-redactor-style-cache');\n                }\n                else\n                {\n                    $node.attr('data-redactor-style-cache', $node.attr('style'));\n                }\n\n            }.bind(this));\n        }\n\n        if (args['attr'])\n        {\n            $elements.removeAttr(args['attr']);\n        }\n\n        nodes = this._unwrapSpanWithoutAttr($elements.getAll());\n\n        if (selection !== false) this.selection.restore();\n\n        return nodes;\n    },\n\n    // private\n    _removeAllAttr: function($elements)\n    {\n        $elements.each(function(node)\n        {\n            for (var i = node.attributes.length; i-->0;)\n            {\n                var nodeAttr = node.attributes[i];\n                var name = nodeAttr.name;\n                if (name !== 'style' && name !== 'class')\n                {\n                    node.removeAttributeNode(nodeAttr);\n                }\n            }\n        });\n    },\n    _convertStyleQuotes: function($node)\n    {\n        var style = $node.attr('style');\n        if (style) $node.attr('style', style.replace(/\"/g, '\\''));\n    },\n    _clearAll: function(nodes, selection)\n    {\n        if (selection !== false) this.selection.save();\n\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var node = nodes[i];\n            while (node.attributes.length > 0)\n            {\n                node.removeAttribute(node.attributes[0].name);\n            }\n        }\n\n        nodes = this._unwrapSpanWithoutAttr(nodes);\n\n        if (selection !== false) this.selection.restore();\n\n        return nodes;\n    },\n    _unwrapSpanWithoutAttr: function(nodes)\n    {\n        var finalNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var node = nodes[i];\n            var len = node.attributes.length;\n            if (len <= 0 && node.nodeType !== 3 && node.tagName === 'SPAN')\n            {\n                $R.dom(node).unwrap();\n            }\n            else\n            {\n                finalNodes.push(node);\n            }\n        }\n\n        return finalNodes;\n    }\n});\n$R.add('mixin', 'dom', $R.Dom.prototype);\n$R.add('mixin', 'component', {\n    get cmnt()\n    {\n        return true;\n    }\n});\n$R.add('service', 'options', {\n    init: function(options, element)\n    {\n        var $el = $R.dom(element);\n        var opts = $R.extend({}, $R.opts, (element) ? $el.data() : {}, $R.options);\n        opts = $R.extend(true, opts, options);\n\n        return opts;\n    }\n});\n$R.add('service', 'lang', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n\n        // build\n        this.vars = this._build(this.opts.lang);\n    },\n\n    // public\n    rebuild: function(lang)\n    {\n        this.opts.lang = lang;\n        this.vars = this._build(lang);\n    },\n    extend: function(obj)\n    {\n        this.vars = $R.extend(this.vars, obj);\n    },\n    parse: function(str)\n    {\n        if (str === undefined)\n        {\n            return '';\n        }\n\n        var matches = str.match(/## (.*?) ##/g);\n        if (matches)\n        {\n            for (var i = 0; i < matches.length; i++)\n            {\n                var key = matches[i].replace(/^##\\s/g, '').replace(/\\s##$/g, '');\n                str = str.replace(matches[i], this.get(key));\n            }\n        }\n\n        return str;\n    },\n    get: function(name)\n    {\n        var str = '';\n        if (typeof this.vars[name] !== 'undefined')\n        {\n            str = this.vars[name];\n        }\n        else if (this.opts.lang !== 'en' && typeof $R.lang['en'][name] !== 'undefined')\n        {\n            str = $R.lang['en'][name];\n        }\n\n        return str;\n    },\n\n    // private\n    _build: function(lang)\n    {\n        var vars = $R.lang['en'];\n        if (lang !== 'en')\n        {\n            vars = ($R.lang[lang] !== undefined) ? $R.lang[lang] : vars;\n        }\n\n        return vars;\n    }\n});\n$R.add('service', 'callback', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n\n        // local\n        this.callbacks = {};\n\n        // build\n        if (this.opts.callbacks)\n        {\n            this._set(this.opts.callbacks, '');\n        }\n    },\n    stop: function()\n    {\n        this.callbacks = {};\n    },\n    add: function(name, handler)\n    {\n        if (!this.callbacks[name]) this.callbacks[name] = [];\n        this.callbacks[name].push(handler);\n    },\n    remove: function(name, handler)\n    {\n        if (handler === undefined)\n        {\n            delete this.callbacks[name];\n        }\n        else\n        {\n            for (var i = 0; i < this.callbacks[name].length; i++)\n            {\n                this.callbacks[name].splice(i, 1);\n            }\n\n            if (Object.keys(this.callbacks[name]).length === 0) delete this.callbacks[name];\n        }\n    },\n    trigger: function(name, args)\n    {\n        var value = this._loop(name, args, this.callbacks);\n        return (typeof value === 'undefined' && args && args[0] !== false) ? args[0] : value;\n    },\n\n    // private\n    _set: function(obj, name)\n    {\n        for (var key in obj)\n        {\n            var path = (name === '') ? key : name + '.' + key;\n            if (typeof obj[key] === 'object')\n            {\n                this._set(obj[key], path);\n            }\n            else\n            {\n                this.callbacks[path] = [];\n                this.callbacks[path].push(obj[key]);\n            }\n        }\n    },\n    _loop: function(name, args, obj)\n    {\n        var value;\n        for (var key in obj)\n        {\n            if (name === key)\n            {\n                for (var i = 0; i < obj[key].length; i++)\n                {\n                    value = obj[key][i].apply(this.app, args);\n                }\n            }\n        }\n\n        return value;\n    }\n});\n$R.add('service', 'animate', {\n    init: function(app)\n    {\n        this.animationOpt = app.opts.animation;\n    },\n    start: function(element, animation, options, callback)\n    {\n        var defaults = {\n            duration: false,\n            iterate: false,\n            delay: false,\n            timing: false,\n            prefix: 'redactor-'\n        };\n\n        defaults = (typeof options === 'function') ? defaults : $R.extend(defaults, options);\n        callback = (typeof options === 'function') ? options : callback;\n\n        // play\n        return new $R.AnimatePlay(element, animation, defaults, callback, this.animationOpt);\n    },\n    stop: function(element)\n    {\n        this.$el = $R.dom(element);\n        this.$el.removeClass('redactor-animated');\n\n        var effect = this.$el.attr('redactor-animate-effect');\n        this.$el.removeClass(effect);\n\n        this.$el.removeAttr('redactor-animate-effect');\n        var hide = this.$el.attr('redactor-animate-hide');\n        if (hide)\n        {\n            this.$el.addClass(hide).removeAttr('redactor-animate-hide');\n        }\n\n        this.$el.off('animationend webkitAnimationEnd');\n    }\n});\n\n$R.AnimatePlay = function(element, animation, defaults, callback, animationOpt)\n{\n    this.hidableEffects = ['fadeOut', 'flipOut', 'slideUp', 'zoomOut', 'slideOutUp', 'slideOutRight', 'slideOutLeft'];\n    this.prefixes = ['', '-webkit-'];\n\n    this.$el = $R.dom(element);\n    this.$body = $R.dom('body');\n    this.callback = callback;\n    this.animation = (!animationOpt) ? this.buildAnimationOff(animation) : animation;\n    this.defaults = defaults;\n\n    if (this.animation === 'slideUp')\n    {\n        this.$el.height(this.$el.height());\n    }\n\n    // animate\n    return (this.isInanimate()) ? this.inanimate() : this.animate();\n};\n\n$R.AnimatePlay.prototype = {\n    buildAnimationOff: function(animation)\n    {\n        return (this.isHidable(animation)) ? 'hide' : 'show';\n    },\n    buildHideClass: function()\n    {\n        return 'redactor-animate-hide';\n    },\n    isInanimate: function()\n    {\n        return (this.animation === 'show' || this.animation === 'hide');\n    },\n    isAnimated: function()\n    {\n        return this.$el.hasClass('redactor-animated');\n    },\n    isHidable: function(effect)\n    {\n        return (this.hidableEffects.indexOf(effect) !== -1);\n    },\n    inanimate: function()\n    {\n        this.defaults.timing = 'linear';\n\n        var hide;\n        if (this.animation === 'show')\n        {\n            hide = this.buildHideClass();\n            this.$el.attr('redactor-animate-hide', hide);\n            this.$el.removeClass(hide);\n        }\n        else\n        {\n            hide = this.$el.attr('redactor-animate-hide');\n            this.$el.addClass(hide).removeAttr('redactor-animate-hide');\n        }\n\n        if (typeof this.callback === 'function') this.callback(this);\n\n        return this;\n    },\n    animate: function()\n    {\n        var delay = (this.defaults.delay) ? this.defaults.delay : 0;\n        setTimeout(function()\n        {\n            this.$body.addClass('no-scroll-x');\n            this.$el.addClass('redactor-animated');\n            if (!this.$el.attr('redactor-animate-hide'))\n            {\n                var hide = this.buildHideClass();\n                this.$el.attr('redactor-animate-hide', hide);\n                this.$el.removeClass(hide);\n            }\n\n            this.$el.addClass(this.defaults.prefix + this.animation);\n            this.$el.attr('redactor-animate-effect', this.defaults.prefix + this.animation);\n\n            this.set(this.defaults.duration + 's', this.defaults.iterate, this.defaults.timing);\n            this.complete();\n\n        }.bind(this), delay * 1000);\n\n        return this;\n    },\n    set: function(duration, iterate, timing)\n    {\n        var len = this.prefixes.length;\n\n        while (len--)\n        {\n            if (duration !== false || duration === '') this.$el.css(this.prefixes[len] + 'animation-duration', duration);\n            if (iterate !== false || iterate === '') this.$el.css(this.prefixes[len] + 'animation-iteration-count', iterate);\n            if (timing !== false || timing === '') this.$el.css(this.prefixes[len] + 'animation-timing-function', timing);\n        }\n    },\n    clean: function()\n    {\n        this.$body.removeClass('no-scroll-x');\n        this.$el.removeClass('redactor-animated');\n        this.$el.removeClass(this.defaults.prefix + this.animation);\n        this.$el.removeAttr('redactor-animate-effect');\n\n        this.set('', '', '');\n    },\n    complete: function()\n    {\n        this.$el.one('animationend webkitAnimationEnd', function()\n        {\n            if (this.$el.hasClass(this.defaults.prefix + this.animation)) this.clean();\n            if (this.isHidable(this.animation))\n            {\n                var hide = this.$el.attr('redactor-animate-hide');\n                this.$el.addClass(hide).removeAttr('redactor-animate-hide');\n            }\n\n            if (this.animation === 'slideUp') this.$el.height('');\n            if (typeof this.callback === 'function') this.callback(this.$el);\n\n        }.bind(this));\n    }\n};\n$R.add('service', 'caret', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n\n    // set\n    setStart: function(el)\n    {\n        this._setCaret('Start', el);\n    },\n    setEnd: function(el)\n    {\n        this._setCaret('End', el);\n    },\n    setBefore: function(el)\n    {\n        this._setCaret('Before', el);\n    },\n    setAfter: function(el)\n    {\n        this._setCaret('After', el);\n    },\n\n    // is\n    isStart: function(el)\n    {\n        return this._isStartOrEnd(el, 'First');\n    },\n    isEnd: function(el)\n    {\n        return this._isStartOrEnd(el, 'Last');\n    },\n\n    // set side\n    setAtEnd: function(node)\n    {\n        var data = this.inspector.parse(node);\n        var tag = data.getTag();\n        var range = document.createRange();\n        if (this._isInPage(node))\n        {\n            if (tag === 'a')\n            {\n                var textNode = this.utils.createInvisibleChar();\n                $R.dom(node).after(textNode);\n\n                range.selectNodeContents(textNode);\n                range.collapse(true);\n            }\n            else\n            {\n                range.selectNodeContents(node);\n                range.collapse(false);\n            }\n\n            this.selection.setRange(range);\n        }\n    },\n    setAtStart: function(node)\n    {\n\t\tvar range = document.createRange();\n\t\tvar data = this.inspector.parse(node);\n        if (this._isInPage(node))\n        {\n            range.setStart(node, 0);\n            range.collapse(true);\n\n            if (data.isInline() || this.utils.isEmpty(node))\n            {\n                var textNode = this.utils.createInvisibleChar();\n                range.insertNode(textNode);\n                range.selectNodeContents(textNode);\n                range.collapse(false);\n            }\n\n            this.selection.setRange(range);\n        }\n    },\n    setAtBefore: function(node)\n    {\n        var data = this.inspector.parse(node);\n        var range = document.createRange();\n        if (this._isInPage(node))\n        {\n            range.setStartBefore(node);\n            range.collapse(true);\n\n            if (data.isInline())\n            {\n                var textNode = this.utils.createInvisibleChar();\n                node.parentNode.insertBefore(textNode, node);\n                range.selectNodeContents(textNode);\n                range.collapse(false);\n            }\n\n            this.selection.setRange(range);\n        }\n    },\n    setAtAfter: function(node)\n    {\n\n        var range = document.createRange();\n        if (this._isInPage(node))\n        {\n            range.setStartAfter(node);\n            range.collapse(true);\n\n            var textNode = this.utils.createInvisibleChar();\n            range.insertNode(textNode);\n            range.selectNodeContents(textNode);\n            range.collapse(false);\n\n            this.selection.setRange(range);\n        }\n    },\n    setAtPrev: function(node)\n    {\n        var prev = node.previousSibling;\n        if (prev)\n        {\n            prev = (prev.nodeType === 3 && this._isEmptyTextNode(prev)) ? prev.previousElementSibling : prev;\n            if (prev) this.setEnd(prev);\n        }\n    },\n    setAtNext: function(node)\n    {\n        var next = node.nextSibling;\n        if (next)\n        {\n            next = (next.nodeType === 3 && this._isEmptyTextNode(next)) ? next.nextElementSibling : next;\n            if (next) this.setStart(next);\n        }\n    },\n\n    // private\n    _setCaret: function(type, el)\n    {\n        var data = this.inspector.parse(el);\n        var node = data.getNode();\n\n        if (node)\n        {\n            this.component.clearActive();\n            this['_set' + type](node, data, data.getTag());\n        }\n    },\n    _setStart: function(node, data, tag)\n    {\n        // 1. text\n        if (data.isText())\n        {\n            this.editor.focus();\n            return this.setAtStart(node);\n        }\n        // 2. ul, ol\n        else if (tag === 'ul' || tag === 'ol')\n        {\n            node = data.findFirstNode('li');\n\n            var item = this.utils.getFirstElement(node);\n            var dataItem = this.inspector.parse(item);\n            if (item && dataItem.isComponent())\n            {\n                return this.setStart(dataItem.getComponent());\n            }\n        }\n        // 3. dl\n        else if (tag === 'dl')\n        {\n            node = data.findFirstNode('dt');\n        }\n        // 4. br / hr\n        else if (tag === 'br' || tag === 'hr')\n        {\n            return this.setBefore(node);\n        }\n        // 5. th, td\n        else if (tag === 'td' || tag === 'th')\n        {\n            var el = data.getFirstElement(node);\n            if (el)\n            {\n                return this.setStart(el);\n            }\n        }\n        // 6. table\n        else if (tag === 'table' || tag === 'tr')\n        {\n            return this.setStart(data.findFirstNode('th, td'));\n        }\n        // 7. figure code\n        else if (data.isComponentType('code') && !data.isFigcaption())\n        {\n            var code = data.findLastNode('pre, code');\n\n            this.editor.focus();\n            return this.setAtStart(code);\n        }\n        // 8. table component\n        else if (tag === 'figure' && data.isComponentType('table'))\n        {\n            var table = data.getTable();\n            var tableData = this.inspector.parse(table);\n\n            return this.setStart(tableData.findFirstNode('th, td'));\n        }\n        // 9. non editable components\n        else if (!data.isComponentType('table') && data.isComponent() && !data.isFigcaption())\n        {\n            return this.component.setActive(node);\n        }\n\n        this.editor.focus();\n\n        // set\n        if (!this._setInline(node, 'Start'))\n        {\n            this.setAtStart(node);\n        }\n    },\n    _setEnd: function(node, data, tag)\n    {\n        // 1. text\n        if (data.isText())\n        {\n            this.editor.focus();\n            return this.setAtEnd(node);\n        }\n        // 2. ul, ol\n        else if (tag === 'ul' || tag === 'ol')\n        {\n            node = data.findLastNode('li');\n\n            var item = this.utils.getLastElement(node);\n            var dataItem = this.inspector.parse(item);\n            if (item && dataItem.isComponent())\n            {\n                return this.setEnd(dataItem.getComponent());\n            }\n        }\n        // 3. dl\n        else if (tag === 'dl')\n        {\n            node = data.findLastNode('dd');\n        }\n        // 4. br / hr\n        else if (tag === 'br' || tag === 'hr')\n        {\n            return this.setAfter(node);\n        }\n        // 5. th, td\n        else if (tag === 'td' || tag === 'th')\n        {\n            var el = data.getLastElement();\n            if (el)\n            {\n                return this.setEnd(el);\n            }\n        }\n        // 6. table\n        else if (tag === 'table' || tag === 'tr')\n        {\n            return this.setEnd(data.findLastNode('th, td'));\n        }\n        // 7. figure code\n        else if (data.isComponentType('code') && !data.isFigcaption())\n        {\n            var code = data.findLastNode('pre, code');\n\n            this.editor.focus();\n            return this.setAtEnd(code);\n        }\n        // 8. table component\n        else if (tag === 'figure' && data.isComponentType('table'))\n        {\n            var table = data.getTable();\n            var tableData = this.inspector.parse(table);\n\n            return this.setEnd(tableData.findLastNode('th, td'));\n        }\n        // 9. non editable components\n        else if (!data.isComponentType('table') && data.isComponent() && !data.isFigcaption())\n        {\n            return this.component.setActive(node);\n        }\n\n        this.editor.focus();\n\n        // set\n        if (!this._setInline(node, 'End'))\n        {\n            // is element empty\n            if (this.utils.isEmpty(node))\n            {\n                return this.setStart(node);\n            }\n\n            this.setAtEnd(node);\n        }\n    },\n    _setBefore: function(node, data, tag)\n    {\n        // text\n        if (node.nodeType === 3)\n        {\n            return this.setAtBefore(node);\n        }\n        // inline\n        else if (data.isInline())\n        {\n            return this.setAtBefore(node);\n        }\n        // td / th\n        else if (data.isFirstTableCell())\n        {\n            return this.setAtPrev(data.getComponent());\n        }\n        else if (tag === 'td' || tag === 'th')\n        {\n            return this.setAtPrev(node);\n        }\n        // li\n        else if (data.isFirstListItem())\n        {\n            return this.setAtPrev(data.getList());\n        }\n        // figcaption\n        else if (data.isFigcaption())\n        {\n            return this.setStart(data.getComponent());\n        }\n        // component\n        else if (!data.isComponentType('table') && data.isComponent())\n        {\n            return this.setAtPrev(data.getComponent());\n        }\n        // block\n        else if (data.isBlock())\n        {\n            return this.setAtPrev(node);\n        }\n\n        this.editor.focus();\n        this.setAtBefore(node);\n\n    },\n    _setAfter: function(node, data, tag)\n    {\n        // text\n        if (node.nodeType === 3)\n        {\n            return this.setAtAfter(node);\n        }\n        // inline\n        else if (data.isInline())\n        {\n            return this.setAtAfter(node);\n        }\n        // td / th\n        else if (data.isLastTableCell())\n        {\n            return this.setAtNext(data.getComponent());\n        }\n        else if (tag === 'td' || tag === 'th')\n        {\n            return this.setAtNext(node);\n        }\n        // li\n        else if (data.isFirstListItem())\n        {\n            return this.setAtNext(data.getList());\n        }\n        // component\n        else if (!data.isComponentType('table') && data.isComponent())\n        {\n            return this.setAtNext(data.getComponent());\n        }\n        // block\n        else if (data.isBlock())\n        {\n            return this.setAtNext(node);\n        }\n\n        this.editor.focus();\n        this.setAtAfter(node);\n    },\n    _setInline: function(node, type)\n    {\n        // is first element inline (FF only)\n        var inline = this._hasInlineChild(node, (type === 'Start') ? 'first' : 'last');\n        if (inline)\n        {\n            if (type === 'Start')\n            {\n                this.setStart(inline);\n            }\n            else\n            {\n                this.setEnd(inline);\n            }\n\n            return true;\n        }\n    },\n    _isStartOrEnd: function(el, type)\n    {\n        var node = this.utils.getNode(el);\n        if (!node) return false;\n\n        var data = this.inspector.parse(node);\n        node = this._getStartEndNode(node, data, type);\n\n        if (node && (node.nodeType !== 3 && node.tagName !== 'LI'))\n        {\n            var html = (node.nodeType === 3) ? node.textContent : node.innerHTML;\n            html = this.utils.trimSpaces(html);\n            if (html === '') return true;\n        }\n\n        if (!data.isFigcaption() && data.isComponent() && !data.isComponentEditable())\n        {\n            return true;\n        }\n\n        var offset = this.offset.get(node, true);\n        if (offset)\n        {\n            return (type === 'First') ? (offset.start === 0) : (offset.end === this.offset.size(node, true));\n        }\n        else\n        {\n            return false;\n        }\n    },\n    _isInPage: function(node)\n    {\n        if (node && node.nodeType)\n        {\n            return (node === document.body) ? false : document.body.contains(node);\n        }\n        else\n        {\n            return false;\n        }\n    },\n    _hasInlineChild: function(el, pos)\n    {\n        var data = this.inspector.parse(el);\n        var node = (pos === 'first') ? data.getFirstNode() : data.getLastNode();\n        var $node = $R.dom(node);\n\n        if (node && node.nodeType !== 3\n            && this.inspector.isInlineTag(node.tagName)\n            && !$node.hasClass('redactor-component')\n             && !$node.hasClass('non-editable'))\n        {\n            return node;\n        }\n    },\n    _isEmptyTextNode: function(node)\n    {\n        var text = node.textContent.trim().replace(/\\n/, '');\n        text = this.utils.removeInvisibleChars(text);\n\n        return (text === '');\n    },\n    _getStartEndNode: function(node, data, type)\n    {\n        if (data.isFigcaption())\n        {\n            node = data.getFigcaption();\n        }\n        else if (data.isTable())\n        {\n            node = data['find' + type + 'Node']('th, td');\n        }\n        else if (data.isList())\n        {\n            node = data['find' + type + 'Node']('li');\n        }\n        else if (data.isComponentType('code'))\n        {\n            node = data.findLastNode('pre, code');\n        }\n\n        return node;\n    }\n});\nvar containsNode = function containsNode(node) {\n    return document.getSelection().containsNode(node, true);\n};\n\nif (!('containsNode' in Selection.prototype)) {\n    containsNode = containsNodePolyfill;\n}\n\nvar containsNodePolyfill = function polyfill(node) {\n    var selection = document.getSelection();\n    var start = selection.anchorNode.parentNode;\n    var finalnode = selection.focusNode.parentNode;\n    var rectSelection = selection.getRangeAt(0).getBoundingClientRect();\n    var rectBlock = node.getBoundingClientRect();\n\n    if ($R.dom(start).closest(node).length) {\n        return true;\n    }\n\n    if ($R.dom(finalnode).closest(node).length) {\n        return true;\n    }\n\n    if (rectSelection.top < rectBlock.top && rectSelection.height > rectBlock.height) {\n        return true;\n    }\n\n    return false;\n};\n\n\n$R.add('service', 'selection', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    // is\n    is: function()\n    {\n        var sel = this.get();\n        if (sel)\n        {\n            var node = sel.anchorNode;\n            var data = this.inspector.parse(node);\n\n            return (data.isInEditor() || data.isEditor());\n        }\n\n        return false;\n    },\n    isCollapsed: function()\n    {\n        var sel = this.get();\n        var range = this.getRange();\n\n        if (sel && sel.isCollapsed) return true;\n        else if (range && range.toString().length === 0) return true;\n\n        return false;\n    },\n    isBackwards: function()\n    {\n        var backwards = false;\n        var sel = this.get();\n\n        if (sel && !sel.isCollapsed)\n        {\n            var range = document.createRange();\n            range.setStart(sel.anchorNode, sel.anchorOffset);\n            range.setEnd(sel.focusNode, sel.focusOffset);\n            backwards = range.collapsed;\n            range.detach();\n        }\n\n        return backwards;\n    },\n    isIn: function(el)\n    {\n        var node = $R.dom(el).get();\n        var current = this.getCurrent();\n\n        return (current && node) ? node.contains(current) : false;\n    },\n    isText: function()\n    {\n        var sel = this.get();\n        if (sel)\n        {\n            var el = sel.anchorNode;\n            var block = this.getBlock(el);\n            var blocks = this.getBlocks();\n\n            // td, th or hasn't block\n            if ((block && this.inspector.isTableCellTag(block.tagName)) || (block === false && blocks.length === 0))\n            {\n                return true;\n            }\n        }\n\n        return false;\n    },\n    isAll: function(el)\n    {\n        var node = this.utils.getNode(el);\n        if (!node) return false;\n\n        var isEditor = this.editor.isEditor(node);\n        var data = this.inspector.parse(node);\n\n        // component\n        if (!data.isFigcaption() && this.component.isNonEditable(node) && this.component.isActive(node))\n        {\n            return true;\n        }\n\n        if (isEditor)\n        {\n            var $editor = this.editor.getElement();\n            var output = $editor.html().replace(/<p><\\/p>$/i, '');\n            var htmlLen = this.getHtml(false).length;\n            var outputLen = output.length;\n\n            if (htmlLen !== outputLen)\n            {\n                return false;\n            }\n        }\n\n        // editor empty or collapsed\n        if ((isEditor && this.editor.isEmpty()) || this.isCollapsed())\n        {\n            return false;\n        }\n\n        // all\n        var offset = this.offset.get(node, true);\n        var size = this.offset.size(node, true);\n\n        // pre, table, or pre/code in figure\n        if (!isEditor && data.isComponentType('code'))\n        {\n            size = this.getText().trim().length;\n        }\n\n        if (offset && offset.start === 0 && offset.end === size)\n        {\n            return true;\n        }\n\n        return false;\n    },\n\n    // has\n    hasNonEditable: function()\n    {\n        var selected = this.getHtml();\n        var $wrapper = $R.dom('<div>').html(selected);\n\n        return (!this.isCollapsed() && $wrapper.find('.non-editable').length !== 0);\n    },\n\n    // set\n    setRange: function(range)\n    {\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n    },\n    setAll: function(el)\n    {\n        var node = this.utils.getNode(el);\n        if (!node) return;\n\n        var data = this.inspector.parse(node);\n\n        this.component.clearActive();\n\n        this.editor.focus();\n        this.editor.saveScroll();\n        this.editor.disableNonEditables();\n\n        if (node && node.tagName === 'TABLE')\n        {\n            var first = data.findFirstNode('td, th');\n            var last = data.findLastNode('td, th');\n\n            $R.dom(first).prepend(this.marker.build('start'));\n            $R.dom(last).append(this.marker.build('end'));\n\n            this.restoreMarkers();\n        }\n        else if (!data.isFigcaption() && this.component.isNonEditable(node))\n        {\n            this.component.setActive(node);\n        }\n        else\n        {\n            if (data.isComponentType('code'))\n            {\n                node = data.getComponentCodeElement();\n                node.focus();\n            }\n\n            var range = document.createRange();\n            range.selectNodeContents(node);\n\n            this.setRange(range);\n        }\n\n        this.editor.enableNonEditables();\n        this.editor.restoreScroll();\n    },\n\n    // get\n    get: function()\n    {\n        var sel = window.getSelection();\n        return (sel.rangeCount > 0) ? sel : null;\n    },\n    getRange: function()\n    {\n        var sel = this.get();\n        return (sel) ? ((sel.getRangeAt(0)) ? sel.getRangeAt(0) : null) : null;\n    },\n    getTextBeforeCaret: function(num)\n    {\n        num = (typeof num === 'undefined') ? 1 : num;\n\n        var el = this.editor.getElement().get();\n        var range = this.getRange();\n        var text = false;\n        if (range)\n        {\n            range = range.cloneRange();\n            range.collapse(true);\n            range.setStart(el, 0);\n            text = range.toString().slice(-num);\n        }\n\n        return text;\n    },\n    getTextAfterCaret: function(num)\n    {\n        num = (typeof num === 'undefined') ? 1 : num;\n\n        var el = this.editor.getElement().get();\n        var range = this.getRange();\n        var text = false;\n        if (range)\n        {\n            var clonedRange = range.cloneRange();\n            clonedRange.selectNodeContents(el);\n            clonedRange.setStart(range.endContainer, range.endOffset);\n\n            text = clonedRange.toString().slice(0, num);\n        }\n\n        return text;\n    },\n    getPosition: function()\n    {\n        var range = this.getRange();\n        var pos = { top: 0, left: 0, width: 0, height: 0 };\n        if (window.getSelection && range.getBoundingClientRect)\n        {\n            range = range.cloneRange();\n            var offset = (range.startOffset-1);\n            range.setStart(range.startContainer, (offset < 0) ? 0 : offset);\n            var rect = range.getBoundingClientRect();\n            pos = { top: rect.top, left: rect.left, width: (rect.right - rect.left) , height: (rect.bottom - rect.top) };\n        }\n\n        return pos;\n    },\n    getCurrent: function()\n    {\n        var node = false;\n        var sel = this.get();\n        var component = this.component.getActive();\n\n        if (component)\n        {\n            node = component;\n        }\n        else if (sel && this.is())\n        {\n            var data = this.inspector.parse(sel.anchorNode);\n            node = (!data.isEditor()) ? sel.anchorNode : false;\n        }\n\n        return node;\n    },\n    getParent: function()\n    {\n        var node = false;\n        var current = this.getCurrent();\n        if (current)\n        {\n            var parent = current.parentNode;\n            var data = this.inspector.parse(parent);\n\n            node = (!data.isEditor()) ? parent : false;\n        }\n\n        return node;\n    },\n    getElement: function(el)\n    {\n        var node = el || this.getCurrent();\n        while (node)\n        {\n            var data = this.inspector.parse(node);\n            if (data.isElement() && data.isInEditor())\n            {\n                return node;\n            }\n\n            node = node.parentNode;\n        }\n\n        return false;\n    },\n    getInline: function(el)\n    {\n        var node = el || this.getCurrent();\n        var inline = false;\n        while (node)\n        {\n            if (this._isInlineNode(node))\n            {\n                inline = node;\n            }\n\n            node = node.parentNode;\n        }\n\n        return inline;\n    },\n    getInlineFirst: function(el)\n    {\n        var node = el || this.getCurrent();\n        while (node)\n        {\n            if (this._isInlineNode(node))\n            {\n                return node;\n            }\n\n            node = node.parentNode;\n        }\n\n        return false;\n    },\n    getInlineAll: function(el)\n    {\n        var node = el || this.getCurrent();\n        var inlines = [];\n        while (node)\n        {\n            if (this._isInlineNode(node))\n            {\n                inlines.push(node);\n            }\n\n            node = node.parentNode;\n        }\n\n        return inlines;\n    },\n    getBlock: function(el)\n    {\n        var node = el || this.getCurrent();\n        while (node)\n        {\n            var data = this.inspector.parse(node);\n            var isBlock = this.inspector.isBlockTag(node.tagName);\n\n            if (isBlock && data.isInEditor(node))\n            {\n                return node;\n            }\n\n            node = node.parentNode;\n        }\n\n        return false;\n    },\n    getInlinesAllSelected: function(options)\n    {\n        if (this.isAll()) return [];\n\n        var inlines = this.getInlines({ all: true });\n        var textNodes = this.getNodes({ textnodes: true, inline: false });\n        var selected = this.getText().replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n        var finalNodes = [];\n\n        if (textNodes.length !== 0)\n        {\n            return finalNodes;\n        }\n\n        if (selected === '')\n        {\n            finalNodes = inlines;\n        }\n        else if (inlines.length > 1)\n        {\n            for (var i = 0; i < inlines.length; i++)\n            {\n                if (this._isTextSelected(inlines[i], selected))\n                {\n                    finalNodes.push(inlines[i]);\n                }\n            }\n        }\n        else if (inlines.length === 1)\n        {\n            if (this._isTextSelected(inlines[0], selected))\n            {\n                finalNodes = inlines;\n            }\n        }\n\n        finalNodes = (options && options.tags) ? this._filterNodesByTags(finalNodes, options.tags) : finalNodes;\n\n        return finalNodes;\n    },\n    getInlines: function(options)\n    {\n        var nodes = this.getNodes();\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var node;\n            if (options && options.all)\n            {\n                node = nodes[i];\n                while (node)\n                {\n                    if (this._isInlineNode(node) && !this._isInNodesArray(filteredNodes, node))\n                    {\n                        filteredNodes.push(node);\n                    }\n\n                    node = node.parentNode;\n                }\n            }\n            else\n            {\n                node = this.getInline(nodes[i]);\n                if (node && !this._isInNodesArray(filteredNodes, node))\n                {\n                    filteredNodes.push(node);\n                }\n            }\n        }\n\n        // filter\n        filteredNodes = (options && options.tags) ? this._filterNodesByTags(filteredNodes, options.tags) : filteredNodes;\n        filteredNodes = (options && options.inside) ? this._filterInlinesInside(filteredNodes, options) : filteredNodes;\n\n        return filteredNodes;\n    },\n    getBlocks: function(options)\n    {\n        var nodes = this.getNodes();\n        var block = this.getBlock();\n        nodes = (nodes.length === 0 && block) ? [block] : nodes;\n\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var node = this.getBlock(nodes[i]);\n            var $node = $R.dom(node);\n            if ($node.hasClass('non-editable')) continue;\n\n            if (node && !this._isInNodesArray(filteredNodes, node))\n            {\n                filteredNodes.push(node);\n            }\n        }\n\n        // filter\n        filteredNodes = (options && options.tags) ? this._filterNodesByTags(filteredNodes, options.tags) : filteredNodes;\n        filteredNodes = (options && options.first) ? this._filterBlocksFirst(filteredNodes, options) : filteredNodes;\n\n        return filteredNodes;\n    },\n    getElements: function(options)\n    {\n        var nodes = this.getNodes({ textnodes: false });\n        var block = this.getBlock();\n        nodes = (nodes.length === 0 && block) ? [block] : nodes;\n\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            if (!this._isInNodesArray(filteredNodes, nodes[i]))\n            {\n                filteredNodes.push(nodes[i]);\n            }\n        }\n\n        // filter\n        filteredNodes = (options && options.tags) ? this._filterNodesByTags(filteredNodes, options.tags) : filteredNodes;\n\n        return filteredNodes;\n    },\n    getNodes: function(options)\n    {\n        var nodes = [];\n        var activeComponent = this.component.getActive();\n        if (activeComponent)\n        {\n            nodes = this._getNodesComponent(activeComponent);\n        }\n        else if (this.isCollapsed())\n        {\n            var current = this.getCurrent();\n            nodes = (current) ? [current] : [];\n        }\n        else if (this.is() && !activeComponent)\n        {\n            nodes = this._getRangeSelectedNodes();\n        }\n\n        // filter\n        nodes = this._filterServicesNodes(nodes);\n        nodes = this._filterEditor(nodes);\n\n        // options\n        nodes = (options && options.tags) ? this._filterNodesByTags(nodes, options.tags) : nodes;\n        nodes = (options && options.textnodes) ? this._filterNodesTexts(nodes, options) : nodes;\n        nodes = (options && !options.textnodes) ? this._filterNodesElements(nodes) : nodes;\n\n        return nodes;\n    },\n\n    // text & html\n    getText: function()\n    {\n        var sel = this.get();\n        return (sel) ? this.utils.removeInvisibleChars(sel.toString()) : '';\n    },\n    getHtml: function(clean)\n    {\n        var html = '';\n        var sel = this.get();\n        if (sel)\n        {\n            var container = document.createElement('div');\n            var len = sel.rangeCount;\n            for (var i = 0; i < len; ++i)\n            {\n                container.appendChild(sel.getRangeAt(i).cloneContents());\n            }\n\n            html = container.innerHTML;\n            html = (clean !== false) ? this.cleaner.output(html) : html;\n            html = html.replace(/<p><\\/p>$/i, '');\n        }\n\n        return html;\n    },\n\n    // clear\n    clear: function()\n    {\n        this.component.clearActive();\n        this.get().removeAllRanges();\n    },\n\n    // collapse\n    collapseToStart: function()\n    {\n        var sel = this.get();\n        if (sel && !sel.isCollapsed) sel.collapseToStart();\n    },\n    collapseToEnd: function()\n    {\n        var sel = this.get();\n        if (sel && !sel.isCollapsed) sel.collapseToEnd();\n    },\n\n    // save\n    saveActiveComponent: function()\n    {\n        var activeComponent = this.component.getActive();\n        if (activeComponent)\n        {\n            this.savedComponent = activeComponent;\n            return true;\n        }\n\n        return false;\n    },\n    restoreActiveComponent: function()\n    {\n        if (this.savedComponent)\n        {\n            this.component.setActive(this.savedComponent);\n            return true;\n        }\n\n        return false;\n    },\n    save: function()\n    {\n        this._clearSaved();\n\n        var el = this.getElement();\n        var tags = ['TD', 'TH', 'P', 'DIV', 'PRE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'LI', 'BLOCKQUOTE'];\n        if (el && (tags.indexOf(el.tagName) !== -1) && (el.innerHTML === '' || el.innerHTML === '<br>'))\n        {\n            this.savedElement = el;\n        }\n        else if (!this.saveActiveComponent())\n        {\n            this.saved = this.offset.get();\n        }\n    },\n    restore: function()\n    {\n        if (!this.saved && !this.savedComponent && !this.savedElement) return;\n\n        this.editor.saveScroll();\n\n        if (this.savedElement)\n        {\n            this.caret.setStart(this.savedElement);\n        }\n        else if (!this.restoreActiveComponent())\n        {\n            this.offset.set(this.saved);\n        }\n\n        this._clearSaved();\n        this.editor.restoreScroll();\n    },\n    saveMarkers: function()\n    {\n        this._clearSaved();\n\n        if (!this.saveActiveComponent())\n        {\n            this.marker.insert();\n        }\n    },\n    restoreMarkers: function()\n    {\n        this.editor.saveScroll();\n\n        if (!this.restoreActiveComponent())\n        {\n            this.marker.restore();\n        }\n\n        this._clearSaved();\n        this.editor.restoreScroll();\n    },\n\n    // private\n    _getNextNode: function(node)\n    {\n        if (node.hasChildNodes()) return node.firstChild;\n\n        while (node && !node.nextSibling)\n        {\n            node = node.parentNode;\n        }\n\n        if (!node) return null;\n\n        return node.nextSibling;\n    },\n    _getNodesComponent: function(component)\n    {\n        var current = this.getCurrent();\n        var data = this.inspector.parse(current);\n\n        return (data.isFigcaption()) ? [data.getFigcaption()] : [component];\n    },\n    _getRangeSelectedNodes: function()\n    {\n        var nodes = [];\n        var range = this.getRange();\n        var node = range.startContainer;\n        var startNode = range.startContainer;\n        var endNode = range.endContainer;\n        var $editor = this.editor.getElement();\n\n        // editor\n        if (startNode === $editor.get() && this.isAll())\n        {\n            nodes = this.utils.getChildNodes($editor);\n        }\n        // single node\n        else if (node == endNode)\n        {\n            nodes = [node];\n        }\n        else\n        {\n            while (node && node != endNode)\n            {\n                nodes.push(node = this._getNextNode(node));\n            }\n\n            node = range.startContainer;\n            while (node && node != range.commonAncestorContainer)\n            {\n                nodes.unshift(node);\n                node = node.parentNode;\n            }\n        }\n\n        return nodes;\n    },\n    _isInNodesArray: function(nodes, node)\n    {\n        return (nodes.indexOf(node) !== -1);\n    },\n    _filterEditor: function(nodes)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var data = this.inspector.parse(nodes[i]);\n            if (data.isInEditor())\n            {\n                filteredNodes.push(nodes[i]);\n            }\n        }\n\n        return filteredNodes;\n    },\n    _filterServicesNodes: function(nodes)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var $el = $R.dom(nodes[i]);\n            var skip = false;\n\n            if (nodes[i] && nodes[i].nodeType === 3 && this.utils.isEmpty(nodes[i])) skip = true;\n            if ($el.hasClass('redactor-script-tag')\n                || $el.hasClass('redactor-component-caret')\n                || $el.hasClass('redactor-selection-marker')\n                || $el.hasClass('non-editable')) skip = true;\n\n            if (!skip)\n            {\n                filteredNodes.push(nodes[i]);\n            }\n        }\n\n        return filteredNodes;\n    },\n    _filterNodesTexts: function(nodes, options)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            if (nodes[i].nodeType === 3 || (options.keepbr && nodes[i].tagName === 'BR'))\n            {\n                var inline = this.getInline(nodes[i]);\n                var isInline = (inline && options && options.inline === false);\n                if (!isInline)\n                {\n                    filteredNodes.push(nodes[i]);\n                }\n            }\n        }\n\n        return filteredNodes;\n    },\n    _filterNodesElements: function(nodes)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            if (nodes[i].nodeType !== 3)\n            {\n                filteredNodes.push(nodes[i]);\n            }\n        }\n\n        return filteredNodes;\n    },\n    _filterNodesByTags: function(nodes, tags, passtexts)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            if (passtexts && nodes[i].nodeType === 3)\n            {\n                filteredNodes.push(nodes[i]);\n            }\n            else if (nodes[i].nodeType !== 3)\n            {\n                var nodeTag = nodes[i].tagName.toLowerCase();\n                if (tags.indexOf(nodeTag.toLowerCase()) !== -1)\n                {\n                    filteredNodes.push(nodes[i]);\n                }\n            }\n        }\n\n        return filteredNodes;\n    },\n    _filterBlocksFirst: function(nodes)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var $node = $R.dom(nodes[i]);\n            var parent = $node.parent().get();\n            var isFirst = ($node.parent().hasClass('redactor-in'));\n            var isCellParent = (parent && (parent.tagName === 'TD' || parent.tagName === 'TH'));\n            if (isFirst || isCellParent)\n            {\n                filteredNodes.push(nodes[i]);\n            }\n        }\n\n        return filteredNodes;\n    },\n    _filterInlinesInside: function(nodes)\n    {\n        var filteredNodes = [];\n        for (var i = 0; i < nodes.length; i++)\n        {\n            if (containsNode(nodes[i], true))\n            {\n                filteredNodes.push(nodes[i]);\n            }\n        }\n\n        return filteredNodes;\n    },\n    _isTextSelected: function(node, selected)\n    {\n        var text = this.utils.removeInvisibleChars(node.textContent);\n\n        return (\n            selected === text\n            || text.search(selected) !== -1\n            || selected.search(new RegExp('^' + this.utils.escapeRegExp(text))) !== -1\n            || selected.search(new RegExp(this.utils.escapeRegExp(text) + '$')) !== -1\n        );\n    },\n    _isInlineNode: function(node)\n    {\n        var data = this.inspector.parse(node);\n\n        return (this.inspector.isInlineTag(node.tagName) && data.isInEditor());\n    },\n    _clearSaved: function()\n    {\n        this.saved = false;\n        this.savedComponent = false;\n        this.savedElement = false;\n    }\n});\n$R.add('service', 'element', {\n    init: function(app)\n    {\n        this.app = app;\n        this.rootElement = app.rootElement;\n\n        // local\n        this.$element = {};\n        this.type = 'inline';\n    },\n    start: function()\n    {\n        this._build();\n        this._buildType();\n    },\n\n    // public\n    isType: function(type)\n    {\n        return (type === this.type);\n    },\n    getType: function()\n    {\n        return this.type;\n    },\n    getElement: function()\n    {\n        return this.$element;\n    },\n\n    // private\n    _build: function()\n    {\n        this.$element = $R.dom(this.rootElement);\n    },\n    _buildType: function()\n    {\n        var tag = this.$element.get().tagName;\n\n        this.type = (tag === 'TEXTAREA') ? 'textarea' : this.type;\n        this.type = (tag === 'DIV') ? 'div' : this.type;\n        this.type = (this.opts.inline) ? 'inline' : this.type;\n    }\n});\n$R.add('service', 'editor', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.scrolltop = false;\n        this.pasting = false;\n    },\n\n    // start\n    start: function()\n    {\n        this._build();\n    },\n\n    // focus\n    focus: function()\n    {\n        if (!this.isFocus() && !this._isContenteditableFocus())\n        {\n            this.saveScroll();\n            this.$editor.focus();\n            this.restoreScroll();\n        }\n    },\n    startFocus: function()\n    {\n        this.caret.setStart(this.getFirstNode());\n    },\n    endFocus: function()\n    {\n        this.caret.setEnd(this.getLastNode());\n    },\n\n    // pasting\n    isPasting: function()\n    {\n        return this.pasting;\n    },\n    enablePasting: function()\n    {\n        this.pasting = true;\n    },\n    disablePasting: function()\n    {\n        this.pasting = false;\n    },\n\n    // scroll\n    saveScroll: function()\n    {\n        this.scrolltop = this._getScrollTarget().scrollTop();\n    },\n    restoreScroll: function()\n    {\n        if (this.scrolltop !== false)\n        {\n            this._getScrollTarget().scrollTop(this.scrolltop);\n            this.scrolltop = false;\n        }\n    },\n\n    // non editables\n    disableNonEditables: function()\n    {\n        this.$noneditables = this.$editor.find('[contenteditable=false]');\n        this.$noneditables.attr('contenteditable', true);\n    },\n    enableNonEditables: function()\n    {\n        if (this.$noneditables)\n        {\n            setTimeout(function() { this.$noneditables.attr('contenteditable', false); }.bind(this), 1);\n        }\n    },\n\n    // nodes\n    getFirstNode: function()\n    {\n        return this.$editor.contents()[0];\n    },\n    getLastNode: function()\n    {\n        var nodes = this.$editor.contents();\n\n        return nodes[nodes.length-1];\n    },\n\n    // utils\n    isSourceMode: function()\n    {\n        var $source = this.source.getElement();\n\n        return $source.hasClass('redactor-source-open');\n    },\n    isEditor: function(el)\n    {\n        var node = $R.dom(el).get();\n\n        return (node === this.$editor.get());\n    },\n    isEmpty: function(keeplists)\n    {\n        return this.utils.isEmptyHtml(this.$editor.html(), false, keeplists);\n    },\n    isFocus: function()\n    {\n        var $active = $R.dom(document.activeElement);\n        var isComponentSelected = (this.$editor.find('.redactor-component-active').length !== 0);\n\n        return (isComponentSelected || $active.closest('.redactor-in-' + this.uuid).length !== 0);\n    },\n    setEmpty: function()\n    {\n        this.$editor.html(this.opts.emptyHtml);\n    },\n\n    // element\n    getElement: function()\n    {\n        return this.$editor;\n    },\n\n    // private\n    _build: function()\n    {\n        var $element = this.element.getElement();\n        var editableElement = (this.element.isType('textarea')) ? '<div>' : $element.get();\n\n        this.$editor = $R.dom(editableElement);\n    },\n    _getScrollTarget: function()\n    {\n        var $target = this.$doc;\n        if (this.opts.toolbarFixedTarget !== document)\n        {\n            $target = $R.dom(this.opts.toolbarFixedTarget);\n        }\n        else\n        {\n            $target = (this.opts.scrollTarget) ? $R.dom(this.opts.scrollTarget) : $target;\n        }\n\n        return $target;\n    },\n    _isContenteditableFocus: function()\n    {\n        var block = this.selection.getBlock();\n        var $blockParent = (block) ? $R.dom(block).closest('[contenteditable=true]').not('.redactor-in') : [];\n\n        return ($blockParent.length !== 0);\n    }\n});\n$R.add('service', 'container', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    // public\n    start: function()\n    {\n        this._build();\n    },\n    getElement: function()\n    {\n        return this.$container;\n    },\n\n    // private\n    _build: function()\n    {\n        var tag = (this.element.isType('inline')) ? '<span>' : '<div>';\n        this.$container = $R.dom(tag);\n    }\n});\n$R.add('service', 'source', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.$source = {};\n        this.content = '';\n    },\n    // public\n    start: function()\n    {\n        this._build();\n        this._buildName();\n        this._buildStartedContent();\n    },\n    getElement: function()\n    {\n        return this.$source;\n    },\n    getCode: function()\n    {\n        return this.$source.val();\n    },\n    getName: function()\n    {\n        return this.$source.attr('name');\n    },\n    getStartedContent: function()\n    {\n        return this.content;\n    },\n    setCode: function(html)\n    {\n        return this.insertion.set(html, true, false);\n    },\n    isNameGenerated: function()\n    {\n        return (this.name);\n    },\n    rebuildStartedContent: function()\n    {\n        this._buildStartedContent();\n    },\n\n    // private\n    _build: function()\n    {\n        var $element = this.element.getElement();\n        var isTextarea = this.element.isType('textarea');\n        var sourceElement = (isTextarea) ? $element.get() : '<textarea>';\n\n        this.$source = $R.dom(sourceElement);\n    },\n    _buildName: function()\n    {\n        var $element = this.element.getElement();\n\n        this.name = $element.attr('name');\n        this.$source.attr('name', (this.name) ? this.name : 'content-' + this.uuid);\n    },\n    _buildStartedContent: function()\n    {\n        var $element = this.element.getElement();\n        var content = (this.element.isType('textarea')) ? $element.val() : $element.html();\n\n        this.content = content.trim();\n    }\n});\n$R.add('service', 'statusbar', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.$statusbar = {};\n        this.items = [];\n    },\n    // public\n    start: function()\n    {\n        this.$statusbar = $R.dom('<ul>');\n        this.$statusbar.attr('dir', this.opts.direction);\n    },\n    add: function(name, html)\n    {\n        return this.update(name, html);\n    },\n    update: function(name, html)\n    {\n        var $item;\n        if (typeof this.items[name] !== 'undefined')\n        {\n            $item = this.items[name];\n        }\n        else\n        {\n            $item = $R.dom('<li>');\n            this.$statusbar.append($item);\n            this.items[name] = $item;\n        }\n\n        return $item.html(html);\n    },\n    get: function(name)\n    {\n        return (this.items[name]) ? this.items[name] : false;\n    },\n    remove: function(name)\n    {\n        if (this.items[name])\n        {\n            this.items[name].remove();\n            delete this.items[name];\n        }\n    },\n    getItems: function()\n    {\n        return this.items;\n    },\n    removeItems: function()\n    {\n        this.items = {};\n        this.$statusbar.html('');\n    },\n    getElement: function()\n    {\n        return this.$statusbar;\n    }\n});\n$R.add('service', 'toolbar', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.buttons = [];\n        this.dropdownOpened = false;\n        this.buttonsObservers = {};\n    },\n    // public\n    start: function()\n    {\n        if (this.is())\n        {\n            this.opts.activeButtons = (this.opts.activeButtonsAdd) ? this._extendActiveButtons() : this.opts.activeButtons;\n            this.create();\n        }\n    },\n    stopObservers: function()\n    {\n        this.buttonsObservers = {};\n    },\n    create: function()\n    {\n        this.$wrapper = $R.dom('<div>');\n        this.$toolbar = $R.dom('<div>');\n    },\n    observe: function()\n    {\n        if (!this.is()) return;\n\n        this.setButtonsInactive();\n\n        var button, observer;\n\n        // observers\n        for (var name in this.buttonsObservers)\n        {\n            observer = this.buttonsObservers[name];\n            button = this.getButton(name);\n            this.app.broadcast('button.' + observer + '.observe', button);\n        }\n\n        // inline buttons\n        var buttons = this.opts.activeButtons;\n        var inlines = this.selection.getInlinesAllSelected();\n        var current = this.selection.getInline();\n        if (this.selection.isCollapsed() && current)\n        {\n            inlines.push(current);\n        }\n\n        var tags = this._inlinesToTags(inlines);\n        for (var key in buttons)\n        {\n            if (tags.indexOf(key) !== -1)\n            {\n                button = this.getButton(buttons[key]);\n                if (button) {\n                    button.setActive();\n                }\n            }\n\n        }\n    },\n\n    // is\n    is: function()\n    {\n        return !(!this.opts.toolbar || (this.detector.isMobile() && this.opts.air));\n    },\n    isAir: function()\n    {\n        return (this.is()) ? this.$toolbar.hasClass('redactor-air') : false;\n    },\n    isFixed: function()\n    {\n        return (this.is()) ? this.$toolbar.hasClass('redactor-toolbar-fixed') : false;\n    },\n    isContextBar: function()\n    {\n        var $bar = this.$body.find('#redactor-context-toolbar-' + this.uuid);\n        return $bar.hasClass('open');\n    },\n    isTarget: function()\n    {\n        return (this.opts.toolbarFixedTarget !== document);\n    },\n\n    // get\n    getElement: function()\n    {\n        return this.$toolbar;\n    },\n    getWrapper: function()\n    {\n        return this.$wrapper;\n    },\n    getDropdown: function()\n    {\n        return this.dropdownOpened;\n    },\n    getTargetElement: function()\n    {\n        return $R.dom(this.opts.toolbarFixedTarget);\n    },\n    getButton: function(name)\n    {\n        var $btn = this._findButton('.re-' + name);\n\n        return ($btn.length !== 0) ? $btn.dataget('data-button-instance') : false;\n    },\n    getButtons: function()\n    {\n        var buttons = [];\n        this._findButtons().each(function(node)\n        {\n            var $node = $R.dom(node);\n            buttons.push($node.dataget('data-button-instance'));\n        });\n\n        return buttons;\n    },\n    getButtonsKeys: function()\n    {\n        var keys = [];\n        this._findButtons().each(function(node)\n        {\n            var $node = $R.dom(node);\n            keys.push($node.attr('data-re-name'));\n        });\n\n        return keys;\n    },\n\n    // add\n    addButton: function(name, btnObj, position, $el, start)\n    {\n        position = position || 'end';\n\n        var $button = $R.create('toolbar.button', this.app, name, btnObj);\n        if (btnObj.observe)\n        {\n            this.opts.activeButtonsObservers[name] = { observe: btnObj.observe, button: $button };\n        }\n\n        if (this.is())\n        {\n            if (position === 'first') this.$toolbar.prepend($button);\n            else if (position === 'after') $el.after($button);\n            else if (position === 'before') $el.before($button);\n            else this.$toolbar.append($button);\n        }\n\n        return $button;\n    },\n    addButtonFirst: function(name, btnObj)\n    {\n        return this.addButton(name, btnObj, 'first');\n    },\n    addButtonAfter: function(after, name, btnObj)\n    {\n        var $btn = this.getButton(after);\n\n        return ($btn) ? this.addButton(name, btnObj, 'after', $btn) : this.addButton(name, btnObj);\n    },\n    addButtonBefore: function(before, name, btnObj)\n    {\n        var $btn = this.getButton(before);\n\n        return ($btn) ? this.addButton(name, btnObj, 'before', $btn) : this.addButton(name, btnObj);\n    },\n    addButtonObserver: function(name, observer)\n    {\n        this.buttonsObservers[name] = observer;\n    },\n\n    // set\n    setButtons: function(buttons)\n    {\n        this.buttons = buttons;\n    },\n    setDropdown: function(dropdown)\n    {\n        this.dropdownOpened = dropdown;\n    },\n    setButtonsInactive: function()\n    {\n        var $buttons = this.getButtons();\n        for (var i = 0; i < $buttons.length; i++)\n        {\n            $buttons[i].setInactive();\n        }\n    },\n    setButtonsActive: function()\n    {\n        var $buttons = this.getButtons();\n        for (var i = 0; i < $buttons.length; i++)\n        {\n            $buttons[i].setActive();\n        }\n    },\n\n    // disable & enable\n    disableButtons: function()\n    {\n        var $buttons = this.getButtons();\n        for (var i = 0; i < $buttons.length; i++)\n        {\n            $buttons[i].disable();\n        }\n    },\n    enableButtons: function()\n    {\n        var $buttons = this.getButtons();\n        for (var i = 0; i < $buttons.length; i++)\n        {\n            $buttons[i].enable();\n        }\n\n    },\n\n    // private\n    _findButton: function(selector)\n    {\n        return (this.is()) ? this.$toolbar.find(selector) : $R.dom();\n    },\n    _findButtons: function()\n    {\n        return (this.is()) ? this.$toolbar.find('.re-button') : $R.dom();\n    },\n    _extendActiveButtons: function()\n    {\n        return $R.extend({}, this.opts.activeButtons, this.opts.activeButtonsAdd);\n    },\n    _inlinesToTags: function(inlines)\n    {\n        var tags = [];\n        for (var i = 0; i < inlines.length; i++)\n        {\n            tags.push(inlines[i].tagName.toLowerCase());\n        }\n\n        return tags;\n    }\n});\n$R.add('class', 'toolbar.button', {\n    mixins: ['dom'],\n    init: function(app, name, btnObj)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.lang = app.lang;\n        this.$body = app.$body;\n        this.toolbar = app.toolbar;\n        this.detector = app.detector;\n\n        // local\n        this.obj = btnObj;\n        this.name = name;\n        this.dropdown = false;\n        this.tooltip = false;\n\n        // init\n        this._init();\n    },\n    // is\n    isActive: function()\n    {\n        return this.hasClass('redactor-button-active');\n    },\n    isDisabled: function()\n    {\n        return this.hasClass('redactor-button-disabled');\n    },\n\n    // has\n    hasIcon: function()\n    {\n        return (this.obj.icon && !this.opts.buttonsTextLabeled);\n    },\n\n    // set\n    setDropdown: function(dropdown)\n    {\n        this.obj.dropdown = dropdown;\n        this.obj.message = false;\n        this.dropdown = $R.create('toolbar.dropdown', this.app, this.name, this.obj.dropdown);\n        this.attr('data-dropdown', true);\n    },\n    setMessage: function(message, args)\n    {\n        this.obj.message = message;\n        this.obj.args = args;\n        this.obj.dropdown = false;\n    },\n    setApi: function(api, args)\n    {\n        this.obj.api = api;\n        this.obj.args = args;\n        this.obj.dropdown = false;\n    },\n    setTitle: function(title)\n    {\n        this.obj.title = this.lang.parse(title);\n        this.obj.tooltip = this.obj.title;\n\n        this.attr({ 'alt': this.obj.tooltip, 'aria-label': this.obj.tooltip });\n        if (!this.attr('data-re-icon')) this.html(this.obj.title);\n    },\n    setTooltip: function(tooltip)\n    {\n        this.obj.tooltip = this.lang.parse(tooltip);\n        this.attr({ 'alt': this.obj.tooltip, 'aria-label': this.obj.tooltip });\n    },\n    setIcon: function(icon)\n    {\n        if (this.opts.buttonsTextLabeled) return;\n\n        this.obj.icon = true;\n        this.$icon = $R.dom(icon);\n\n        this.html('');\n        this.append(this.$icon);\n        this.attr('data-re-icon', true);\n        this.addClass('re-button-icon');\n        this.setTooltip(this.obj.title);\n        this._buildTooltip();\n    },\n    setActive: function()\n    {\n        this.addClass('redactor-button-active');\n    },\n    setInactive: function()\n    {\n        this.removeClass('redactor-button-active');\n    },\n\n    // hide\n    hideTooltip: function()\n    {\n        this.$body.find('.re-button-tooltip').remove();\n    },\n\n    // get\n    getDropdown: function()\n    {\n        return this.dropdown;\n    },\n\n    // enable & disable\n    disable: function()\n    {\n        this.addClass('redactor-button-disabled');\n    },\n    enable: function()\n    {\n        this.removeClass('redactor-button-disabled');\n    },\n\n    // toggle\n    toggle: function(e)\n    {\n        if (e) e.preventDefault();\n        if (this.isDisabled()) return;\n\n        if (this.obj.dropdown)\n        {\n            this.dropdown.toggle(e);\n        }\n        else if (this.obj.api)\n        {\n            // broadcast\n            this.app.api(this.obj.api, this.obj.args, this.name);\n        }\n        else if (this.obj.message)\n        {\n            // broadcast\n            this.app.broadcast(this.obj.message, this.obj.args, this.name);\n        }\n\n        this.hideTooltip();\n    },\n\n    // private\n    _init: function()\n    {\n        // parse\n        this._parseTitle();\n        this._parseTooltip();\n\n        // build\n        this._build();\n        this._buildCallback();\n        this._buildAttributes();\n        this._buildObserver();\n\n        if (this.hasIcon())\n        {\n            this._buildIcon();\n            this._buildTooltip();\n        }\n        else\n        {\n            this.html(this.obj.title);\n        }\n    },\n    _parseTooltip: function()\n    {\n        this.obj.tooltip = (this.obj.tooltip) ? this.lang.parse(this.obj.tooltip) : this.obj.title;\n    },\n    _parseTitle: function()\n    {\n        this.obj.title = this.lang.parse(this.obj.title);\n    },\n    _build: function()\n    {\n        this.parse('<a>');\n        this.addClass('re-button re-' + this.name);\n        this.attr('data-re-name', this.name);\n        this.dataset('data-button-instance', this);\n\n        if (this.obj.dropdown) this.setDropdown(this.obj.dropdown);\n    },\n    _buildCallback: function()\n    {\n        this.on('click', this.toggle.bind(this));\n    },\n    _buildAttributes: function()\n    {\n        var attrs = {\n            'href': '#',\n            'alt': this.obj.tooltip,\n            'rel': this.name,\n            'role': 'button',\n            'aria-label': this.obj.tooltip,\n            'tabindex': '-1'\n        };\n\n        this.attr(attrs);\n    },\n    _buildObserver: function()\n    {\n        if (typeof this.obj.observe !== 'undefined')\n        {\n            this.toolbar.addButtonObserver(this.name, this.obj.observe);\n        }\n    },\n    _buildIcon: function()\n    {\n        var icon = this.obj.icon;\n        var isHtml = (/(<([^>]+)>)/ig.test(icon));\n\n        this.$icon = (isHtml) ? $R.dom(icon) : $R.dom('<i>');\n        if (!isHtml) this.$icon.addClass('re-icon-' + this.name);\n\n        this.append(this.$icon);\n        this.attr('data-re-icon', true);\n        this.addClass('re-button-icon');\n    },\n    _buildTooltip: function()\n    {\n        if (this.detector.isDesktop())\n        {\n            this.tooltip = $R.create('toolbar.button.tooltip', this.app, this);\n        }\n    }\n});\n$R.add('class', 'toolbar.button.tooltip', {\n    mixins: ['dom'],\n    init: function(app, $button)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.$body = app.$body;\n        this.toolbar = app.toolbar;\n\n        // local\n        this.$button = $button;\n        this.created = false;\n\n        // init\n        this._init();\n    },\n    open: function()\n    {\n        if (this.$button.hasClass('redactor-button-disabled') || this.$button.hasClass('redactor-button-active')) return;\n\n        this.created = true;\n        this.parse('<span>');\n        this.addClass('re-button-tooltip re-button-tooltip-' + this.uuid);\n        this.$body.append(this);\n        this.html(this.$button.attr('alt'));\n\n        var offset = this.$button.offset();\n        var position = 'absolute';\n        var height = this.$button.height();\n        var width = this.$button.width();\n        var arrowOffset = 4;\n\n        this.css({\n            top: (offset.top + height + arrowOffset) + 'px',\n            left: (offset.left + width/2 - this.width()/2) + 'px',\n            position: position\n        });\n\n        this.show();\n    },\n    close: function()\n    {\n        if (!this.created || this.$button.hasClass('redactor-button-disabled')) return;\n\n        this.remove();\n        this.created = false;\n    },\n\n    // private\n    _init: function()\n    {\n        this.$button.on('mouseover', this.open.bind(this));\n        this.$button.on('mouseout', this.close.bind(this));\n    }\n});\n$R.add('class', 'toolbar.dropdown', {\n    mixins: ['dom'],\n    init: function(app, name, items)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.$win = app.$win;\n        this.$doc = app.$doc;\n        this.$body = app.$body;\n        this.animate = app.animate;\n        this.toolbar = app.toolbar;\n\n        // local\n        this.name = name;\n        this.started = false;\n        this.items = (name === 'format') ? $R.extend({}, true, items) : items;\n        this.$items = [];\n    },\n    // public\n    toggle: function(e)\n    {\n        if (!this.started)\n        {\n            this._build();\n        }\n\n        // toggle\n        if (this.isOpened() && this.isActive())\n        {\n            this.close(false);\n        }\n        else\n        {\n            this.open(e);\n        }\n    },\n    isOpened: function()\n    {\n        var $dropdown = this.$body.find('.redactor-dropdown-' + this.uuid + '.open');\n\n        return ($dropdown.length !== 0 && $dropdown.attr('data-re-name') === this.name);\n    },\n    isActive: function()\n    {\n        var $dropdown = this.$body.find('#redactor-dropdown-' + this.uuid + '-' + this.name + '.open');\n        return ($dropdown.length !== 0);\n    },\n    getName: function()\n    {\n        return this.attr('data-re-name');\n    },\n    getItem: function(name)\n    {\n        return this.$items[name];\n    },\n    getItemsByClass: function(classname)\n    {\n        var result = [];\n        for (var key in this.$items)\n        {\n            if (typeof this.$items[key] === 'object' && this.$items[key].dom && this.$items[key].hasClass(classname))\n            {\n                result.push(this.$items[key]);\n            }\n        }\n\n        return result;\n    },\n    open: function(e)\n    {\n        this._closeAll();\n\n        this.$btn = this.toolbar.getButton(this.name);\n        this.app.broadcast('dropdown.open', e, this, this.$btn);\n        this.toolbar.setDropdown(this);\n\n        this.show();\n        this.removeClass('redactor-animate-hide');\n        this.addClass('open');\n        this._observe();\n\n        this.$btn.hideTooltip();\n        this.$btn.setActive();\n\n        this.$doc.on('keyup.redactor.dropdown-' + this.uuid, this._handleKeyboard.bind(this));\n        this.$doc.on('click.redactor.dropdown-' + this.uuid, this.close.bind(this));\n\n        this.updatePosition();\n        this.app.broadcast('dropdown.opened', e, this, this.$btn);\n\n    },\n    close: function(e, animate)\n    {\n        if (e)\n        {\n            var $el = $R.dom(e.target);\n            if (this._isButton(e) || $el.hasClass('redactor-dropdown-not-close') || $el.hasClass('redactor-dropdown-item-disabled'))\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n\n        this.app.broadcast('dropdown.close', this, this.$btn);\n        this.toolbar.setDropdown(false);\n\n        this.$btn.setInactive();\n        if (animate === false)\n        {\n            this._close();\n        }\n        else\n        {\n            this.animate.start(this, 'fadeOut', this._close.bind(this));\n        }\n    },\n    updatePosition: function()\n    {\n        var isFixed = this.toolbar.isFixed();\n        var isTarget = this.toolbar.isTarget();\n\n        var btnHeight = this.$btn.height();\n        var btnWidth = this.$btn.width();\n\n        var pos = this.$btn.offset();\n        var position = 'absolute';\n        var topOffset = 2;\n\n        if (isFixed) {\n            pos.top = (isTarget) ? this.$btn.offset().top : this.$btn.position().top;\n            position = 'fixed';\n            topOffset = topOffset + this.opts.toolbarFixedTopOffset;\n        }\n\n\n        var leftOffset = 0;\n        var left = (pos.left + leftOffset);\n        var width = parseFloat(this.css('width'));\n        var winWidth = this.$win.width();\n        var leftFix = (winWidth < (left + width)) ? (width - btnWidth) : 0;\n        var leftPos = (left - leftFix);\n        var top = (pos.top + btnHeight + topOffset);\n        leftPos = (leftPos < 0) ? 4 : leftPos;\n\n        this.css({\n            maxHeight: '',\n            position: position,\n            top: top + 'px',\n            left: leftPos + 'px'\n        });\n\n        // height adaptive\n        var heightTolerance = 10;\n        var winHeight = this.$win.height();\n        var scrollTop = this.$doc.scrollTop();\n        var cropHeight = winHeight - (top - scrollTop) - heightTolerance;\n\n        this.css('max-height', cropHeight + 'px');\n    },\n\n    // private\n    _build: function()\n    {\n        this.parse('<div>');\n        this.attr('dir', this.opts.direction);\n        this.attr('id', 'redactor-dropdown-' + this.uuid + '-' + this.name);\n        this.attr('data-re-name', this.name);\n\n        this.addClass('redactor-dropdown redactor-dropdown-' + this.uuid + ' redactor-dropdown-' + this.name);\n        this.dataset('data-dropdown-instance', this);\n        var isDom = (this.items.sdom || typeof this.items === 'string');\n\n        if (isDom) this._buildDom();\n        else this._buildItems();\n\n        this.$body.append(this);\n        this.started = true;\n    },\n    _buildDom: function()\n    {\n        this.html('').append($R.dom(this.items));\n    },\n    _buildItems: function()\n    {\n        this.items = (this.name === 'format') ? this._buildFormattingItems() : this.items;\n\n        for (var key in this.items)\n        {\n            var obj = this.items[key];\n\n            if (key === 'observe')\n            {\n                this.attr('data-observe', this.items[key]);\n            }\n            else\n            {\n                var $item = $R.create('toolbar.dropdown.item', this.app, key, obj, this);\n\n                this.$items[key] = $item;\n                this.append($item);\n            }\n        }\n    },\n    _buildFormattingItems: function()\n    {\n        // build the format set\n        for (var key in this.items)\n        {\n            if (this.opts.formatting.indexOf(key) === -1) delete this.items[key];\n        }\n\n        // remove from the format set\n        if (this.opts.formattingHide)\n        {\n            for (var key in this.items)\n            {\n                if (this.opts.formattingHide.indexOf(key) !== -1) delete this.items[key];\n            }\n        }\n\n        // add to the format set\n        if (this.opts.formattingAdd)\n        {\n            for (var key in this.opts.formattingAdd)\n            {\n                this.items[key] = this.opts.formattingAdd[key];\n            }\n        }\n\n        return this.items;\n    },\n    _handleKeyboard: function(e)\n    {\n        if (e.which === 27) this.close();\n    },\n    _isButton: function(e)\n    {\n        var $el = $R.dom(e.target);\n        var $btn = $el.closest('.re-button');\n\n        return ($btn.get() === this.$btn.get());\n    },\n    _close: function()\n    {\n        this.$btn.setInactive();\n        this.$doc.off('.redactor.dropdown-' + this.uuid);\n        this.removeClass('open');\n        this.addClass('redactor-animate-hide');\n        this.app.broadcast('dropdown.closed', this, this.$btn);\n    },\n    _closeAll: function()\n    {\n        this.$body.find('.redactor-dropdown-' + this.uuid + '.open').each(function(node)\n        {\n            var $node = $R.dom(node);\n            var instance =  $node.dataget('data-dropdown-instance');\n            instance._close();\n        });\n    },\n    _observe: function()\n    {\n        var observer = this.attr('data-observe');\n        if (observer)\n        {\n            this.app.broadcast('dropdown.' + observer + '.observe', this);\n        }\n    }\n});\n$R.add('class', 'toolbar.dropdown.item', {\n    mixins: ['dom'],\n    init: function(app, name, obj, dropdown)\n    {\n        this.app = app;\n        this.lang = app.lang;\n\n        // local\n        this.dropdown = dropdown;\n        this.name = name;\n        this.obj = obj;\n\n        // init\n        this._init();\n    },\n    setTitle: function(html)\n    {\n        this.$span.html(html);\n    },\n    getTitle: function()\n    {\n        return this.$span.html();\n    },\n    enable: function()\n    {\n        this.removeClass('redactor-dropdown-item-disabled');\n    },\n    disable: function()\n    {\n        this.addClass('redactor-dropdown-item-disabled');\n    },\n    toggle: function(e)\n    {\n        if (e) e.preventDefault();\n        if (this.hasClass('redactor-dropdown-item-disabled')) return;\n\n        if (this.obj.message)\n        {\n            // broadcast\n            this.app.broadcast(this.obj.message, this.obj.args, this.name);\n        }\n        else if (this.obj.api)\n        {\n            this.app.api(this.obj.api, this.obj.args, this.name);\n        }\n    },\n\n    // private\n    _init: function()\n    {\n        this.parse('<a>');\n        this.attr('href', '#');\n        this.addClass('redactor-dropdown-item-' + this.name);\n\n        if (this.obj.classname)\n        {\n            this.addClass(this.obj.classname);\n        }\n\n        this.attr('data-re-name', this.name);\n        this.on('click', this.toggle.bind(this));\n\n        this.$span = $R.dom('<span>');\n        this.append(this.$span);\n        this.setTitle(this.lang.parse(this.obj.title));\n    }\n});\n$R.add('service', 'cleaner', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n\n        // local\n        this.storedComponents = [];\n        this.storedImages = [];\n        this.storedLinks = [];\n        this.deniedTags = ['font', 'html', 'head', 'link', 'title', 'body', 'meta', 'applet'];\n        this.convertRules = {};\n        this.unconvertRules = {};\n\n        // regex\n        this.reComments = /<!--[\\s\\S]*?-->/g;\n        this.reSpacedEmpty = /^(||\\s||<br\\s?\\/?>||&nbsp;)$/i;\n        this.reScriptTag = /<script(.*?[^>]?)>([\\w\\W]*?)<\\/script>/gi;\n    },\n    // public\n    addConvertRules: function(name, func)\n    {\n        this.convertRules[name] = func;\n    },\n    addUnconvertRules: function(name, func)\n    {\n        this.unconvertRules[name] = func;\n    },\n    input: function(html, paragraphize, started)\n    {\n        // pre/code\n        html = this.encodePreCode(html);\n\n        // converting entity\n        html = html.replace(/\\$/g, '&#36;');\n        html = html.replace(/&amp;/g, '&');\n\n        // convert to figure\n        var converter = $R.create('cleaner.figure', this.app);\n        html = converter.convert(html, this.convertRules);\n\n        // store components\n        html = this.storeComponents(html);\n\n        // clean\n        html = this.replaceTags(html, this.opts.replaceTags);\n        html = this._setSpanAttr(html);\n        html = this._setStyleCache(html);\n        html = this.removeTags(html, this.deniedTags);\n        html = (this.opts.removeScript) ? this._removeScriptTag(html) : this._replaceScriptTag(html);\n        //html = (this.opts.removeScript) ? this._removeScriptTag(html) : html;\n        html = (this.opts.removeComments) ? this.removeComments(html) : html;\n        html = (this._isSpacedEmpty(html)) ? this.opts.emptyHtml : html;\n\n        // restore components\n        html = this.restoreComponents(html);\n\n        // clear wrapped components\n        html = this._cleanWrapped(html);\n\n        // remove image attributes\n        var $wrapper = this.utils.buildWrapper(html);\n        var imageattrs = ['alt', 'title', 'src', 'class', 'width', 'height', 'srcset'];\n        $wrapper.find('img').each(function(node) {\n            if (node.attributes.length > 0) {\n                var attrs = node.attributes;\n                for (var i = attrs.length - 1; i >= 0; i--) {\n                    if (attrs[i].name.search(/^data\\-/) === -1 && imageattrs.indexOf(attrs[i].name) === -1) {\n                        node.removeAttribute(attrs[i].name);\n                    }\n                }\n            }\n        });\n\n        // get wrapper html\n        html = this.utils.getWrapperHtml($wrapper);\n\n        // paragraphize\n        html = (paragraphize) ? this.paragraphize(html) : html;\n\n        return html;\n    },\n    output: function(html, removeMarkers)\n    {\n        html = this.removeInvisibleSpaces(html);\n\n        html = html.replace(/&#36;/g, '$');\n\n        // empty\n        if (this._isSpacedEmpty(html)) return '';\n        if (this._isParagraphEmpty(html)) return '';\n\n        html = this.removeServiceTagsAndAttrs(html, removeMarkers);\n\n        // store components\n        html = this.storeComponents(html);\n\n        html = this.removeSpanWithoutAttributes(html);\n        html = this.removeFirstBlockBreaklineInHtml(html);\n\n        html = (this.opts.removeScript) ? html : this._unreplaceScriptTag(html);\n        html = (this.opts.preClass) ? this._setPreClass(html) : html;\n        html = (this.opts.linkNofollow) ? this._setLinkNofollow(html) : html;\n        html = (this.opts.removeNewLines) ? this.cleanNewLines(html) : html;\n\n        // restore components\n        html = this.restoreComponents(html);\n\n        // convert to figure\n        var converter = $R.create('cleaner.figure', this.app);\n        html = converter.unconvert(html, this.unconvertRules);\n\n        // final clean up\n        html = this.removeEmptyAttributes(html, ['style', 'class', 'rel', 'alt', 'title']);\n        html = this.cleanSpacesInPre(html);\n        html = this.tidy(html);\n\n        // converting entity\n        html = html.replace(/&amp;/g, '&');\n\n        // breakline tidy\n        if (this.opts.breakline) {\n            html = html.replace(/<br\\s?\\/?>/gi, \"<br>\\n\");\n            html = html.replace(/<br\\s?\\/?>\\n+/gi, \"<br>\\n\");\n        }\n\n        // check whitespaces\n        html = (html.replace(/\\n/g, '') === '') ? '' : html;\n\n        return html;\n    },\n    paste: function(html)\n    {\n        // store components\n        html = this.storeComponents(html);\n\n        // remove tags\n        var deniedTags = this.deniedTags.concat(['iframe']);\n        html = this.removeTags(html, deniedTags);\n\n        // remove doctype tag\n        html = html.replace(new RegExp(\"<\\!doctype([\\\\s\\\\S]+?)>\", 'gi'), '');\n\n        // remove style tag\n        html = html.replace(new RegExp(\"<style([\\\\s\\\\S]+?)</style>\", 'gi'), '');\n\n        // remove br between\n        html = html.replace(new RegExp(\"</p><br /><p\", 'gi'), '</p><p');\n\n        // gdocs & word\n        var isMsWord = this._isHtmlMsWord(html);\n\n        html = this._cleanGDocs(html);\n        html = (isMsWord) ? this._cleanMsWord(html) : html;\n\n        // do not clean\n        if (!this.opts.pasteClean)\n        {\n            // restore components\n            html = this.restoreComponents(html);\n\n            return html;\n        }\n\n        // plain text\n        if (this.opts.pastePlainText)\n        {\n            // restore components\n            html = this.restoreComponents(html);\n\n            return this.pastePlainText(html);\n        }\n\n        // remove tags\n        var exceptedTags = this.opts.pasteBlockTags.concat(this.opts.pasteInlineTags);\n        html = this.removeTagsExcept(html, exceptedTags);\n\n        // links & images\n        html = (this.opts.pasteLinks) ? html : this.removeTags(html, ['a']);\n        html = (this.opts.pasteImages) ? html : this.removeTags(html, ['img']);\n\n        // build wrapper\n        var $wrapper = this.utils.buildWrapper(html);\n\n        // clean attrs\n        var $elms = $wrapper.find('*');\n\n        // remove style\n        var filterStyle = (this.opts.pasteKeepStyle.length !== 0) ? ',' + this.opts.pasteKeepStyle.join(',') : '';\n        $elms.not('[data-redactor-style-cache]' + filterStyle).removeAttr('style');\n\n        // remove class\n        var filterClass = (this.opts.pasteKeepClass.length !== 0) ? ',' + this.opts.pasteKeepClass.join(',') : '';\n        $elms.not('[data-redactor-style-cache], span.redactor-component' + filterClass).removeAttr('class');\n\n        // remove attrs\n        var filterAttrs = (this.opts.pasteKeepAttrs.length !== 0) ? ',' + this.opts.pasteKeepAttrs.join(',') : '';\n        $elms.not('img, a, span.redactor-component, [data-redactor-style-cache]' + filterAttrs).each(function(node)\n        {\n            var attrs = node.attributes;\n            for (var i = attrs.length - 1; i >= 0; i--) {\n                if (node.attributes[0].name !== 'class') {\n                    node.removeAttribute(attrs[i].name);\n                }\n            }\n        });\n\n        // paste link target\n        if (this.opts.pasteLinks && this.opts.pasteLinkTarget !== false)\n        {\n            $wrapper.find('a').attr('target', this.opts.pasteLinkTarget);\n        }\n\n        // keep style\n        $wrapper.find('[data-redactor-style-cache]').each(function(node)\n        {\n            var style = node.getAttribute('data-redactor-style-cache');\n            node.setAttribute('style', style);\n        });\n\n        // remove image attributes\n        var imageattrs = this.opts.imageAttrs;\n        $wrapper.find('img').each(function(node) {\n            if (node.attributes.length > 0) {\n                var attrs = node.attributes;\n                for (var i = attrs.length - 1; i >= 0; i--) {\n                    if (imageattrs.indexOf(attrs[i].name) === -1) {\n                        node.removeAttribute(attrs[i].name);\n                    }\n                }\n            }\n        });\n\n        // remove empty span\n        $wrapper.find('span').each(function(node)\n        {\n            if (node.attributes.length === 0)\n            {\n                $R.dom(node).unwrap();\n            }\n        });\n\n        // remove empty inline\n        $wrapper.find(this.opts.inlineTags.join(',')).each(function(node)\n        {\n            if (node.attributes.length === 0 && this.utils.isEmptyHtml(node.innerHTML))\n            {\n                $R.dom(node).unwrap();\n            }\n\n        }.bind(this));\n\n        // place ul/ol into li\n        $wrapper.find('ul, ol').each(function(node)\n        {\n            var prev = node.previousSibling;\n            if (prev && prev.tagName === 'LI')\n            {\n                var $li = $R.dom(prev);\n                $li.find('p').unwrap();\n                $li.append(node);\n            }\n        });\n\n        // get wrapper\n        html = this.utils.getWrapperHtml($wrapper);\n\n        // remove paragraphs form lists (google docs bug)\n        html = html.replace(/<li><p>/gi, '<li>');\n        html = html.replace(/<\\/p><\\/li>/gi, '</li>');\n\n        // convert lines to br\n        if (this.opts.breakline) {\n            html = html.replace(/\\n/g, '<br>');\n        }\n\n        // clean empty p\n        html = html.replace(/<p>&nbsp;<\\/p>/gi, '<p></p>');\n        html = html.replace(/<p><br\\s?\\/?><\\/p>/gi, '<p></p>');\n\n        if (isMsWord)\n        {\n            html = html.replace(/<p><\\/p>/gi, '');\n            html = html.replace(/<p>\\s<\\/p>/gi, '');\n        }\n\n        // restore components\n        html = this.restoreComponents(html);\n\n        return html;\n    },\n    pastePlainText: function(html)\n    {\n        html = (this.opts.pasteLinks) ? this.storeLinks(html) : html;\n        html = (this.opts.pasteImages) ? this.storeImages(html) : html;\n\n        html = this.getPlainText(html);\n        html = this._replaceNlToBr(html);\n\n        html = (this.opts.pasteLinks) ? this.restoreLinks(html) : html;\n        html = (this.opts.pasteImages) ? this.restoreImages(html) : html;\n\n        return html;\n    },\n    tidy: function(html)\n    {\n        return html;\n    },\n    paragraphize: function(html)\n    {\n        var paragraphize = $R.create('cleaner.paragraphize', this.app);\n        html = paragraphize.convert(html);\n        return html;\n    },\n\n    // get\n    getFlatText: function(html)\n    {\n        var $div = $R.dom('<div>');\n\n        if (!html.nodeType && !html.dom)\n        {\n            html = html.toString();\n            html = html.trim();\n            $div.html(html);\n        }\n        else\n        {\n            $div.append(html);\n        }\n\n        html = $div.get().textContent || $div.get().innerText || '';\n\n        return (html === undefined) ? '' : html;\n    },\n\tgetPlainText: function(html)\n\t{\n\t\thtml = html.replace(/<!--[\\s\\S]*?-->/gi, '');\n\t\thtml = html.replace(/<style[\\s\\S]*?style>/gi, '');\n        html = html.replace(/<p><\\/p>/g, '');\n\t\thtml = html.replace(/<\\/div>|<\\/li>|<\\/td>/gi, '\\n');\n\t\thtml = html.replace(/<\\/p>/gi, '\\n\\n');\n\t\thtml = html.replace(/<\\/H[1-6]>/gi, '\\n\\n');\n\n\t\tvar tmp = document.createElement('div');\n\t\ttmp.innerHTML = html;\n\n\t\thtml = tmp.textContent || tmp.innerText;\n\n\t\treturn html.trim();\n\t},\n\n    // replace\n    replaceTags: function(html, tags)\n    {\n        if (tags)\n        {\n            var self = this;\n            var keys = Object.keys(tags);\n            var $wrapper = this.utils.buildWrapper(html);\n            $wrapper.find(keys.join(',')).each(function(node)\n            {\n                self.utils.replaceToTag(node, tags[node.tagName.toLowerCase()]);\n            });\n\n            html = this.utils.getWrapperHtml($wrapper);\n        }\n\n        return html;\n    },\n    replaceNbspToSpaces: function(html)\n    {\n        return html.replace('&nbsp;', ' ');\n    },\n    replaceBlocksToBr: function(html)\n    {\n        html = html.replace(/<\\/div>|<\\/li>|<\\/td>|<\\/p>|<\\/H[1-6]>/gi, '<br>');\n\n        return html;\n    },\n\n    // clean\n    cleanNewLines: function(html)\n    {\n        return html.replace(/\\r?\\n/g, \"\");\n    },\n    cleanSpacesInPre: function(html)\n    {\n        return html.replace('&nbsp;&nbsp;&nbsp;&nbsp;', '    ');\n    },\n\n    // remove\n    removeInvisibleSpaces: function(html)\n    {\n        html = this.utils.removeInvisibleChars(html);\n        html = html.replace(/&#65279;/gi, '');\n\n        return html;\n    },\n    removeNl: function(html)\n    {\n        html = html.replace(/\\n/g, \" \");\n        html = html.replace(/\\s+/g, \"\\s\");\n\n        return html;\n    },\n    removeBrAtEnd: function(html)\n    {\n        html = html.replace(/<br\\s?\\/?>$/gi, ' ');\n        html = html.replace(/<br\\s?\\/?><li/gi, '<li');\n\n        return html;\n    },\n    removeTags: function(input, denied)\n    {\n        var re = (denied) ? /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi : /(<([^>]+)>)/gi;\n        var replacer = (!denied) ? '' : function ($0, $1)\n        {\n            return denied.indexOf($1.toLowerCase()) === -1 ? $0 : '';\n        };\n\n        return input.replace(re, replacer);\n    },\n    removeTagsExcept: function(input, except)\n    {\n        if (except === undefined) return input.replace(/(<([^>]+)>)/gi, '');\n\n        var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n        return input.replace(tags, function($0, $1)\n        {\n            return except.indexOf($1.toLowerCase()) === -1 ? '' : $0;\n        });\n    },\n    removeComments: function(html)\n    {\n        return html.replace(this.reComments, '');\n    },\n    removeServiceTagsAndAttrs: function(html, removeMarkers)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        var self = this;\n        if (removeMarkers !== false)\n        {\n            $wrapper.find('.redactor-selection-marker').each(function(node)\n            {\n                var $el = $R.dom(node);\n                var text = self.utils.removeInvisibleChars($el.text());\n\n                return (text === '') ? $el.remove() : $el.unwrap();\n            });\n        }\n\n        $wrapper.find('[data-redactor-style-cache]').removeAttr('data-redactor-style-cache');\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    removeSpanWithoutAttributes: function(html)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        $wrapper.find('span').removeAttr('data-redactor-span data-redactor-style-cache').each(function(node)\n        {\n            if (node.attributes.length === 0) $R.dom(node).unwrap();\n        });\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    removeFirstBlockBreaklineInHtml: function(html)\n    {\n        return html.replace(new RegExp('</li><br\\\\s?/?>', 'gi'), '</li>');\n    },\n    removeEmptyAttributes: function(html, attrs)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        for (var i = 0; i < attrs.length; i++)\n        {\n            $wrapper.find('[' + attrs[i] + '=\"\"]').removeAttr(attrs[i]);\n        }\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n\n    // encode / decode\n    encodeHtml: function(html)\n    {\n        html = html.replace(/<br\\s?\\/?>/g, \"\\n\");\n        html = html.replace(/&nbsp;/g, ' ');\n        html = html.replace(//g, '\"');\n        html = html.replace(//g, '\"');\n        html = html.replace(//g, '\\'');\n        html = html.replace(//g, '\\'');\n        html = this.encodeEntities(html);\n        html = html.replace(/\\$/g, '&#36;');\n\n        if (this.opts.preSpaces)\n        {\n            html = html.replace(/\\t/g, new Array(this.opts.preSpaces + 1).join(' '));\n        }\n\n        return html;\n    },\n    encodePreCode: function(html)\n    {\n        var matched = html.match(new RegExp('<code(.*?)>(.*?)<pre(.*?)>(.*?)</pre>(.*?)</code>', 'gi'));\n        if (matched !== null)\n        {\n            for (var i = 0; i < matched.length; i++)\n            {\n                var arr = matched[i].match(new RegExp('<pre(.*?)>([\\\\w\\\\W]*?)</pre>', 'i'));\n                html = html.replace(arr[0], this.encodeEntities(arr[0]));\n            }\n        }\n\n        var $wrapper = this.utils.buildWrapper(html);\n\n        $wrapper.find('code code').replaceWith(this._encodeOuter.bind(this));\n        $wrapper.find('code pre').replaceWith(this._encodeOuter.bind(this));\n        $wrapper.find('pre pre').replaceWith(this._encodeOuter.bind(this));\n        $wrapper.find('code, pre').each(this._encodePreCodeLine.bind(this));\n\n        html = this.utils.getWrapperHtml($wrapper);\n\n        // restore markers\n        html = this._decodeMarkers(html);\n\n        return html;\n    },\n    encodeEntities: function(str)\n    {\n        str = this.decodeEntities(str);\n        str = str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\n        return str;\n    },\n    encodePhpCode: function(html)\n    {\n        html = html.replace('<?php', '&lt;?php');\n        html = html.replace('<?', '&lt;?');\n        html = html.replace('?>', '?&gt;');\n\n        return html;\n    },\n    decodeEntities: function(str)\n    {\n        return String(str).replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&amp;/g, '&');\n    },\n\n    // store / restore\n    storeComponents: function(html)\n    {\n        var matched = this.utils.getElementsFromHtml(html, 'figure', 'table');\n\n        return this._storeMatched(html, matched, 'Components', 'figure');\n    },\n    restoreComponents: function(html)\n    {\n        return this._restoreMatched(html, 'Components', 'figure');\n    },\n    storeLinks: function(html)\n    {\n        var matched = this.utils.getElementsFromHtml(html, 'a');\n\n        return this._storeMatched(html, matched, 'Links', 'a');\n    },\n    storeImages: function(html)\n    {\n        var matched = this.utils.getElementsFromHtml(html, 'img');\n\n        return this._storeMatched(html, matched, 'Images', 'img');\n    },\n    restoreLinks: function(html)\n    {\n        return this._restoreMatched(html, 'Links', 'a');\n    },\n    restoreImages: function(html)\n    {\n        return this._restoreMatched(html, 'Images', 'img');\n    },\n\n    // PRIVATE\n\n    // clean\n    _cleanWrapped: function(html)\n    {\n        html = html.replace(new RegExp('<p><figure([\\\\w\\\\W]*?)</figure></p>', 'gi'), '<figure$1</figure>');\n\n        return html;\n    },\n    _cleanGDocs: function(html)\n    {\n        // remove google docs markers\n        html = html.replace(/<b\\sid=\"internal-source-marker(.*?)\">([\\w\\W]*?)<\\/b>/gi, \"$2\");\n        html = html.replace(/<b(.*?)id=\"docs-internal-guid(.*?)\">([\\w\\W]*?)<\\/b>/gi, \"$3\");\n\n        html = html.replace(/<span[^>]*(font-style:\\s?italic;\\s?font-weight:\\s?bold|font-weight:\\s?bold;\\s?font-style:\\s?italic)[^>]*>([\\w\\W]*?)<\\/span>/gi, '<b><i>$2</i></b>');\n        html = html.replace(/<span[^>]*(font-style:\\s?italic;\\s?font-weight:\\s?600|font-weight:\\s?600;\\s?font-style:\\s?italic)[^>]*>([\\w\\W]*?)<\\/span>/gi, '<b><i>$2</i></b>');\n        html = html.replace(/<span[^>]*(font-style:\\s?italic;\\s?font-weight:\\s?700|font-weight:\\s?700;\\s?font-style:\\s?italic)[^>]*>([\\w\\W]*?)<\\/span>/gi, '<b><i>$2</i></b>');\n        html = html.replace(/<span[^>]*font-style:\\s?italic[^>]*>([\\w\\W]*?)<\\/span>/gi, '<i>$1</i>');\n        html = html.replace(/<span[^>]*font-weight:\\s?bold[^>]*>([\\w\\W]*?)<\\/span>/gi, '<b>$1</b>');\n        html = html.replace(/<span[^>]*font-weight:\\s?700[^>]*>([\\w\\W]*?)<\\/span>/gi, '<b>$1</b>');\n        html = html.replace(/<span[^>]*font-weight:\\s?600[^>]*>([\\w\\W]*?)<\\/span>/gi, '<b>$1</b>');\n\n        return html;\n    },\n    _cleanMsWord: function(html)\n    {\n        html = html.replace(/<!--[\\s\\S]+?-->/gi, '');\n        html = html.replace(/<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi, '');\n        html = html.replace(/<(\\/?)s>/gi, \"<$1strike>\");\n        html = html.replace(/&nbsp;/gi, ' ');\n        html = html.replace(/<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi, function(str, spaces) {\n            return (spaces.length > 0) ? spaces.replace(/./, \" \").slice(Math.floor(spaces.length/2)).split(\"\").join(\"\\u00a0\") : '';\n        });\n\n        // build wrapper\n        var $wrapper = this.utils.buildWrapper(html);\n\n        // footnote fix\n        $wrapper.find('.MsoFootnoteText').each(function(node) {\n            var $node = $R.dom(node);\n            var $parent = $node.parent();\n            if ($parent.length !== 0 && $parent.attr('style').search(/mso-element:footnote/) !== -1) {\n                $node.find('a').attr('id', '_' + $parent.attr('id'));\n            }\n\n        });\n\n        $wrapper.find('.MsoFootnoteReference').each(function(node) {\n            var $node = $R.dom(node);\n            var $parent = $node.parent();\n            if ($parent.length !== 0 && $parent.get().tagName === 'A') {\n                $parent.attr('id', $parent.attr('name'));\n            }\n\n        });\n\n        // build lists\n        $wrapper.find('p').each(function(node)\n        {\n            var $node = $R.dom(node);\n            var str = $node.attr('style');\n            var matches = /mso-list:\\w+ \\w+([0-9]+)/.exec(str);\n            if (matches)\n            {\n                $node.data('_listLevel',  parseInt(matches[1], 10));\n            }\n        });\n\n        // parse Lists\n        this._parseWordLists($wrapper);\n\n        $wrapper.find('[align]').removeAttr('align');\n        $wrapper.find('[name]').removeAttr('name');\n        $wrapper.find('span').each(function(node)\n        {\n            var $node = $R.dom(node);\n            var str = $node.attr('style');\n            var matches = /mso-list:Ignore/.exec(str);\n\n            if (matches) $node.remove();\n            else $node.unwrap();\n\n        });\n        $wrapper.find('[style]').removeAttr('style');\n        $wrapper.find(\"[class^='Mso']\").removeAttr('class');\n        $wrapper.find('a').filter(function(node) { return !node.hasAttribute('href'); }).unwrap();\n\n        // get wrapper\n        html = this.utils.getWrapperHtml($wrapper);\n        html = html.replace(/<p[^>]*><\\/p>/gi, '');\n        html = html.replace(/<li>/gi, '<li>');\n        html = html.trim();\n\n        // remove spaces between\n        html = html.replace(/\\/(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)>\\s+<(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)/gi, '/$1>\\n<$2');\n\n        var result = '';\n        var lines = html.split(/\\n/);\n        for (var i = 0; i < lines.length; i++)\n        {\n            var space = (lines[i] !== '' && lines[i].search(/>$/) === -1) ? ' ' : '\\n';\n\n            result += lines[i] + space;\n        }\n\n        return result;\n    },\n    _parseWordLists: function($wrapper)\n    {\n        var lastLevel = 0;\n        var $item = null;\n        var setPnt = false;\n        var $list = null;\n\n        $wrapper.find('p').each(function(node) {\n            var $node = $R.dom(node);\n            var currentLevel = $node.data('_listLevel');\n            if (currentLevel === null && $node.hasClass('MsoListParagraphCxSpMiddle')) {\n                currentLevel = 1;\n            }\n\n            if (currentLevel !== null) {\n                var txt = $node.text();\n                var listTag = (/^\\s*\\w+\\./.test(txt)) ? '<ol></ol>' : '<ul></ul>';\n\n                if ($node.hasClass('MsoListParagraphCxSpFirst')) {\n                    $node.before(listTag);\n                    $list = $node.prev();\n                }\n\n                if (currentLevel > lastLevel && lastLevel !== 0) {\n                    var $list2 = $R.dom(listTag);\n                    if ($item) {\n                        $item.append($list2);\n                        $list = $list2;\n                        setPnt = true;\n                    }\n                }\n\n                $node.find('span').first().unwrap();\n                $item = $R.dom('<li>' + $node.html().trim() + '</li>');\n                if ($list === null) {\n                    $node.before(listTag);\n                    $list = $node.prev();\n                }\n                $list.append($item);\n                $node.remove();\n\n                if (setPnt) {\n                    $list = $list.parent();\n                }\n\n                lastLevel = currentLevel;\n                setPnt = false;\n            }\n            else {\n                lastLevel = 0;\n            }\n        });\n    },\n\n    // is\n    _isSpacedEmpty: function(html)\n    {\n        return (html.search(this.reSpacedEmpty) !== -1);\n    },\n    _isParagraphEmpty: function(html)\n    {\n        return (html.search(/^<p><\\/p>$/i) !== -1);\n    },\n    _isHtmlMsWord: function(html)\n    {\n        return html.match(/class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i);\n    },\n\n    // set\n    _setSpanAttr: function(html)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        $wrapper.find('span').attr('data-redactor-span', true);\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    _setStyleCache: function(html)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        $wrapper.find('[style]').each(function(node)\n        {\n            var $el = $R.dom(node);\n            $el.attr('data-redactor-style-cache', $el.attr('style'));\n        });\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    _setPreClass: function(html)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        $wrapper.find('pre').addClass(this.opts.preClass);\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    _setLinkNofollow: function(html)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n        $wrapper.find('a').attr('rel', 'nofollow');\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n\n    // replace\n    _replaceScriptTag: function(html)\n    {\n        return html.replace(this.reScriptTag, '<script class=\"redactor-script-tag\" $1>$2</script>');\n    },\n    _unreplaceScriptTag: function(html)\n    {\n        return html.replace(/<script class=\"redactor-script-tag\"(.*?[^>]?)>([\\w\\W]*?)<\\/script>/gi, '<script$1>$2</script>');\n    },\n\t_replaceNlToBr: function(html)\n\t{\n\t\treturn html.replace(/\\n/g, '<br />');\n\t},\n\n    // remove\n    _removeScriptTag: function(html)\n    {\n        return html.replace(this.reScriptTag, '');\n    },\n\n    // private\n    _storeMatched: function(html, matched, stored, name)\n    {\n        this['stored' + stored] = [];\n        if (matched)\n        {\n            for (var i = 0; i < matched.length; i++)\n            {\n                this['stored' + stored][i] = matched[i];\n                html = html.replace(matched[i], '####' + name + i + '####');\n            }\n        }\n\n        return html;\n    },\n    _restoreMatched: function(html, stored, name)\n    {\n        if (this['stored' + stored])\n        {\n            for (var i = 0; i < this['stored' + stored].length; i++)\n            {\n                html = html.replace('####' + name + i + '####', this['stored' + stored][i]);\n            }\n        }\n\n        return html;\n    },\n    _decodeMarkers: function(html)\n    {\n        var decodedMarkers = '<span id=\"selection-marker-$1\" class=\"redactor-selection-marker\"></span>';\n        return html.replace(/&lt;span\\sid=\"selection-marker-(start|end)\"\\sclass=\"redactor-selection-marker\"&gt;(.*?[^>]?)&lt;\\/span&gt;/g, decodedMarkers);\n    },\n    _encodeOuter: function(node)\n    {\n        return this.encodeEntities(node.outerHTML);\n    },\n    _encodePreCodeLine: function(node)\n    {\n        var first = node.firstChild;\n        if (node.tagName == 'PRE' && (first && first.tagName === 'CODE')) return;\n\n        var encoded = this.decodeEntities(node.innerHTML);\n        encoded = encoded.replace(/&nbsp;/g, ' ').replace(/<br\\s?\\/?>/g, '\\n');\n        encoded = (this.opts.preSpaces) ? encoded.replace(/\\t/g, new Array(this.opts.preSpaces + 1).join(' ')) : encoded;\n\n        node.textContent = encoded;\n    }\n});\n$R.add('class', 'cleaner.figure', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.detector = app.detector;\n    },\n    // public\n    convert: function(html, rules)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n\n        // convert\n        $wrapper.find('img').each(this._convertImage.bind(this));\n        $wrapper.find('hr').each(this._convertLine.bind(this));\n        $wrapper.find('iframe').each(this._convertIframe.bind(this));\n        $wrapper.find('table').each(this._convertTable.bind(this));\n        $wrapper.find('form').each(this._convertForm.bind(this));\n        $wrapper.find('figure pre').each(this._convertCode.bind(this));\n\n        // variables\n        $wrapper.find('[data-redactor-type=variable]').addClass('redactor-component');\n\n        // widgets\n        $wrapper.find('figure').not('.redactor-component, .redactor-figure-code').each(this._convertWidget.bind(this));\n\n        // contenteditable\n        $wrapper.find('figure pre').each(this._setContenteditableCode.bind(this));\n        $wrapper.find('.redactor-component, .non-editable').attr('contenteditable', false);\n\n        if (this.detector.isIe())\n        {\n            $wrapper.find('[data-redactor-type=table]').removeAttr('contenteditable');\n        }\n\n        $wrapper.find('figcaption, td, th').attr('contenteditable', true);\n        $wrapper.find('.redactor-component, figcaption').attr('tabindex', '-1');\n\n        // extra rules\n        this._acceptExtraRules($wrapper, rules);\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    unconvert: function(html, rules)\n    {\n        var $wrapper = this.utils.buildWrapper(html);\n\n        // contenteditable\n        $wrapper.find('th, td, figcaption, figure, pre, code, .redactor-component').removeAttr('contenteditable tabindex');\n\n        // remove class\n        $wrapper.find('figure').removeClass('redactor-component redactor-component-active redactor-uploaded-figure');\n\n        // unconvert\n        $wrapper.find('[data-redactor-type=variable]').removeClass('redactor-component redactor-component-active');\n        $wrapper.find('figure[data-redactor-type=line]').unwrap();\n        $wrapper.find('figure[data-redactor-type=widget]').each(this._unconvertWidget.bind(this));\n        $wrapper.find('figure[data-redactor-type=form]').each(this._unconvertForm.bind(this));\n        $wrapper.find('figure[data-redactor-type=table]').each(this._unconvertTable.bind(this));\n        $wrapper.find('figure[data-redactor-type=image]').removeAttr('rel').each(this._unconvertImages.bind(this));\n\n        $wrapper.find('img').removeAttr('data-redactor-type').removeClass('redactor-component');\n        $wrapper.find('.non-editable').removeAttr('contenteditable');\n\n        // remove types\n        $wrapper.find('figure').each(this._removeTypes.bind(this));\n\n        // remove caret\n        $wrapper.find('span.redactor-component-caret').remove();\n\n        if (this.opts.breakline)\n        {\n            $wrapper.find('[data-redactor-tag=\"br\"], [data-redactor-tag=\"tbr\"]').each(function(node) {\n                var $node = $R.dom(node);\n                var $next = $node.nextElement();\n                var tbr = ($node.attr('data-redactor-tag') === 'tbr');\n\n                if (this.utils.isEmptyHtml($node.html())) {\n                    $node.html('<br>');\n                }\n                else if (node.lastChild && node.lastChild.tagName !== 'BR') {\n                    if (tbr) {\n                        if ($next.length !== 0 && $next.attr('data-redactor-tag')) {\n                            node.appendChild(document.createElement('br'));\n                        }\n                    }\n                    else {\n                        node.appendChild(document.createElement('br'));\n                    }\n                }\n            }.bind(this)).unwrap();\n        }\n        else {\n            // table markup\n            $wrapper.find('[data-redactor-tag=\"tbr\"]').each(function(node) {\n                var $node = $R.dom(node);\n                $node.removeAttr('data-redactor-tag');\n\n                if (this.opts.markup !== 'div') {\n                    var $next = $node.nextElement();\n                    if ($next.length !== 0 && $next.attr('data-redactor-tag')) {\n                        node.appendChild(document.createElement('br'));\n                    }\n\n                    $node.unwrap();\n                }\n\n            }.bind(this));\n        }\n\n        // extra rules\n        this._acceptExtraRules($wrapper, rules);\n\n        html = this.utils.getWrapperHtml($wrapper);\n        html = html.replace(/<br\\s?\\/?>$/, '');\n\n        return html;\n    },\n\n    // private\n    _convertImage: function(node)\n    {\n        var $node = $R.dom(node);\n        if (this._isNonEditable($node)) return;\n\n        // set id\n        if (this.opts.imageObserve && !$node.attr('data-image'))\n        {\n            $node.attr('data-image', this.utils.getRandomId());\n        }\n\n        var $link = $node.closest('a');\n        var $figure = $node.closest('figure');\n        var isImage = ($figure.children().not('a, img, br, figcaption').length === 0);\n        if (!isImage) return;\n\n        if ($figure.length === 0)\n        {\n            var $parent = ($link.length !== 0) ? $link.closest('p') : $node.closest('p');\n            if (this.opts.imageFigure === false && $parent.length !== 0)\n            {\n                var $el = this.utils.replaceToTag($parent, 'figure');\n                $figure = $el;\n                $figure.addClass('redactor-replace-figure');\n            }\n            else\n            {\n                if ($parent.length !== 0) {\n                    $parent.unwrap();\n                }\n\n                $figure = ($link.length !== 0) ? $link.wrap('<figure>') : $node.wrap('<figure>');\n            }\n        }\n        else\n        {\n            if ($figure.hasClass('redactor-uploaded-figure'))\n            {\n                $figure.removeClass('redactor-uploaded-figure');\n            }\n            else\n            {\n                $figure.addClass('redactor-keep-figure');\n            }\n        }\n\n        this._setFigure($figure, 'image');\n    },\n    _convertTable: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $figure = this._wrapFigure(node);\n        this._setFigure($figure, 'table');\n    },\n    _convertLine: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $figure = this._wrapFigure(node);\n        this._setFigure($figure, 'line');\n    },\n    _convertForm: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $figure = this.utils.replaceToTag(node, 'figure');\n        this._setFigure($figure, 'form');\n    },\n    _convertIframe: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $node = $R.dom(node);\n        if ($node.closest('.redactor-component').length !== 0) return;\n\n        var src = node.getAttribute('src');\n        var isVideo = (src && (src.match(this.opts.regex.youtube) || src.match(this.opts.regex.vimeo)));\n        var $figure = this._wrapFigure(node);\n\n        if (isVideo)\n        {\n            this._setFigure($figure, 'video');\n        }\n    },\n    _convertCode: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $figure = this._wrapFigure(node);\n        this._setFigure($figure, 'code');\n    },\n    _convertWidget: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $node = $R.dom(node);\n        $node.addClass('redactor-component');\n        $node.attr('data-redactor-type', 'widget');\n        $node.attr('data-widget-code', encodeURI(node.innerHTML.trim()));\n    },\n\n    // unconvert\n    _unconvertForm: function(node)\n    {\n        this.utils.replaceToTag(node, 'form');\n    },\n    _unconvertTable: function(node)\n    {\n        var $node = $R.dom(node);\n        $node.unwrap();\n    },\n    _unconvertWidget: function(node)\n    {\n        var $node = $R.dom(node);\n        $node.html(decodeURI($node.attr('data-widget-code')));\n        $node.removeAttr('data-widget-code');\n    },\n    _unconvertImages: function(node)\n    {\n        var $node = $R.dom(node);\n        $node.removeClass('redactor-component');\n\n        var isList = ($node.closest('li').length !== 0);\n        var isTable = ($node.closest('table').length !== 0);\n        var hasFigcaption = ($node.find('figcaption').length !== 0);\n\n        var style = $node.attr('style');\n        var hasStyle = !(style === null || style === '');\n        var hasClass = ($node.attr('class') !== '');\n\n        if (isList || (isTable && !hasFigcaption && !hasStyle && !hasClass))\n        {\n            $node.unwrap();\n        }\n    },\n    _removeTypes: function(node)\n    {\n        var $node = $R.dom(node);\n        var type = $node.attr('data-redactor-type');\n        var removed = ['image', 'widget', 'line', 'video', 'code', 'form', 'table'];\n        if (type && removed.indexOf(type) !== -1)\n        {\n            $node.removeAttr('data-redactor-type');\n        }\n\n        // keep figure\n        if ($node.hasClass('redactor-keep-figure'))\n        {\n            $node.removeClass('redactor-keep-figure');\n        }\n\n        // unwrap figure\n        else if (type === 'image' && this.opts.imageFigure === false)\n        {\n            var hasFigcaption = ($node.find('figcaption').length !== 0);\n            if (!hasFigcaption)\n            {\n                // replace\n                if ($node.hasClass('redactor-replace-figure'))\n                {\n                    $node.removeClass('redactor-replace-figure');\n                    this.utils.replaceToTag($node, 'p');\n                }\n                else\n                {\n                    $node.unwrap();\n                }\n            }\n        }\n\n        $node.removeClass('redactor-replace-figure');\n    },\n\n    // wrap\n    _wrapFigure: function(node)\n    {\n        var $node = $R.dom(node);\n        var $figure = $node.closest('figure');\n\n        return ($figure.length === 0) ? $node.wrap('<figure>') : $figure;\n    },\n\n    // set\n    _setFigure: function($figure, type)\n    {\n        $figure.addClass('redactor-component');\n        $figure.attr('data-redactor-type', type);\n    },\n    _setContenteditableCode: function(node)\n    {\n        if (this._isNonEditable(node)) return;\n\n        var $node = $R.dom(node);\n        var $code = $node.children('code').first();\n\n        var $el = ($code.length !== 0) ? $code : $node;\n        $el.attr('contenteditable', true).attr('tabindex', '-1');\n    },\n\n    // utils\n    _acceptExtraRules: function($wrapper, rules)\n    {\n        for (var key in rules)\n        {\n            if (typeof rules[key] === 'function')\n            {\n                rules[key]($wrapper);\n            }\n        }\n    },\n    _isNonEditable: function(node)\n    {\n        return ($R.dom(node).closest('.non-editable').length !== 0);\n    }\n});\n$R.add('class', 'cleaner.paragraphize', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.element = app.element;\n\n        // local\n        this.stored = [];\n        this.remStart = '#####replace';\n        this.remEnd = '#####';\n        this.paragraphizeTags = ['table', 'div', 'pre', 'form', 'ul', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'dl', 'blockquote', 'figcaption',\n                'address', 'section', 'header', 'footer', 'aside', 'article', 'object', 'style', 'script', 'iframe', 'select', 'input', 'textarea',\n                'button', 'option', 'map', 'area', 'math', 'hr', 'fieldset', 'legend', 'hgroup', 'nav', 'figure', 'details', 'menu', 'summary', 'p'];\n    },\n    // public\n    convert: function(html)\n    {\n        var value = this._isConverted(html);\n\n        value = (value === true) ? this._convert(html) : value;\n\n        // table\n        var $wrapper = this.utils.buildWrapper(value);\n        $wrapper.find('td, th').each(function(node) {\n            var $node = $R.dom(node);\n            this.stored = [];\n            var code = this._convert($node.html(), true);\n            $node.html(code);\n        }.bind(this));\n\n        value = this.utils.getWrapperHtml($wrapper);\n\n        return value;\n    },\n\n\n\n    // private\n    _convert: function(html, tablemarkup)\n    {\n        // build markup tag\n        var markupTag = (this.opts.breakline) ? 'sdivtag' : this.opts.markup;\n        if (tablemarkup) {\n            markupTag = 'sdivtag';\n        }\n\n        // store tags\n        html = this._storeTags(html);\n\n        // store comments\n        var storeComments = [];\n        var commentsMatch = html.match(new RegExp('<!--([\\\\w\\\\W]*?)-->', 'gi'));\n        if (commentsMatch !== null)\n        {\n            for (var i = 0; i < commentsMatch.length; i++)\n            {\n                html = html.replace(commentsMatch[i], '#####xstarthtmlcommentzz' + i + 'xendhtmlcommentzz#####');\n                storeComments.push(commentsMatch[i]);\n            }\n        }\n\n        // remove new lines\n        html = html.trim();\n\n        if (this.opts.breakline)\n        {\n            html = html.replace(new RegExp('\\\\n#####', 'gi'), '#####');\n            html = html.replace(new RegExp('#####\\\\n', 'gi'), \"#####\");\n            html = html.replace(/<br\\s?\\/?>\\n/gi, \"<br>\");\n        }\n        else\n        {\n            html = html.replace(/[\\n]+/g, \"\\n\");\n        }\n\n        html = this._trimEmptyLines(html);\n\n        // paragraph and break markers\n        html = (this.opts.breakline) ? html : html.replace(/<br\\s?\\/?>\\n/gi, \"xbreakmarkerz\\n\");\n        html = html.replace(/(?:\\r\\n|\\r|\\n)/g, \"xparagraphmarkerz\");\n\n        // replace markers\n        html = html.replace(/xparagraphmarkerz/gi, \"</\" + markupTag + \">\\n<\" + markupTag + \">\");\n        html = (this.opts.breakline) ? html : html.replace(/xbreakmarkerz/gi, \"<br>\");\n\n        // wrap all\n        html = '<' + markupTag + '>' + html + '</' + markupTag + '>';\n\n        // clean\n        html = html.replace(new RegExp('<' + markupTag + '>#####', 'gi'), '#####');\n        html = html.replace(new RegExp('#####</' + markupTag + '>', 'gi'), '#####');\n\n        // restore tags\n        html = this._restoreTags(html);\n\n        // restore comments\n        for (var i = 0; i < storeComments.length; i++)\n        {\n            html = html.replace('#####xstarthtmlcommentzz' + i + 'xendhtmlcommentzz#####', storeComments[i]);\n        }\n\n        var breaklineAttr = 'br';\n        if (tablemarkup) {\n            breaklineAttr = 'tbr';\n        }\n\n        // clean restored\n        html = (this.opts.breakline) ? html : html.replace(new RegExp('<' + markupTag + '><br\\\\s?/?></' + markupTag + '>', 'gi'), '<' + markupTag + '></' + markupTag + '>');\n        html = html.replace(new RegExp('<sdivtag>', 'gi'), '<div data-redactor-tag=\"' + breaklineAttr + '\">');\n        html = html.replace(new RegExp('sdivtag', 'gi'), 'div');\n\n        return html;\n    },\n    _storeTags: function(html)\n    {\n        var self = this;\n        var $wrapper = this.utils.buildWrapper(html);\n\n        if (this.opts.breakline)\n        {\n            $wrapper.find('p').each(function(node)\n            {\n                var $node = $R.dom(node);\n                var isUnwrap = ($node.closest('figure[data-redactor-type=widget],figure[data-redactor-type=form],.non-editable').length === 0);\n\n                if (isUnwrap)\n                {\n                    $node.append('<br><br>');\n                    $node.unwrap();\n                }\n            });\n        }\n\n        $wrapper.find(this.paragraphizeTags.join(', ')).each(function(node, i)\n        {\n            var replacement = document.createTextNode(\"\\n\" + self.remStart + i + self.remEnd + \"\\n\");\n            self.stored.push(node.outerHTML);\n            node.parentNode.replaceChild(replacement, node);\n        });\n\n        return this.utils.getWrapperHtml($wrapper);\n    },\n    _restoreTags: function(html)\n    {\n        for (var i = 0; i < this.stored.length; i++)\n        {\n            this.stored[i] = this.stored[i].replace(/\\$/g, '&#36;');\n            html = html.replace(this.remStart + i + this.remEnd, this.stored[i]);\n        }\n\n        return html;\n    },\n    _trimEmptyLines: function(html)\n    {\n        var str = '';\n        var arr = html.split(\"\\n\");\n        for (var i = 0; i < arr.length; i++)\n        {\n            if (arr[i].trim() !== '')\n            {\n                str += arr[i] + \"\\n\";\n            }\n        }\n\n        return str.replace(/\\n$/, '');\n    },\n    _isConverted: function(html)\n    {\n        if (this._isDisabled(html)) return html;\n        else if (this._isEmptyHtml(html)) return this.opts.emptyHtml;\n        else return true;\n    },\n    _isDisabled: function()\n    {\n        return (this.opts.paragraphize === false || this.element.isType('inline'));\n    },\n    _isEmptyHtml: function(html)\n    {\n        return (html === '' || html === '<p></p>' || html === '<div></div>');\n    }\n});\n$R.add('service', 'detector', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.userAgent = navigator.userAgent.toLowerCase();\n    },\n\tisWebkit: function()\n\t{\n\t\treturn /webkit/.test(this.userAgent);\n\t},\n\tisFirefox: function()\n\t{\n\t\treturn (this.userAgent.indexOf('firefox') > -1);\n\t},\n\tisIe: function(v)\n\t{\n        if (document.documentMode || /Edge/.test(navigator.userAgent)) return 'edge';\n\n\t\tvar ie;\n\t\tie = RegExp('msie' + (!isNaN(v)?('\\\\s'+v):''), 'i').test(navigator.userAgent);\n\t\tif (!ie) ie = !!navigator.userAgent.match(/Trident.*rv[ :]*11\\./);\n\n\t\treturn ie;\n\t},\n\tisMobile: function()\n\t{\n\t\treturn /(iPhone|iPod|Android)/.test(navigator.userAgent);\n\t},\n\tisDesktop: function()\n\t{\n\t\treturn !/(iPhone|iPod|iPad|Android)/.test(navigator.userAgent);\n\t},\n\tisIpad: function()\n\t{\n\t\treturn /iPad/.test(navigator.userAgent);\n\t}\n});\n$R.add('service', 'offset', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    get: function(el, trimmed)\n    {\n        var offset = { start: 0, end: 0 };\n        var node = this.utils.getNode(el);\n        if (!node) return false;\n\n        var isEditor = this.editor.isEditor(node);\n        var isIn = (isEditor) ? true : this.selection.isIn(node);\n        var range = this.selection.getRange();\n\n        if (!isEditor && !isIn)\n        {\n            offset = false;\n        }\n        else if (this.selection.is() && isIn)\n        {\n            var $startNode = $R.dom(range.startContainer);\n            var fix = ($startNode.hasClass('redactor-component')) ? range.startOffset : 0;\n            var clonedRange = range.cloneRange();\n\n            clonedRange.selectNodeContents(node);\n            clonedRange.setEnd(range.startContainer, range.startOffset);\n\n            var selection = this._getString(range, trimmed);\n\n            offset.start = this._getString(clonedRange, trimmed).length - fix;\n            offset.end = offset.start + selection.length + fix;\n        }\n\n        return offset;\n    },\n    set: function(offset, el)\n    {\n        if (this._setComponentOffset(el)) return;\n\n        this.component.clearActive();\n        var node = this.utils.getNode(el);\n        if (!node) return;\n\n        var size = this.size(node);\n        var charIndex = 0, range = document.createRange();\n\n        offset.end = (offset.end > size) ? size : offset.end;\n\n        range.setStart(node, 0);\n        range.collapse(true);\n\n        var nodeStack = [node], foundStart = false, stop = false;\n        while (!stop && (node = nodeStack.pop()))\n        {\n            if (node.nodeType == 3)\n            {\n                var nextCharIndex = charIndex + node.length;\n\n                if (!foundStart && !this._isFigcaptionNext(node) && offset.start >= charIndex && offset.start <= nextCharIndex)\n                {\n                    range.setStart(node, offset.start - charIndex);\n                    foundStart = true;\n                }\n\n                if (foundStart && offset.end >= charIndex && offset.end <= nextCharIndex)\n                {\n                    range.setEnd(node, offset.end - charIndex);\n                    stop = true;\n                }\n\n                charIndex = nextCharIndex;\n            }\n            else\n            {\n                var i = node.childNodes.length;\n                while (i--)\n                {\n                    nodeStack.push(node.childNodes[i]);\n                }\n            }\n        }\n\n        this.selection.setRange(range);\n    },\n    size: function(el, trimmed)\n    {\n        var node = this.utils.getNode(el);\n        if (node)\n        {\n            var range = document.createRange();\n\n            var clonedRange = range.cloneRange();\n            clonedRange.selectNodeContents(node);\n\n            return this._getString(clonedRange, trimmed).length;\n        }\n\n        return 0;\n    },\n\n    // private\n    _getString: function(obj, trimmed)\n    {\n        var str = obj.toString();\n        str = (this.editor.isEmpty()) ? str.replace(/\\uFEFF/g, '') : str;\n        str = (trimmed) ? str.trim() : str;\n\n        return str;\n    },\n    _setComponentOffset: function(el)\n    {\n        return (this.component.isNonEditable(el)) ? this.component.setActive(el) : false;\n    },\n    _isFigcaptionNext: function(node)\n    {\n        var next = node.nextSibling;\n        return (node.nodeValue.trim() === '' && next && next.tagName === 'FIGCAPTION');\n    }\n});\n$R.add('service', 'inspector', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    // parse\n    parse: function(el)\n    {\n        return $R.create('inspector.parser', this.app, this, el);\n    },\n\n    // text detection\n    isText: function(el)\n    {\n        if (typeof el === 'string' && !/^\\s*<(\\w+|!)[^>]*>/.test(el))\n        {\n            return true;\n        }\n\n        var node = $R.dom(el).get();\n        return (node && node.nodeType === 3); //  && !this.selection.getBlock(el)\n    },\n\n    // tag detection\n    isInlineTag: function(tag, extend)\n    {\n        var tags = this._extendTags(this.opts.inlineTags, extend);\n\n        return (this._isTag(tag) && tags.indexOf(tag.toLowerCase()) !== -1);\n    },\n    isBlockTag: function(tag, extend)\n    {\n        var tags = this._extendTags(this.opts.blockTags, extend);\n\n        return (this._isTag(tag) && tags.indexOf(tag.toLowerCase()) !== -1);\n    },\n    isTableCellTag: function(tag)\n    {\n        return (['td', 'th'].indexOf(tag.toLowerCase()) !== -1);\n    },\n    isHeadingTag: function(tag)\n    {\n        return (['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].indexOf(tag.toLowerCase()) !== -1);\n    },\n\n\n    _isTag: function(tag)\n    {\n        return (tag !== undefined && tag);\n    },\n    _extendTags: function(tags, extend)\n    {\n        tags = tags.concat(tags);\n\n        if (extend)\n        {\n            for (var i = 0 ; i < extend.length; i++)\n            {\n                tags.push(extend[i]);\n            }\n        }\n\n        return tags;\n    }\n});\n$R.add('class', 'inspector.parser', {\n    init: function(app, inspector, el)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.selection = app.selection;\n        this.inspector = inspector;\n\n        // local\n        this.el = el;\n        this.$el = $R.dom(this.el, '.redactor-in');\n        this.node = this.$el.get();\n\n        // comment node\n        if (this.node && this.node.nodeType === 8)\n        {\n            this.node = false;\n        }\n\n        this.$component = this.$el.closest('.redactor-component', '.redactor-in');\n    },\n    // is\n    isEditor: function()\n    {\n        return (this.node === this.editor.getElement().get());\n    },\n    isInEditor: function()\n    {\n        return (this.$el.parents('.redactor-in-' + this.uuid).length !== 0);\n    },\n    isComponent: function()\n    {\n        return (this.$component.length !== 0);\n    },\n    isComponentType: function(type)\n    {\n        return (this.getComponentType() === type);\n    },\n    isComponentActive: function()\n    {\n        return (this.isComponent() && this.$component.hasClass('redactor-component-active'));\n    },\n    isComponentEditable: function()\n    {\n        var types = ['code', 'table'];\n        var type = this.getComponentType();\n\n        return (this.isComponent() && types.indexOf(type) !== -1);\n    },\n    isFigcaption: function()\n    {\n        return this.getFigcaption();\n    },\n    isPre: function()\n    {\n        return this.getPre();\n    },\n    isCode: function()\n    {\n        var $code = this.$el.closest('code');\n        var $parent = $code.parent('pre');\n\n        return ($code.length !== 0 && $parent.length === 0);\n    },\n    isList: function()\n    {\n        return this.getList();\n    },\n    isFirstListItem: function()\n    {\n        return this._getLastOrFirstListItem('first');\n    },\n    isLastListItem: function()\n    {\n        return this._getLastOrFirstListItem('last');\n    },\n    isFirstTableCell: function()\n    {\n        return this._getLastOrFirstTableCell('first');\n    },\n    isLastTableCell: function()\n    {\n        return this._getLastOrFirstTableCell('last');\n    },\n    isTable: function()\n    {\n        return (this.isComponentType('table') || this.getTable());\n    },\n    isHeading: function()\n    {\n        return this.getHeading();\n    },\n    isBlockquote: function()\n    {\n        return this.getBlockquote();\n    },\n    isDl: function()\n    {\n        return this.getDl();\n    },\n    isParagraph: function()\n    {\n        return this.getParagraph();\n    },\n    isLink: function()\n    {\n        return this.getLink();\n    },\n    isFile: function()\n    {\n        return this.getFile();\n    },\n    isText: function()\n    {\n        return this.inspector.isText(this.el);\n    },\n    isInline: function()\n    {\n        var tags = this.opts.inlineTags;\n\n        return (this.isElement()) ? (tags.indexOf(this.node.tagName.toLowerCase()) !== -1) : false;\n    },\n    isBlock: function()\n    {\n        var tags = this.opts.blockTags;\n\n        return (this.isElement()) ? (tags.indexOf(this.node.tagName.toLowerCase()) !== -1) : false;\n    },\n    isElement: function()\n    {\n        return (this.node && this.node.nodeType && this.node.nodeType !== 3);\n    },\n\n    // has\n    hasParent: function(tags)\n    {\n        return (this.$el.closest(tags.join(',')).length !== 0);\n    },\n\n    // get\n    getNode: function()\n    {\n        return this.node;\n    },\n    getTag: function()\n    {\n        return (this.isElement()) ? this.node.tagName.toLowerCase() : false;\n    },\n    getComponent: function()\n    {\n        return (this.isComponent()) ? this.$component.get() : false;\n    },\n    getComponentType: function()\n    {\n        return (this.isComponent()) ? this.$component.attr('data-redactor-type') : false;\n    },\n    getFirstNode: function()\n    {\n        return this.utils.getFirstNode(this.node);\n    },\n    getLastNode: function()\n    {\n        return this.utils.getLastNode(this.node);\n    },\n    getFirstElement: function()\n    {\n        return this.utils.getFirstElement(this.node);\n    },\n    getLastElement: function()\n    {\n        return this.utils.getLastElement(this.node);\n    },\n    getFigcaption: function()\n    {\n        return this._getClosestNode('figcaption');\n    },\n    getPre: function()\n    {\n        return this._getClosestNode('pre');\n    },\n    getCode: function()\n    {\n        return this._getClosestNode('code');\n    },\n    getList: function()\n    {\n        return this._getClosestNode('ul, ol');\n    },\n    getParentList: function()\n    {\n        return this._getClosestUpNode('ul, ol');\n    },\n    getListItem: function()\n    {\n        return this._getClosestNode('li');\n    },\n    getTable: function()\n    {\n        if (this.getComponentType('table'))\n        {\n            return this.$component.find('table').get();\n        }\n        else\n        {\n            return this._getClosestNode('table');\n        }\n    },\n    getTableCell: function()\n    {\n        var $td = this.$el.closest('td, th');\n\n        return ($td.length !== 0) ? $td.get() : false;\n    },\n    getComponentCodeElement: function()\n    {\n        return (this.isComponentType('code')) ? this.$component.find('pre code, pre').last().get() : false;\n    },\n    getImageElement: function()\n    {\n        return (this.isComponentType('image')) ? this.$component.find('img').get() : false;\n    },\n    getParagraph: function()\n    {\n        return this._getClosestNode('p');\n    },\n    getHeading: function()\n    {\n        return this._getClosestNode('h1, h2, h3, h4, h5, h6');\n    },\n    getDl: function()\n    {\n        return this._getClosestNode('dl');\n    },\n    getBlockquote: function()\n    {\n        return this._getClosestNode('blockquote');\n    },\n    getLink: function()\n    {\n        var isComponent = (this.isComponent() && !this.isFigcaption());\n        var isTable = this.isComponentType('table');\n\n        if (isTable || !isComponent)\n        {\n            var $el = this._getClosestElement('a');\n\n            return ($el && !$el.attr('data-file')) ? $el.get() : false;\n        }\n\n        return false;\n    },\n    getFile: function()\n    {\n        var isComponent = this.isComponent();\n        var isTable = this.isComponentType('table');\n\n        if (isTable || !isComponent)\n        {\n            var $el = this._getClosestElement('a');\n\n            return ($el && $el.attr('data-file')) ? $el.get() : false;\n        }\n\n        return false;\n    },\n\n    // find\n    findFirstNode: function(selector)\n    {\n        return this.$el.find(selector).first().get();\n    },\n    findLastNode: function(selector)\n    {\n        return this.$el.find(selector).last().get();\n    },\n\n    // private\n    _getLastOrFirstListItem: function(type)\n    {\n        var list = this.getList();\n        var tag = this.getTag();\n        if (list && tag === 'li')\n        {\n            var item = $R.dom(list).find('li')[type]().get();\n            if (item && this.node === item)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    },\n    _getLastOrFirstTableCell: function(type)\n    {\n        var table = this.getTable();\n        var tag = this.getTag();\n        if (table && (tag === 'td' || tag === 'th'))\n        {\n            var item = $R.dom(table).find('td, th')[type]().get();\n            if (item && this.node === item)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    },\n    _getClosestUpNode: function(selector)\n    {\n        var $el = this.$el.parents(selector, '.redactor-in').last();\n\n        return ($el.length !== 0) ? $el.get() : false;\n    },\n    _getClosestNode: function(selector)\n    {\n        var $el = this.$el.closest(selector, '.redactor-in');\n\n        return ($el.length !== 0) ? $el.get() : false;\n    },\n    _getClosestElement: function(selector)\n    {\n        var $el = this.$el.closest(selector, '.redactor-in');\n\n        return ($el.length !== 0) ? $el : false;\n    }\n});\n$R.add('service', 'marker', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    build: function(pos, html)\n    {\n        var marker = document.createElement('span');\n\n        marker.id = 'selection-marker-' + this._getPos(pos);\n        marker.className = 'redactor-selection-marker';\n        marker.innerHTML = this.opts.markerChar;\n\n        return (html) ? marker.outerHTML : marker;\n    },\n    buildHtml: function(pos)\n    {\n        return this.build(pos, true);\n    },\n    insert: function(side)\n    {\n        this.remove();\n\n        var atStart = (side !== 'both' && (side === 'start' || this.selection.isCollapsed()));\n\n        if (!this.selection.is()) this.editor.focus();\n\n        var range = this.selection.getRange();\n        if (range)\n        {\n            var start = this.build('start');\n            var end = this.build('end');\n\n            var cloned = range.cloneRange();\n\n            if (!atStart)\n            {\n                cloned.collapse(false);\n                cloned.insertNode(end);\n            }\n\n            cloned.setStart(range.startContainer, range.startOffset);\n            cloned.collapse(true);\n            cloned.insertNode(start);\n\n            range.setStartAfter(start);\n\n            if (!atStart)\n            {\n                range.setEndBefore(end);\n            }\n\n            this.selection.setRange(range);\n\n            return start;\n        }\n    },\n    find: function(pos, $context)\n    {\n        var $editor = this.editor.getElement();\n        var $marker = ($context || $editor).find('span#selection-marker-' + this._getPos(pos));\n\n        return ($marker.length !== 0) ? $marker.get() : false;\n    },\n    restore: function()\n    {\n        var start = this.find('start');\n        var end = this.find('end');\n\n        var range = this.selection.getRange();\n        if (!range || !this.selection.is())\n        {\n            this.editor.focus();\n            range = document.createRange();\n        }\n\n        if (start)\n        {\n            var prev = (end) ? end.previousSibling : false;\n            var next = start.nextSibling;\n            next = (next && next.nodeType === 3 && next.textContent.replace(/[\\n\\t]/g, '') === '') ? false : next;\n\n            if (!end)\n            {\n                if (next)\n                {\n                    range.selectNodeContents(next);\n                    range.collapse(true);\n                }\n                else\n                {\n                    this._restoreInject(range, start);\n                }\n            }\n            else if (next && next.id === 'selection-marker-end')\n            {\n                this._restoreInject(range, start);\n            }\n            else\n            {\n                if (prev && next)\n                {\n                    range.selectNodeContents(prev);\n                    range.collapse(false);\n                    range.setStart(next, 0);\n                }\n                else if (prev && !next)\n                {\n                    range.selectNodeContents(prev);\n                    range.collapse(false);\n                    range.setStartAfter(start);\n                }\n                else\n                {\n                    range.setStartAfter(start);\n                    range.setEndBefore(end);\n                }\n            }\n\n            this.selection.setRange(range);\n\n            if (start) start.parentNode.removeChild(start);\n            if (end) end.parentNode.removeChild(end);\n        }\n    },\n    remove: function()\n    {\n        var start = this.find('start');\n        var end = this.find('end');\n\n        if (start) start.parentNode.removeChild(start);\n        if (end) end.parentNode.removeChild(end);\n    },\n\n    // private\n    _getPos: function(pos)\n    {\n        return (pos === undefined) ? 'start' : pos;\n    },\n    _restoreInject: function(range, start)\n    {\n        var textNode = this.utils.createInvisibleChar();\n        $R.dom(start).after(textNode);\n\n        range.selectNodeContents(textNode);\n        range.collapse(false);\n    }\n});\n$R.add('service', 'component', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.activeClass = 'redactor-component-active';\n    },\n    create: function(type, el)\n    {\n        return $R.create(type + '.component', this.app, el);\n    },\n    build: function(el)\n    {\n        var $el = $R.dom(el);\n        var component;\n        var type = $el.attr('data-redactor-type');\n        if (type)\n        {\n            component = this.create(type, el);\n        }\n\n        return (component) ? component : el;\n    },\n    remove: function(el, caret)\n    {\n        var $component = $R.dom(el).closest('.redactor-component');\n        var type = $component.attr('data-redactor-type');\n        var current = $component.parent();\n        var data = this.inspector.parse(current);\n        var prev = this.utils.findSiblings($component, 'prev');\n        var next = this.utils.findSiblings($component, 'next');\n        var stop = this.app.broadcast(type + '.delete', $component);\n        if (stop !== false)\n        {\n            $component.remove();\n\n            // callback\n            this.app.broadcast(type + '.deleted', $component);\n            this.app.broadcast('contextbar.close');\n            this.app.broadcast('imageresizer.stop');\n\n            if (caret !== false)\n            {\n                var cell = data.getTableCell();\n                if (cell && this.utils.isEmptyHtml(cell.innerHTML))\n                {\n                    this.caret.setStart(cell);\n                }\n                else if (next) this.caret.setStart(next);\n                else if (prev) this.caret.setEnd(prev);\n                else\n                {\n                    this.editor.startFocus();\n                }\n            }\n\n            // is empty\n            if (this.editor.isEmpty())\n            {\n                this.editor.setEmpty();\n                this.editor.startFocus();\n                this.app.broadcast('empty');\n            }\n        }\n    },\n    isNonEditable: function(el)\n    {\n        var data = this.inspector.parse(el);\n        return (data.isComponent() && !data.isComponentEditable());\n    },\n    isActive: function(el)\n    {\n        var $component;\n        if (el)\n        {\n            var data = this.inspector.parse(el);\n            $component = $R.dom(data.getComponent());\n\n            return $component.hasClass(this.activeClass);\n        }\n        else\n        {\n            $component = this._find();\n\n            return ($component.length !== 0);\n        }\n    },\n    getActive: function(dom)\n    {\n        var $component = this._find();\n\n        return ($component.length !== 0) ? ((dom) ? $component : $component.get()) : false;\n    },\n    setActive: function(el)\n    {\n        this.clearActive();\n        this.editor.focus();\n\n        var data = this.inspector.parse(el);\n        var component = data.getComponent();\n        var $component = $R.dom(component);\n\n        if (!data.isFigcaption())\n        {\n            var $caret = $component.find('.redactor-component-caret');\n            if ($caret.length === 0)\n            {\n                $caret = this._buildCaret();\n                $component.prepend($caret);\n            }\n\n            this.caret.setAtStart($caret.get());\n        }\n\n        $component.addClass(this.activeClass);\n    },\n    clearActive: function()\n    {\n        var $component = this._find();\n\n        $component.removeClass(this.activeClass);\n        $component.find('.redactor-component-caret').remove();\n\n        this.app.broadcast('imageresizer.stop');\n    },\n    setOnEvent: function(e, contextmenu)\n    {\n        this.clearActive();\n\n        var data = this.inspector.parse(e.target);\n        if (data.isFigcaption() || data.isComponentEditable())\n        {\n            return;\n        }\n\n        // component\n        if (data.isComponent())\n        {\n            this.setActive(e.target);\n            if (contextmenu !== true) e.preventDefault();\n        }\n    },\n    executeScripts: function(scripts)\n    {\n        if (scripts === undefined)\n        {\n            var $editor = this.editor.getElement();\n            var scripts = $editor.find('[data-redactor-type]').find(\"script\").getAll();\n            this.executeScripts.call(this, scripts);\n        }\n        else\n        {\n            for (var i = 0; i < scripts.length; i++)\n            {\n                if (scripts[i].src !== '')\n                {\n                    var src = scripts[i].src;\n                    this.$doc.find('head script[src=\"' + src + '\"]').remove();\n\n                    var $script = $R.dom('<script>');\n                    $script.attr('src', src);\n                    $script.attr('async defer');\n                    $script.get().onload = function()\n                    {\n                        if (src.search('instagram') !== -1) window.instgrm.Embeds.process();\n                        this.executeScripts(scripts.slice(i + 1));\n                    }.bind(this);\n\n                    var head = document.getElementsByTagName('head')[0];\n                    if (head) head.appendChild($script.get());\n\n                    break;\n                }\n                else\n                {\n                    try {\n                        eval(scripts[i].innerHTML);\n                    } catch (e) {}\n                }\n            }\n        }\n    },\n\n    // private\n    _find: function()\n    {\n        return this.editor.getElement().find('.' + this.activeClass);\n    },\n    _buildCaret: function()\n    {\n        var $caret = $R.dom('<span>');\n        $caret.addClass('redactor-component-caret');\n        $caret.attr('contenteditable', true);\n\n        return $caret;\n    }\n});\n$R.add('service', 'insertion', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    set: function(html, clean, focus)\n    {\n        if (html === null) {\n            html = '';\n        }\n\n        html = (clean !== false) ? this.cleaner.input(html) : html;\n        html = (clean !== false) ? this.cleaner.paragraphize(html) : html;\n\n        // set html\n        var $editor = this.editor.getElement();\n        $editor.html(html);\n\n        // set focus at the end\n        if (focus !== false) this.editor.endFocus();\n\n        return html;\n    },\n    insertNode: function(node, caret)\n    {\n        this.editor.focus();\n        var fragment = (this.utils.isFragment(node)) ? node : this.utils.createFragment(node);\n\n        this._collapseSelection();\n        this._insertFragment(fragment);\n        this._setCaret(caret, fragment);\n\n        return this._sendNodes(fragment.nodes);\n    },\n    insertBreakLine: function()\n    {\n        return this.insertNode(document.createElement('br'), 'after');\n    },\n    insertNewline: function()\n    {\n        return this.insertNode(document.createTextNode('\\n'), 'after');\n    },\n    insertText: function(text)\n    {\n        return this.insertHtml(this.cleaner.getFlatText(text));\n    },\n    insertChar: function(charhtml)\n    {\n        return this.insertNode(charhtml, 'after');\n    },\n    insertRaw: function(html)\n    {\n        return this.insertHtml(html, false);\n    },\n    insertToEnd: function(lastNode, type)\n    {\n        if (!lastNode) return;\n        if (lastNode.nodeType === 3 && lastNode.nodeValue.search(/^\\n/) !== -1)\n        {\n            lastNode = lastNode.previousElementSibling;\n        }\n\n        var $lastNode = $R.dom(lastNode);\n        if ($lastNode.attr('data-redactor-type') === type)\n        {\n            var tag = (this.opts.breakline) ? '<br>' : '<p>';\n            var $newNode = $R.dom(tag);\n\n            $lastNode.after($newNode);\n            this.caret.setStart($newNode);\n        }\n    },\n    insertPoint: function(e)\n    {\n        var range, data;\n        var marker = this.marker.build('start');\n        var markerInserted = false;\n        var x = e.clientX, y = e.clientY;\n\n        if (document.caretPositionFromPoint)\n        {\n            var pos = document.caretPositionFromPoint(x, y);\n            var sel = document.getSelection();\n\n            data = this.inspector.parse(pos.offsetNode);\n            if (data.isInEditor())\n            {\n                range = sel.getRangeAt(0);\n                range.setStart(pos.offsetNode, pos.offset);\n                range.collapse(true);\n                range.insertNode(marker);\n                markerInserted = true;\n            }\n        }\n        else if (document.caretRangeFromPoint)\n        {\n            range = document.caretRangeFromPoint(x, y);\n\n            data = this.inspector.parse(range.startContainer);\n            if (data.isInEditor())\n            {\n                range.insertNode(marker);\n                markerInserted = true;\n            }\n        }\n\n        return markerInserted;\n    },\n    insertToPoint: function(e, html, point, clean)\n    {\n        var pointInserted = (point === true) ? true : this.insertPoint(e);\n        if (!pointInserted)\n        {\n            var lastNode = this.editor.getLastNode();\n            $R.dom(lastNode).after(this.marker.build('start'));\n        }\n\n        this.component.clearActive();\n        this.selection.restoreMarkers();\n\n        return this.insertHtml(html, clean);\n    },\n    insertToOffset: function(start, html)\n    {\n        this.offset.set({ start: start, end: start });\n\n        return this.insertHtml(html);\n    },\n    insertHtml: function(html, clean)\n    {\n        if (!this.opts.input) return;\n\n        // parse\n        var parsedInput = this.utils.parseHtml(html);\n\n        // all selection\n        if (this.selection.isAll())\n        {\n            return this._insertToAllSelected(parsedInput);\n        }\n\n        // there is no selection\n        if (!this.selection.is())\n        {\n            var $el = $R.dom('<p>');\n            var $editor = this.editor.getElement();\n\n            $editor.append($el);\n            this.caret.setStart($el);\n        }\n\n        // environment\n        var isCollapsed = this.selection.isCollapsed();\n        var isText = this.selection.isText();\n        var current = this.selection.getCurrent();\n        var dataCurrent = this.inspector.parse(current);\n\n        // collapse air\n        this._collapseSelection();\n\n        // clean\n        parsedInput = this._getCleanedInput(parsedInput, dataCurrent, clean);\n\n        // input is figure or component span\n        var isFigure = this._isFigure(parsedInput.html);\n        var isComponentSpan = this._isComponentSpan(parsedInput.html);\n        var isInsertedText = this.inspector.isText(parsedInput.html);\n        var fragment, except;\n\n        // empty editor\n        if (this.editor.isEmpty())\n        {\n            return this._insertToEmptyEditor(parsedInput.html);\n        }\n        // to component\n        else if (dataCurrent.isComponent() && !dataCurrent.isComponentEditable())\n        {\n            return this._insertToWidget(current, dataCurrent, parsedInput.html);\n        }\n        // component span\n        else if (isComponentSpan)\n        {\n            return this.insertNode(parsedInput.nodes, 'end');\n        }\n        // inserting figure & split node\n        else if (isFigure && !isText && !dataCurrent.isList())\n        {\n            if (dataCurrent.isInline())\n            {\n                return this._insertToInline(current, parsedInput);\n            }\n\n            fragment = this.utils.createFragment(parsedInput.html);\n            this.utils.splitNode(current, fragment);\n            this.caret.setEnd(fragment.last);\n\n            return this._sendNodes(fragment.nodes);\n        }\n        // to code\n        else if (dataCurrent.isCode())\n        {\n            return this._insertToCode(parsedInput, current, clean);\n        }\n        // to pre\n        else if (dataCurrent.isPre())\n        {\n            return this._insertToPre(parsedInput, clean);\n        }\n        // to h1-h6 & figcaption\n        else if (dataCurrent.isHeading() || dataCurrent.isFigcaption())\n        {\n            parsedInput.html = (clean !== false) ? this.cleaner.removeTagsExcept(parsedInput.html, ['a']) : parsedInput.html;\n            parsedInput.html = (clean !== false) ? this.cleaner.replaceNbspToSpaces(parsedInput.html) : parsedInput.html;\n\n            fragment = this.utils.createFragment(parsedInput.html);\n\n            return this.insertNode(fragment, 'end');\n        }\n        // text inserting\n        else if (isInsertedText)\n        {\n            if (!isText && this.opts.markup !== 'br' && this._hasBlocksAndImages(parsedInput.nodes))\n            {\n                parsedInput.html = (clean !== false) ? this.cleaner.paragraphize(parsedInput.html) : parsedInput.html;\n\n                fragment = this.utils.createFragment(parsedInput.html);\n\n                this.utils.splitNode(current, fragment);\n                this.caret.setEnd(fragment.last);\n                return this._sendNodes(fragment.nodes);\n            }\n\n            parsedInput.html = (clean !== false) ? parsedInput.html.replace(/\\n/g, '<br>') : parsedInput.html;\n\n            fragment = this.utils.createFragment(parsedInput.html);\n\n            return this.insertNode(fragment.nodes, 'end');\n        }\n        // uncollapsed\n        else if (!isCollapsed && !isFigure)\n        {\n            parsedInput.html = (clean !== false) ? this.cleaner.paragraphize(parsedInput.html) : parsedInput.html;\n\n            fragment = this.utils.createFragment(parsedInput.html);\n\n            return this.insertNode(fragment, 'end');\n        }\n        // to inline tag\n        else if (dataCurrent.isInline() && !this._isPlainHtml(parsedInput.html))\n        {\n            return this._insertToInline(current, parsedInput);\n        }\n        // to blockquote or dt, dd\n        else if (dataCurrent.isBlockquote() || dataCurrent.isDl())\n        {\n            except = this.opts.inlineTags;\n            except.concat(['br']);\n\n            parsedInput.html = (clean !== false) ? this.cleaner.replaceBlocksToBr(parsedInput.html) : parsedInput.html;\n            parsedInput.html = (clean !== false) ? this.cleaner.removeTagsExcept(parsedInput.html, except) : parsedInput.html;\n\n            fragment = this.utils.createFragment(parsedInput.html);\n\n            return this.insertNode(fragment, 'end');\n        }\n        // to p\n        else if (dataCurrent.isParagraph())\n        {\n            if (this._isPlainHtml(parsedInput.html))\n            {\n                return this.insertNode(parsedInput.nodes, 'end');\n            }\n\n            parsedInput.html = (clean !== false) ? this.cleaner.paragraphize(parsedInput.html) : parsedInput.html;\n\n            fragment = this.utils.createFragment(parsedInput.html);\n\n            this.utils.splitNode(current, fragment);\n            this.caret.setEnd(fragment.last);\n\n            return this._sendNodes(fragment.nodes);\n        }\n        // to li\n        else if (dataCurrent.isList())\n        {\n            except = this.opts.inlineTags;\n            except = except.concat(['br', 'li', 'ul', 'ol', 'img']);\n\n            parsedInput.html = (clean !== false) ? this.cleaner.replaceBlocksToBr(parsedInput.html) : parsedInput.html;\n            parsedInput.html = (clean !== false) ? this.cleaner.removeTagsExcept(parsedInput.html, except) : parsedInput.html;\n            parsedInput.html = (clean !== false) ? this.cleaner.removeBrAtEnd(parsedInput.html) : parsedInput.html;\n\n            fragment = this.utils.createFragment(parsedInput.html);\n            parsedInput.nodes = fragment.nodes;\n\n            if (this._containsTags(parsedInput.html, ['ul', 'ol', 'li']))\n            {\n                var element = this.selection.getElement(current);\n                if (element && element.tagName === 'LI' && this.caret.isStart(element))\n                {\n                    parsedInput.nodes = $R.dom(fragment.nodes).unwrap('ul, ol').getAll();\n                    $R.dom(element).before(parsedInput.nodes);\n\n                    var lastNode = parsedInput.nodes[parsedInput.nodes.length-1];\n                    this.caret.setEnd(lastNode);\n\n                    return this._sendNodes(parsedInput.nodes);\n                }\n                else if (this._isPlainHtml(parsedInput.html))\n                {\n                    return this.insertNode(fragment, 'end');\n                }\n                else\n                {\n                    fragment = this._buildList(parsedInput, element, fragment);\n\n                    this.utils.splitNode(current, fragment, true);\n                    this.caret.setEnd(fragment.last);\n\n                    return this._sendNodes(fragment.nodes);\n                }\n            }\n        }\n\n        // other cases\n        return this.insertNode(parsedInput.nodes, 'end');\n    },\n\n    // private\n    _insertToAllSelected: function(parsedInput)\n    {\n        var insertedHtml = this.set(parsedInput.html);\n        var dataInserted = this.utils.parseHtml(insertedHtml);\n\n        return this._sendNodes(dataInserted.nodes);\n    },\n    _insertToEmptyEditor: function(html)\n    {\n        html = this.cleaner.paragraphize(html);\n\n        var fragment = this.utils.createFragment(html);\n        var $editor = this.editor.getElement();\n\n        $editor.html('');\n        $editor.append(fragment.frag);\n\n        this.caret.setEnd(fragment.last);\n\n        return this._sendNodes(fragment.nodes);\n    },\n    _insertToInline: function(current, parsedInput)\n    {\n        var fragment = this.utils.createFragment(parsedInput.html);\n        this.utils.splitNode(current, fragment, false, true);\n        this.caret.setEnd(fragment.last);\n\n        return this._sendNodes(fragment.nodes);\n    },\n    _insertToCode: function(parsedInput, current, clean)\n    {\n        parsedInput.html = (clean !== false) ? this.cleaner.encodeHtml(parsedInput.html) : parsedInput.html;\n        parsedInput.html = (clean !== false) ? this.cleaner.removeNl(parsedInput.html) : parsedInput.html;\n\n        var fragment = this.utils.createFragment(parsedInput.html);\n        var nodes = this.insertNode(fragment, 'end');\n\n        this.utils.normalizeTextNodes(current);\n\n        return nodes;\n    },\n    _insertToPre: function(parsedInput, clean)\n    {\n        parsedInput.html = (clean !== false) ? this.cleaner.encodeHtml(parsedInput.html) : parsedInput.html;\n\n        var fragment = this.utils.createFragment(parsedInput.html);\n\n        return this.insertNode(fragment, 'end');\n    },\n    _insertToWidget: function(current, dataCurrent, html)\n    {\n        html = (this._isComponentSpan(html)) ? html : this.cleaner.paragraphize(html);\n\n        var fragment = this.utils.createFragment(html);\n        var component = dataCurrent.getComponent();\n        var $component = $R.dom(component);\n\n        $component.after(fragment.frag);\n        $component.remove();\n\n        this.caret.setEnd(fragment.last);\n\n        return this._sendNodes(fragment.nodes);\n    },\n    _insertFragment: function(fragment)\n    {\n        var range = this.selection.getRange();\n        if (range)\n        {\n            if (this.selection.isCollapsed())\n            {\n                var startNode = range.startContainer;\n                if (startNode.nodeType !== 3 && startNode.tagName === 'BR')\n                {\n                    this.caret.setAfter(startNode);\n                    startNode.parentNode.removeChild(startNode);\n                }\n            }\n            else\n            {\n                range.deleteContents();\n            }\n\n            range.insertNode(fragment.frag);\n        }\n    },\n    _sendNodes: function(nodes)\n    {\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var el = nodes[i];\n            var type = (el.nodeType !== 3 && typeof el.getAttribute === 'function') ? el.getAttribute('data-redactor-type') : false;\n            if (type)\n            {\n                this.app.broadcast(type + '.inserted', this.component.build(el));\n            }\n        }\n\n        if (this.detector.isIe())\n        {\n            this.editor.getElement().find('[data-redactor-type=table]').attr('contenteditable', true);\n        }\n\n        // callback\n        this.app.broadcast('inserted', nodes);\n\n        // widget's scripts\n        this.component.executeScripts();\n\n        return nodes;\n    },\n    _setCaret: function(caret, fragment)\n    {\n        var isLastInline = this._isLastInline(fragment);\n\n        if (caret)\n        {\n            caret = (isLastInline && caret === 'end') ? 'after' : caret;\n            this.caret['set' + this.utils.ucfirst(caret)](fragment.last);\n        }\n        else if (caret !== false)\n        {\n            if (isLastInline) this.caret.setAfter(fragment.last);\n        }\n    },\n    _isLastInline: function(fragment)\n    {\n        if (fragment.last)\n        {\n            var data = this.inspector.parse(fragment.last);\n\n            return data.isInline();\n        }\n\n        return false;\n    },\n    _getCleanedInput: function(parsedInput, dataCurrent, clean)\n    {\n        var isPreformatted = (dataCurrent.isCode() || dataCurrent.isPre());\n\n        parsedInput.html = parsedInput.html.replace(/&nbsp;/g, ' ');\n        parsedInput.html = (!isPreformatted && clean !== false) ? this.cleaner.input(parsedInput.html) : parsedInput.html;\n        parsedInput = (!isPreformatted && clean !== false) ? this.utils.parseHtml(parsedInput.html) : parsedInput;\n\n        return parsedInput;\n    },\n    _getContainer: function(nodes)\n    {\n        return $R.dom(this.utils.createTmpContainer(nodes));\n    },\n    _buildList: function(parsedInput, list, fragment)\n    {\n        var nodes = parsedInput.nodes;\n        var first = nodes[0];\n\n        if (first && first.nodeType !== 3 && first.tagName === 'li')\n        {\n            var $parent = $R.dom(list);\n            var parentListTag = $parent.get().tagName.toLowerCase();\n            var $list = $R.dom('<' + parentListTag + ' />');\n            $list.append(fragment.nodes);\n\n            return this.utils.createFragment($list.get().outerHTML);\n        }\n\n        return fragment;\n    },\n    _containsTags: function(html, tags)\n    {\n        return (this._getContainer(html).find(tags.join(',')).length !== 0);\n    },\n    _collapseSelection: function()\n    {\n        //if (this.app.isAirToolbar()) this.selection.collapseToEnd();\n    },\n    _hasFigureOrTable: function(nodes)\n    {\n        return (this._getContainer(nodes).find('figure, table').length !== 0);\n    },\n    _hasBlocks: function(nodes)\n    {\n        return (this._getContainer(nodes).find(this.opts.blockTags.join(',')).length !== 0);\n    },\n    _hasBlocksAndImages: function(nodes)\n    {\n        return (this._getContainer(nodes).find(this.opts.blockTags.join(',') + ',img').length !== 0);\n    },\n    _isPlainHtml: function(html)\n    {\n        return (this._getContainer(html).find(this.opts.blockTags.join(',') + ', img').length === 0);\n    },\n    _isFigure: function(html)\n    {\n        if (this._isHtmlString(html))\n        {\n            return ($R.dom(html).closest('figure').length !== 0);\n        }\n    },\n    _isComponentSpan: function(html)\n    {\n        if (this._isHtmlString(html))\n        {\n            return ($R.dom(html).closest('span.redactor-component').length !== 0);\n        }\n    },\n    _isHtmlString: function(html)\n    {\n        return !(typeof html === 'string' && !/^\\s*<(\\w+|!)[^>]*>/.test(html));\n    }\n});\n$R.add('service', 'block', {\n    init: function(app) {\n        this.app = app;\n        this.tags = ['p', 'div', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n    },\n    // format\n    format: function(args) {\n\n        // params\n        this.params = {\n            args: false\n        };\n\n        // type of applying styles and attributes\n        this.params.type = (args.type) ? args.type : 'set'; // add, remove, toggle\n\n        // tag\n        this.params.tag = (typeof args === 'string') ? args : (args.tag || this.opts.markup);\n        this.params.tag = this.params.tag.toLowerCase();\n\n        // args\n        this.params.args = {\n            'class': args['class'] || false,\n            'style': args['style'] || false,\n            'attr': args['attr'] || false\n        };\n\n        if (!args['class'] && !args['style'] && !args['attr']) {\n            this.params.args = false;\n        }\n\n        // format\n        return this._format();\n    },\n\n    // funcs\n    add: function(args, tags) {\n        return this._apply('add', args, tags);\n    },\n    set: function(args, tags) {\n        return this._apply('set', args, tags);\n    },\n    toggle: function(args, tags) {\n        return this._apply('toggle', args, tags);\n    },\n    remove: function(args, tags) {\n        return this._apply('remove', args, tags);\n    },\n\n    // clear\n    clearFormat: function(tags) {\n        return this._clear(tags, 'all');\n    },\n    clearStyle: function(tags) {\n        return this._clear(tags, 'style');\n    },\n    clearClass: function() {\n        return this._clear(tags, 'class');\n    },\n    clearAttr: function() {\n        return this._clear(tags, 'attr');\n    },\n\n    // format\n    _format: function() {\n\n        var nodes = [];\n\n        // collapsed\n        this.collapsed = this.selection.isCollapsed();\n\n        // save selection\n        this.selection.save();\n\n        // blocks\n        var block = this.selection.getBlock();\n        var blocks = this._getBlocks();\n        var type = (this._isToggleFormatType(blocks)) ? 'toggle' : 'set';\n        var replacedTag = this._getReplacedTag(type);\n\n        nodes = this._replaceBlocks(blocks, replacedTag);\n\n\n        // apply args & clean\n        nodes = this._buildNodes(nodes);\n\n        // restore selection\n        this._restoreSelection(nodes);\n\n        return nodes;\n    },\n\n\n    // clear\n    _clear: function(tags, type, selection, nodes) {\n        // save selection\n        if (selection !== false) {\n\t\t    this.selection.save();\n\t\t}\n\n        // get elements\n        var $elements = this._getElements(tags, nodes);\n\n        // remove all format\n        if (type === 'all') {\n            this._removeAllAttr($elements, false);\n        }\n        // remove style\n        else if (type === 'style') {\n            $elements.removeAttr('style');\n            $elements.removeAttr('data-redactor-style-cache');\n        }\n        // remove class\n        else if (type === 'class') {\n            $elements.removeAttr('class');\n        }\n        // remove attrs\n        else if (type === 'attr') {\n            this._removeAllAttr($elements);\n        }\n\n        // get nodes\n        nodes = $elements.getAll();\n\n        // restore selection\n        if (selection !== false) {\n            this._restoreSelection(nodes);\n        }\n\n        return nodes;\n    },\n\n    // get\n    _getElements: function(tags, nodes) {\n        return (nodes) ? $R.dom(nodes) : $R.dom(this._getBlocks(tags));\n    },\n    _getBlocks: function(tags) {\n        var blocks = this.selection.getBlocks({ tags: tags || this.tags });\n        var finalBlocks = [];\n        for (var i = 0; i < blocks.length; i++) {\n            if (blocks[i].tagName === 'DIV' && !blocks[i].getAttribute('data-redactor-tag')) {\n                continue;\n            }\n            else {\n                finalBlocks.push(blocks[i]);\n            }\n        }\n\n        return finalBlocks;\n    },\n\n    _getReplacedTag: function(type) {\n        if (this.opts.breakline) {\n            return (type === 'toggle') ? 'div' : (this.params.tag === 'p') ? 'div' : this.params.tag;\n        }\n        else {\n            return (type === 'toggle') ? this.opts.markup : this.params.tag;\n        }\n    },\n\n    // is\n    _isStandardParagraph: function() {\n        return (!this.opts.breakline && this.opts.markup === 'p');\n    },\n    _isStandardDiv: function() {\n        return (!this.opts.breakline && this.opts.markup === 'div');\n    },\n    _isBreaklineBlock: function(block) {\n        return (block && block.tagName === 'DIV' && block.getAttribute('data-redactor-tag') === 'br');\n    },\n    _isToggleFormatType: function(blocks) {\n        var count = 0;\n        var len = blocks.length;\n        for (var i = 0; i < len; i++) {\n            if (blocks[i] && this.params.tag === blocks[i].tagName.toLowerCase()) count++;\n        }\n\n        return (count === len);\n    },\n    _isCurrentBlockOneAndEmpty: function(nodes) {\n        return (this.collapsed && nodes.length === 1 && this.utils.isEmpty(nodes[0]));\n    },\n\n    // build\n    _buildNodes: function(nodes) {\n        if (nodes.length > 0) {\n            // clean & appliyng styles and attributes\n            nodes = this._applyArgs(nodes, false);\n            nodes = this._combinePre(nodes);\n            nodes = this._cleanBlocks(nodes);\n        }\n\n        return nodes;\n    },\n\n    // replace\n    _replaceBlocks: function(blocks, replacedTag) {\n        var nodes = [];\n\n        for (var i = 0; i < blocks.length; i++) {\n            var $node = this.utils.replaceToTag(blocks[i], replacedTag);\n            nodes.push($node.get());\n        }\n\n        return nodes;\n    },\n\n    // combine\n    _combinePre: function(nodes) {\n        var combinedNodes = [];\n        for (var i = 0; i < nodes.length; i++) {\n            var next = nodes[i].nextElementSibling;\n            if (next && nodes[i].tagName === 'PRE' && next.tagName === 'PRE') {\n                var $current = $R.dom(nodes[i]);\n                var $next = $R.dom(next);\n                var newline = document.createTextNode('\\n');\n\n                $current.append(newline);\n                $current.append($next);\n                $next.unwrap('pre');\n            }\n\n            combinedNodes.push(nodes[i]);\n        }\n\n        return combinedNodes;\n    },\n\n    // clean\n    _cleanBlocks: function(nodes) {\n        var headings = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n        var tags = this.opts.inlineTags;\n        for (var i = 0; i < nodes.length; i++) {\n            var tag = nodes[i].tagName.toLowerCase();\n            var $node = $R.dom(nodes[i]);\n\n            // remove all spans in headings\n            if (headings.indexOf(tag) !== - 1) {\n                $node.find('span').not('.redactor-component, .non-editable, .redactor-selection-marker').unwrap();\n            }\n            // remove all inlines in pre\n            else if (tag === 'pre') {\n                $node.find(tags.join(',')).not('.redactor-selection-marker').unwrap();\n            }\n\n            // breakline attr\n            if (this.opts.breakline && tag === 'div') {\n                $node.attr('data-redactor-tag', 'br');\n            }\n            else {\n                $node.removeAttr('data-redactor-tag');\n            }\n\n            // normalize\n            this.utils.normalizeTextNodes(nodes[i]);\n        }\n\n        return nodes;\n    },\n    _cleanEmptyClass: function($elements) {\n        $elements.each(function(node) {\n            if (node.className === '') node.removeAttribute('class');\n        });\n    },\n    _cleanEmptyStyle: function($node) {\n         if (this.utils.removeEmptyAttr($node.get(), 'style')) {\n            $node.removeAttr('data-redactor-style-cache');\n        }\n        else {\n            $node.attr('data-redactor-style-cache', $node.attr('style'));\n        }\n    },\n\n    // apply\n    _apply: function(type, args, tags, selection, nodes) {\n        // save selection\n        if (selection !== false) {\n\t\t    this.selection.save();\n\t\t}\n\n        // get elements\n        var $elements = this._getElements(tags, nodes);\n\n        // class\n        if (args['class']) {\n            if (type === 'set') {\n                $elements.removeAttr('class');\n                $elements.addClass(args['class']);\n            }\n            else if (type === 'add') {\n                $elements.addClass(args['class']);\n            }\n            else if (type === 'toggle') {\n                $elements.toggleClass(args['class']);\n            }\n            else if (type === 'remove') {\n                $elements.removeClass(args['class']);\n            }\n\n            this._cleanEmptyClass($elements);\n        }\n\n        // attr\n        if (args['attr']) {\n            if (type === 'set') {\n                this._removeAllAttr($elements);\n                $elements.attr(args['attr']);\n            }\n            else if (type === 'add') {\n                $elements.attr(args['attr']);\n            }\n            else if (type === 'toggle') {\n                params = args['attr'];\n                $elements.each(function(node) {\n                    var $node = $R.dom(node);\n                    for (var key in params) {\n                        if ($node.attr(key)) $node.removeAttr(key);\n                        else $node.attr(key, params[key]);\n                    }\n                });\n            }\n            else if (type === 'remove') {\n                $elements.removeAttr(args['attr']);\n            }\n        }\n\n        // style\n        if (args['style']) {\n            if (type === 'set') {\n                $elements.removeAttr('style');\n                $elements.css(args['style']);\n                $elements.each(function(node) {\n                    var $node = $R.dom(node);\n                    $node.attr('data-redactor-style-cache', $node.attr('style'));\n                });\n            }\n            else if (type === 'add') {\n                var params = args['style'];\n                $elements.each(function(node) {\n                    var $node = $R.dom(node);\n                    $node.css(params);\n                    $node.attr('data-redactor-style-cache', $node.attr('style'));\n                    this._convertStyleQuotes($node);\n                }.bind(this));\n            }\n            else if (type === 'toggle') {\n                var params = args['style'];\n                $elements.each(function(node) {\n                    var $node = $R.dom(node);\n                    for (var key in params) {\n                        var newVal = params[key];\n                        var oldVal = $node.css(key);\n\n                        oldVal = (this.utils.isRgb(oldVal)) ? this.utils.rgb2hex(oldVal) : oldVal.replace(/\"/g, '');\n                        newVal = (this.utils.isRgb(newVal)) ? this.utils.rgb2hex(newVal) : newVal.replace(/\"/g, '');\n\n                        oldVal = this.utils.hex2long(oldVal);\n                        newVal = this.utils.hex2long(newVal);\n\n                        var compareNew = (typeof newVal === 'string') ? newVal.toLowerCase() : newVal;\n                        var compareOld = (typeof oldVal === 'string') ? oldVal.toLowerCase() : oldVal;\n\n                        if (compareNew === compareOld) $node.css(key, '');\n                        else $node.css(key, newVal);\n                    }\n\n                    this._convertStyleQuotes($node);\n                    this._cleanEmptyStyle($node);\n                }.bind(this));\n            }\n            else if (type === 'remove') {\n                var name = args['style'];\n                $elements.each(function(node) {\n                    var $node = $R.dom(node);\n                    $node.css(name, '');\n                    this._cleanEmptyStyle($node);\n                }.bind(this));\n            }\n        }\n\n        // get nodes\n        nodes = $elements.getAll();\n\n        // restore selection\n        if (selection !== false) {\n            this._restoreSelection(nodes);\n        }\n\n        return nodes;\n    },\n    _applyArgs: function(nodes) {\n        if (this.params.args) {\n            nodes = this._apply(this.params.type, this.params.args, false, false, nodes);\n        }\n        else {\n            nodes = this._clear(false, 'all', false, nodes);\n        }\n\n        return nodes;\n    },\n\n    // remove\n    _removeAllAttr: function($elements, keepStyleAndClass) {\n        $elements.each(function(node) {\n            var keepAttrs = ['data-redactor-tag', 'data-redactor-style-cache'];\n            if (keepStyleAndClass === false) {\n                keepAttrs.push('style');\n                keepAttrs.push('class');\n            }\n\n            for (var i = node.attributes.length; i--> 0;) {\n                var nodeAttr = node.attributes[i];\n                var name = nodeAttr.name;\n                if (keepAttrs.indexOf(name) === -1) {\n                    node.removeAttributeNode(nodeAttr);\n                }\n            }\n        });\n    },\n\n    // selection\n    _restoreSelection: function(nodes) {\n        if (this._isCurrentBlockOneAndEmpty(nodes)) {\n            this.caret.setStart(nodes[0]);\n        }\n        else {\n            setTimeout(function() { this.selection.restore(); }.bind(this), 1);\n        }\n    },\n\n    // convert\n    _convertStyleQuotes: function($node) {\n        var style = $node.attr('style');\n        if (style) $node.attr('style', style.replace(/\"/g, '\\''));\n    }\n});\n$R.add('service', 'inline', {\n    mixins: ['formatter'],\n    init: function(app)\n    {\n        this.app = app;\n\n        this.count = 0;\n    },\n    // public\n    format: function(args)\n    {\n        if (!this._isFormat()) return [];\n\n        // type of applying styles and attributes\n        this.type = (args.type) ? args.type : 'set'; // add, remove, toggle\n        // tag\n        this.tag = (typeof args === 'string') ? args : args.tag;\n        this.tag = this.tag.toLowerCase();\n        this.tag = this.arrangeTag(this.tag);\n\n        if (typeof args === 'string') this.args = false;\n        else this.buildArgs(args);\n\n        if (!this.detector.isIe())\n        {\n            this.editor.disableNonEditables();\n        }\n\n        // format\n        var nodes = (this.selection.isCollapsed()) ? this.formatCollapsed() : this.formatUncollapsed();\n\n        if (!this.detector.isIe())\n        {\n            this.editor.enableNonEditables();\n        }\n\n        return nodes;\n    },\n\n    // private\n    _isFormat: function()\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var isComponent = (data.isComponent() && !data.isComponentType('table') && !data.isFigcaption());\n\n        if (current === false && this.selection.isAll())\n        {\n            return true;\n        }\n        else if (!current || data.isPre() || data.isCode() || isComponent)\n        {\n            return false;\n        }\n\n        return true;\n    },\n    arrangeTag: function(tag)\n    {\n        var replaced = this.opts.replaceTags;\n        for (var key in replaced)\n        {\n            if (tag === key) tag = replaced[key];\n        }\n\n        return tag;\n    },\n    formatCollapsed: function()\n    {\n        var nodes = [];\n        var inline = this.selection.getInlineFirst();\n        var inlines = this.selection.getInlines({ all: true });\n        var $inline = $R.dom(inline);\n        var $parent, parent, $secondPart, extractedContent;\n\n        // 1) not inline\n        if (!inline)\n        {\n            nodes = this.insertInline(nodes);\n        }\n        else\n        {\n            var dataInline = this.inspector.parse(inline);\n            var isEmpty = this.utils.isEmptyHtml(inline.innerHTML);\n\n            // 2) inline is empty\n            if (isEmpty)\n            {\n                // 2.1) has same tag\n                if (inline.tagName.toLowerCase() === this.tag)\n                {\n                    // 2.1.1) has same args or hasn't args\n                    if (this.hasSameArgs(inline))\n                    {\n                        this.caret.setAfter(inline);\n                        $inline.remove();\n\n                        var el = this.selection.getElement();\n                        this.utils.normalizeTextNodes(el);\n                    }\n                    // 2.1.2) has different args and it is span tag\n                    else if (this.tag === 'span')\n                    {\n                        nodes = this.applyArgs([inline], false);\n                        this.caret.setStart(inline);\n                    }\n                    // 2.1.3) has different args and it is not span tag\n                    else\n                    {\n                       nodes = this.insertInline(nodes);\n                    }\n\n                }\n                // 2.2) has another tag\n                else\n                {\n                    // 2.2.1) has parent\n                    if (dataInline.hasParent([this.tag]))\n                    {\n                        $parent = $inline.closest(this.tag);\n                        parent = $parent.get();\n                        if (this.hasSameArgs(parent))\n                        {\n                            $parent.unwrap();\n                            this.caret.setStart(inline);\n                        }\n                        else\n                        {\n                            nodes = this.insertInline(nodes);\n                        }\n                    }\n                    // 2.2.2) hasn't parent\n                    else\n                    {\n                        nodes = this.insertInline(nodes);\n                    }\n                }\n            }\n            // 3) inline isn't empty\n            else\n            {\n                // 3.1) has same tag\n                if (inline.tagName.toLowerCase() === this.tag)\n                {\n                    // 3.1.1) has same args or hasn't args\n                    if (this.hasSameArgs(inline))\n                    {\n                        // insert break\n                        extractedContent = this.utils.extractHtmlFromCaret(inline);\n                        $secondPart = $R.dom('<' + this.tag + ' />');\n                        $secondPart = this.utils.cloneAttributes(inline, $secondPart);\n\n                        $inline.after($secondPart.append(extractedContent));\n\n                        this.caret.setAfter(inline);\n                    }\n                    else\n                    {\n                        nodes = this.insertInline(nodes);\n                    }\n                }\n                // 3.2) has another tag\n                else\n                {\n                    // 3.2.1) has parent\n                    if (dataInline.hasParent([this.tag]))\n                    {\n                        $parent = $inline.closest(this.tag);\n                        parent = $parent.get();\n                        if (this.hasSameArgs(parent))\n                        {\n                            // insert break\n                            extractedContent = this.utils.extractHtmlFromCaret(parent, parent);\n                            $secondPart = $R.dom('<' + this.tag + ' />');\n                            $secondPart = this.utils.cloneAttributes(parent, $secondPart);\n\n                            var $breaked, $last;\n                            var z = 0;\n                            inlines = inlines.reverse();\n                            for (var i = 0; i < inlines.length; i++)\n                            {\n                                if (inlines[i] !== parent)\n                                {\n                                    $last = $R.dom('<' + inlines[i].tagName.toLowerCase() + '>');\n                                    if (z === 0)\n                                    {\n                                        $breaked = $last;\n                                    }\n                                    else\n                                    {\n                                        $breaked.append($last);\n                                    }\n\n                                    z++;\n                                }\n                            }\n\n                            $parent.after($secondPart.append(extractedContent));\n                            $parent.after($breaked);\n\n                            this.caret.setStart($last);\n                        }\n                        else\n                        {\n                            nodes = this.insertInline(nodes);\n                        }\n                    }\n                    // 3.2.2) hasn't parent\n                    else\n                    {\n                        nodes = this.insertInline(nodes);\n                    }\n                }\n            }\n        }\n\n        return nodes;\n    },\n    insertInline: function(nodes)\n    {\n        var node = document.createElement(this.tag);\n        nodes = this.insertion.insertNode(node, 'start');\n\n        return this.applyArgs(nodes, false);\n    },\n    hasSameArgs: function(inline)\n    {\n        if (inline.attributes.length === 0 && this.args === false)\n        {\n            return true;\n        }\n        else\n        {\n            var same = true;\n            if (this.args)\n            {\n                var count = 0;\n                for (var key in this.args)\n                {\n                    var $node = $R.dom(inline);\n                    var args = (this.args[key]);\n                    var value = this.utils.toParams(args);\n                    var nodeAttrValue = $node.attr(key);\n\n                    if (args)\n                    {\n                        if (key === 'style')\n                        {\n                            value = value.trim().replace(/;$/, '');\n\n                            var origRules = this.utils.styleToObj($node.attr('style'));\n                            var rules = value.split(';');\n                            var innerCount = 0;\n\n                            for (var i = 0; i < rules.length; i++)\n                            {\n                                var arr = rules[i].split(':');\n                                var ruleName = arr[0].trim();\n                                var ruleValue = arr[1].trim();\n\n                                if (ruleName.search(/color/) !== -1)\n                                {\n                                    var val = $node.css(ruleName);\n                                    if (val && (val === ruleValue || this.utils.rgb2hex(val) === ruleValue))\n                                    {\n                                        innerCount++;\n                                    }\n                                }\n                                else if ($node.css(ruleName) === ruleValue)\n                                {\n                                    innerCount++;\n                                }\n                            }\n\n                            if (innerCount === rules.length && Object.keys(origRules).length === rules.length)\n                            {\n                                count++;\n                            }\n                        }\n                        else\n                        {\n                            if (nodeAttrValue === value)\n                            {\n                                count++;\n                            }\n                        }\n                    }\n                    else\n                    {\n                        if (!nodeAttrValue || nodeAttrValue === '')\n                        {\n                            count++;\n                        }\n                    }\n                }\n\n                same = (count === Object.keys(this.args).length);\n            }\n\n            return same;\n        }\n    },\n    formatUncollapsed: function()\n    {\n        var inlines = this.selection.getInlines({ all: true, inside: true });\n\n        if (this.detector.isIe()) this.selection.saveMarkers();\n        else this.selection.save();\n\n        // convert del / u\n        this._convertTags('u');\n        this._convertTags('del');\n\n        // convert target tags\n        this._convertToStrike(inlines);\n\n        if (this.detector.isIe()) this.selection.restoreMarkers();\n        else this.selection.restore();\n\n        // apply strike\n        document.execCommand('strikethrough');\n\n        // clear decoration\n        this._clearDecoration();\n\n        this.selection.save();\n\n        // revert and set style\n        var nodes = this._revertToInlines();\n        nodes = this.applyArgs(nodes, false);\n\n        // unwrap if attributes was removed\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var node = nodes[i];\n            var tag = node.tagName.toLowerCase();\n            var len = node.attributes.length;\n\n            if (tag === this.tag && len === 0 && this.args)\n            {\n                $R.dom(node).unwrap();\n                nodes.splice(i, 1);\n            }\n        }\n\n        this.selection.restore();\n\n        // clear and normalize\n        this._clearEmptyStyle();\n        nodes = this._normalizeBlocks(nodes);\n\n        return nodes;\n    },\n    _convertTags: function(tag)\n    {\n        if (this.tag !== tag)\n        {\n            var $editor = this.editor.getElement();\n            $editor.find(tag).each(function(node)\n            {\n                var $el = this.utils.replaceToTag(node, 'span');\n                $el.addClass('redactor-convertable-' + tag);\n            }.bind(this));\n        }\n    },\n    _revertTags: function(tag)\n    {\n        var $editor = this.editor.getElement();\n\n        $editor.find('span.redactor-convertable-' + tag).each(function(node)\n        {\n            var $el = this.utils.replaceToTag(node, tag);\n            $el.removeClass('redactor-convertable-' + tag);\n            if (this.utils.removeEmptyAttr($el, 'class')) $el.removeAttr('class');\n\n        }.bind(this));\n    },\n    _convertToStrike: function(inlines)\n    {\n        var selected = this.selection.getText().replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n\n        for (var i = 0; i < inlines.length; i++)\n        {\n            var tag = this.arrangeTag(inlines[i].tagName.toLowerCase());\n            var inline = inlines[i];\n            var $inline = $R.dom(inline);\n            var hasSameArgs = this.hasSameArgs(inline);\n\n            if (tag === this.tag)\n            {\n                if (this.tag === 'span' && this._isTextSelected(inline, selected))\n                {\n                    $inline.addClass('redactor-convertable-apply');\n                }\n                else if (hasSameArgs && this.tag !== 'a')\n                {\n                    this._replaceToStrike($inline);\n                }\n                else if (this.tag === 'span')\n                {\n                    $inline.addClass('redactor-unconvertable-apply');\n                }\n                else if (!hasSameArgs)\n                {\n                    $inline.addClass('redactor-convertable-apply');\n                }\n            }\n        }\n    },\n    _replaceToStrike: function($el)\n    {\n        $el.replaceWith(function()\n        {\n            return $R.dom('<strike>').append($el.contents());\n        });\n    },\n    _revertToInlines: function()\n    {\n        var nodes = [];\n        var $editor = this.editor.getElement();\n\n        if (this.tag !== 'u') $editor.find('u').unwrap();\n\n        // span convertable\n        $editor.find('.redactor-convertable-apply').each(function(node)\n        {\n            var $node = $R.dom(node);\n            $node.find('strike').unwrap();\n\n            this._forceRemoveClass($node, 'redactor-convertable-apply');\n            nodes.push(node);\n\n        }.bind(this));\n\n        // span unconvertable\n        $editor.find('span.redactor-unconvertable-apply').each(function(node)\n        {\n            var $node = $R.dom(node);\n            this._forceRemoveClass($node, 'redactor-unconvertable-apply');\n\n        }.bind(this));\n\n        // strike\n        $editor.find('strike').each(function(node)\n        {\n            var $node = this.utils.replaceToTag(node, this.tag);\n            nodes.push($node.get());\n\n        }.bind(this));\n\n\n        this._revertTags('u');\n        this._revertTags('del');\n\n        return nodes;\n    },\n    _normalizeBlocks: function(nodes)\n    {\n        var tags = this.opts.inlineTags;\n        var blocks = this.selection.getBlocks();\n        if (blocks)\n        {\n            for (var i = 0; i < blocks.length; i++)\n            {\n                if (blocks[i].tagName === 'PRE')\n                {\n                    var $node = $R.dom(blocks[i]);\n                    $node.find(tags.join(',')).not('.redactor-selection-marker').each(function(inline)\n                    {\n                        if (nodes.indexOf(inline) !== -1)\n                        {\n                            nodes = this.utils.removeFromArrayByValue(nodes, inline);\n                        }\n\n                        $R.dom(inline).unwrap();\n                    }.bind(this));\n                }\n            }\n        }\n\n        return nodes;\n    },\n    _clearDecoration: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.find(this.opts.inlineTags.join(',')).each(function(node)\n        {\n            if (node.style.textDecoration === 'line-through' || node.style.textDecorationLine === 'line-through')\n            {\n                var $el = $R.dom(node);\n                $el.css('textDecorationLine', '');\n                $el.css('textDecoration', '');\n                $el.wrap('<strike>');\n            }\n        });\n    },\n    _clearEmptyStyle: function()\n    {\n        var inlines = this.getInlines();\n        for (var i = 0; i < inlines.length; i++)\n        {\n            this._clearEmptyStyleAttr(inlines[i]);\n\n            var childNodes = inlines[i].childNodes;\n            if (childNodes)\n            {\n                for (var z = 0; z < childNodes.length; z++)\n                {\n                    this._clearEmptyStyleAttr(childNodes[z]);\n                }\n            }\n        }\n    },\n    _clearEmptyStyleAttr: function(node)\n    {\n        if (node.nodeType !== 3 && this.utils.removeEmptyAttr(node, 'style'))\n        {\n            node.removeAttribute('style');\n            node.removeAttribute('data-redactor-style-cache');\n        }\n    },\n    _forceRemoveClass: function($node, classname)\n    {\n        $node.removeClass(classname);\n        if (this.utils.removeEmptyAttr($node, 'class')) $node.removeAttr('class');\n    },\n    _isTextSelected: function(node, selected)\n    {\n        var text = this.utils.removeInvisibleChars(node.textContent);\n\n        return (selected === text || selected.search(new RegExp('^' + this.utils.escapeRegExp(text) + '$')) !== -1);\n    },\n\n    getInlines: function(tags)\n    {\n        return (tags) ? this.selection.getInlines({ tags: tags, all: true }) : this.selection.getInlines({ all: true });\n    },\n    getElements: function(tags)\n    {\n        return $R.dom(this.getInlines(tags));\n    },\n    clearFormat: function()\n    {\n        this.selection.save();\n\n        var nodes = this.selection.getInlines({ all: true });\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var $el = $R.dom(nodes[i]);\n            var inline = this.selection.getInline(nodes[i]);\n            if (inline)\n            {\n                $el.unwrap();\n            }\n        }\n\n        this.selection.restore();\n    }\n});\n$R.add('service', 'autoparser', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    observe: function()\n    {\n        var $editor = this.editor.getElement();\n        var $objects = $editor.find('.redactor-autoparser-object').each(function(node)\n        {\n           var $node = $R.dom(node);\n           $node.removeClass('redactor-autoparser-object');\n           if ($node.attr('class') === '') $node.removeAttr('class');\n        });\n\n        if ($objects.length > 0)\n        {\n            $objects.each(function(node)\n            {\n                var type;\n                var $object = false;\n                var tag = node.tagName;\n\n                if (tag === 'A') type = 'link';\n                else if (tag === 'IMG') type = 'image';\n                else if (tag === 'IFRAME') type = 'video';\n\n                if (type)\n                {\n                    $object = $R.create(type + '.component', this.app, node);\n                    this.app.broadcast(type + '.inserted', $object);\n                    this.app.broadcast('autoparse', type, $object);\n                }\n\n            }.bind(this));\n        }\n    },\n    format: function(e, key)\n    {\n        if (this._isKey(key))\n        {\n            this._format(key === this.keycodes.ENTER);\n        }\n    },\n    parse: function(html)\n    {\n        var tags = ['figure', 'form', 'pre', 'iframe', 'code', 'a', 'img'];\n        var stored = [];\n        var z = 0;\n\n        // encode\n        html = this.cleaner.encodePreCode(html);\n\n        // store tags\n        for (var i = 0; i < tags.length; i++)\n        {\n            var reTags = (tags[i] === 'img') ? '<' + tags[i] + '[^>]*>' : '<' + tags[i] + '([\\\\w\\\\W]*?)</' + tags[i] + '>';\n            var matched = html.match(new RegExp(reTags, 'gi'));\n\n            if (matched !== null)\n            {\n                for (var y = 0; y < matched.length; y++)\n                {\n                    html = html.replace(matched[y], '#####replaceparse' + z + '#####');\n                    stored.push(matched[y]);\n                    z++;\n                }\n            }\n        }\n\n        // images\n        if (this.opts.autoparseImages && html.match(this.opts.regex.imageurl))\n        {\n            var imagesMatches = html.match(this.opts.regex.imageurl);\n            for (var i = 0; i < imagesMatches.length; i++)\n            {\n                html = html.replace(imagesMatches[i], '<img class=\"redactor-autoparser-object\" src=\"' + imagesMatches[i] + '\">');\n            }\n        }\n\n        // video\n        if (this.opts.autoparseVideo && (html.match(this.opts.regex.youtube) || html.match(this.opts.regex.vimeo)))\n        {\n            var iframeStart = '<iframe width=\"500\" height=\"281\" src=\"';\n            var iframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n\n            var str, re;\n            if (html.match(this.opts.regex.youtube))\n            {\n                str = '//www.youtube.com/embed/$1';\n                re = this.opts.regex.youtube;\n            }\n            else if (html.match(this.opts.regex.vimeo))\n            {\n                str = '//player.vimeo.com/video/$2';\n                re = this.opts.regex.vimeo;\n            }\n\n            var $video = this.component.create('video', iframeStart + str + iframeEnd);\n\n            html = html.replace(re, $video.get().outerHTML);\n        }\n\n        // links\n        if (this.opts.autoparseLinks && html.match(this.opts.regex.url))\n        {\n            html = this._formatLinks(html);\n        }\n\n        // restore\n        html = this._restoreReplaced(stored, html);\n\n        // repeat for nested tags\n        html = this._restoreReplaced(stored, html);\n\n        return html;\n    },\n\n    // private\n    _isKey: function(key)\n    {\n        return (key === this.keycodes.ENTER || key === this.keycodes.SPACE);\n    },\n    _format: function(enter)\n    {\n        var parent = this.selection.getParent();\n        var $parent = $R.dom(parent);\n\n        var isNotFormatted = (parent && $parent.closest('figure, pre, code, img, a, iframe').length !== 0);\n        if (isNotFormatted || !this.selection.isCollapsed())\n        {\n            return;\n        }\n\n        // add split marker\n        var marker = this.utils.createInvisibleChar();\n        var range = this.selection.getRange();\n        range.insertNode(marker);\n\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var $current = $R.dom(current);\n\n        // remove split marker\n        marker.parentNode.removeChild(marker);\n\n        if (current && current.nodeType === 3)\n        {\n            var content = current.textContent;\n            var type;\n\n            // images\n            if (this.opts.autoparseImages && content.match(this._convertToRegExp(this.opts.regex.imageurl)))\n            {\n                var isList = data.isList();\n                var matches = content.match(this.opts.regex.imageurl);\n                var el = (isList) ? undefined : '<figure><img></figure>';\n\n                var $img = this.component.create('image', el);\n                $img.setSrc(matches[0]);\n                $img.addClass('redactor-autoparser-object');\n\n                content = content.replace(matches[0], $img.get().outerHTML);\n                type = 'image';\n            }\n            // video\n            else if (this.opts.autoparseVideo && (content.match(this._convertToRegExp(this.opts.regex.youtube)) || content.match(this._convertToRegExp(this.opts.regex.vimeo))))\n            {\n                var iframeStart = '<iframe width=\"500\" height=\"281\" src=\"';\n                var iframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\n                var str, re;\n\n                if (content.match(this.opts.regex.youtube))\n                {\n                    str = '//www.youtube.com/embed/$1';\n                    re = this.opts.regex.youtube;\n                }\n                else if (content.match(this.opts.regex.vimeo))\n                {\n                    str = '//player.vimeo.com/video/$2';\n                    re = this.opts.regex.vimeo;\n                }\n\n                var $video = this.component.create('video', iframeStart + str + iframeEnd);\n                $video.addClass('redactor-autoparser-object');\n\n                content = content.replace(re, $video.get().outerHTML);\n                type = 'video';\n            }\n            // links\n            else if (this.opts.autoparseLinks && content.match(this._convertToRegExp(this.opts.regex.url)))\n            {\n                content = this._formatLinks(content, enter);\n                type = 'link';\n            }\n\n            // replace\n            if (type)\n            {\n                if (enter)\n                {\n                    this.selection.save();\n                    $current.replaceWith(content);\n                    this.selection.restore();\n                }\n                else\n                {\n                    $current.replaceWith(content);\n                }\n\n                // object\n                var $editor = this.editor.getElement();\n                var $object = $editor.find('.redactor-autoparser-object').removeClass('redactor-autoparser-object');\n                $object = (type === 'link') ? $R.create('link.component', this.app, $object) : $object;\n\n                // caret\n                if (type === 'link')\n                {\n                    if (!enter) this.caret.setAfter($object);\n                    this.app.broadcast('link.inserted', $object);\n                }\n                else\n                {\n                    this.caret.setAfter($object);\n\n                    var $cloned = $object.clone();\n                    $object.remove();\n                    $object = this.insertion.insertHtml($cloned);\n                    $object = this.component.build($object);\n                }\n\n                // callback\n                this.app.broadcast('autoparse', type, $object);\n            }\n        }\n    },\n    _formatLinks: function(content, enter)\n    {\n        var matches = content.match(this.opts.regex.url);\n        var obj = {};\n        for (var i = 0; i < matches.length; i++)\n        {\n            if (enter && matches[i].search(/\\.$/) !== -1)\n            {\n                matches[i] = matches[i].replace(/\\.$/, '');\n            }\n\n            var href = matches[i], text = href;\n            var linkProtocol = (href.match(/(https?|ftp):\\/\\//i) !== null) ? '' : 'http://';\n            var regexB = ([\"/\", \"&\", \"=\"].indexOf(href.slice(-1)) !== -1) ? \"\" : \"\\\\b\";\n            var target = (this.opts.pasteLinkTarget !== false) ? ' target=\"' + this.opts.pasteLinkTarget + '\"' : '';\n\n            text = (text.length > this.opts.linkSize) ? text.substring(0, this.opts.linkSize) + '...' : text;\n            text = (text.search('%') === -1) ? decodeURIComponent(text) : text;\n\n            // escaping url\n            var regexp = '(' + href.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\") + regexB + ')';\n            var classstr = ' class=\"redactor-autoparser-object\"';\n\n            obj[regexp] = '<a href=\"' + linkProtocol + href.trim() + '\"' + target + classstr + '>' + text.trim() + '</a>';\n        }\n\n        // replace\n        for (var key in obj)\n        {\n            content = content.replace(new RegExp(key, 'g'), obj[key]);\n        }\n\n        return content;\n    },\n    _restoreReplaced: function(stored, html)\n    {\n        for (var i = 0; i < stored.length; i++)\n        {\n            html = html.replace('#####replaceparse' + i + '#####', stored[i]);\n        }\n\n        return html;\n    },\n    _convertToRegExp: function(str)\n    {\n        return new RegExp(String(str).replace(/^\\//, '').replace(/\\/ig$/, '').replace(/\\/gi$/, '') + '$', 'gi');\n    }\n});\n$R.add('service', 'storage', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.data = [];\n    },\n    // public\n    observeImages: function()\n    {\n        if (this.opts.imageObserve) {\n            var $editor = this.editor.getElement();\n            var $images = $editor.find('[data-image]');\n            $images.each(this._addImage.bind(this));\n        }\n    },\n    observeFiles: function()\n    {\n        var $editor = this.editor.getElement();\n        var $files = $editor.find('[data-file]');\n\n\t\t$files.each(this._addFile.bind(this));\n    },\n\tsetStatus: function(url, status)\n\t{\n\t\tthis.data[url].status = status;\n\t},\n    getChanges: function()\n    {\n        var $editor = this.editor.getElement();\n\n        // check status\n        for (var key in this.data)\n\t\t{\n\t\t\tvar data = this.data[key];\n\t\t\tvar $el = $editor.find('[data-' + data.type + '=\"' + data.id + '\"]');\n\n\t\t\tthis.setStatus(data.id, ($el.length === 0) ? false : true);\n\t\t}\n\n        return this.data;\n    },\n\tadd: function(type, node)\n\t{\n        var $node = $R.dom(node);\n        var id = $node.attr('data-' + type);\n\n        this.data[id] = { type: type, status: true, node: $node.get(), id: $node.attr('data-' + type) };\n\t},\n\n    // private\n    _addImage: function(node)\n    {\n        this.add('image', node);\n    },\n    _addFile: function(node)\n    {\n        this.add('file', node);\n    }\n});\n$R.add('service', 'utils', {\n    init: function(app)\n    {\n        this.app = app;\n    },\n    // empty\n    isEmpty: function(el)\n    {\n        var isEmpty = false;\n        el = $R.dom(el).get();\n        if (el)\n        {\n            isEmpty = (el.nodeType === 3) ? (el.textContent.trim().replace(/\\n/, '') === '') : (el.innerHTML === '');\n        }\n\n        return isEmpty;\n    },\n    isEmptyHtml: function(html, keepbr, keeplists)\n    {\n        html = this.removeInvisibleChars(html);\n        html = html.replace(/&nbsp;/gi, '');\n        html = html.replace(/<\\/?br\\s?\\/?>/g, ((keepbr) ? 'br' : ''));\n        html = html.replace(/\\s/g, '');\n        html = html.replace(/^<p>[^\\W\\w\\D\\d]*?<\\/p>$/i, '');\n        html = html.replace(/^<div>[^\\W\\w\\D\\d]*?<\\/div>$/i, '');\n\n        if (keeplists)\n        {\n            html = html.replace(/<ul(.*?[^>])>$/i, 'ul');\n            html = html.replace(/<ol(.*?[^>])>$/i, 'ol');\n        }\n\n        html = html.replace(/<hr(.*?[^>])>$/i, 'hr');\n        html = html.replace(/<iframe(.*?[^>])>$/i, 'iframe');\n        html = html.replace(/<source(.*?[^>])>$/i, 'source');\n\n        // remove empty tags\n        html = html.replace(/<[^\\/>][^>]*><\\/[^>]+>/gi, '');\n        html = html.replace(/<[^\\/>][^>]*><\\/[^>]+>/gi, '');\n\n        // trim\n        html = html.trim();\n\n        return html === '';\n    },\n    trimSpaces: function(html)\n    {\n        return html = this.removeInvisibleChars(html.trim());\n    },\n\n    // invisible chars\n    createInvisibleChar: function()\n    {\n        return document.createTextNode(this.opts.markerChar);\n    },\n    searchInvisibleChars: function(str)\n    {\n        return str.search(/^\\uFEFF$/g);\n    },\n    removeInvisibleChars: function(html)\n    {\n        return html.replace(/\\uFEFF/g, '');\n    },\n    trimInvisibleChars: function(direction)\n    {\n        if (!this.selection.isCollapsed()) return;\n\n        var current = this.selection.getCurrent();\n        var side = (direction === 'left') ? this.selection.getTextBeforeCaret() : this.selection.getTextAfterCaret();\n        var isSpace = (current && current.nodeType === 3 && this.searchInvisibleChars(side) === 0);\n\n        if (isSpace)\n        {\n            if (direction === 'left')\n            {\n                $R.dom(current).replaceWith(current.textContent.trim());\n            }\n            else\n            {\n                var offset = this.offset.get();\n                this.offset.set({ start: offset.start + 1, end: offset.end + 1 });\n            }\n        }\n    },\n\n    // wrapper\n    buildWrapper: function(html)\n    {\n        return $R.dom('<div>').html(html);\n    },\n    getWrapperHtml: function($wrapper)\n    {\n        var html = $wrapper.html();\n        $wrapper.remove();\n\n        return html;\n    },\n\n    // fragment\n    createTmpContainer: function(html)\n    {\n        var $div = $R.dom('<div>');\n\n        if (typeof html === 'string')\n        {\n            $div.html(html);\n        }\n        else\n        {\n            $div.append($R.dom(html).clone(true));\n        }\n\n        return $div.get();\n    },\n    createFragment: function(html)\n    {\n        var el = this.createTmpContainer(html);\n        var frag = document.createDocumentFragment(), node, firstNode, lastNode;\n        var nodes = [];\n        var i = 0;\n        while ((node = el.firstChild))\n        {\n            i++;\n            var n = frag.appendChild(node);\n            if (i === 1) firstNode = n;\n\n            nodes.push(n);\n            lastNode = n;\n        }\n\n        return { frag: frag, first: firstNode, last: lastNode, nodes: nodes };\n    },\n    isFragment: function(obj)\n    {\n        return (typeof obj === 'object' && obj.frag);\n    },\n    parseHtml: function(html)\n    {\n        var div = this.createTmpContainer(html);\n\n        return { html: div.innerHTML, nodes: div.childNodes };\n    },\n\n    splitNode: function(current, nodes, isList, inline)\n    {\n        nodes = (this.isFragment(nodes)) ? nodes.frag : nodes;\n\n        var element;\n        if (inline)\n        {\n            element = (this.inspector.isInlineTag(current.tagName)) ? current : this.selection.getInline(current);\n        }\n        else\n        {\n            element = (this.inspector.isBlockTag(current.tagName)) ? current : this.selection.getBlock(current);\n        }\n\n        var $element = $R.dom(element);\n\n        // replace is empty\n        if (!inline && this.isEmptyHtml(element.innerHTML, true))\n        {\n            $element.after(nodes);\n            $element.remove();\n\n            return nodes;\n        }\n\n        var tag = $element.get().tagName.toLowerCase();\n        var isEnd = this.caret.isEnd(element);\n        var isStart = this.caret.isStart(element);\n\n        if (!isEnd && !isStart)\n        {\n            var extractedContent = this.extractHtmlFromCaret(inline);\n\n            var $secondPart = $R.dom('<' + tag + ' />');\n            $secondPart = this.cloneAttributes(element, $secondPart);\n\n            $element.after($secondPart.append(extractedContent));\n        }\n\n        if (isStart)\n        {\n            return $element.before(nodes);\n        }\n        else\n        {\n            if (isList)\n            {\n                return $element.append(nodes);\n            }\n            else\n            {\n                nodes = $element.after(nodes);\n\n                var html = $element.html();\n                html = this.removeInvisibleChars(html);\n                html = html.replace(/&nbsp;/gi, '');\n\n                if (html === '') $element.remove();\n\n                return nodes;\n            }\n        }\n    },\n    extractHtmlFromCaret: function(inline, element)\n    {\n        var range = this.selection.getRange();\n        if (range)\n        {\n            element = (element) ? element : ((inline) ? this.selection.getInline() : this.selection.getBlock());\n            if (element)\n            {\n                var clonedRange = range.cloneRange();\n                clonedRange.selectNodeContents(element);\n                clonedRange.setStart(range.endContainer, range.endOffset);\n\n                return clonedRange.extractContents();\n            }\n        }\n    },\n    createMarkup: function(el)\n    {\n        var markup = document.createElement(this.opts.markup);\n        if (this.opts.breakline) markup.setAttribute('data-redactor-tag', 'br');\n\n        var $el = $R.dom(el);\n\n        $el.after(markup);\n        this.caret.setStart(markup);\n    },\n    createMarkupBefore: function(el)\n    {\n        var markup = document.createElement(this.opts.markup);\n        if (this.opts.breakline) markup.setAttribute('data-redactor-tag', 'br');\n\n        var $el = $R.dom(el);\n\n        $el.before(markup);\n        this.caret.setEnd(markup);\n    },\n    getNode: function(el)\n    {\n        var node = $R.dom(el).get();\n        var editor = this.editor.getElement().get();\n\n        return (typeof el === 'undefined') ? editor : ((node) ? node : false);\n    },\n    findSiblings: function(node, type)\n    {\n        node = $R.dom(node).get();\n        type = (type === 'next') ? 'nextSibling' : 'previousSibling';\n\n        while (node = node[type])\n        {\n            if ((node.nodeType === 3 && node.textContent.trim() === '') || node.tagName === 'BR')\n            {\n                continue;\n            }\n\n            return node;\n        }\n\n        return false;\n    },\n    getElementsFromHtml: function(html, selector, exclude)\n    {\n        var div = document.createElement(\"div\");\n        div.innerHTML = html;\n\n        var elems = div.querySelectorAll(selector);\n\n        // array map polyfill\n        var mapping = function(callback, thisArg)\n        {\n            if (typeof this.length !== 'number') return;\n            if (typeof callback !== 'function') return;\n\n            var newArr = [];\n            if (typeof this == 'object')\n            {\n                for (var i = 0; i < this.length; i++)\n                {\n                    if (i in this) newArr[i] = callback.call(thisArg || this, this[i], i, this);\n                    else return;\n                }\n            }\n\n            return newArr;\n        };\n\n        return mapping.call(elems, function(el)\n        {\n            var type = el.getAttribute('data-redactor-type');\n            if (exclude && type && type === exclude) {}\n            else return el.outerHTML;\n        });\n    },\n\n    // childnodes\n    getChildNodes: function(el, recursive, elements)\n    {\n        el = (el && el.nodeType && el.nodeType === 11) ? el : $R.dom(el).get();\n\n        var nodes = el.childNodes;\n        var result = [];\n        if (nodes)\n        {\n            for (var i = 0; i < nodes.length; i++)\n            {\n                if (elements === true && nodes[i].nodeType === 3) continue;\n                else if (nodes[i].nodeType === 3 && this.isEmpty(nodes[i])) continue;\n\n                result.push(nodes[i]);\n\n                if (recursive !== false)\n                {\n                    var nestedNodes = this.getChildNodes(nodes[i], elements);\n                    if (nestedNodes.length > 0)\n                    {\n                        result = result.concat(nestedNodes);\n                    }\n                }\n            }\n        }\n\n        return result;\n    },\n    getChildElements: function(el)\n    {\n        return this.getChildNodes(el, true, true);\n    },\n    getFirstNode: function(el)\n    {\n        return this._getFirst(this.getChildNodes(el, false));\n    },\n    getLastNode: function(el)\n    {\n        return this._getLast(this.getChildNodes(el, false));\n    },\n    getFirstElement: function(el)\n    {\n        return this._getFirst(this.getChildNodes(el, false, true));\n    },\n    getLastElement: function(el)\n    {\n        return this._getLast(this.getChildNodes(el, false, true));\n    },\n\n    // replace\n    replaceToTag: function(node, tag)\n    {\n        var $node = $R.dom(node);\n        return $node.replaceWith(function(node)\n        {\n            var $replaced = $R.dom('<' + tag + '>').append($R.dom(node).contents());\n            if (node.attributes)\n            {\n                var attrs = node.attributes;\n                for (var i = 0; i < attrs.length; i++)\n                {\n                    $replaced.attr(attrs[i].nodeName, attrs[i].value);\n                }\n            }\n\n            return $replaced;\n\n        });\n    },\n\n    // string\n    ucfirst: function(str)\n    {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n\n    // array\n    removeFromArrayByValue: function(arr, value)\n    {\n        var a = arguments, len = a.length, ax;\n        while (len > 1 && arr.length)\n        {\n            value = a[--len];\n            while ((ax= arr.indexOf(value)) !== -1)\n            {\n                arr.splice(ax, 1);\n            }\n        }\n\n        return arr;\n    },\n\n    // attributes\n    removeEmptyAttr: function(el, attr)\n    {\n        var $el = $R.dom(el);\n\n        if (typeof $el.attr(attr) === 'undefined' || $el.attr(attr) === null) return true;\n        else if ($el.attr(attr) === '')\n        {\n            $el.removeAttr(attr);\n            return true;\n        }\n\n        return false;\n    },\n    cloneAttributes: function(elFrom, elTo)\n    {\n        elFrom = $R.dom(elFrom).get();\n        elTo = $R.dom(elTo);\n\n        var attrs = elFrom.attributes;\n        var len = attrs.length;\n        while (len--)\n        {\n            var attr = attrs[len];\n            elTo.attr(attr.name, attr.value);\n        }\n\n        return elTo;\n    },\n\n    // object\n    toParams: function(obj)\n    {\n        if (typeof obj !== 'object') return obj;\n\n        var keys = Object.keys(obj);\n        if (!keys.length) return '';\n        var result = '';\n\n        for (var i = 0; i < keys.length; i++)\n        {\n            var key = keys[i];\n            result += key + ':' + obj[key] + ';';\n        }\n\n        return result;\n    },\n    styleToObj: function(str)\n    {\n        var obj = {};\n\n        if (str)\n        {\n            var style = str.replace(/;$/, '').split(';');\n            for (var i = 0; i < style.length; i++)\n            {\n                var rule = style[i].split(':');\n                obj[rule[0].trim()] = rule[1].trim();\n            }\n        }\n\n        return obj;\n    },\n    checkProperty: function(obj)\n    {\n        var args = (arguments[1] && Array.isArray(arguments[1])) ? arguments[1] : [].slice.call(arguments, 1);\n\n        for (var i = 0; i < args.length; i++)\n        {\n            if (!obj || (typeof obj[args[i]] === 'undefined'))\n            {\n                return false;\n            }\n\n            obj = obj[args[i]];\n        }\n\n        return obj;\n    },\n\n    // data\n    extendData: function(data, obj)\n    {\n        for (var key in obj)\n        {\n            if (key === 'elements')\n            {\n                var $elms = $R.dom(obj[key]);\n                $elms.each(function(node)\n                {\n                    var $node = $R.dom(node);\n                    if (node.tagName === 'FORM')\n                    {\n                        var serializedData = $node.serialize(true);\n                        for (var z in serializedData)\n                        {\n                            data = this._setData(data, z, serializedData[z]);\n                        }\n                    }\n                    else\n                    {\n                        var name = ($node.attr('name')) ? $node.attr('name') : $node.attr('id');\n                        data = this._setData(data, name, $node.val());\n                    }\n                }.bind(this));\n            }\n            else\n            {\n                data = this._setData(data, key, obj[key]);\n            }\n        }\n\n        return data;\n    },\n    _setData: function(data, name, value)\n    {\n        if (data instanceof FormData) data.append(name, value);\n        else data[name] = value;\n\n        return data;\n    },\n\n    // normalize\n    normalizeTextNodes: function(el)\n    {\n        el = $R.dom(el).get();\n        if (el) el.normalize();\n    },\n\n    // color\n    isRgb: function(str)\n    {\n        return (str.search(/^rgb/i) === 0);\n    },\n    rgb2hex: function(rgb)\n    {\n        rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n\n        return (rgb && rgb.length === 4) ? \"#\" +\n        (\"0\" + parseInt(rgb[1],10).toString(16)).slice(-2) +\n        (\"0\" + parseInt(rgb[2],10).toString(16)).slice(-2) +\n        (\"0\" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';\n    },\n    hex2long: function(val)\n    {\n        if (val.search(/^#/) !== -1 && val.length === 4)\n        {\n            val = '#' + val[1] + val[1] + val[2] + val[2] + val[3] + val[3];\n        }\n\n        return val;\n    },\n\n    // escape\n    escapeRegExp: function(s)\n    {\n        return s.replace(/[-\\/\\\\^$*~+?.()|[\\]{}]/g, '\\\\$&');\n    },\n\n    // random\n    getRandomId: function()\n    {\n        var id = '';\n        var possible = 'abcdefghijklmnopqrstuvwxyz0123456789';\n\n        for (var i = 0; i < 12; i++)\n        {\n            id += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n\n        return id;\n    },\n\n    // private\n    _getFirst: function(nodes)\n    {\n        return (nodes.length !== 0) ? nodes[0] : false;\n    },\n    _getLast: function(nodes)\n    {\n        return (nodes.length !== 0) ? nodes[nodes.length-1] : false;\n    }\n});\n$R.add('service', 'progress', {\n    init: function(app)\n    {\n        this.app = app;\n\n        // local\n        this.$box = null;\n        this.$bar = null;\n    },\n\n    // public\n    show: function()\n    {\n        if (!this._is()) this._build();\n        this.$box.show();\n    },\n    hide: function()\n    {\n        if (this._is())\n        {\n            this.animate.start(this.$box, 'fadeOut', this._destroy.bind(this));\n        }\n    },\n    update: function(value)\n    {\n        this.show();\n        this.$bar.css('width', value + '%');\n    },\n\n    // private\n    _is: function()\n    {\n        return (this.$box !== null);\n    },\n    _build: function()\n    {\n        this.$bar = $R.dom('<span />');\n        this.$box = $R.dom('<div id=\"redactor-progress\" />');\n\n        this.$box.append(this.$bar);\n        this.$body.append(this.$box);\n    },\n    _destroy: function()\n    {\n        if (this._is()) this.$box.remove();\n\n        this.$box = null;\n        this.$bar = null;\n    }\n});\n$R.add('module', 'starter', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.plugin = app.plugin;\n        this.module = app.module;\n    },\n    // messages\n    onstart: function()\n    {\n        var services = ['element', 'container', 'source', 'editor', 'statusbar', 'toolbar'];\n        var modules = ['element', 'container', 'source', 'editor', 'statusbar', 'contextbar', 'input'];\n\n        this._startStop('start', this.app, services);\n        this._startStop('start', this.module, modules);\n    },\n    onstop: function()\n    {\n        var modules = ['observer', 'element', 'container', 'source', 'editor', 'contextbar'];\n\n        this._startStop('stop', this.module, modules);\n    },\n    onenable: function()\n    {\n        var modules = ['observer', 'toolbar'];\n        var plugins = this.opts.plugins;\n\n        this._startStop('start', this.module, modules);\n        this._startStop('start', this.plugin, plugins);\n    },\n    ondisable: function()\n    {\n        var modules = ['observer', 'toolbar'];\n        var plugins = this.opts.plugins;\n\n        this._startStop('stop', this.module, modules);\n        this._startStop('stop', this.plugin, plugins);\n    },\n\n    // private\n    _startStop: function(type, obj, arr)\n    {\n        for (var i = 0; i < arr.length; i++)\n        {\n            if (typeof obj[arr[i]] !== 'undefined')\n            {\n                this.app.callInstanceMethod(obj[arr[i]], type);\n            }\n        }\n    }\n});\n$R.add('module', 'element', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.namespace = app.namespace;\n        this.element = app.element;\n        this.rootOpts = $R.extend({}, true, $R.options, app.rootOpts);\n    },\n    // public\n    start: function()\n    {\n        this._build();\n        this._buildModes();\n        this._buildMarkup();\n    },\n    stop: function()\n    {\n        var $element = this.element.getElement();\n        $element.removeData(this.namespace + '-uuid');\n    },\n\n    // private\n    _build: function()\n    {\n        var $element = this.element.getElement();\n        $element.data(this.namespace + '-uuid', this.uuid);\n    },\n    _buildModes: function()\n    {\n        var type = this.element.getType();\n\n        if (type === 'inline') this._redefineOptions(this.opts.modes['inline']);\n        if (type === 'div') this._redefineOptions(this.opts.modes['original']);\n\n        if (type !== 'inline')\n        {\n            if (this._isRootOption('styles') && this.rootOpts.styles) this.opts.styles = true;\n            if (this._isRootOption('source') && !this.rootOpts.source) this.opts.showSource = false;\n        }\n    },\n    _buildMarkup: function()\n    {\n        var type = this.element.getType();\n\n        if (type === 'inline')\n        {\n            this.opts.emptyHtml = '';\n        }\n        else if (this.opts.breakline)\n        {\n            this.opts.markup = 'div';\n            this.opts.emptyHtml = '<div data-redactor-tag=\"br\">' + this.opts.markerChar + '</div>';\n        }\n        else\n        {\n            this.opts.emptyHtml = '<' + this.opts.markup + '></' + this.opts.markup + '>';\n        }\n    },\n    _redefineOptions: function(opts)\n    {\n        for (var key in opts)\n        {\n            this.opts[key] = opts[key];\n        }\n    },\n    _isRootOption: function()\n    {\n        return (typeof this.rootOpts['styles'] !== 'undefined');\n    }\n});\n$R.add('module', 'editor', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.editor = app.editor;\n        this.source = app.source;\n        this.element = app.element;\n        this.component = app.component;\n        this.container = app.container;\n        this.inspector = app.inspector;\n        this.autoparser = app.autoparser;\n\n        // local\n        this.placeholder = false;\n        this.events = false;\n    },\n    // messages\n    onenable: function()\n    {\n        this.enable();\n    },\n    ondisable: function()\n    {\n        this.disable();\n    },\n    onenablefocus: function()\n    {\n        this._enableFocus();\n    },\n    oncontextmenu: function(e)\n    {\n        this.component.setOnEvent(e, true);\n    },\n    onclick: function(e)\n    {\n        this.component.setOnEvent(e);\n    },\n    onkeyup: function(e)\n    {\n        var data = this.inspector.parse(e.target);\n        if (!data.isComponent())\n        {\n            this.component.clearActive();\n        }\n    },\n    onenablereadonly: function()\n    {\n        this._enableReadOnly();\n    },\n    ondisablereadonly: function()\n    {\n        this._disableReadOnly();\n    },\n    onautoparseobserve: function()\n    {\n        this.autoparser.observe();\n    },\n    onplaceholder: {\n        build: function()\n        {\n            this._buildPlaceholder();\n        },\n        toggle: function()\n        {\n            this._togglePlacehodler();\n        }\n    },\n\n    // public\n    start: function()\n    {\n        this._build();\n        this._buildEvents();\n        this._buildOptions();\n        this._buildAccesibility();\n    },\n    stop: function()\n    {\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n\n        var classesEditor = ['redactor-in', 'redactor-in-' + this.uuid, 'redactor-structure', 'redactor-placeholder', 'notranslate', this.opts.stylesClass];\n        var classesContainer = ['redactor-focus', 'redactor-blur', 'redactor-over', 'redactor-styles-on',\n                                'redactor-styles-off', 'redactor-toolbar-on', 'redactor-text-labeled-on', 'redactor-source-view'];\n\n        $editor.removeAttr('spellcheck');\n        $editor.removeAttr('dir');\n        $editor.removeAttr('contenteditable');\n        $editor.removeAttr('placeholder');\n        $editor.removeAttr('data-gramm_editor');\n        $editor.removeClass(classesEditor.join(' '));\n\n        $container.removeClass(classesContainer.join(' '));\n\n        this._destroyEvents();\n\n        if ($editor.get().classList.length === 0) $editor.removeAttr('class');\n    },\n    enable: function()\n    {\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n\n        $editor.addClass('redactor-in redactor-in-' + this.uuid);\n        $editor.attr({ 'contenteditable': true });\n\n        if (this.opts.structure)\n        {\n            $editor.addClass('redactor-structure');\n        }\n\n        if (this.opts.toolbar && !this.opts.air && !this.opts.toolbarExternal)\n        {\n            $container.addClass('redactor-toolbar-on');\n        }\n\n        // prevent editing\n        this._disableBrowsersEditing();\n    },\n    disable: function()\n    {\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n\n        $editor.removeClass('redactor-in redactor-in-' + this.uuid);\n        $editor.removeClass('redactor-structure');\n        $editor.removeAttr('contenteditable');\n\n        $container.addClass('redactor-toolbar-on');\n    },\n\n    // private\n    _build: function()\n    {\n        var $editor = this.editor.getElement();\n        var $element = this.element.getElement();\n        var $container = this.container.getElement();\n\n        $container.addClass('redactor-blur');\n\n        if (!this.opts.grammarly)\n        {\n            $editor.attr('data-gramm_editor', false);\n        }\n\n        if (this.opts.notranslate)\n        {\n            $editor.addClass('notranslate');\n        }\n\n        if (this.opts.styles)\n        {\n            $editor.addClass(this.opts.stylesClass);\n            $container.addClass('redactor-styles-on');\n        }\n        else\n        {\n            $container.addClass('redactor-styles-off');\n        }\n\n        if (this.opts.buttonsTextLabeled)\n        {\n            $container.addClass('redactor-text-labeled-on');\n        }\n\n        if (this.element.isType('textarea')) $element.before($editor);\n    },\n    _buildEvents: function()\n    {\n        this.events = $R.create('editor.events', this.app);\n    },\n    _buildOptions: function()\n    {\n        var $editor = this.editor.getElement();\n\n        $editor.attr('dir', this.opts.direction);\n\n        if (this.opts.tabindex)  $editor.attr('tabindex', this.opts.tabindex);\n        if (this.opts.minHeight) $editor.css('min-height', this.opts.minHeight);\n        if (this.opts.maxHeight) $editor.css('max-height', this.opts.maxHeight);\n        if (this.opts.maxWidth)  $editor.css({ 'max-width': this.opts.maxWidth, 'margin': 'auto' });\n    },\n    _buildAccesibility: function()\n    {\n        var $editor = this.editor.getElement();\n\n        $editor.attr({ 'aria-labelledby': 'redactor-voice-' + this.uuid, 'role': 'presentation' });\n    },\n    _buildPlaceholder: function()\n    {\n        this.placeholder = $R.create('editor.placeholder', this.app);\n    },\n    _enableFocus: function()\n    {\n        if (this.opts.showSource) this._enableFocusSource();\n        else this._enableFocusEditor();\n    },\n    _enableFocusSource: function()\n    {\n        var $source = this.source.getElement();\n\n        if (this.opts.focus)\n        {\n            $source.focus();\n            $source.get().setSelectionRange(0, 0);\n        }\n        else if (this.opts.focusEnd)\n        {\n            $source.focus();\n        }\n    },\n    _enableFocusEditor: function()\n    {\n        if (this.opts.focus)\n        {\n            setTimeout(this.editor.startFocus.bind(this.editor), 100);\n        }\n        else if (this.opts.focusEnd)\n        {\n            setTimeout(this.editor.endFocus.bind(this.editor), 100);\n        }\n    },\n    _togglePlacehodler: function()\n    {\n        if (this.placeholder) this.placeholder.toggle();\n    },\n    _disableBrowsersEditing: function()\n    {\n        try {\n            // FF fix\n            document.execCommand('enableObjectResizing', false, false);\n            document.execCommand('enableInlineTableEditing', false, false);\n            // IE prevent converting links\n            document.execCommand(\"AutoUrlDetect\", false, false);\n\n            // IE disable image resizing\n            var $editor = this.editor.getElement();\n            var el = $editor.get();\n            if (el.addEventListener) el.addEventListener('mscontrolselect', function(e) { e.preventDefault(); });\n            else el.attachEvent('oncontrolselect', function(e) { e.returnValue = false; });\n\n        } catch (e) {}\n    },\n    _destroyEvents: function()\n    {\n        if (this.events)\n        {\n            this.events.destroy();\n        }\n    },\n    _enableReadOnly: function()\n    {\n        var $editor = this.editor.getElement();\n\n        this._getEditables($editor).removeAttr('contenteditable');\n        $editor.removeAttr('contenteditable');\n        $editor.addClass('redactor-read-only');\n\n        if (this.events) this.events.destroy();\n    },\n    _disableReadOnly: function()\n    {\n        var $editor = this.editor.getElement();\n\n        this._getEditables($editor).attr({ 'contenteditable': true });\n        $editor.removeClass('redactor-read-only');\n        $editor.attr({ 'contenteditable': true });\n\n        this._buildEvents();\n    },\n    _getEditables: function($editor)\n    {\n        return $editor.find('figcaption, td, th');\n    }\n});\n$R.add('class', 'editor.placeholder', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.editor = app.editor;\n        this.element = app.element;\n\n        // build\n        this.build();\n    },\n    build: function()\n    {\n        var $element = this.element.getElement();\n        var $editor = this.editor.getElement();\n\n        if (this.opts.placeholder !== false || $element.attr('placeholder'))\n        {\n            var text = (this.opts.placeholder !== false) ? this.opts.placeholder : $element.attr('placeholder');\n            $editor.attr('placeholder', text);\n            this.toggle();\n        }\n    },\n    toggle: function()\n    {\n        return (this.editor.isEmpty(true)) ? this.show() : this.hide();\n    },\n    show: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.addClass('redactor-placeholder');\n    },\n    hide: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.removeClass('redactor-placeholder');\n    }\n});\n$R.add('class', 'editor.events', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.$doc = app.$doc;\n        this.uuid = app.uuid;\n        this.source = app.source;\n        this.editor = app.editor;\n        this.cleaner = app.cleaner;\n        this.container = app.container;\n        this.insertion = app.insertion;\n        this.inspector = app.inspector;\n        this.selection = app.selection;\n        this.component = app.component;\n\n        // local\n        this.blurNamespace = '.redactor-blur.' + this.uuid;\n        this.eventsList = ['paste', 'click', 'contextmenu', 'keydown', 'keyup', 'mouseup', 'touchstart',\n                           'cut', 'copy', 'dragenter', 'dragstart', 'drop', 'dragover', 'dragleave'];\n\n        // init\n        this._init();\n    },\n    destroy: function()\n    {\n        var $editor = this.editor.getElement();\n\n        $editor.off('.redactor-focus');\n        this.$doc.off('keyup' + this.blurNamespace + ' mousedown' + this.blurNamespace);\n\n        // all events\n        this._loop('off');\n    },\n    focus: function(e)\n    {\n        var $container = this.container.getElement();\n\n        if (this.editor.isPasting() || $container.hasClass('redactor-focus')) return;\n\n        $container.addClass('redactor-focus');\n        $container.removeClass('redactor-blur');\n\n        this.app.broadcast('observe', e);\n        this.app.broadcast('focus', e);\n\n        this.isFocused = true;\n        this.isBlured = false;\n    },\n    blur: function(e)\n    {\n        var $container = this.container.getElement();\n        var $target = $R.dom(e.target);\n        var targets = ['.redactor-in-' + this.uuid,  '.redactor-toolbar', '.redactor-dropdown',\n        '.redactor-context-toolbar', '#redactor-modal', '#redactor-image-resizer'];\n\n        this.app.broadcast('originalblur', e);\n        if (this.app.stopBlur) return;\n\n        if (!this.app.isStarted() || this.editor.isPasting()) return;\n        if ($target.closest(targets.join(',')).length !== 0) return;\n\n        if (!this.isBlured && !$container.hasClass('redactor-blur'))\n        {\n            $container.removeClass('redactor-focus');\n            $container.addClass('redactor-blur');\n            this.app.broadcast('blur', e);\n\n            this.isFocused = false;\n            this.isBlured = true;\n        }\n    },\n    cut: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n\n        this.app.broadcast('state', e);\n\n        if (this.component.isNonEditable(current))\n        {\n            this._passSelectionToClipboard(e, data, true);\n            e.preventDefault();\n        }\n    },\n    copy: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n\n        this.app.broadcast('state', e);\n\n        if (this.component.isNonEditable(current))\n        {\n            this._passSelectionToClipboard(e, data, false);\n            e.preventDefault();\n        }\n    },\n    drop: function(e)\n    {\n        e = e.originalEvent || e;\n        e.stopPropagation();\n        this._removeOverClass();\n\n        if (this.opts.dragUpload === false)\n        {\n            e.preventDefault();\n            return;\n        }\n\n        if (this.app.isDragComponentInside())\n        {\n            var $dragComponent = $R.dom(this.app.getDragComponentInside());\n            var $component = $dragComponent.clone(true);\n            this.insertion.insertToPoint(e, $component);\n\n            $dragComponent.remove();\n\n            this.app.setDragComponentInside(false);\n            this.app.broadcast('state', e);\n            this.app.broadcast('drop', e);\n            this.app.broadcast('image.observe', e);\n\n            e.preventDefault();\n\n            return;\n        }\n        else if (this.app.isDragInside() && this.opts.input)\n        {\n            this.insertion.insertPoint(e);\n\n            var dt = e.dataTransfer;\n            var html = dt.getData('text/html');\n\n            // clear selected\n            var range = this.selection.getRange();\n            if (range)\n            {\n                var blocks = this.selection.getBlocks();\n                range.deleteContents();\n\n                // remove empty blocks\n                for (var i = 0; i < blocks.length; i++)\n                {\n                    if (blocks[i].innerHTML === '') $R.dom(blocks[i]).remove();\n                }\n            }\n\n            // paste\n            $R.create('input.paste', this.app, e, true, html, true);\n\n            this.app.broadcast('state', e);\n            this.app.broadcast('drop', e);\n\n            this.app.setDragInside(false);\n            e.preventDefault();\n\n            return;\n        }\n\n        this.app.broadcast('state', e);\n        this.app.broadcast('paste', e, e.dataTransfer);\n        this.app.broadcast('drop', e);\n\n    },\n    dragenter: function(e)\n    {\n        e.preventDefault();\n    },\n    dragstart: function(e)\n    {\n        this.app.setDragComponentInside(false);\n        this.app.setDragInside(false);\n\n        var data = this.inspector.parse(e.target);\n        if (data.isComponent() && !data.isComponentEditable() && !data.isFigcaption())\n        {\n            this.app.setDragComponentInside(data.getComponent());\n        }\n        else if (this.selection.is() && !this.selection.isCollapsed())\n        {\n            // drag starts inside editor\n            this.app.setDragInside(true);\n            this._setDragData(e);\n        }\n\n        this.app.broadcast('dragstart', e);\n    },\n    dragover: function(e)\n    {\n        this.app.broadcast('dragover', e);\n    },\n    dragleave: function(e)\n    {\n        this.app.broadcast('dragleave', e);\n    },\n    paste: function(e)\n    {\n        this.app.broadcast('paste', e);\n    },\n    contextmenu: function(e)\n    {\n        // chrome crashes fix\n        //this.editor.disableNonEditables();\n\n        //setTimeout(function()\n        //{\n          //  this.editor.enableNonEditables();\n           // this.app.broadcast('contextmenu', e);\n\n        //}.bind(this), 0);\n    },\n    click: function(e)\n    {\n        // triple click selection\n        if (e.detail === 3)\n        {\n            e.preventDefault();\n\n            var block = this.selection.getBlock();\n            var range = document.createRange();\n            range.selectNodeContents(block);\n            this.selection.setRange(range)\n        }\n\n        // observe bottom click & start click\n        var $target = $R.dom(e.target);\n        if ($target.hasClass('redactor-in'))\n        {\n            var top = $target.offset().top;\n            var pad = parseFloat($target.css('padding-bottom'));\n            var height = $target.height();\n            var posHeight = top + height - pad*2;\n\n            if (posHeight < e.pageY)\n            {\n                this.app.broadcast('bottomclick', e);\n            }\n        }\n\n        this.app.broadcast('state', e);\n        this.app.broadcast('click', e);\n    },\n    keydown: function(e)\n    {\n        this.app.broadcast('state', e);\n        var stop = this.app.broadcast('keydown', e);\n        if (stop === false)\n        {\n            return e.preventDefault();\n        }\n    },\n    keyup: function(e)\n    {\n        this.app.broadcast('keyup', e);\n    },\n    mouseup: function(e)\n    {\n        this.app.broadcast('observe', e);\n        this.app.broadcast('state', e);\n    },\n    touchstart: function(e)\n    {\n        this.app.broadcast('observe', e);\n        this.app.broadcast('state', e);\n    },\n\n    // private\n    _init: function()\n    {\n        var $editor = this.editor.getElement();\n\n        $editor.on('focus.redactor-focus click.redactor-focus', this.focus.bind(this));\n        this.$doc.on('keyup' + this.blurNamespace + ' mousedown' + this.blurNamespace, this.blur.bind(this));\n\n        // all events\n        this._loop('on');\n    },\n    _removeOverClass: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.removeClass('over');\n    },\n    _loop: function(func)\n    {\n        var $editor = this.editor.getElement();\n        for (var i = 0; i < this.eventsList.length; i++)\n        {\n            var event = this.eventsList[i] + '.redactor-events';\n            var method = this.eventsList[i];\n\n            $editor[func](event, this[method].bind(this));\n        }\n    },\n    _passAllToClipboard: function(e)\n    {\n        var clipboard = e.clipboardData;\n        var content = this.source.getCode();\n\n        clipboard.setData('text/html', content);\n        clipboard.setData('text/plain', content.toString().replace(/\\n$/, \"\"));\n    },\n    _passSelectionToClipboard: function(e, data, remove)\n    {\n        var clipboard = e.clipboardData;\n        var node = data.getComponent();\n        var $node = $R.dom(node);\n        var $cloned = $node.clone();\n\n        // clean\n        $cloned.find('.redactor-component-caret').remove();\n        $cloned.removeClass('redactor-component-active');\n        $cloned.removeAttr('contenteditable');\n        $cloned.removeAttr('tabindex');\n\n        // html\n        var content = $cloned.get().outerHTML;\n\n        if (remove) this.component.remove(node);\n\n        clipboard.setData('text/html', content);\n        clipboard.setData('text/plain', content.toString().replace(/\\n$/, \"\"));\n    },\n    _setDragData: function(e)\n    {\n        e = e.originalEvent || e;\n\n        var dt = e.dataTransfer;\n        dt.effectAllowed = 'move';\n        dt.setData('text/Html', this.selection.getHtml());\n    }\n});\n$R.add('module', 'container', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.lang = app.lang;\n        this.element = app.element;\n        this.container = app.container;\n    },\n    // public\n    start: function()\n    {\n        this._build();\n        this._buildAccesibility();\n    },\n    stop: function()\n    {\n        var $element = this.element.getElement();\n        var $container = this.container.getElement();\n\n        $container.after($element);\n        $container.remove();\n        $element.show();\n    },\n\n    // private\n    _build: function()\n    {\n        var $element = this.element.getElement();\n        var $container = this.container.getElement();\n\n        $container.addClass('redactor-box');\n        $container.attr('dir', this.opts.direction);\n\n        if (this.element.isType('inline')) $container.addClass('redactor-inline');\n\n        $element.after($container);\n        $container.append($element);\n    },\n    _buildAccesibility: function()\n    {\n        var $container = this.container.getElement();\n        var $label = $R.dom('<span />');\n\n        $label.addClass('redactor-voice-label');\n        $label.attr({ 'id': 'redactor-voice-' + this.uuid, 'aria-hidden': false });\n        $label.html(this.lang.get('accessibility-help-label'));\n\n        $container.prepend($label);\n    }\n});\n$R.add('module', 'source', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.element = app.element;\n        this.source = app.source;\n        this.editor = app.editor;\n        this.toolbar = app.toolbar;\n        this.cleaner = app.cleaner;\n        this.component = app.component;\n        this.container = app.container;\n        this.autoparser = app.autoparser;\n        this.selection = app.selection;\n\n        // local\n        this.syncedHtml = '';\n    },\n    // messages\n    onstartcode: function()\n    {\n        var sourceContent = this.source.getStartedContent();\n        var $editor = this.editor.getElement();\n        var $source = this.source.getElement();\n\n        // autoparse\n        if (this.opts.autoparse && this.opts.autoparseStart)\n        {\n            sourceContent = this.autoparser.parse(sourceContent);\n        }\n\n        // started content\n        var startContent = this.cleaner.input(sourceContent, true, true);\n        var syncContent = this.cleaner.output(startContent);\n\n        // set content\n        $editor.html(startContent);\n        $source.val(syncContent);\n\n        this.syncedHtml = syncContent;\n        this.app.broadcast('placeholder.build');\n        this.app.broadcast('autoparseobserve');\n\n        // widget's scripts\n        this.component.executeScripts();\n    },\n    onstartcodeshow: function()\n    {\n        this.show();\n    },\n    ontrytosync: function()\n    {\n        this.sync();\n    },\n    onhardsync: function()\n    {\n        var $editor = this.editor.getElement();\n        var html = $editor.html();\n\n        html = this.app.broadcast('syncBefore', html);\n        html = this.cleaner.output(html);\n\n        this._syncing(html);\n    },\n\n    // public\n    start: function()\n    {\n        this._build();\n        this._buildClasses();\n    },\n    stop: function()\n    {\n        var $element = this.element.getElement();\n        var $source = this.source.getElement();\n\n        $element.removeClass('redactor-source redactor-source-open');\n        $source.off('input.redactor-source');\n        $source.removeAttr('data-gramm_editor');\n\n        if ($source.get().classList.length === 0) $source.removeAttr('class');\n        if (!this.source.isNameGenerated()) $element.removeAttr('name');\n        if (!this.element.isType('textarea')) $source.remove();\n\n    },\n    getCode: function()\n    {\n        return this.source.getCode();\n    },\n\n    // public\n    toggle: function()\n    {\n        if (!this.opts.source) return;\n\n        var $source = this.source.getElement();\n\n        return ($source.hasClass('redactor-source-open')) ? this.hide() : this.show();\n    },\n    show: function()\n    {\n        if (!this.opts.source) return;\n\n        var $editor = this.editor.getElement();\n        var $source = this.source.getElement();\n        var $container = this.container.getElement();\n\n        var html = $source.val();\n\n        if (this.app.isStarted()) html = this.app.broadcast('source.open', html);\n\n        // get height\n        var editorHeight = $editor.height();\n\n        $editor.hide();\n        $source.height(editorHeight);\n        $source.val(html.trim());\n        $source.show();\n        $source.addClass('redactor-source-open');\n        $source.on('input.redactor-source-events', this._onChangedSource.bind(this));\n        $source.on('keydown.redactor-source-events', this._onTabKey.bind(this));\n        $source.on('focus.redactor-source-events', this._onFocus.bind(this));\n\n        if (this.opts.source.hasOwnProperty('codemirror')) {\n            var opts = (typeof this.opts.source.codemirror === 'object') ? this.opts.source.codemirror : {};\n            this.codemirror = CodeMirror.fromTextArea($source.get(), opts);\n            this.codemirror.setSize(null, editorHeight);\n            this.codemirror.on('change', function(cm, changeObj){ cm.save() });\n            this.codemirror.on('change', this._onChangedSource.bind(this));\n        }\n        else {\n            $container.addClass('redactor-source-view');\n        }\n\n        // buttons\n        setTimeout(function()\n        {\n            this._disableButtons();\n            this._setActiveSourceButton();\n\n        }.bind(this), 100);\n\n        if (this.app.isStarted()) this.app.broadcast('source.opened');\n    },\n    hide: function()\n    {\n        if (!this.opts.source) return;\n\n        var $editor = this.editor.getElement();\n        var $source = this.source.getElement();\n        var $container = this.container.getElement();\n\n        var html = $source.val();\n        if (this.opts.source.hasOwnProperty('codemirror')) {\n            html = this.codemirror.getValue();\n            this.codemirror.toTextArea();\n        }\n\n\n        // clean\n        html = this.cleaner.input(html, true);\n        html = (this.utils.isEmptyHtml(html)) ? this.opts.emptyHtml : html;\n        html = this.app.broadcast('source.close', html);\n\n        // buttons\n        this._enableButtons();\n        this._setInactiveSourceButton();\n\n        $source.hide();\n        $source.removeClass('redactor-source-open');\n        $source.off('.redactor-source-events');\n        $editor.show();\n        $editor.html(html);\n\n        $container.removeClass('redactor-source-view');\n\n        setTimeout(function()\n        {\n            this.editor.startFocus();\n\n            // widget's scripts\n            this.component.executeScripts();\n\n        }.bind(this), 0);\n\n        this.app.broadcast('source.closed');\n    },\n    sync: function()\n    {\n        var self = this;\n        var $editor = this.editor.getElement();\n        var html = $editor.html();\n\n        html = this.app.broadcast('syncBefore', html);\n        html = this.cleaner.output(html);\n\n        if (this._isSync(html))\n        {\n            if (this.timeout) clearTimeout(this.timeout);\n            this.timeout = setTimeout(function() { self._syncing(html); }, 200);\n        }\n    },\n\n    // private\n    _build: function()\n    {\n        var $source = this.source.getElement();\n        var $element = this.element.getElement();\n\n        $source.hide();\n\n        if (!this.opts.grammarly)\n        {\n            $source.attr('data-gramm_editor', false);\n        }\n\n        if (!this.element.isType('textarea'))\n        {\n            $element.after($source);\n        }\n    },\n    _buildClasses: function()\n    {\n        var $source = this.source.getElement();\n\n        $source.addClass('redactor-source');\n    },\n    _syncing: function(html)\n    {\n        html = this.app.broadcast('syncing', html);\n\n        var $source = this.source.getElement();\n        $source.val(html);\n\n        this.app.broadcast('synced', html);\n        this.app.broadcast('changed', html);\n    },\n    _isSync: function(html)\n    {\n        if (this.syncedHtml !== html)\n        {\n            this.syncedHtml = html;\n            return true;\n        }\n\n        return false;\n    },\n    _onChangedSource: function()\n    {\n        var $source = this.source.getElement();\n        var html = $source.val();\n\n        this.app.broadcast('changed', html);\n        this.app.broadcast('source.changed', html);\n    },\n    _onTabKey: function(e)\n    {\n        if (e.keyCode !== 9) return true;\n\n        e.preventDefault();\n\n        var $source = this.source.getElement();\n        var el = $source.get();\n        var start = el.selectionStart;\n\n        $source.val($source.val().substring(0, start) + \"    \" + $source.val().substring(el.selectionEnd));\n        el.selectionStart = el.selectionEnd = start + 4;\n    },\n    _onFocus: function()\n    {\n        this.app.broadcast('sourcefocus');\n    },\n    _disableButtons: function()\n    {\n        this.toolbar.disableButtons();\n    },\n    _enableButtons: function()\n    {\n        this.toolbar.enableButtons();\n    },\n    _setActiveSourceButton: function()\n    {\n        var $btn = this.toolbar.getButton('html');\n        $btn.enable();\n        $btn.setActive();\n    },\n    _setInactiveSourceButton: function()\n    {\n        var $btn = this.toolbar.getButton('html');\n        $btn.setInactive();\n    }\n});\n$R.add('module', 'observer', {\n    init: function(app)\n    {\n        this.app = app;\n        this.editor = app.editor;\n\n        // local\n        this.observerUnit = false;\n    },\n    // public\n    start: function()\n    {\n        if (window.MutationObserver)\n        {\n            var $editor = this.editor.getElement();\n            var el = $editor.get();\n            this.observerUnit = this._build(el);\n            this.observerUnit.observe(el, {\n                 attributes: true,\n                 subtree: true,\n                 childList: true,\n                 characterData: true,\n                 characterDataOldValue: true\n            });\n        }\n    },\n    stop: function()\n    {\n        if (this.observerUnit) this.observerUnit.disconnect();\n    },\n\n    // private\n    _build: function(el)\n    {\n        var self = this;\n        return new MutationObserver(function(mutations)\n        {\n            self._observe(mutations[mutations.length-1], el);\n        });\n    },\n    _observe: function(mutation, el)\n    {\n        if (this.app.isReadOnly() || (mutation.type === 'attributes' && mutation.target === el))\n        {\n            return;\n        }\n\n        this.app.broadcast('observe');\n        this.app.broadcast('trytosync');\n        this.app.broadcast('placeholder.toggle');\n    }\n});\n$R.add('module', 'clicktoedit', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.source = app.source;\n        this.editor = app.editor;\n        this.container = app.container;\n        this.selection = app.selection;\n    },\n    // messages\n    onstartclicktoedit: function()\n    {\n        this.start();\n    },\n    onenablereadonly: function()\n    {\n        if (!this._isEnabled()) this.stop();\n    },\n    ondisablereadonly: function()\n    {\n        if (!this._isEnabled()) this.start();\n    },\n    onstop: function()\n    {\n        this.stop();\n    },\n\n    // public\n    start: function()\n    {\n        this._build();\n    },\n    stop: function()\n    {\n        if (this.buttonSave) this.buttonSave.stop();\n        if (this.buttonCancel) this.buttonCancel.stop();\n\n        this._destroy();\n        this.app.broadcast('disable');\n    },\n    enable: function()\n    {\n        this.app.broadcast('clickStart');\n\n        var isEmpty = this.editor.isEmpty();\n        if (!isEmpty) this.selection.saveMarkers();\n\n        this._setFocus();\n        this._destroy();\n        this.app.broadcast('enable');\n        this.buttonSave.enable();\n        this.buttonCancel.enable();\n\n        if (!isEmpty) this.selection.restoreMarkers();\n        if (isEmpty) this.editor.focus();\n\n        var $container = this.container.getElement();\n        $container.addClass('redactor-clicktoedit-enabled');\n\n        this.source.rebuildStartedContent();\n\n        this.app.broadcast('startcode');\n        this.app.broadcast('image.observe');\n    },\n    save: function(e)\n    {\n        if (e) e.preventDefault();\n\n        var html = this.source.getCode();\n\n        this.app.broadcast('disable');\n        this.app.broadcast('clickSave', html);\n        this.app.broadcast('clickStop');\n        this.app.broadcast('toolbar.removeexternal');\n        this._build();\n    },\n    cancel: function(e)\n    {\n        if (e) e.preventDefault();\n\n        var html = this.saved;\n        var $editor = this.editor.getElement();\n        $editor.html(html);\n\n        this.saved = '';\n\n        this.app.broadcast('disable');\n        this.app.broadcast('clickCancel', html);\n        this.app.broadcast('clickStop');\n        this.app.broadcast('toolbar.removeexternal');\n        this._build();\n    },\n\n    // private\n    _build: function()\n    {\n        // buttons\n        this.buttonSave = $R.create('clicktoedit.button', 'save', this.app, this);\n        this.buttonCancel = $R.create('clicktoedit.button', 'cancel', this.app, this);\n\n        this.buttonSave.stop();\n        this.buttonCancel.stop();\n\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n\n        $editor.on('click.redactor-click-to-edit mouseup.redactor-click-to-edit', this.enable.bind(this));\n        $container.addClass('redactor-over');\n        $container.removeClass('redactor-clicktoedit-enabled');\n    },\n    _isEnabled: function()\n    {\n        return this.container.getElement().hasClass('redactor-clicktoedit-enabled');\n    },\n    _destroy: function()\n    {\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n\n        $editor.off('.redactor-click-to-edit');\n        $container.removeClass('redactor-over redactor-clicktoedit-enabled');\n    },\n    _setFocus: function()\n    {\n        this.saved = this.source.getCode();\n\n        this.buttonSave.start();\n        this.buttonCancel.start();\n    }\n});\n$R.add('class', 'clicktoedit.button', {\n    init: function(type, app, context)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.toolbar = app.toolbar;\n        this.context = context;\n\n        // local\n        this.type = type;\n        this.name = (type === 'save') ? 'clickToSave' : 'clickToCancel';\n        this.objected = false;\n        this.enabled = false;\n        this.namespace = '.redactor-click-to-edit';\n\n        // build\n        this._build();\n    },\n    enable: function()\n    {\n        if (!this.objected) return;\n\n        var data = this.opts[this.name];\n        data.api = 'module.clicktoedit.' + this.type;\n\n        this.toolbar.addButton(this.type, data);\n        this.enabled = true;\n    },\n    start: function()\n    {\n        if (this.objected) return;\n\n        this.$button.off(this.namespace);\n        this.$button.show();\n        this.$button.on('click' + this.namespace, this.context[this.type].bind(this.context));\n    },\n    stop: function()\n    {\n        if (this.objected || !this.enabled) return;\n\n        this.$button.hide();\n    },\n\n    // private\n    _build: function()\n    {\n        this.objected = (typeof this.opts[this.name] === 'object');\n\n        if (!this.objected)\n        {\n            this.$button = $R.dom(this.opts[this.name]);\n            this.enabled = true;\n        }\n    }\n});\n$R.add('module', 'statusbar', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.element = app.element;\n        this.statusbar = app.statusbar;\n        this.container = app.container;\n    },\n    // public\n    start: function()\n    {\n        if (!this.element.isType('inline'))\n        {\n            var $statusbar = this.statusbar.getElement();\n            var $container = this.container.getElement();\n\n            $statusbar.addClass('redactor-statusbar');\n            $container.append($statusbar);\n        }\n    }\n});\n$R.add('module', 'contextbar', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.uuid = app.uuid;\n        this.$win = app.$win;\n        this.$doc = app.$doc;\n        this.$body = app.$body;\n        this.editor = app.editor;\n        this.toolbar = app.toolbar;\n        this.detector = app.detector;\n\n        // local\n        this.$target = (this.toolbar.isTarget()) ? this.toolbar.getTargetElement() : this.$body;\n    },\n    // messages\n    onenablereadonly: function()\n    {\n        this.stop();\n    },\n    ondisablereadonly: function()\n    {\n        this.start();\n    },\n    oncontextbar: {\n        close: function()\n        {\n            this.close();\n        }\n    },\n\n    // public\n    start: function()\n    {\n        if (this.opts.toolbarContext)\n        {\n            var $editor = this.editor.getElement();\n\n            this._build();\n            $editor.on('click.redactor-context mouseup.redactor-context', this.open.bind(this));\n\n            if (this.opts.scrollTarget)\n            {\n                $R.dom(this.opts.scrollTarget).on('scroll.redactor-context', this.close.bind(this));\n            }\n            else if (this.opts.maxHeight !== false)\n            {\n                $editor.on('scroll.redactor-context', this.close.bind(this));\n            }\n        }\n    },\n    stop: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.off('.redactor-context');\n\n        this.$doc.off('.redactor-context');\n        this.$win.off('.redactor-context');\n\n        if (this.$contextbar) this.$contextbar.remove();\n        if (this.opts.scrollTarget)\n        {\n            $R.dom(this.opts.scrollTarget).off('.redactor-context');\n        }\n    },\n    is: function()\n    {\n        return (this.$contextbar && this.$contextbar.hasClass('open'));\n    },\n    set: function(e, node, buttons, position)\n    {\n        this.$contextbar.html('');\n        this.$el = $R.dom(node);\n\n        // buttons\n        for (var key in buttons)\n        {\n            var $btn = $R.create('contextbar.button', this.app, buttons[key]);\n            if ($btn.html() !== '')\n            {\n                this.$contextbar.append($btn);\n            }\n        }\n\n        // show\n        var pos = this._buildPosition(e, this.$el, position);\n\n        this.$contextbar.css(pos);\n        this.$contextbar.show();\n        this.$contextbar.addClass('open');\n        this.$doc.on('click.redactor-context mouseup.redactor-context', this.close.bind(this));\n        this.$win.on('resize.redactor-context', this.close.bind(this));\n    },\n    open: function(e)\n    {\n        setTimeout(function()\n        {\n            this.app.broadcast('contextbar', e, this);\n        }.bind(this), 0);\n    },\n    close: function(e)\n    {\n        if (!this.$contextbar) return;\n        if (e)\n        {\n            var $target = $R.dom(e.target);\n            if (this.$el && $target.closest(this.$el).length !== 0)\n            {\n                return;\n            }\n        }\n\n        this.$contextbar.hide();\n        this.$contextbar.removeClass('open');\n        this.$doc.off('.redactor.context');\n    },\n\n    // private\n    _build: function()\n    {\n        this.$contextbar = $R.dom('<div>');\n        this.$contextbar.attr('id', 'redactor-context-toolbar-' + this.uuid);\n        this.$contextbar.attr('dir', this.opts.direction);\n        this.$contextbar.addClass('redactor-context-toolbar');\n        this.$contextbar.hide();\n\n        this.$target.append(this.$contextbar);\n    },\n    _buildPosition: function(e, $el, position)\n    {\n        var top, left;\n        var isTarget = this.toolbar.isTarget();\n        var offset = (isTarget) ? $el.position() : $el.offset();\n\n        var width = $el.width();\n        var height = $el.height();\n\n        var barWidth = this.$contextbar.width();\n        var barHeight = this.$contextbar.height();\n        var docScrollTop = (isTarget) ? (this.$target.scrollTop() + this.$doc.scrollTop()) : this.$doc.scrollTop();\n\n        var targetOffset = this.$target.offset();\n        var leftFix = (isTarget) ? targetOffset.left : 0;\n        var topFix = (isTarget) ? targetOffset.top : 0;\n\n        if (!position)\n        {\n            top = (e.clientY + docScrollTop - barHeight);\n            left = (e.clientX - barWidth/2);\n        }\n        else if (position === 'top')\n        {\n            top = (offset.top - barHeight);\n            left = (offset.left + width/2 - barWidth/2);\n        }\n        else if (position === 'bottom')\n        {\n            top = (offset.top + height);\n            left = (offset.left + width/2 - barWidth/2);\n        }\n\n        if (left < 0) left = 0;\n\n        return { top: (top - topFix) + 'px', left: (left - leftFix) + 'px' };\n    }\n});\n$R.add('class', 'contextbar.button', {\n    mixins: ['dom'],\n    init: function(app, obj)\n    {\n        this.app = app;\n\n        // local\n        this.obj = obj;\n\n        // init\n        this._init();\n    },\n    // private\n    _init: function()\n    {\n        this.parse('<a>');\n\n        if (typeof this.obj.title !== 'string')\n        {\n            var url = this.obj.title.attr('href');\n            this.attr('href', url);\n\n            if (url.search(/^#/) === -1) {\n                this.attr('target', '_blank');\n            }\n\n            this.html(this.obj.html || url);\n        }\n        else\n        {\n            this.attr('href', '#');\n\n            this._buildTitle();\n            this._buildMessage();\n        }\n    },\n    _buildTitle: function()\n    {\n        this.html(this.obj.title);\n    },\n    _buildMessage: function()\n    {\n        if (typeof this.obj.message !== 'undefined' || typeof this.obj.api !== 'undefined')\n        {\n            this.on('click', this._toggle.bind(this));\n        }\n    },\n    _toggle: function(e)\n    {\n        e.preventDefault();\n\n        if (this.obj.message)\n        {\n            this.app.broadcast(this.obj.message, this.obj.args);\n        }\n        else if (this.obj.api)\n        {\n            this.app.api(this.obj.api, this.obj.args);\n        }\n    }\n});\n$R.add('module', 'toolbar', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.toolbar = app.toolbar;\n\n        // local\n        this.buttons = [];\n        this.toolbarModule = false;\n    },\n    // messages\n    onsource: {\n        open: function()\n        {\n            if (!this.toolbar.isAir() && this.toolbar.isFixed())\n            {\n                this.toolbarModule.resetPosition();\n            }\n        },\n        opened: function()\n        {\n            if (this.toolbar.isAir() && this.toolbarModule)\n            {\n                this.toolbarModule.createSourceHelper();\n            }\n\n            // hide tooltips\n            setTimeout(function()\n            {\n                $R.dom('.re-button-tooltip-' + this.uuid).remove();\n            }.bind(this), 100)\n\n        },\n        close: function()\n        {\n            if (this.toolbar.isAir() && this.toolbarModule)\n            {\n                this.toolbarModule.destroySourceHelper();\n            }\n        },\n        closed: function()\n        {\n            if (this.toolbar.is() && this.opts.air)\n            {\n                this.toolbarModule.openSelected();\n            }\n        }\n    },\n    ontoolbar: {\n        removeexternal: function() {\n            if (!this.opts.air && this.opts.toolbarExternal && this.opts.clickToEdit) {\n                $R.dom(this.opts.toolbarExternal).html('');\n            }\n        }\n    },\n    onobserve: function()\n    {\n        if (this.toolbar.is())\n        {\n            this.toolbar.observe();\n        }\n    },\n    onfocus: function()\n    {\n        this._setExternalOnFocus();\n    },\n    onsourcefocus: function()\n    {\n        this._setExternalOnFocus();\n    },\n    onempty: function()\n    {\n        if (this.toolbar.isFixed())\n        {\n            this.toolbarModule.resetPosition();\n        }\n    },\n    onenablereadonly: function()\n    {\n        if (this.toolbar.isAir())\n        {\n            this.toolbarModule.close();\n        }\n    },\n\n    // public\n    start: function()\n    {\n        if (this.toolbar.is())\n        {\n            this._buildButtons();\n            this._initToolbar();\n            this._initButtons();\n        }\n    },\n    stop: function()\n    {\n        if (this.toolbarModule)\n        {\n            this.toolbarModule.stop();\n        }\n\n        // stop dropdowns\n        $R.dom('.redactor-dropdown-' + this.uuid).remove();\n    },\n\n    // private\n    _buildButtons: function()\n    {\n        this.buttons = this.opts.buttons.concat();\n\n        this._buildImageButton();\n        this._buildFileButton();\n        this._buildSourceButton();\n        this._buildAdditionalButtons();\n        this._buildHiddenButtons();\n    },\n    _buildImageButton: function()\n    {\n        if (!this.opts.imageUpload && !this.opts.imageManagerJson) this.utils.removeFromArrayByValue(this.buttons, 'image');\n    },\n    _buildFileButton: function()\n    {\n        if (!this.opts.fileUpload) this.utils.removeFromArrayByValue(this.buttons, 'file');\n    },\n    _buildSourceButton: function()\n    {\n        if (!this.opts.source) this.utils.removeFromArrayByValue(this.buttons, 'html');\n    },\n    _buildAdditionalButtons: function()\n    {\n        // end\n        if (this.opts.buttonsAdd.length !== 0)\n        {\n            this.opts.buttonsAdd = this._removeExistButtons(this.opts.buttonsAdd);\n            this.buttons = this.buttons.concat(this.opts.buttonsAdd);\n        }\n\n        // beginning\n        if (this.opts.buttonsAddFirst.length !== 0)\n        {\n            this.opts.buttonsAddFirst = this._removeExistButtons(this.opts.buttonsAddFirst);\n            this.buttons.unshift(this.opts.buttonsAddFirst);\n        }\n\n        var index, btns;\n\n        // after\n        if (this.opts.buttonsAddAfter !== false)\n        {\n            index = this.buttons.indexOf(this.opts.buttonsAddAfter.after) + 1;\n            btns = this.opts.buttonsAddAfter.buttons;\n            for (var i = 0; i < btns.length; i++)\n            {\n                this.buttons.splice(index+i, 0, btns[i]);\n            }\n        }\n\n        // before\n        if (this.opts.buttonsAddBefore !== false)\n        {\n            index = this.buttons.indexOf(this.opts.buttonsAddBefore.before)+1;\n            btns = this.opts.buttonsAddBefore.buttons;\n            for (var i = 0; i < btns.length; i++)\n            {\n                this.buttons.splice(index-(1-i), 0, btns[i]);\n            }\n        }\n    },\n    _buildHiddenButtons: function()\n    {\n        if (this.opts.buttonsHide.length !== 0)\n        {\n            var buttons = this.opts.buttonsHide;\n            for (var i = 0; i < buttons.length; i++)\n            {\n                this.utils.removeFromArrayByValue(this.buttons, buttons[i]);\n            }\n        }\n    },\n    _removeExistButtons: function(buttons)\n    {\n        for (var i = 0; i < buttons.length; i++)\n        {\n            if (this.opts.buttons.indexOf(buttons[i]) !== -1)\n            {\n                this.utils.removeFromArrayByValue(buttons, buttons[i]);\n            }\n        }\n\n        return buttons;\n    },\n    _setExternalOnFocus: function()\n    {\n        if (!this.opts.air && this.opts.toolbarExternal)\n        {\n            this.toolbarModule.setExternal();\n        }\n    },\n    _initToolbar: function()\n    {\n        this.toolbarModule = (this.opts.air) ? $R.create('toolbar.air', this.app) : $R.create('toolbar.standard', this.app);\n    },\n    _initButtons: function()\n    {\n        this.toolbar.setButtons(this.buttons);\n\n        for (var i = 0; i < this.buttons.length; i++)\n        {\n            var name = this.buttons[i];\n            if ($R.buttons[name])\n            {\n                this.toolbar.addButton(name, $R.buttons[name], false, false, true);\n            }\n        }\n    }\n});\n$R.add('class', 'toolbar.air', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.$doc = app.$doc;\n        this.$win = app.$win;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.animate = app.animate;\n        this.toolbar = app.toolbar;\n        this.container = app.container;\n        this.inspector = app.inspector;\n        this.selection = app.selection;\n\n        // local\n        this.clicks = 0;\n\n        // init\n        this._init();\n    },\n    // public\n    stop: function()\n    {\n        var $wrapper = this.toolbar.getWrapper();\n        $wrapper.remove();\n\n        var $editor = this.editor.getElement();\n        $editor.off('.redactor-air-trigger-' + this.uuid);\n\n        this.$doc.off('.redactor-air-' + this.uuid);\n        this.$doc.off('.redactor-air-trigger-' + this.uuid);\n\n        this.toolbar.stopObservers();\n    },\n    createSourceHelper: function()\n    {\n        this.$airHelper = $R.dom('<span>');\n        this.$airHelper.addClass('redactor-air-helper');\n        this.$airHelper.html('<i class=\"re-icon-html\"></i>');\n        this.$airHelper.on('click', function(e)\n        {\n            e.preventDefault();\n            this.app.api('module.source.hide');\n\n        }.bind(this));\n\n        var $container = this.container.getElement();\n        $container.append(this.$airHelper);\n    },\n    destroySourceHelper: function()\n    {\n        if (this.$airHelper) this.$airHelper.remove();\n    },\n    openSelected: function()\n    {\n        setTimeout(function()\n        {\n            if (this._isSelection()) this._open(false);\n\n        }.bind(this), 0);\n    },\n    close: function()\n    {\n        this.$doc.off('.redactor-air-' + this.uuid);\n\n        var $toolbar = this.toolbar.getElement();\n        $toolbar.removeClass('open');\n        $toolbar.hide();\n    },\n\n    // private\n    _init: function()\n    {\n        this.toolbar.create();\n\n        var $wrapper = this.toolbar.getWrapper();\n        var $toolbar = this.toolbar.getElement();\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n\n        $wrapper.addClass('redactor-toolbar-wrapper-air');\n        $toolbar.addClass('redactor-air');\n        //$toolbar.addClass('redactor-animate-hide');\n        $toolbar.hide();\n\n        $wrapper.append($toolbar);\n        $container.prepend($wrapper);\n\n        // open selected\n        this.openSelected();\n\n        // events\n        this.$doc.on('mouseup.redactor-air-trigger-' + this.uuid, this._open.bind(this));\n        $editor.on('keyup.redactor-air-trigger-' + this.uuid, this._openCmd.bind(this));\n    },\n    _isSelection: function()\n    {\n        return (this.selection.is() && !this.selection.isCollapsed());\n    },\n    _isOpened: function()\n    {\n        var $toolbar = this.toolbar.getElement();\n\n        return $toolbar.hasClass('open');\n    },\n    _open: function(e)\n    {\n        var target = (e) ? e.target : false;\n        var $el = (e) ? $R.dom(e.target) : false;\n        var dataTarget = this.inspector.parse(target);\n        var isComponent = (dataTarget.isComponent() && !dataTarget.isComponentType('table'));\n        var isFigcaption = (dataTarget.isFigcaption());\n        var isModalTarget = ($el && $el.closest('.redactor-modal').length !== 0);\n        var isButtonCall = (e && $el.closest('.re-button').length !== 0);\n        var isDropdownCall = (e && $el.closest('.redactor-dropdown').length !== 0);\n\n        if (isDropdownCall || isButtonCall || isModalTarget || isFigcaption || isComponent || this.toolbar.isContextBar() || !this._isSelection())\n        {\n            return;\n        }\n\n        var pos = this.selection.getPosition();\n\n        setTimeout(function()\n        {\n            if (this.app.isReadOnly()) return;\n            if (this._isSelection()) this._doOpen(pos);\n\n        }.bind(this), 1);\n\n    },\n    _openCmd: function()\n    {\n        if (this.selection.isAll())\n        {\n            var $toolbar = this.toolbar.getElement();\n            var pos = this.selection.getPosition();\n\n            pos.top = (pos.top < 20) ? 0 : pos.top - $toolbar.height();\n            pos.height = 0;\n\n            this._doOpen(pos);\n        }\n    },\n    _doOpen: function(pos)\n    {\n        var $wrapper = this.toolbar.getWrapper();\n        var $toolbar = this.toolbar.getElement();\n        var $container = this.container.getElement();\n        var containerOffset = $container.offset();\n        var leftFix = 0;\n        var winWidth = this.$win.width();\n        var toolbarWidth = $toolbar.width();\n\n        if (winWidth < (pos.left + toolbarWidth))\n        {\n            var selPos = this.selection.getPosition();\n            leftFix = toolbarWidth - selPos.width;\n        }\n\n        $wrapper.css({\n            left: (pos.left - containerOffset.left - leftFix) + 'px',\n            top: (pos.top - containerOffset.top + pos.height + this.$doc.scrollTop()) + 'px'\n        });\n\n        this.app.broadcast('airOpen');\n        $toolbar.addClass('open');\n        $toolbar.show();\n\n        this.$doc.on('click.redactor-air-' + this.uuid, this._close.bind(this));\n        this.$doc.on('keydown.redactor-air-' + this.uuid, this._close.bind(this));\n        this.app.broadcast('airOpened');\n    },\n    _close: function(e)\n    {\n        var $el = (e) ? $R.dom(e.target) : false;\n        var isDropdownCall = (e && $el.closest('[data-dropdown], .redactor-dropdown-not-close').length !== 0);\n        var isButtonCall = (!isDropdownCall && e && $el.closest('.re-button').length !== 0);\n\n        if (!isButtonCall && (isDropdownCall || !this._isOpened()))\n        {\n            return;\n        }\n\n        // close\n        this.app.broadcast('airClose');\n\n        this.close();\n        this.app.broadcast('airClosed');\n    }\n});\n$R.add('class', 'toolbar.fixed', {\n    init: function(app)\n    {\n        this.app = app;\n        this.uuid = app.uuid;\n        this.opts = app.opts;\n        this.$doc = app.$doc;\n        this.$win = app.$win;\n        this.editor = app.editor;\n        this.toolbar = app.toolbar;\n        this.detector = app.detector;\n        this.container = app.container;\n\n        // init\n        this._init();\n    },\n    // public\n    stop: function()\n    {\n        this.$fixedTarget.off('.redactor-toolbar-' + this.uuid);\n        this.$win.off('.redactor-toolbar-' + this.uuid);\n    },\n    reset: function()\n    {\n        var $toolbar = this.toolbar.getElement();\n        var $wrapper = this.toolbar.getWrapper();\n\n        $wrapper.css('height', '');\n        $toolbar.removeClass('redactor-toolbar-fixed');\n        $toolbar.css({ position: '', top: '', left: '', width: '' });\n\n        var dropdown = this.toolbar.getDropdown();\n        if (dropdown) dropdown.updatePosition();\n    },\n\n    // private\n    _init: function()\n    {\n        this.$fixedTarget = (this.toolbar.isTarget()) ? this.toolbar.getTargetElement() : this.$win;\n        this._doFixed();\n\n        if (this.toolbar.isTarget())\n        {\n            this.$win.on('scroll.redactor-toolbar-' + this.uuid, this._doFixed.bind(this));\n            this.$win.on('resize.redactor-toolbar-' + this.uuid, this._doFixed.bind(this));\n        }\n\n        this.$fixedTarget.on('scroll.redactor-toolbar-' + this.uuid, this._doFixed.bind(this));\n        this.$fixedTarget.on('resize.redactor-toolbar-' + this.uuid, this._doFixed.bind(this));\n    },\n    _doFixed: function()\n    {\n        var $editor = this.editor.getElement();\n        var $container = this.container.getElement();\n        var $toolbar = this.toolbar.getElement();\n        var $wrapper = this.toolbar.getWrapper();\n\n        if (this.editor.isSourceMode())\n        {\n            return;\n        }\n\n        var $targets = $container.parents().filter(function(node)\n        {\n            return (getComputedStyle(node, null).display === 'none') ? node : false;\n        });\n\n        // has hidden parent\n        if ($targets.length !== 0) return;\n\n        var isHeight = ($editor.height() < 100);\n        var isEmpty = this.editor.isEmpty();\n\n        if (isHeight || isEmpty) {\n            this.reset();\n            return;\n        }\n\n        if (this.editor.isSourceMode()) {\n            return;\n        }\n\n        var toolbarHeight = $toolbar.height();\n        var toleranceEnd = 60;\n        var containerOffset = (this.toolbar.isTarget()) ? $container.position() : $container.offset();\n        var boxOffset = containerOffset.top;\n        var boxEnd = boxOffset + $container.height() - toleranceEnd;\n        var scrollOffset = this.$fixedTarget.scrollTop() + this.opts.toolbarFixedTopOffset;\n        var top = (!this.toolbar.isTarget()) ? 0 : this.$fixedTarget.offset().top - this.$win.scrollTop();\n        if (this.toolbar.isTarget() && this.$fixedTarget.css('position') === 'fixed') {\n            var bs = (this.$fixedTarget.hasClass('modal') && this.$fixedTarget.hasClass('fade'));\n            var bsFix = (bs) ? $container.closest('.modal-dialog').position().top : 0;\n            top = this.$fixedTarget.scrollTop() - bsFix;\n        }\n\n\n        if (scrollOffset > boxOffset && scrollOffset < boxEnd)\n        {\n            var position = (this.detector.isDesktop()) ? 'fixed' : 'absolute';\n            top = (this.detector.isDesktop()) ? top : (scrollOffset - boxOffset);\n\n            if (this.detector.isMobile())\n            {\n                if (this.fixedScrollTimeout)\n                {\n                    clearTimeout(this.fixedScrollTimeout);\n                }\n\n                $toolbar.hide();\n                this.fixedScrollTimeout = setTimeout(function()\n                {\n                    $toolbar.show();\n                }, 250);\n            }\n\n            $wrapper.height(toolbarHeight);\n            $toolbar.addClass('redactor-toolbar-fixed');\n\n            if ($container.hasClass('redactor-box-fullscreen'))\n            {\n                $toolbar.css({\n                    position: position,\n                    top: '0px',\n                    width: $container.width() + 'px'\n                });\n            }\n            else\n            {\n                $toolbar.css({\n                    position: position,\n                    top: (top + this.opts.toolbarFixedTopOffset) + 'px',\n                    width: $container.width() + 'px'\n                });\n            }\n\n            var dropdown = this.toolbar.getDropdown();\n            if (dropdown) dropdown.updatePosition();\n\n            this.app.broadcast('toolbar.fixed');\n        }\n        else\n        {\n            this.reset();\n            this.app.broadcast('toolbar.unfixed');\n        }\n    }\n});\n$R.add('class', 'toolbar.standard', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.uuid = app.uuid;\n        this.$body = app.$body;\n        this.toolbar = app.toolbar;\n        this.container = app.container;\n\n        // local\n        this.isExternalMultiple = false;\n        this.toolbarFixed = false;\n\n        // init\n        this._init();\n    },\n    // public\n    stop: function()\n    {\n        var $wrapper = this.toolbar.getWrapper();\n        $wrapper.remove();\n\n        if (this.toolbarFixed) this.toolbarFixed.stop();\n        if (this.opts.toolbarExternal) this._findToolbars();\n\n        this.toolbar.stopObservers();\n        this.$body.find('.re-button-tooltip-' + this.uuid).remove();\n    },\n    setExternal: function()\n    {\n        this._findToolbars();\n        if (this.isExternalMultiple)\n        {\n            this.$toolbars.hide();\n            var $current = this.$external.find('.redactor-toolbar-external-' + this.uuid);\n            $current.show();\n        }\n    },\n    resetPosition: function()\n    {\n        if (this.toolbarFixed) this.toolbarFixed.reset();\n    },\n\n    // private\n    _init: function()\n    {\n        this._build();\n\n        if (this.opts.toolbarExternal)\n        {\n            this._buildExternal();\n        }\n        else\n        {\n            this._buildFixed();\n\n            var $toolbar = this.toolbar.getElement();\n            $toolbar.show();\n        }\n    },\n    _build: function()\n    {\n        this.toolbar.create();\n\n        var $wrapper = this.toolbar.getWrapper();\n        var $toolbar = this.toolbar.getElement();\n\n        $wrapper.addClass('redactor-toolbar-wrapper');\n        $toolbar.addClass('redactor-toolbar');\n        $toolbar.hide();\n        $wrapper.append($toolbar);\n\n        if (!this.opts.toolbarExternal)\n        {\n            var $container = this.container.getElement();\n            $container.prepend($wrapper);\n        }\n    },\n    _buildExternal: function()\n    {\n        this._initExternal();\n        this._findToolbars();\n\n        if (this.isExternalMultiple)\n        {\n            this._hideToolbarsExceptFirst();\n        }\n        else\n        {\n            var $toolbar = this.toolbar.getElement();\n            $toolbar.show();\n        }\n    },\n    _buildFixed: function()\n    {\n        if (this.opts.toolbarFixed)\n        {\n            this.toolbarFixed = $R.create('toolbar.fixed', this.app);\n        }\n    },\n    _initExternal: function()\n    {\n        var $toolbar = this.toolbar.getElement();\n        var $wrapper = this.toolbar.getElement();\n\n        $toolbar.addClass('redactor-toolbar-external redactor-toolbar-external-' + this.uuid);\n\n        this.$external = $R.dom(this.opts.toolbarExternal);\n        this.$external.append($wrapper);\n\n    },\n    _findToolbars: function()\n    {\n        this.$toolbars = this.$external.find('.redactor-toolbar-external');\n        this.isExternalMultiple = (this.$toolbars.length > 1);\n    },\n    _hideToolbarsExceptFirst: function()\n    {\n        this.$toolbars.hide();\n        var $first = this.$toolbars.first();\n        $first.show();\n    }\n});\n$R.add('module', 'line', {\n    init: function(app)\n    {\n        this.app = app;\n        this.lang = app.lang;\n        this.component = app.component;\n        this.inspector = app.inspector;\n        this.insertion = app.insertion;\n    },\n    // messages\n    oncontextbar: function(e, contextbar)\n    {\n        var data = this.inspector.parse(e.target);\n        if (data.isComponentType('line'))\n        {\n            var node = data.getComponent();\n            var buttons = {\n                \"remove\": {\n                    title: this.lang.get('delete'),\n                    api: 'module.line.remove',\n                    args: node\n                }\n            };\n\n            contextbar.set(e, node, buttons, 'bottom');\n        }\n\n    },\n\n    // public\n    insert: function()\n    {\n        var line = this.component.create('line');\n        this.insertion.insertRaw(line);\n    },\n    remove: function(node)\n    {\n        this.component.remove(node);\n    }\n});\n$R.add('class', 'line.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n    // private\n    _init: function(el)\n    {\n        var wrapper, element;\n        if (typeof el !== 'undefined')\n        {\n            var $node = $R.dom(el);\n            var node = $node.get();\n\n            if (node.tagName === 'HR') element = node;\n            else if (node.tagName === 'FIGURE')\n            {\n                wrapper = node;\n                element = $node.find('hr').get();\n            }\n        }\n\n        this._buildWrapper(wrapper);\n        this._buildElement(element);\n        this._initWrapper();\n    },\n    _buildElement: function(node)\n    {\n        if (node)\n        {\n            this.$element = $R.dom(node);\n        }\n        else\n        {\n            this.$element = $R.dom('<hr>');\n            this.append(this.$element);\n        }\n    },\n    _buildWrapper: function(node)\n    {\n        node = node || '<figure>';\n\n        this.parse(node);\n    },\n    _initWrapper: function()\n    {\n        this.addClass('redactor-component');\n        this.attr({\n            'data-redactor-type': 'line',\n            'tabindex': '-1',\n            'contenteditable': false\n        });\n    }\n});\n$R.add('module', 'link', {\n    modals: {\n        'link':\n            '<form action=\"\"> \\\n                <div class=\"form-item\"> \\\n                    <label for=\"modal-link-url\">URL <span class=\"req\">*</span></label> \\\n                    <input type=\"text\" id=\"modal-link-url\" name=\"url\"> \\\n                </div> \\\n                <div class=\"form-item\"> \\\n                    <label for=\"modal-link-text\">## text ##</label> \\\n                    <input type=\"text\" id=\"modal-link-text\" name=\"text\"> \\\n                </div> \\\n                <div class=\"form-item form-item-title\"> \\\n                    <label for=\"modal-link-title\">## title ##</label> \\\n                    <input type=\"text\" id=\"modal-link-title\" name=\"title\"> \\\n                </div> \\\n                <div class=\"form-item form-item-target\"> \\\n                    <label class=\"checkbox\"> \\\n                        <input type=\"checkbox\" name=\"target\"> ## link-in-new-tab ## \\\n                    </label> \\\n                </div> \\\n            </form>'\n    },\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.lang = app.lang;\n        this.caret = app.caret;\n        this.utils = app.utils;\n        this.inline = app.inline;\n        this.editor = app.editor;\n        this.inspector = app.inspector;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n\n        // local\n        this.isCurrentLink = false;\n        this.currentText = false;\n    },\n    // messages\n    onmodal: {\n        link: {\n            open: function($modal, $form)\n            {\n                this._setFormData($form, $modal);\n            },\n            opened: function($modal, $form)\n            {\n                this._setFormFocus($form);\n            },\n            update: function($modal, $form)\n            {\n                var data = $form.getData();\n                if (this._validateData($form, data))\n                {\n                    this._update(data);\n                }\n            },\n            insert: function($modal, $form)\n            {\n                var data = $form.getData();\n                if (this._validateData($form, data))\n                {\n                    this._insert(data);\n                }\n            },\n            unlink: function()\n            {\n                this._unlink();\n            }\n        }\n    },\n    onbutton: {\n        link: {\n            observe: function(button)\n            {\n                this._observeButton(button);\n            }\n        }\n    },\n    ondropdown: {\n        link: {\n            observe: function(dropdown)\n            {\n                this._observeUnlink(dropdown);\n                this._observeEdit(dropdown);\n            }\n        }\n    },\n    oncontextbar: function(e, contextbar)\n    {\n        var current = this._getCurrent();\n        var data = this.inspector.parse(current);\n        if (data.isLink() || data.isFile())\n        {\n            var node = (data.isFile()) ? data.getFile() : data.getLink();\n            var $el = $R.dom(node);\n\n            var $point = $R.dom('<a>');\n            var url = $el.attr('href');\n\n            $point.text(this._truncateText(url));\n            $point.attr('href', url);\n            $point.attr('target', '_blank');\n\n            var buttons = {\n                \"link\": {\n                    title: $point,\n                    html: this._truncateText(url)\n                },\n                \"edit\": {\n                    title: this.lang.get('edit'),\n                    api: 'module.link.open'\n                },\n                \"unlink\": {\n                    title: this.lang.get('unlink'),\n                    api: 'module.link.unlink'\n                }\n            };\n\n            contextbar.set(e, node, buttons, 'bottom');\n        }\n    },\n\n    // public\n    open: function()\n    {\n        this.$link = this._buildCurrent();\n        this.app.api('module.modal.build', this._getModalData());\n    },\n    insert: function(data)\n    {\n        this._insert(data);\n    },\n    update: function(data)\n    {\n        this._update(data);\n    },\n    unlink: function()\n    {\n        this._unlink();\n    },\n\n    // private\n    _observeButton: function(button)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n\n        if (data.isPre() || data.isCode())\n        {\n            button.disable();\n        }\n        else\n        {\n            button.enable();\n        }\n    },\n    _observeUnlink: function(dropdown)\n    {\n        var $item = dropdown.getItem('unlink');\n        var links = this._getLinks();\n\n        if (links.length === 0) $item.disable();\n        else                    $item.enable();\n    },\n    _observeEdit: function(dropdown)\n    {\n        var current = this._getCurrent();\n        var $item = dropdown.getItem('link');\n\n        var data = this.inspector.parse(current);\n        var title = (data.isLink() || data.isFile()) ? this.lang.get('link-edit') : this.lang.get('link-insert');\n\n        $item.setTitle(title);\n    },\n    _unlink: function()\n    {\n        this.app.api('module.modal.close');\n\n        var elms = [];\n        var nodes = this._getLinks();\n\n        this.selection.save();\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var $link = $R.create('link.component', this.app, nodes[i]);\n            elms.push(this.selection.getElement(nodes[i]));\n\n            $link.unwrap();\n\n            // callback\n            this.app.broadcast('link.deleted', $link);\n        }\n        this.selection.restore();\n\n        // normalize\n        for (var i = 0; i < elms.length; i++)\n        {\n            var el = (elms[i]) ? elms[i] : this.editor.getElement();\n            this.utils.normalizeTextNodes(el);\n        }\n\n        this._resetCurrent();\n    },\n    _update: function(data)\n    {\n        this.app.api('module.modal.close');\n\n        var nodes = this._getLinks();\n        this._setLinkData(nodes, data, 'updated');\n        this._resetCurrent();\n\n        // callback\n        this.app.broadcast('link.changed', nodes);\n    },\n    _insert: function(data)\n    {\n        this.app.api('module.modal.close');\n\n        var links = this._getLinks();\n\n        if (!this._insertSingle(links, data))\n        {\n            this._removeInSelection(links);\n            this._insertMultiple(data);\n        }\n\n        this._resetCurrent();\n    },\n    _removeInSelection: function(links)\n    {\n        this.selection.save();\n        for (var i = 0; i < links.length; i++)\n        {\n            var $link = $R.create('link.component', this.app, links[i]);\n            var $clonedLink = $link.clone();\n            $link.unwrap();\n\n            // callback\n            this.app.broadcast('link.deleted', $clonedLink);\n        }\n        this.selection.restore();\n    },\n    _insertMultiple: function(data)\n    {\n        var range = this.selection.getRange();\n        if (range && this._isCurrentTextChanged(data))\n        {\n            this._deleteContents(range);\n        }\n\n        var nodes = this.inline.format({ tag: 'a' });\n\n        this._setLinkData(nodes, data, 'inserted');\n    },\n    _insertSingle: function(links, data)\n    {\n        var inline = this.selection.getInline();\n        if (links.length === 1 && (links[0].textContext === this.selection.getText()) || (inline && inline.tagName === 'A'))\n        {\n            var $link = $R.create('link.component', this.app, links[0]);\n\n            $link.setData(data);\n            this.caret.setAfter($link);\n\n            // callback\n            this.app.broadcast('link.inserted', $link);\n\n            return true;\n        }\n\n        return false;\n    },\n    _setLinkData: function(nodes, data, type)\n    {\n        data.text = (data.text.trim() === '') ? this._truncateText(data.url) : data.text;\n\n        var isTextChanged = (!this.currentText || this.currentText !== data.text);\n\n        this.selection.save();\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var $link = $R.create('link.component', this.app, nodes[i]);\n            var linkData = {};\n\n            if (data.text && isTextChanged) linkData.text = data.text;\n            if (data.url) linkData.url = data.url;\n            if (data.title !== undefined) linkData.title = data.title;\n            if (data.target !== undefined) linkData.target = data.target;\n\n            $link.setData(linkData);\n\n            // callback\n            this.app.broadcast('link.' + type, $link);\n        }\n\n        setTimeout(this.selection.restore.bind(this.selection), 0);\n    },\n    _deleteContents: function(range)\n    {\n        var html = this.selection.getHtml();\n        var parsed = this.utils.parseHtml(html);\n        var first = parsed.nodes[0];\n\n        if (first && first.nodeType !== 3)\n        {\n            var tag = first.tagName.toLowerCase();\n            var container = document.createElement(tag);\n\n            this.insertion.insertNode(container, 'start');\n        }\n        else\n        {\n            range.deleteContents();\n        }\n    },\n    _getModalData: function()\n    {\n        var commands;\n        if (this._isLink())\n        {\n           commands = {\n                update: { title: this.lang.get('save') },\n                unlink: { title: this.lang.get('unlink'), type: 'danger' },\n                cancel: { title: this.lang.get('cancel') }\n            };\n        }\n        else\n        {\n            commands = {\n                insert: { title: this.lang.get('insert') },\n                cancel: { title: this.lang.get('cancel') }\n            };\n        }\n\n        var modalData = {\n            name: 'link',\n            title: (this._isLink()) ? this.lang.get('link-edit') : this.lang.get('link-insert'),\n            handle: (this._isLink()) ? 'update' : 'insert',\n            commands: commands\n        };\n\n\n        return modalData;\n    },\n    _isLink: function()\n    {\n        return this.currentLink;\n    },\n    _isCurrentTextChanged: function(data)\n    {\n        return (this.currentText && this.currentText !== data.text);\n    },\n    _buildCurrent: function()\n    {\n        var current = this._getCurrent();\n        var data = this.inspector.parse(current);\n        var $link;\n\n        if (data.isLink() || data.isFile())\n        {\n            this.currentLink = true;\n\n            $link = (data.isFile()) ? data.getFile() : data.getLink();\n            $link = $R.create('link.component', this.app, $link);\n        }\n        else\n        {\n            this.currentLink = false;\n\n            $link = $R.create('link.component', this.app);\n            var linkData = {\n                text: this.selection.getText()\n            };\n\n            $link.setData(linkData);\n        }\n\n        return $link;\n    },\n    _getCurrent: function()\n    {\n        return this.selection.getInlinesAllSelected({ tags: ['a'] })[0];\n    },\n    _getLinks: function()\n    {\n        var links = this.selection.getInlines({ all: true, tags: ['a'] });\n        var arr = [];\n        for (var i = 0; i < links.length; i++)\n        {\n            var data = this.inspector.parse(links[i]);\n            if (data.isLink() || data.isFile())\n            {\n                arr.push(links[i]);\n            }\n        }\n\n        return arr;\n    },\n    _resetCurrent: function()\n    {\n        this.isCurrentLink = false;\n        this.currentText = false;\n    },\n    _truncateText: function(url)\n    {\n        return (url && url.length > this.opts.linkSize) ? url.substring(0, this.opts.linkSize) + '...' : url;\n    },\n    _validateData: function($form, data)\n    {\n        return (data.url.trim() === '') ? $form.setError('url') : true;\n    },\n    _setFormFocus: function($form)\n    {\n        $form.getField('url').focus();\n    },\n    _setFormData: function($form, $modal)\n    {\n        var linkData = this.$link.getData();\n        var data = {\n            url: linkData.url,\n            text: linkData.text,\n            title: linkData.title,\n            target: (this.opts.linkTarget || linkData.target)\n        };\n\n        if (!this.opts.linkNewTab) $modal.find('.form-item-target').hide();\n        if (!this.opts.linkTitle) $modal.find('.form-item-title').hide();\n\n        $form.setData(data);\n        this.currentText = $form.getField('text').val();\n    }\n});\n$R.add('class', 'link.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n        this.opts = app.opts;\n\n        // local\n        this.reUrl = /^(?:(?:(?:https?|ftp):)?\\/\\/)?(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el :  this._init(el);\n    },\n\n    // public\n    setData: function(data)\n    {\n        for (var name in data)\n        {\n            this._set(name, data[name]);\n        }\n    },\n    getData: function()\n    {\n        var names = ['url', 'text', 'target', 'title'];\n        var data = {};\n\n        for (var i = 0; i < names.length; i++)\n        {\n            data[names[i]] = this._get(names[i]);\n        }\n\n        return data;\n    },\n\n    // private\n    _init: function(el)\n    {\n        var $el = $R.dom(el);\n        if (el === undefined)\n        {\n            this.parse('<a>');\n        }\n        else\n        {\n            this.parse($el);\n        }\n    },\n    _set: function(name, value)\n    {\n        this['_set_' + name](value);\n    },\n    _get: function(name)\n    {\n        return this['_get_' + name]();\n    },\n    _get_target: function()\n    {\n        return (this.attr('target')) ? this.attr('target') : false;\n    },\n    _get_url: function()\n    {\n        return this.attr('href');\n    },\n    _get_title: function()\n    {\n        return this.attr('title');\n    },\n    _get_text: function()\n    {\n        return this._getContext().text();\n    },\n    _getContext: function()\n    {\n        return this._findDeepestChild(this).element;\n    },\n    _set_target: function(target)\n    {\n        if (target === false) this.removeAttr('target');\n        else if (target)\n        {\n            this.attr('target', (target === true) ? '_blank' : target);\n        }\n    },\n    _set_text: function(text)\n    {\n        this._getContext().html(text);\n    },\n    _set_title: function(title)\n    {\n        if (!title || title === '') this.removeAttr('title');\n        else this.attr('title', title);\n    },\n    _set_url: function(url)\n    {\n        if (this.opts.linkValidation)\n        {\n            url = this._cleanUrl(url);\n\n            if (this._isMailto(url))\n            {\n                url = 'mailto:' + url.replace('mailto:', '');\n            }\n            else if (this._isUrl(url) && url.search(/^(ftp|https?)/i) === -1)\n            {\n                url = 'http://' + url.replace(/(ftp|https?):\\/\\//i, '');\n            }\n        }\n\n        this.attr('href', url);\n    },\n    _isMailto: function(url)\n    {\n        return (url.search('@') !== -1 && /(ftp|https?):\\/\\//i.test(url) === false);\n    },\n    _isUrl: function(url)\n    {\n        return this.reUrl.test(url);\n    },\n    _cleanUrl: function(url)\n    {\n        return url.trim().replace(/[^\\W\\w\\D\\d+&\\'@#/%?=~_|!:,.;\\(\\)]/gi, '');\n    },\n    _findDeepestChild: function(parent)\n    {\n        var result = {depth: 0, element: parent };\n\n        parent.children().each(function(node)\n        {\n            var child = $R.dom(node);\n\n            if (node.outerHTML !== parent.html())\n            {\n                return;\n            }\n            else\n            {\n                var childResult = this._findDeepestChild(child);\n                if (childResult.depth + 1 > result.depth)\n                {\n                    result = {\n                        depth: 1 + childResult.depth,\n                        element: childResult.element\n                    };\n                }\n            }\n        }.bind(this));\n\n        return result;\n    }\n});\n$R.add('module', 'modal', {\n    init: function(app)\n    {\n        this.app = app;\n        this.lang = app.lang;\n        this.$doc = app.$doc;\n        this.$win = app.$win;\n        this.$body = app.$body;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.animate = app.animate;\n        this.detector = app.detector;\n        this.selection = app.selection;\n\n        // local\n        this.$box = false;\n        this.$modal = false;\n        this.selectionMarkers = false;\n\n        // defaults\n        this.defaults = {\n            name: false,\n            url: false,\n            title: false,\n            width: '600px',\n            height: false,\n            handle: false,\n            commands: false\n        };\n    },\n    // public\n    build: function(data)\n    {\n        this._open(data);\n    },\n    close: function()\n    {\n        this._close();\n    },\n    stop: function()\n    {\n        if (this.$box)\n        {\n            this.$box.remove();\n            this.$box = false;\n            this.$modal = false;\n\n            this.$doc.off('.redactor.modal');\n            this.$win.off('.redactor.modal');\n        }\n\n        if (this.$overlay)\n        {\n            this.$overlay.remove();\n        }\n    },\n    resize: function()\n    {\n        this.$modal.setWidth(this.p.width);\n        this.$modal.updatePosition();\n    },\n\n    // private\n    _isOpened: function()\n    {\n        return (this.$modal && this.$modal.hasClass('open'));\n    },\n    _open: function(data)\n    {\n        this._buildDefaults(data);\n\n        if (this.p.url) this._openUrl();\n        else this._openTemplate();\n    },\n    _openUrl: function()\n    {\n        $R.ajax.post({\n            url: this.p.url,\n            success: this._doOpen.bind(this)\n        });\n    },\n    _openTemplate: function()\n    {\n        if (typeof $R.modals[this.p.name] !== 'undefined')\n        {\n            var template = this.lang.parse($R.modals[this.p.name]);\n            this._doOpen(template);\n        }\n    },\n    _doOpen: function(template)\n    {\n        this.stop();\n\n        if (this.selection.isCollapsed())\n        {\n            this.selection.save();\n            this.selectionMarkers = false;\n        }\n        else\n        {\n            this.selection.saveMarkers();\n            this.selectionMarkers = true;\n        }\n\n        if (!this.detector.isDesktop())\n        {\n            document.activeElement.blur();\n        }\n\n        this._createModal(template);\n\n        this._buildModalBox();\n        this._buildOverlay();\n        this._buildModal();\n        this._buildModalForm();\n        this._buildModalCommands();\n\n        this._broadcast('open');\n\n        this.$modal.updatePosition();\n        this._buildModalTabs();\n\n        this.animate.start(this.$box, 'fadeIn', this._opened.bind(this));\n        this.animate.start(this.$overlay, 'fadeIn');\n\n    },\n    _opened: function()\n    {\n        this.$modal.addClass('open');\n        this.$box.on('mousedown.redactor.modal', this._close.bind(this));\n        this.$doc.on('keyup.redactor.modal', this._handleEscape.bind(this));\n        this.$win.on('resize.redactor.modal', this.resize.bind(this));\n        this.$modal.getBody().find('input[type=text],input[type=url],input[type=email]').on('keydown.redactor.modal', this._handleEnter.bind(this));\n\n        // fix bootstrap modal focus\n        if (window.jQuery) jQuery(document).off('focusin.modal');\n\n        this._broadcast('opened');\n    },\n    _close: function(e)\n    {\n        if (!this.$box || !this._isOpened()) return;\n\n        if (e)\n        {\n            if (!this._needToClose(e.target))\n            {\n                return;\n            }\n\n            e.stopPropagation();\n            e.preventDefault();\n        }\n\n        if (this.selectionMarkers) this.selection.restoreMarkers();\n        else this.selection.restore();\n\n        this.selectionMarkers = false;\n\n        this._broadcast('close');\n\n        this.animate.start(this.$box, 'fadeOut', this._closed.bind(this));\n        this.animate.start(this.$overlay, 'fadeOut');\n    },\n    _closed: function()\n    {\n        this.$modal.removeClass('open');\n        this.$box.off('.redactor.modal');\n        this.$doc.off('.redactor.modal');\n        this.$win.off('.redactor.modal');\n\n        this._broadcast('closed');\n    },\n    _createModal: function(template)\n    {\n        this.$modal = $R.create('modal.element', this.app, template);\n    },\n    _broadcast: function(message)\n    {\n        this.app.broadcast('modal.' + message, this.$modal, this.$modalForm);\n        this.app.broadcast('modal.' + this.p.name + '.' + message, this.$modal, this.$modalForm);\n    },\n    _buildDefaults: function(data)\n    {\n         this.p = $R.extend({}, this.defaults, data);\n    },\n    _buildModalBox: function()\n    {\n        this.$box = $R.dom('<div>');\n        this.$box.attr('id', 'redactor-modal');\n        this.$box.addClass('redactor-animate-hide');\n        this.$box.html('');\n        this.$body.append(this.$box);\n    },\n    _buildOverlay: function()\n    {\n        this.$overlay = $R.dom('#redactor-overlay');\n        if (this.$overlay.length === 0)\n        {\n            this.$overlay = $R.dom('<div>');\n            this.$overlay.attr('id', 'redactor-overlay');\n            this.$overlay.addClass('redactor-animate-hide');\n            this.$body.prepend(this.$overlay);\n        }\n    },\n    _buildModal: function()\n    {\n        this.$box.append(this.$modal);\n\n        this.$modal.setTitle(this.p.title);\n        this.$modal.setHeight(this.p.height);\n        this.$modal.setWidth(this.p.width);\n    },\n    _buildModalCommands: function()\n    {\n        if (this.p.commands)\n        {\n            var commands = this.p.commands;\n            var $footer = this.$modal.getFooter();\n            for (var key in commands)\n            {\n                var $btn = $R.dom('<button>');\n\n                $btn.html(commands[key].title);\n                $btn.attr('data-command', key);\n\n                // cancel\n                if (key === 'cancel')\n                {\n                    $btn.attr('data-action', 'close');\n                    $btn.addClass('redactor-button-unstyled');\n                }\n\n                // danger\n                if (typeof commands[key].type !== 'undefined' && commands[key].type === 'danger')\n                {\n                    $btn.addClass('redactor-button-danger');\n                }\n\n                $btn.on('click', this._handleCommand.bind(this));\n\n                $footer.append($btn);\n            }\n        }\n    },\n    _buildModalTabs: function()\n    {\n        var $body = this.$modal.getBody();\n        var $tabs = $body.find('.redactor-modal-tab');\n        var $box = $body.find('.redactor-modal-tabs');\n\n\n        if ($tabs.length > 1)\n        {\n            $box = ($box.length === 0) ? $R.dom('<div>') : $box.html('');\n            $box.addClass('redactor-modal-tabs');\n\n            $tabs.each(function(node, i)\n            {\n                var $node = $R.dom(node);\n                var $item = $R.dom('<a>');\n                $item.attr('href', '#');\n                $item.attr('rel', i);\n                $item.text($node.attr('data-title'));\n                $item.on('click', this._showTab.bind(this));\n\n                if (i === 0)\n                {\n                    $item.addClass('active');\n                }\n\n                $box.append($item);\n\n            }.bind(this));\n\n            $body.prepend($box);\n        }\n\n        if ($tabs.length === 1) {\n            $tabs.show();\n        }\n    },\n    _buildModalForm: function()\n    {\n        this.$modalForm = $R.create('modal.form', this.app, this.$modal.getForm());\n    },\n    _showTab: function(e)\n    {\n        e.preventDefault();\n\n        var $el = $R.dom(e.target);\n        var index = $el.attr('rel');\n        var $body = this.$modal.getBody();\n        var $tabs = $body.find('.redactor-modal-tab');\n\n        $tabs.hide();\n        $tabs.eq(index).show();\n\n        $body.find('.redactor-modal-tabs a').removeClass('active');\n        $el.addClass('active');\n\n    },\n    _needToClose: function(el)\n    {\n        var $target = $R.dom(el);\n        if ($target.attr('data-action') === 'close' || this.$modal.isCloseNode(el) || $target.closest('.redactor-modal').length === 0)\n        {\n            return true;\n        }\n\n        return false;\n    },\n    _handleCommand: function(e)\n    {\n        var $btn = $R.dom(e.target).closest('button');\n        var command = $btn.attr('data-command');\n\n        if (command !== 'cancel') e.preventDefault();\n\n        this._broadcast(command);\n    },\n    _handleEnter: function(e)\n    {\n        if (e.which === 13)\n        {\n            if (this.p.handle)\n            {\n                e.preventDefault();\n                this._broadcast(this.p.handle);\n            }\n        }\n    },\n    _handleEscape: function(e)\n    {\n        if (e.which === 27) this._close();\n    }\n});\n$R.add('class', 'modal.element', {\n    mixins: ['dom'],\n    init: function(app, template)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.$win = app.$win;\n\n        // init\n        this._init(template);\n    },\n\n    // get\n    getForm: function()\n    {\n        return this.find('form');\n    },\n    getHeader: function()\n    {\n        return this.$modalHeader;\n    },\n    getBody: function()\n    {\n        return this.$modalBody;\n    },\n    getFooter: function()\n    {\n        return this.$modalFooter;\n    },\n\n    // set\n    setTitle: function(title)\n    {\n        if (title) this.$modalHeader.html(title);\n    },\n    setWidth: function(width)\n    {\n        width = (parseInt(width) >= this.$win.width()) ? '96%' : width;\n\n        this.css('max-width', width);\n    },\n    setHeight: function(height)\n    {\n        if (height !== false) this.$modalBody.css('height', height);\n    },\n\n    // update\n    updatePosition: function()\n    {\n        var width = this.width();\n        this.css({ 'left': '50%', 'margin-left': '-' + (width/2) + 'px' });\n\n        var windowHeight = this.$win.height();\n        var height = this.height();\n        var marginTop = (windowHeight/2 - height/2);\n\n        if (height < windowHeight && marginTop !== 0)\n        {\n            this.css('margin-top', marginTop + 'px');\n        }\n    },\n\n    // is\n    isCloseNode: function(el)\n    {\n        return (el === this.$modalClose.get());\n    },\n\n    // private\n    _init: function(template)\n    {\n        this._build();\n        this._buildClose();\n        this._buildHeader();\n        this._buildBody();\n        this._buildFooter();\n        this._buildTemplate(template);\n    },\n    _build: function()\n    {\n        this.parse('<div>');\n        this.addClass('redactor-modal');\n        this.attr('dir', this.opts.direction);\n    },\n    _buildClose: function()\n    {\n        this.$modalClose = $R.dom('<span>');\n        this.$modalClose.addClass('redactor-close');\n\n        this.append(this.$modalClose);\n    },\n    _buildHeader: function()\n    {\n        this.$modalHeader = $R.dom('<div>');\n        this.$modalHeader.addClass('redactor-modal-header');\n\n        this.append(this.$modalHeader);\n    },\n    _buildBody: function()\n    {\n        this.$modalBody = $R.dom('<div>');\n        this.$modalBody.addClass('redactor-modal-body');\n\n        this.append(this.$modalBody);\n    },\n    _buildFooter: function()\n    {\n        this.$modalFooter = $R.dom('<div>');\n        this.$modalFooter.addClass('redactor-modal-footer');\n\n        this.append(this.$modalFooter);\n    },\n    _buildTemplate: function(template)\n    {\n        this.$modalBody.html(template);\n    }\n});\n$R.add('class', 'modal.form', {\n    mixins: ['dom'],\n    init: function(app, element)\n    {\n        this.app = app;\n\n        // build\n        this.build(element);\n    },\n\n    // public\n    build: function(element)\n    {\n        this.parse(element);\n    },\n    getData: function()\n    {\n        var data = {};\n        this.find('[name]').each(function(node)\n        {\n            var $node = $R.dom(node);\n            data[$node.attr('name')] = $node.val();\n        });\n\n        return data;\n    },\n    setData: function(data)\n    {\n        this.find('[name]').each(function(node)\n        {\n            var $node = $R.dom(node);\n            var name = $node.attr('name');\n            if (data.hasOwnProperty(name))\n            {\n                if (node.type && node.type === 'checkbox') node.checked = data[name];\n                else $node.val(data[name]);\n            }\n        });\n    },\n    getField: function(name)\n    {\n        return this.find('[name=' + name + ']');\n    },\n    setError: function(name)\n    {\n        var $el = this.getField(name);\n\n        $el.addClass('error');\n        $el.one(this._getFieldEventName($el.get()), this._clearError);\n\n        return false;\n    },\n\n    // private\n    _clearError: function()\n    {\n        return $R.dom(this).removeClass('error');\n    },\n    _getFieldEventName: function(el)\n    {\n        return (el.tagName === 'SELECT' || el.type === 'checkbox' || el.type === 'radio') ? 'change' : 'keyup';\n    }\n});\n$R.add('module', 'block', {\n    init: function(app)\n    {\n        this.app = app;\n        this.block = app.block;\n    },\n    // public\n    format: function(args)\n    {\n        var nodes = this.block.format(args);\n\n        // callback\n        this.app.broadcast('format', 'block', nodes);\n    },\n    clearformat: function()\n    {\n        this.block.clearFormat();\n    },\n    clearstyle: function()\n    {\n        this.block.clearStyle();\n    },\n    clearclass: function()\n    {\n        this.block.clearClass();\n    },\n    clearattr: function()\n    {\n        this.block.clearAttr();\n    },\n    add: function(args, tags)\n    {\n        this.block.add(args, tags);\n    },\n    toggle: function(args, tags)\n    {\n        this.block.toggle(args, tags);\n    },\n    set: function(args, tags)\n    {\n        this.block.set(args, tags);\n    },\n    remove: function(args, tags)\n    {\n        this.block.remove(args, tags);\n    }\n});\n$R.add('module', 'inline', {\n    init: function(app)\n    {\n        this.app = app;\n        this.inline = app.inline;\n    },\n    format: function(args)\n    {\n        var nodes = this.inline.format(args);\n\n        // callback\n        this.app.broadcast('format', 'inline', nodes);\n    },\n    clearformat: function()\n    {\n        this.inline.clearFormat();\n    },\n    clearstyle: function()\n    {\n        this.inline.clearStyle();\n    },\n    clearclass: function()\n    {\n        this.inline.clearClass();\n    },\n    clearattr: function()\n    {\n        this.inline.clearAttr();\n    },\n    add: function(args, tags)\n    {\n        this.inline.add(args, tags);\n    },\n    toggle: function(args, tags)\n    {\n        this.inline.toggle(args, tags);\n    },\n    set: function(args, tags)\n    {\n        this.inline.set(args, tags);\n    },\n    remove: function(args, tags)\n    {\n        this.inline.remove(args, tags);\n    }\n});\n$R.add('module', 'autosave', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.source = app.source;\n    },\n    // messages\n    onsynced: function()\n    {\n        if (this.opts.autosave)\n        {\n            this._send();\n        }\n    },\n\n    // private\n    _send: function()\n    {\n        var name = (this.opts.autosaveName) ? this.opts.autosaveName : this.source.getName();\n\n        var data = {};\n        data[name] = this.source.getCode();\n        data = this.utils.extendData(data, this.opts.autosaveData);\n\n        $R.ajax.post({\n            url: this.opts.autosave,\n            data: data,\n            success: function(response)\n            {\n                this._complete(response, name, data);\n            }.bind(this)\n        });\n    },\n    _complete: function(response, name, data)\n    {\n        var callback = (response && response.error) ? 'autosaveError' : 'autosave';\n        this.app.broadcast(callback, name, data, response);\n    }\n});\n$R.add('module', 'input', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.keycodes = app.keycodes;\n        this.element = app.element;\n        this.selection = app.selection;\n        this.insertion = app.insertion;\n        this.inspector = app.inspector;\n        this.autoparser = app.autoparser;\n\n        // local\n        this.lastShiftKey = false;\n    },\n    // messages\n    onpaste: function(e, dataTransfer)\n    {\n        if (!this.opts.input) return;\n\n        return $R.create('input.paste', this.app, e, dataTransfer);\n    },\n    onkeydown: function(e)\n    {\n        if (!this.opts.input) return;\n\n        // key\n        var key = e.which;\n\n        // shortcuts\n        var shortcut = $R.create('input.shortcut', this.app, e);\n        if (shortcut.is()) return;\n\n        // select all\n        if ((e.ctrlKey || e.metaKey) && !e.altKey && key === 65)\n        {\n            e.preventDefault();\n            return this._selectAll();\n        }\n\n        // set empty if all selected\n        var keys = [this.keycodes.ENTER, this.keycodes.SPACE, this.keycodes.BACKSPACE, this.keycodes.DELETE];\n        var arrowKeys = [this.keycodes.UP, this.keycodes.DOWN, this.keycodes.LEFT, this.keycodes.RIGHT];\n        var isKeys = (keys.indexOf(key) !== -1);\n        var isArrowKeys = (arrowKeys.indexOf(key) !== -1);\n        var isXKey = ((e.ctrlKey || e.metaKey) && key === 88); // x\n        var isAlphaKeys = ((!e.ctrlKey && !e.metaKey) && ((key >= 48 && key <= 57) || (key >= 65 && key <= 90)));\n\n        if (this.selection.isAll() && isArrowKeys && (isXKey || (!e.ctrlKey && !e.metaKey && !e.altKey && !e.shiftKey)))\n        {\n            if (isXKey)\n            {\n                this.editor.disableNonEditables();\n                this.app.broadcast('empty');\n                return;\n            }\n\n            if (this._isArrowKey(key)) return true;\n            if (isKeys) e.preventDefault();\n\n            if (this.element.isType('inline'))\n            {\n                var $editor = this.editor.getElement();\n                $editor.html('');\n\n                this.editor.startFocus();\n            }\n            else\n            {\n                this.insertion.set(this.opts.emptyHtml);\n            }\n\n            if (isKeys) return;\n            else this.app.broadcast('empty');\n        }\n\n        // autoparse\n        if (this.opts.autoparse)\n        {\n            this.autoparser.format(e, key);\n        }\n\n        // a-z, 0-9 - non editable\n        if (isAlphaKeys)\n        {\n            // has non-editable\n            if (this.selection.hasNonEditable())\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n\n        // enter, shift/ctrl + enter\n        if (key === this.keycodes.ENTER)\n        {\n            return $R.create('input.enter', this.app, e, key);\n        }\n        // cmd + [\n        else if (e.metaKey && key === 219)\n        {\n            e.preventDefault();\n            this.app.api('module.list.outdent');\n            return;\n        }\n        // tab or cmd + ]\n        else if (key === this.keycodes.TAB || e.metaKey && key === 221)\n        {\n            return $R.create('input.tab', this.app, e, key);\n        }\n        // space\n        else if (key === this.keycodes.SPACE)\n        {\n            return $R.create('input.space', this.app, e, key, this.lastShiftKey);\n        }\n        // backspace or delete\n        else if (this._isDeleteKey(key))\n        {\n            return $R.create('input.delete', this.app, e, key);\n        }\n        else if (this._isArrowKey(key))\n        {\n            return $R.create('input.arrow', this.app, e, key);\n        }\n    },\n    onkeyup: function(e)\n    {\n        if (!this.opts.input) return;\n\n        // key\n        var key = e.which;\n\n        // shift key\n        this.lastShiftKey = e.shiftKey;\n\n        // hide context toolbar\n        this.app.broadcast('contextbar.close');\n\n        // shortcode\n        var shortcode = $R.create('input.shortcode', this.app, e, key);\n        if (shortcode.is()) return;\n\n        // is empty\n        if (key === this.keycodes.BACKSPACE)\n        {\n            var $editor = this.editor.getElement();\n            var html = this.utils.trimSpaces($editor.html());\n            html = html.replace(/<br\\s?\\/?>/g, '');\n            html = html.replace(/<div><\\/div>/, '');\n\n            if (html === '')\n            {\n                e.preventDefault();\n                this.editor.setEmpty();\n                this.editor.startFocus();\n                return;\n            }\n        }\n\n        if (this.editor.isEmpty())\n        {\n            this.app.broadcast('empty');\n        }\n    },\n\n    // public\n    start: function()\n    {\n        // extend shortcuts\n        if (this.opts.shortcutsAdd)\n        {\n            this.opts.shortcuts = $R.extend({}, true, this.opts.shortcuts, this.opts.shortcutsAdd);\n        }\n    },\n\n    // private\n    _selectAll: function()\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var el;\n\n        if (data.isComponentType('table'))\n        {\n            el = data.getTable();\n            this.selection.setAll(el);\n            return;\n        }\n        else if (data.isComponentType('code'))\n        {\n            el = data.getComponentCodeElement();\n            this.selection.setAll(el);\n            return;\n        }\n\n        this.selection.setAll();\n    },\n    _isArrowKey: function(key)\n    {\n        return ([this.keycodes.UP, this.keycodes.DOWN, this.keycodes.RIGHT, this.keycodes.LEFT].indexOf(key) !== -1);\n    },\n    _isDeleteKey: function(key)\n    {\n        return (key === this.keycodes.BACKSPACE || key === this.keycodes.DELETE);\n    }\n});\n$R.add('class', 'input.arrow', {\n    init: function(app, e, key)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.caret = app.caret;\n        this.offset = app.offset;\n        this.marker = app.marker;\n        this.editor = app.editor;\n        this.keycodes = app.keycodes;\n        this.component = app.component;\n        this.inspector = app.inspector;\n        this.selection = app.selection;\n\n        // local\n        this.key = key;\n\n        // init\n        this._init(e);\n    },\n    // private\n    _init: function(e)\n    {\n        if (this._isRightLeftKey() && this._isExitVariable(e)) return;\n\n        if (this._isRightDownKey())\n        {\n            if (this._isExitOnDownRight(e)) return;\n            if (this._selectComponent(e, 'End', 'next')) return;\n        }\n\n        if (this._isLeftUpKey())\n        {\n            if (this._isExitOnUpLeft(e)) return;\n            if (this._selectComponent(e, 'Start', 'prev')) return;\n        }\n\n        if (this.key === this.keycodes.LEFT) this.utils.trimInvisibleChars('left');\n        else if (this.key === this.keycodes.RIGHT) this.utils.trimInvisibleChars('right');\n\n    },\n    _isRightDownKey: function()\n    {\n        return ([this.keycodes.DOWN, this.keycodes.RIGHT].indexOf(this.key) !== -1);\n    },\n    _isLeftUpKey: function()\n    {\n        return ([this.keycodes.UP, this.keycodes.LEFT].indexOf(this.key) !== -1);\n    },\n    _isRightLeftKey: function()\n    {\n        return ([this.keycodes.RIGHT, this.keycodes.LEFT].indexOf(this.key) !== -1);\n    },\n    _isExitVariable: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var component = data.getComponent();\n        if (data.isComponentType('variable') && data.isComponentActive())\n        {\n            e.preventDefault();\n            var func = (this.key === this.keycodes.LEFT) ? 'setBefore' : 'setAfter';\n            this.caret[func](component);\n            return;\n        }\n    },\n    _isExitOnUpLeft: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var block = this.selection.getBlock(current);\n        var data = this.inspector.parse(current);\n        var prev = block.previousElementSibling;\n        var isStart = this.caret.isStart(block);\n\n        // prev table\n        if (isStart && prev && prev.tagName === 'TABLE')\n        {\n            e.preventDefault();\n            this.caret.setEnd(prev);\n            return true;\n        }\n        // figcaption\n        else if (data.isFigcaption())\n        {\n            block = data.getFigcaption();\n            isStart = this.caret.isStart(block);\n\n            var $component = $R.dom(block).closest('.redactor-component');\n            if (isStart && $component.length !== 0)\n            {\n                e.preventDefault();\n                this.caret.setEnd($component);\n                return true;\n            }\n        }\n        // exit table\n        else if (data.isTable() && isStart)\n        {\n            e.preventDefault();\n            this.caret.setEnd(block.previousElementSibling);\n            return true;\n        }\n        // component\n        else if (!data.isComponentEditable() && data.isComponent() && !data.isComponentType('variable'))\n        {\n            var component = data.getComponent();\n            if (!component.previousElementSibling)\n            {\n                e.preventDefault();\n                this.component.clearActive();\n\n                return this._exitPrevElement(e, data.getComponent());\n            }\n            else if (component.previousElementSibling)\n            {\n                e.preventDefault();\n                this.component.clearActive();\n                this.caret.setEnd(component.previousElementSibling);\n                return true;\n            }\n        }\n    },\n    _isExitOnDownRight: function(e)\n    {\n        var $editor = this.editor.getElement();\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var isEndEditor = this.caret.isEnd();\n        var block, isEnd;\n\n        // table\n        if (data.isTable())\n        {\n            if (isEnd || isEndEditor)\n            {\n                return this._exitNextElement(e, data.getComponent());\n            }\n        }\n        // figcaption\n        else if (data.isFigcaption())\n        {\n            block = data.getFigcaption();\n            isEnd = this.caret.isEnd(block);\n\n            if (isEnd || isEndEditor)\n            {\n                return this._exitNextElement(e, data.getComponent());\n            }\n        }\n        // figure/code\n        else if (data.isComponentType('code'))\n        {\n            var component = data.getComponent();\n            var pre = $R.dom(data.getComponentCodeElement()).closest('pre');\n\n            isEnd = this.caret.isEnd(block);\n\n            var isNext = (pre && pre.get().nextElementSibling);\n            if (isEnd && !isNext)\n            {\n                return this._exitNextElement(e, component);\n            }\n        }\n        // pre & blockquote & dl\n        else if (data.isPre() || data.isBlockquote() || data.isDl())\n        {\n            if (isEndEditor)\n            {\n                if (data.isPre()) return this._exitNextElement(e, data.getPre());\n                else if (data.isBlockquote()) return this._exitNextElement(e, data.getBlockquote());\n                else if (data.isDl()) return this._exitNextElement(e, data.getDl());\n            }\n        }\n        // li\n        else if (data.isList())\n        {\n            var $list = $R.dom(current).parents('ul, ol', $editor).last();\n            isEnd = this.caret.isEnd($list);\n\n            if (isEnd || isEndEditor)\n            {\n                return this._exitNextElement(e, $list.get());\n            }\n        }\n        // component\n        else if (data.isComponent() && !data.isComponentType('variable') && data.getTag() !== 'span')\n        {\n            this.component.clearActive();\n            return this._exitNextElement(e, data.getComponent());\n        }\n    },\n    _exitPrevElement: function(e, node)\n    {\n        e.preventDefault();\n\n        if (node.previousElementSibling) this.caret.setEnd(node.previousElementSibling);\n        else this.utils.createMarkupBefore(node);\n\n        return true;\n    },\n    _exitNextElement: function(e, node)\n    {\n        e.preventDefault();\n\n        if (node.nextElementSibling) this.caret.setStart(node.nextElementSibling);\n        else this.utils.createMarkup(node);\n\n        return true;\n    },\n    _selectComponent: function(e, caret, type)\n    {\n        var current = this.selection.getCurrent();\n        var block = this.selection.getBlock(current);\n        var sibling = this.utils.findSiblings(current, type);\n        var siblingBlock = this.utils.findSiblings(block, type);\n\n        if (sibling && this.caret['is' + caret](current))\n        {\n            this._selectComponentItem(e, sibling, caret);\n        }\n        else if (siblingBlock && this.caret['is' + caret](block))\n        {\n            this._selectComponentItem(e, siblingBlock, caret);\n        }\n    },\n    _selectComponentItem: function(e, item, caret)\n    {\n        if (this.component.isNonEditable(item))\n        {\n            e.preventDefault();\n            this.caret['set' + caret](item);\n            return true;\n        }\n    }\n});\n$R.add('class', 'input.delete', {\n    init: function(app, e, key)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.caret = app.caret;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.marker = app.marker;\n        this.keycodes = app.keycodes;\n        this.component = app.component;\n        this.inspector = app.inspector;\n        this.selection = app.selection;\n        this.insertion = app.insertion;\n\n        // local\n        this.key = key;\n\n        // init\n        this._init(e);\n    },\n    // private\n    _init: function(e)\n    {\n        if (this._removeActiveComponent(e)) return;\n        if (this._removeAllSelectedTable(e)) return;\n\n        // is empty\n        if (this.key === this.keycodes.BACKSPACE)\n        {\n            var $editor = this.editor.getElement();\n            var html = this.utils.trimSpaces($editor.html());\n\n            if (html === this.opts.emptyHtml)\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n\n        // variable or non editable prev/next or selection\n        if (this._detectVariableOrNonEditable() || this.selection.hasNonEditable())\n        {\n            e.preventDefault();\n            return;\n        }\n\n        // all selected\n        if (this.selection.isAll())\n        {\n            e.preventDefault();\n            this.insertion.set(this.opts.emptyHtml);\n            return;\n        }\n\n        // collapsed\n        if (this.selection.isCollapsed())\n        {\n            // next / prev\n            if (this.key === this.keycodes.BACKSPACE) this._traverseBackspace(e);\n            else if (this.key === this.keycodes.DELETE) this._traverseDelete(e);\n        }\n\n        if (this.key === this.keycodes.BACKSPACE) this.utils.trimInvisibleChars('left');\n\n        this._removeUnwantedStyles();\n        this._removeEmptySpans();\n        this._removeSpanTagsInHeadings();\n        this._removeInlineTagsInPre();\n    },\n    _detectVariableOrNonEditable: function()\n    {\n        var block = this.selection.getBlock();\n        var isBlockStart = this.caret.isStart(block);\n        var isBlockEnd = this.caret.isEnd(block);\n        var el;\n\n        // backspace\n        if (this.key === this.keycodes.BACKSPACE && isBlockStart)\n        {\n            el = block.previousSibling;\n            if (this._isNonEditable(el)) return true;\n        }\n        // delete\n        else if (this.key === this.keycodes.DELETE && isBlockEnd)\n        {\n            el = block.nextSibling;\n            if (this._isNonEditable(el)) return true;\n        }\n\n        var current = this.selection.getCurrent();\n        var isCurrentStart = this.caret.isStart(current);\n        var isCurrentEnd = this.caret.isEnd(current);\n        var isCurrentStartSpace = (this.selection.getTextBeforeCaret().trim() === '');\n        var isCurrentEndSpace = (this.selection.getTextAfterCaret().trim() === '');\n\n        // backspace\n        if (this.key === this.keycodes.BACKSPACE && isCurrentStart && !isCurrentStartSpace)\n        {\n            el = current.previousSibling;\n            if (this._isVariable(el))\n            {\n                this.caret.setEnd(el);\n                return true;\n            }\n            else if (this._isNonEditable(el)) return true;\n        }\n        // delete\n        else if (this.key === this.keycodes.DELETE && isCurrentEnd && !isCurrentEndSpace)\n        {\n            el = current.nextSibling;\n            if (this._isVariable(el))\n            {\n                this.caret.setStart(el);\n                return true;\n            }\n            else if (this._isNonEditable(el)) return true;\n        }\n    },\n    _isVariable: function(node)\n    {\n        return ($R.dom(node).closest('[data-redactor-type=\"variable\"]').length !== 0);\n    },\n    _isNonEditable: function(node)\n    {\n        return ($R.dom(node).closest('.non-editable').length !== 0);\n    },\n    _getBlock: function()\n    {\n        var $editor = this.editor.getElement();\n        var block = this.selection.getBlock();\n        var data = this.inspector.parse(block);\n\n        block = (data.isList()) ? $R.dom(block).parents('ul, ol', $editor).last().get() : block;\n        block = (data.isDl()) ? data.getDl() : block;\n        block = (data.isTable()) ? data.getTable() : block;\n\n        return block;\n    },\n    _traverseDelete: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var block, isEnd, $next;\n\n        // figcaption\n        if (data.isFigcaption())\n        {\n            block = data.getFigcaption();\n            isEnd = this.caret.isEnd(block);\n\n            if (isEnd)\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n        // figure/code\n        else if (data.isComponentType('code'))\n        {\n            block = data.getComponent();\n            isEnd = this.caret.isEnd(block);\n\n            if (isEnd)\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n\n        // next\n        block = this._getBlock();\n        var next = this.utils.findSiblings(block, 'next');\n        if (!next) return;\n\n        isEnd = this.caret.isEnd(block);\n        var dataNext = this.inspector.parse(next);\n        var isNextBlock = (next.tagName === 'P' || next.tagName === 'DIV');\n\n        // figure/code or table\n        if (isEnd && dataNext.isComponentEditable())\n        {\n            e.preventDefault();\n            this.component.remove(next, false);\n            return;\n        }\n        // component\n        else if (isEnd && dataNext.isComponent())\n        {\n            e.preventDefault();\n\n            // select component\n            this.caret.setStart(next);\n\n            // remove current if empty\n            if (this.utils.isEmptyHtml(block.innerHTML))\n            {\n                $R.dom(block).remove();\n            }\n\n            return;\n        }\n        // combine list\n        else if (isEnd && dataNext.isList())\n        {\n            var $currentList = $R.dom(block);\n            $next = $R.dom(next);\n\n            // current list\n            if (data.isList())\n            {\n                e.preventDefault();\n\n                $currentList.append($next);\n                $next.unwrap();\n\n                return;\n            }\n            else\n            {\n                var $first = $next.children('li').first();\n                var $lists = $first.find('ul, ol');\n\n                if ($lists.length !== 0)\n                {\n                    e.preventDefault();\n\n                    $next.prepend($lists);\n                    $lists.unwrap();\n\n                    $currentList.append($first);\n                    $first.unwrap();\n\n                    return;\n                }\n            }\n        }\n        // block\n        else if (isEnd && !data.isList() && !data.isTable() && isNextBlock && !this.utils.isEmptyHtml(block.innerHTML))\n        {\n            e.preventDefault();\n\n            var $current = $R.dom(block);\n            $next = $R.dom(next);\n\n            $current.append($next);\n            $next.unwrap();\n\n            return;\n        }\n    },\n    _traverseBackspace: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var block, isStart, $prev, $currentList;\n\n        // figcaption\n        if (data.isFigcaption())\n        {\n            block = data.getFigcaption();\n            isStart = this.caret.isStart(block);\n\n            if (isStart)\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n        // figure/code\n        else if (data.isComponentType('code'))\n        {\n            block = data.getComponent();\n            isStart = this.caret.isStart(block);\n\n            if (isStart && block.previousElementSibling)\n            {\n                e.preventDefault();\n                this.caret.setEnd(block.previousElementSibling);\n                return true;\n            }\n        }\n\n        // prev\n        block = this._getBlock();\n        var prev = this.utils.findSiblings(block, 'prev');\n\n        if (!prev)\n        {\n            setTimeout(this._replaceBlock.bind(this), 1);\n            return;\n        }\n\n        isStart = this.caret.isStart(block);\n        var dataPrev = this.inspector.parse(prev);\n        var isPrevBlock = (prev.tagName === 'P' || prev.tagName === 'DIV');\n\n        // figure/code or table\n        if (isStart && dataPrev.isComponentEditable())\n        {\n            e.preventDefault();\n            this.component.remove(prev, false);\n            return;\n        }\n        // component\n        else if (isStart && dataPrev.isComponent())\n        {\n            e.preventDefault();\n\n            // select component\n            this.caret.setStart(prev);\n\n            // remove current if empty\n            if (this.utils.isEmptyHtml(block.innerHTML))\n            {\n                $R.dom(block).remove();\n            }\n\n            return;\n        }\n        // lists\n        else if (isStart && data.isList())\n        {\n            e.preventDefault();\n\n            $currentList = $R.dom(block);\n            $prev = $R.dom(prev);\n\n            if (dataPrev.isList())\n            {\n                $currentList.children('li').first().prepend(this.marker.build('start'));\n                $prev.append($currentList);\n                $currentList.unwrap();\n\n                this.selection.restoreMarkers();\n            }\n            else\n            {\n                var $first = $currentList.children('li').first();\n                var first = $first.get();\n                var $lists = $first.find('ul, ol');\n\n                var $newnode = this.utils.replaceToTag(first, this.opts.markup);\n                if (this.opts.breakline) $newnode.attr('data-redactor-tag', 'br');\n                $currentList.before($newnode);\n                this.caret.setStart($newnode);\n\n                if ($lists.length !== 0)\n                {\n                    $currentList.prepend($lists);\n                    $lists.unwrap();\n                }\n            }\n\n            return;\n        }\n        // block\n        else if (isStart && isPrevBlock)\n        {\n            e.preventDefault();\n\n            if (this.utils.isEmpty(prev)) {\n                $prev = $R.dom(prev);\n                $prev.remove();\n                return;\n            }\n\n            var textNode = this.utils.createInvisibleChar();\n            var $current = $R.dom(block);\n            $prev = $R.dom(prev);\n\n            this.caret.setEnd($prev);\n\n            $current.prepend(textNode);\n            $prev.append($current.contents());\n            $current.remove();\n\n            return;\n        }\n    },\n    _replaceBlock: function()\n    {\n        var block = this.selection.getBlock();\n        var $block = $R.dom(block);\n\n        if (this.opts.markup === 'p' && block && this._isNeedToReplaceBlock(block))\n        {\n            var markup = document.createElement(this.opts.markup);\n\n            $block.replaceWith(markup);\n            this.caret.setStart(markup);\n        }\n\n        if (this.opts.breakline && block && block.tagName === 'DIV')\n        {\n            $block.attr('data-redactor-tag', 'br');\n        }\n    },\n    _isNeedToReplaceBlock: function(block)\n    {\n        return (block.tagName === 'DIV' && this.utils.isEmptyHtml(block.innerHTML));\n    },\n    _removeActiveComponent: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var component = data.getComponent();\n        if (data.isComponent() && this.component.isActive(component))\n        {\n            e.preventDefault();\n            this.component.remove(component);\n            return true;\n        }\n    },\n    _removeAllSelectedTable: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var table = data.getTable();\n        if (table && this.selection.isAll(table))\n        {\n            e.preventDefault();\n            this.component.remove(table);\n            return true;\n        }\n    },\n    _removeUnwantedStyles: function()\n    {\n        var $editor = this.editor.getElement();\n\n        setTimeout(function()\n        {\n            var $tags = $editor.find('*[style]');\n            $tags.not('img, figure, iframe, [data-redactor-style-cache], [data-redactor-span]').removeAttr('style');\n\n        }, 0);\n    },\n    _removeEmptySpans: function()\n    {\n        var $editor = this.editor.getElement();\n\n        setTimeout(function()\n        {\n            $editor.find('span').each(function(node)\n            {\n                if (node.attributes.length === 0)\n                {\n                    $R.dom(node).replaceWith(node.childNodes);\n                }\n            });\n\n        }, 0);\n    },\n    _removeSpanTagsInHeadings: function()\n    {\n        var $editor = this.editor.getElement();\n\n        setTimeout(function()\n        {\n            $editor.find('h1, h2, h3, h4, h5, h6').each(function(node)\n            {\n                var $node = $R.dom(node);\n                if ($node.closest('figure').length === 0)\n                {\n                    $node.find('span').not('.redactor-component, .non-editable, .redactor-selection-marker, [data-redactor-style-cache], [data-redactor-span]').unwrap();\n                }\n            });\n\n        }, 1);\n    },\n    _removeInlineTagsInPre: function()\n    {\n        var $editor = this.editor.getElement();\n        var tags = this.opts.inlineTags;\n\n        setTimeout(function()\n        {\n            $editor.find('pre').each(function(node)\n            {\n                var $node = $R.dom(node);\n                if ($node.closest('figure').length === 0)\n                {\n                    $node.find(tags.join(',')).not('code, .redactor-selection-marker').unwrap();\n                }\n            });\n\n        }, 1);\n    }\n});\n$R.add('class', 'input.enter', {\n    init: function(app, e)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.caret = app.caret;\n        this.editor = app.editor;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n        this.inspector = app.inspector;\n\n        // init\n        this._init(e);\n    },\n    // private\n    _init: function(e)\n    {\n        // turn off\n        if (!this.opts.enterKey) return this._disable(e);\n\n        // callback\n        var stop = this.app.broadcast('enter', e);\n        if (stop === false) return e.preventDefault();\n\n        // has non-editable\n        if (this.selection.hasNonEditable())\n        {\n            e.preventDefault();\n            return;\n        }\n\n        // shift enter\n        if (e.ctrlKey || e.shiftKey) return this._insertBreak(e);\n\n        // enter & exit\n        if (this._isExit(e)) return;\n\n        // traverse\n        this._traverse(e);\n    },\n    _disable: function(e)\n    {\n        e.preventDefault();\n        var range = this.selection.getRange();\n        if (range && !range.collapsed) range.deleteContents();\n    },\n    _insertBreak: function(e)\n    {\n        e.preventDefault();\n\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n\n        if ((data.isComponent() && !data.isComponentEditable()) || data.isCode()) return;\n        else if (data.isPre()) this.insertion.insertNewline();\n        else this.insertion.insertBreakLine();\n    },\n    _isExit: function(e)\n    {\n        var $editor = this.editor.getElement();\n        var block = this.selection.getBlock();\n        var data = this.inspector.parse(block);\n        var isEnd = this.caret.isEnd(block);\n        var current = this.selection.getCurrent();\n        var prev = current.previousSibling;\n\n        // blockquote\n        if (data.isBlockquote())\n        {\n            var isParagraphExit = (isEnd && this._isExitableBlock(block, 'P'));\n            var isBreaklineExit = (isEnd && this._isExitableDblBreak(prev));\n\n            if (isParagraphExit || isBreaklineExit)\n            {\n                return this._exitFromElement(e, ((isBreaklineExit) ? prev : block), data.getBlockquote());\n            }\n        }\n        // pre\n        else if (!data.isComponentType('code') && data.isPre())\n        {\n            if (isEnd)\n            {\n                var html = block.innerHTML;\n                html = this.utils.removeInvisibleChars(html);\n                if (html.match(/(\\n\\n\\n)$/) !== null)\n                {\n                    $R.dom(prev.previousSibling.previousSibling).remove();\n                    return this._exitFromElement(e, prev, block);\n                }\n            }\n        }\n        // dl\n        else if (data.isDl())\n        {\n            if (isEnd && this._isExitableBlock(block, 'DT'))\n            {\n                return this._exitFromElement(e, block, data.getDl());\n            }\n        }\n        // li\n        else if (data.isList())\n        {\n            var list = $R.dom(current).parents('ul, ol', $editor).last();\n\n            isEnd = this.caret.isEnd(list);\n            if (isEnd && this._isExitableBlock(block, 'LI'))\n            {\n                return this._exitFromElement(e, block, list);\n            }\n        }\n        else if (data.isComponent() && data.isComponentActive() && !data.isFigcaption() && !data.isComponentEditable())\n        {\n            return this._exitFromElement(e, false, data.getComponent());\n        }\n    },\n    _isExitableDblBreak: function(prev)\n    {\n        var next = (prev) ? prev.nextSibling : false;\n        if (next)\n        {\n            var text = this.utils.removeInvisibleChars(next.textContent);\n\n            return (next.nodeType === 3 && text.trim() === '');\n        }\n    },\n    _isExitableBlock: function(block, tag)\n    {\n        return (block && block.tagName === tag && this.utils.isEmptyHtml(block.innerHTML));\n    },\n    _exitFromElement: function(e, prev, el)\n    {\n        e.preventDefault();\n        if (prev) $R.dom(prev).remove();\n        this.utils.createMarkup(el);\n\n        return true;\n    },\n    _exitNextElement: function(e, node)\n    {\n        e.preventDefault();\n\n        if (node.nextSibling) this.caret.setStart(node.nextSibling);\n        else this.utils.createMarkup(node);\n\n        return true;\n    },\n    _traverse: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var isText = this.selection.isText();\n        var block = this.selection.getBlock();\n        var data = this.inspector.parse(current);\n        var blockTag = (block) ? block.tagName.toLowerCase() : false;\n        var $variable = $R.dom(current).closest('[data-redactor-type=variable]');\n        // variable parent\n        if ($variable.length !== 0) {\n            this.caret.setAfter($variable);\n        }\n\n        // pre\n        if (data.isPre())\n        {\n            e.preventDefault();\n            return this.insertion.insertNewline();\n        }\n        // blockquote\n        else if (data.isBlockquote())\n        {\n            block = this.selection.getBlock(current);\n            if (block && block.tagName === 'BLOCKQUOTE')\n            {\n                e.preventDefault();\n                return this.insertion.insertBreakLine();\n            }\n        }\n        // figcaption\n        else if (data.isFigcaption())\n        {\n            block = data.getFigcaption();\n            var isEnd = this.caret.isEnd(block);\n            var isEndEditor = this.caret.isEnd();\n            if (isEnd || isEndEditor)\n            {\n                return this._exitNextElement(e, data.getComponent());\n            }\n            else\n            {\n                e.preventDefault();\n                return;\n            }\n        }\n        // dl\n        else if (data.isDl())\n        {\n            e.preventDefault();\n            return this._traverseDl(current);\n        }\n        // breakline\n        else if (this.opts.breakline && blockTag === 'div') {\n            setTimeout(this._replaceBlock.bind(this), 1);\n            return;\n        }\n        // text\n        else if (isText)\n        {\n            e.preventDefault();\n            return this.insertion.insertBreakLine();\n        }\n        // div / p\n        else\n        {\n            setTimeout(this._replaceBlock.bind(this), 1);\n            return;\n        }\n    },\n    _traverseDl: function(current)\n    {\n        var block = this.selection.getBlock(current);\n        var data = this.inspector.parse(block);\n        var tag = data.getTag();\n        var $el = $R.dom(block);\n        var next = $el.get().nextSibling || false;\n        var $next = $R.dom(next);\n        var nextDd = (next && $next.is('dd'));\n        var nextDt = (next && $next.is('dt'));\n        var isEnd = this.caret.isEnd(block);\n\n        if (tag === 'dt' && !nextDd && isEnd)\n        {\n            var dd = document.createElement('dd');\n            $el.after(dd);\n\n            this.caret.setStart(dd);\n            return;\n        }\n        else if (tag === 'dd' && !nextDt && isEnd)\n        {\n            var dt = document.createElement('dt');\n            $el.after(dt);\n\n            this.caret.setStart(dt);\n            return;\n        }\n\n        return this.insertion.insertBreakLine();\n    },\n    _replaceBlock: function()\n    {\n        var block = this.selection.getBlock();\n        var $block = $R.dom(block);\n\n        if (this.opts.markup === 'p' && block && this._isNeedToReplaceBlock(block))\n        {\n            var markup = document.createElement(this.opts.markup);\n\n            $block.replaceWith(markup);\n            this.caret.setStart(markup);\n        }\n        else\n        {\n            if (block)\n            {\n                if (this.utils.isEmptyHtml(block.innerHTML))\n                {\n                    this._clearBlock($block, block);\n                }\n                else\n                {\n                    var first = this.utils.getFirstNode(block);\n                    if (first && first.tagName === 'BR')\n                    {\n                        $R.dom(first).remove();\n                        this.caret.setStart(block);\n                    }\n                }\n            }\n        }\n\n        if (block && this._isNeedToCleanBlockStyle(block) && this.opts.cleanOnEnter)\n        {\n            $block.removeAttr('class style');\n        }\n\n        if (this.opts.breakline && block && block.tagName === 'DIV')\n        {\n            $block.attr('data-redactor-tag', 'br');\n        }\n    },\n    _clearBlock: function($block, block)\n    {\n        if (this.opts.cleanInlineOnEnter || block.innerHTML === '<br>')\n        {\n            $block.html('');\n        }\n\n        this.caret.setStart(block);\n    },\n    _isNeedToReplaceBlock: function(block)\n    {\n        return (block.tagName === 'DIV' && this.utils.isEmptyHtml(block.innerHTML));\n    },\n    _isNeedToCleanBlockStyle: function(block)\n    {\n        return (block.tagName === 'P' && this.utils.isEmptyHtml(block.innerHTML));\n    }\n});\n$R.add('class', 'input.paste', {\n    init: function(app, e, dataTransfer, html, point)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.editor = app.editor;\n        this.cleaner = app.cleaner;\n        this.container = app.container;\n        this.inspector = app.inspector;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n        this.autoparser = app.autoparser;\n\n        // local\n        this.pasteHtml = html;\n        this.pointInserted = point;\n        this.dataTransfer = dataTransfer;\n\n        // init\n        this._init(e);\n    },\n    // private\n    _init: function(e)\n    {\n        var clipboard = this.dataTransfer || e.clipboardData;\n        var current = this.selection.getCurrent();\n        var dataCurrent = this.inspector.parse(current);\n\n        this.dropPasted = this.dataTransfer;\n        this.isRawCode = (dataCurrent.isPre() || dataCurrent.isCode());\n\n        this.editor.enablePasting();\n        this.editor.saveScroll();\n\n        if (!this.dropPasted)\n        {\n            this.selection.saveMarkers();\n        }\n\n        if (this.isRawCode || !clipboard)\n        {\n            var text;\n            if (!this.isRawCode && !clipboard && window.clipboardData)\n            {\n                text = window.clipboardData.getData(\"text\");\n            }\n            else\n            {\n                text = clipboard.getData(\"text/plain\");\n            }\n\n            e.preventDefault();\n            this._insert(e, text);\n            return;\n        }\n        else if (this.pasteHtml)\n        {\n            e.preventDefault();\n            this._insert(e, this.pasteHtml);\n        }\n        else\n        {\n            // html / text\n            var url = clipboard.getData('URL');\n            var html = (this._isPlainText(clipboard)) ? clipboard.getData(\"text/plain\") : clipboard.getData(\"text/html\");\n\n            // safari anchor links\n            html = (!url || url === '') ? html : url;\n\n            // file\n            if (clipboard.files !== null && clipboard.files.length > 0 && html === '')\n            {\n                var files = [];\n                for (var i = 0; i < clipboard.files.length; i++)\n                {\n                    var file = clipboard.files[i] || clipboard.items[i].getAsFile();\n                    if (file) files.push(file);\n                }\n\n                if (files.length > 0)\n                {\n                    e.preventDefault();\n                    this._insertFiles(e, files);\n                    return;\n                }\n            }\n\n\n            e.preventDefault();\n            this._insert(e, html);\n        }\n    },\n    _isPlainText: function(clipboard)\n    {\n        var text = clipboard.getData(\"text/plain\");\n        var html = clipboard.getData(\"text/html\");\n\n        if (text && html)\n        {\n            var element = document.createElement(\"div\");\n            element.innerHTML = html;\n\n            if (element.textContent === text)\n            {\n                return !element.querySelector(\":not(meta)\");\n            }\n        }\n        else\n        {\n            return (text !== null);\n        }\n    },\n    _restoreSelection: function()\n    {\n        this.editor.restoreScroll();\n        this.editor.disablePasting();\n        if (!this.dropPasted)\n        {\n            this.selection.restoreMarkers();\n        }\n    },\n    _insert: function(e, html)\n    {\n        // pasteBefore callback\n        var returned = this.app.broadcast('pasteBefore', html);\n        html = (returned === undefined) ? html : returned;\n\n        // clean\n        html = html.trim();\n        html = (this.isRawCode) ? html : this.cleaner.paste(html);\n        html = html.trim();\n        html = (this.isRawCode) ? this.cleaner.encodePhpCode(html) : html;\n\n        // paste callback\n        returned = this.app.broadcast('pasting', html);\n        html = (returned === undefined) ? html : returned;\n\n        this._restoreSelection();\n\n        // stop input\n        if (!this.opts.input) return;\n\n        var nodes = [];\n        if (this.isRawCode) {\n            var textNode = document.createTextNode(html)\n            nodes = this.insertion.insertNode(textNode, 'after');\n\n            this.app.broadcast('pasted', nodes);\n        }\n        else {\n\n            // autoparse\n            if (this.opts.autoparse && this.opts.autoparsePaste)\n            {\n                html = this.autoparser.parse(html);\n            }\n\n            nodes = (this.dropPasted) ? this.insertion.insertToPoint(e, html, this.pointInserted) : this.insertion.insertHtml(html);\n\n            // pasted callback\n            this.app.broadcast('pasted', nodes);\n            this.app.broadcast('autoparseobserve');\n        }\n    },\n    _insertFiles: function(e, files)\n    {\n        this._restoreSelection();\n\n        // drop or clipboard\n        var isImage = (this.opts.imageTypes.indexOf(files[0].type) !== -1);\n        var isClipboard = (typeof this.dropPasted === 'undefined');\n\n        if (isImage) this.app.broadcast('dropimage', e, files, isClipboard);\n        else this.app.broadcast('dropfile', e, files, isClipboard);\n    }\n});\n$R.add('class', 'input.shortcode', {\n    init: function(app, e, key)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.marker = app.marker;\n        this.keycodes = app.keycodes;\n        this.selection = app.selection;\n\n        // local\n        this.worked = false;\n\n        // init\n        if (key === this.keycodes.SPACE) this._init();\n    },\n    // public\n    is: function()\n    {\n        return this.worked;\n    },\n    // private\n    _init: function()\n    {\n        var current = this.selection.getCurrent();\n        if (current && current.nodeType === 3)\n        {\n            var text = this.utils.removeInvisibleChars(current.textContent);\n            var shortcodes = this.opts.shortcodes;\n            for (var name in shortcodes)\n            {\n                var re = new RegExp('^' + this.utils.escapeRegExp(name));\n                var match = text.match(re);\n                if (match !== null)\n                {\n                    if (typeof shortcodes[name].format !== 'undefined')\n                    {\n                        return this._format(shortcodes[name].format, current, re);\n                    }\n                }\n            }\n        }\n    },\n    _format: function(tag, current, re)\n    {\n        var marker = this.marker.insert('start');\n        current = marker.previousSibling;\n\n        var text = current.textContent;\n        text = this.utils.trimSpaces(text);\n        text = text.replace(re, '');\n        current.textContent = text;\n\n        var api = (tag === 'ul' || tag === 'ol') ? 'module.list.toggle' : 'module.block.format';\n\n        this.app.api(api, tag);\n        this.selection.restoreMarkers();\n\n        this.worked = true;\n    }\n});\n$R.add('class', 'input.shortcut', {\n    init: function(app, e)\n    {\n        this.app = app;\n        this.opts = app.opts;\n\n        // local\n        this.worked = false;\n\n        // based on https://github.com/jeresig/jquery.hotkeys\n        this.hotkeys = {\n            8: \"backspace\", 9: \"tab\", 10: \"return\", 13: \"return\", 16: \"shift\", 17: \"ctrl\", 18: \"alt\", 19: \"pause\",\n            20: \"capslock\", 27: \"esc\", 32: \"space\", 33: \"pageup\", 34: \"pagedown\", 35: \"end\", 36: \"home\",\n            37: \"left\", 38: \"up\", 39: \"right\", 40: \"down\", 45: \"insert\", 46: \"del\", 59: \";\", 61: \"=\",\n            96: \"0\", 97: \"1\", 98: \"2\", 99: \"3\", 100: \"4\", 101: \"5\", 102: \"6\", 103: \"7\",\n            104: \"8\", 105: \"9\", 106: \"*\", 107: \"+\", 109: \"-\", 110: \".\", 111 : \"/\",\n            112: \"f1\", 113: \"f2\", 114: \"f3\", 115: \"f4\", 116: \"f5\", 117: \"f6\", 118: \"f7\", 119: \"f8\",\n            120: \"f9\", 121: \"f10\", 122: \"f11\", 123: \"f12\", 144: \"numlock\", 145: \"scroll\", 173: \"-\", 186: \";\", 187: \"=\",\n            188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\", 221: \"]\", 222: \"'\"\n        };\n\n        this.hotkeysShiftNums = {\n            \"`\": \"~\", \"1\": \"!\", \"2\": \"@\", \"3\": \"#\", \"4\": \"$\", \"5\": \"%\", \"6\": \"^\", \"7\": \"&\",\n            \"8\": \"*\", \"9\": \"(\", \"0\": \")\", \"-\": \"_\", \"=\": \"+\", \";\": \": \", \"'\": \"\\\"\", \",\": \"<\",\n            \".\": \">\",  \"/\": \"?\",  \"\\\\\": \"|\"\n        };\n\n        // init\n        this._init(e);\n    },\n    // public\n    is: function()\n    {\n        return this.worked;\n    },\n    // private\n    _init: function(e)\n    {\n        // disable browser's hot keys for bold and italic if shortcuts off\n        if (this.opts.shortcuts === false)\n        {\n            if ((e.ctrlKey || e.metaKey) && (e.which === 66 || e.which === 73)) e.preventDefault();\n            return;\n        }\n\n        // build\n        for (var key in this.opts.shortcuts)\n        {\n            this._build(e, key, this.opts.shortcuts[key]);\n        }\n    },\n    _build: function(e, str, command)\n    {\n        var keys = str.split(',');\n        var len = keys.length;\n        for (var i = 0; i < len; i++)\n        {\n            if (typeof keys[i] === 'string')\n            {\n                this._handler(e, keys[i].trim(), command);\n            }\n        }\n    },\n    _handler: function(e, keys, command)\n    {\n        keys = keys.toLowerCase().split(\" \");\n\n        var special = this.hotkeys[e.keyCode];\n        var character = String.fromCharCode(e.which).toLowerCase();\n        var modif = \"\", possible = {};\n        var cmdKeys = [\"meta\", \"ctrl\", \"alt\", \"shift\"];\n\n        for (var i = 0; i < cmdKeys.length; i++)\n        {\n            var specialKey = cmdKeys[i];\n            if (e[specialKey + 'Key'] && special !== specialKey)\n            {\n                modif += specialKey + '+';\n            }\n        }\n\n        if (special) possible[modif + special] = true;\n        if (character)\n        {\n            possible[modif + character] = true;\n            possible[modif + this.hotkeysShiftNums[character]] = true;\n\n            // \"$\" can be triggered as \"Shift+4\" or \"Shift+$\" or just \"$\"\n            if (modif === \"shift+\")\n            {\n                possible[this.hotkeysShiftNums[character]] = true;\n            }\n        }\n\n        var len = keys.length;\n        for (var i = 0; i < len; i++)\n        {\n            if (possible[keys[i]])\n            {\n\n                e.preventDefault();\n                this.worked = true;\n\n                if (command.message)\n                {\n                    this.app.broadcast(command.message, command.args);\n                    this.app.broadcast('buffer.trigger');\n                }\n                else if (command.api)\n                {\n                    this.app.api(command.api, command.args);\n                    this.app.broadcast('buffer.trigger');\n                }\n\n                return;\n            }\n        }\n    }\n});\n$R.add('class', 'input.space', {\n    init: function(app, e, key, lastShiftKey)\n    {\n        this.app = app;\n        this.keycodes = app.keycodes;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n\n        // local\n        this.key = key;\n        this.lastShiftKey = lastShiftKey;\n\n        // init\n        this._init(e);\n    },\n    // private\n    _init: function(e)\n    {\n        // has non-editable\n        if (this.selection.hasNonEditable())\n        {\n            e.preventDefault();\n            return;\n        }\n\n        // shift/ctrl + space\n        if (!this.lastShiftKey && this.key === this.keycodes.SPACE && (e.ctrlKey || e.shiftKey) && !e.metaKey)\n        {\n            e.preventDefault();\n            this.insertion.insertChar('&nbsp;');\n            return;\n        }\n    }\n});\n$R.add('class', 'input.tab', {\n    init: function(app, e)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.inspector = app.inspector;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n\n        // init\n        this._init(e);\n    },\n    // private\n    _init: function(e)\n    {\n        // turn off tab\n        if (!this.opts.tabKey) return;\n\n        // callback\n        var stop = this.app.broadcast('tab', e);\n        if (stop === false) return e.preventDefault();\n\n        // traverse\n        this._traverse(e);\n    },\n    _traverse: function(e)\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n\n        // hard tab\n        if (!data.isComponent() && e.shiftKey)\n        {\n            return this._insertHardTab(e, 4);\n        }\n\n        // list\n        if (data.isList())\n        {\n            e.preventDefault();\n            return this.app.api('module.list.indent');\n        }\n        // pre\n        if (data.isPre() || (data.isComponentType('code') && !data.isFigcaption()))\n        {\n            return this._tabCode(e);\n        }\n\n        // tab as spaces\n        if (this.opts.tabAsSpaces !== false)\n        {\n            return this._insertHardTab(e, this.opts.tabAsSpaces);\n        }\n    },\n    _insertHardTab: function(e, num)\n    {\n        e.preventDefault();\n        var node = document.createTextNode(Array(num + 1).join('\\u00a0'));\n        return this.insertion.insertNode(node, 'end');\n    },\n    _tabCode: function(e)\n    {\n        e.preventDefault();\n\n        var node = (this.opts.preSpaces) ? document.createTextNode(Array(this.opts.preSpaces + 1).join('\\u00a0')) : document.createTextNode('\\t');\n\n        return this.insertion.insertNode(node, 'end');\n    }\n});\n$R.add('module', 'upload', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.lang = app.lang;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.progress = app.progress;\n\n        // local\n        this.defaults = {\n            event: false,\n            element: false,\n            name: false,\n            files: false,\n            url: false,\n            data: false,\n            paramName: false\n        };\n    },\n    // public\n    build: function(options)\n    {\n        this.p = $R.extend(this.defaults, options);\n        this.$el = $R.dom(this.p.element);\n\n        if (this.$el.get().tagName === 'INPUT') this._buildInput();\n        else                                    this._buildBox();\n    },\n    send: function(options)\n    {\n        this.p = $R.extend(this.defaults, options);\n        this.$uploadbox = this.editor.getElement();\n        this._send(this.p.event, this.p.files);\n    },\n    complete: function(response, e)\n    {\n        this._complete(response, e);\n    },\n\n    // private\n    _buildInput: function()\n    {\n        this.box = false;\n        this.prefix = '';\n\n        this.$uploadbox = $R.dom('<div class=\"upload-redactor-box\" />');\n\n        this.$el.hide();\n        this.$el.after(this.$uploadbox);\n\n        if (this.opts.multipleUpload) this.$el.attr('multiple', 'multiple');\n        else this.$el.removeAttr('multiple');\n\n        if (this.p.name !== 'file')\n        {\n            this.$el.attr('accept', 'image/*');\n        }\n\n        this._buildPlaceholder();\n        this._buildEvents();\n    },\n    _buildBox: function()\n    {\n        this.box = true;\n        this.prefix = 'box-';\n\n        this.$uploadbox = this.$el;\n        this.$uploadbox.attr('ondragstart', 'return false;');\n\n        // events\n        this.$uploadbox.on('drop.redactor.upload', this._onDropBox.bind(this));\n        this.$uploadbox.on('dragover.redactor.upload', this._onDragOver.bind(this));\n        this.$uploadbox.on('dragleave.redactor.upload', this._onDragLeave.bind(this));\n    },\n    _buildPlaceholder: function()\n    {\n        this.$placeholder = $R.dom('<div class=\"upload-redactor-placeholder\" />');\n        this.$placeholder.html(this.lang.get('upload-label'));\n        this.$uploadbox.append(this.$placeholder);\n    },\n    _buildEvents: function()\n    {\n        this.$el.on('change.redactor.upload', this._onChange.bind(this));\n        this.$uploadbox.on('click.redactor.upload', this._onClick.bind(this));\n        this.$uploadbox.on('drop.redactor.upload', this._onDrop.bind(this));\n        this.$uploadbox.on('dragover.redactor.upload', this._onDragOver.bind(this));\n        this.$uploadbox.on('dragleave.redactor.upload', this._onDragLeave.bind(this));\n    },\n    _onClick: function(e)\n    {\n        e.preventDefault();\n        this.$el.click();\n    },\n    _onChange: function(e)\n    {\n        this._send(e, this.$el.get().files);\n    },\n    _onDrop: function(e)\n    {\n        e.preventDefault();\n\n        this._clear();\n        this._setStatusDrop();\n        this._send(e);\n    },\n    _onDragOver: function(e)\n    {\n        e.preventDefault();\n        this._setStatusHover();\n\n        return false;\n    },\n    _onDragLeave: function(e)\n    {\n        e.preventDefault();\n        this._removeStatusHover();\n\n        return false;\n    },\n    _onDropBox: function(e)\n    {\n        e.preventDefault();\n\n        this._clear();\n        this._setStatusDrop();\n        this._send(e);\n    },\n    _removeStatusHover: function()\n    {\n        this.$uploadbox.removeClass('upload-redactor-' + this.prefix + 'hover');\n    },\n    _setStatusDrop: function()\n    {\n        this.$uploadbox.addClass('upload-redactor-' + this.prefix + 'drop');\n    },\n    _setStatusHover: function()\n    {\n        this.$uploadbox.addClass('upload-redactor-' + this.prefix + 'hover');\n    },\n    _setStatusError: function()\n    {\n        this.$uploadbox.addClass('upload-redactor-' + this.prefix + 'error');\n    },\n    _setStatusSuccess: function()\n    {\n        this.$uploadbox.addClass('upload-redactor-' + this.prefix + 'success');\n    },\n    _clear: function()\n    {\n        var classes = ['drop', 'hover', 'error', 'success'];\n        for (var i = 0; i < classes.length; i++)\n        {\n            this.$uploadbox.removeClass('upload-redactor-' + this.prefix + classes[i]);\n        }\n\n        this.$uploadbox.removeAttr('ondragstart');\n    },\n    _send: function(e, files)\n    {\n        e = e.originalEvent || e;\n\n        files = (files) ? files : e.dataTransfer.files;\n\n        var data = new FormData();\n        var name = this._getUploadParam();\n\n        data = this._buildData(name, files, data);\n        data = this.utils.extendData(data, this.p.data);\n\n        var stop = this.app.broadcast('upload.start', e, data, files);\n        if (stop !== false)\n        {\n            this._sendData(data, files, e);\n        }\n    },\n    _sendData: function(data, files, e)\n    {\n        this.progress.show();\n        if (typeof this.p.url === 'function')\n        {\n            var res = this.p.url(data, files, e, this);\n            if (!(res instanceof Promise))\n            {\n                this._complete(res, e);\n            }\n        }\n        else\n        {\n            $R.ajax.post({\n                url: this.p.url,\n                data: data,\n                before: function(xhr)\n                {\n                    return this.app.broadcast('upload.beforeSend', xhr);\n\n                }.bind(this),\n                success: function(response)\n                {\n                    this._complete(response, e);\n                }.bind(this)\n            });\n        }\n    },\n    _getUploadParam: function()\n    {\n        return (this.p.paramName) ? this.p.paramName : 'file';\n    },\n    _buildData: function(name, files, data)\n    {\n        if (files.length === 1)\n        {\n            data.append(name + '[]', files[0]);\n        }\n        else if (files.length > 1 && this.opts.multipleUpload !== false)\n        {\n            for (var i = 0; i < files.length; i++)\n            {\n                data.append(name + '[]', files[i]);\n            }\n        }\n\n        return data;\n    },\n    _complete: function(response, e)\n    {\n        this._clear();\n        this.progress.hide();\n\n        if (response && response.error)\n        {\n            this._setStatusError();\n\n            this.app.broadcast('upload.' + this.p.name + '.error', response, e);\n            this.app.broadcast('upload.error', response);\n        }\n        else\n        {\n            this._setStatusSuccess();\n\n            this.app.broadcast('upload.' + this.p.name + '.complete', response, e);\n            this.app.broadcast('upload.complete', response);\n\n            setTimeout(this._clear.bind(this), 500);\n        }\n    }\n});\n$R.add('class', 'code.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n\n    // private\n   _init: function(el)\n    {\n        var $pre;\n        if (typeof el !== 'undefined')\n        {\n            var $node = $R.dom(el);\n            var $wrapper = $node.closest('figure');\n            if ($wrapper.length !== 0)\n            {\n                this.parse($wrapper);\n            }\n            else\n            {\n                this.parse('<figure>');\n                this.append(el);\n            }\n\n            $pre = this.find('pre code, pre').last();\n        }\n        else\n        {\n            $pre = $R.dom('<pre>');\n\n            this.parse('<figure>');\n            this.append($pre);\n        }\n\n        this._initElement($pre);\n        this._initWrapper();\n    },\n    _initElement: function($pre)\n    {\n        $pre.attr({\n            'tabindex': '-1',\n            'contenteditable': true\n        });\n    },\n    _initWrapper: function()\n    {\n        this.addClass('redactor-component');\n        this.attr({\n            'data-redactor-type': 'code',\n            'tabindex': '-1',\n            'contenteditable': false\n        });\n    }\n});\n$R.add('module', 'form', {\n    init: function(app)\n    {\n        this.app = app;\n        this.lang = app.lang;\n        this.component = app.component;\n        this.inspector = app.inspector;\n    },\n    // messages\n    onform: {\n        remove: function(node)\n        {\n            this._remove(node);\n        }\n    },\n    oncontextbar: function(e, contextbar)\n    {\n        var data = this.inspector.parse(e.target);\n        if (data.isComponentType('form'))\n        {\n            var node = data.getComponent();\n            var buttons = {\n                \"remove\": {\n                    title: this.lang.get('delete'),\n                    api: 'module.form.remove',\n                    args: node\n                }\n            };\n\n            contextbar.set(e, node, buttons, 'top');\n        }\n\n    },\n\n    // private\n    _remove: function(node)\n    {\n        this.component.remove(node);\n    }\n});\n$R.add('class', 'form.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n        this.utils = app.utils;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n    // private\n    _init: function(el)\n    {\n        if (typeof el !== 'undefined')\n        {\n            var $node = $R.dom(el);\n            var $wrapper = $node.closest('form');\n            if ($wrapper.length !== 0)\n            {\n                var $figure = this.utils.replaceToTag(el, 'figure');\n                this.parse($figure);\n            }\n            else\n            {\n                this.parse('<figure>');\n                this.append(el);\n            }\n        }\n        else\n        {\n            this.parse('<figure>');\n        }\n\n        this._initWrapper();\n    },\n    _initWrapper: function()\n    {\n        this.addClass('redactor-component');\n        this.attr({\n            'data-redactor-type': 'form',\n            'tabindex': '-1',\n            'contenteditable': false\n        });\n    }\n});\n$R.add('module', 'image', {\n    modals: {\n        'image':\n            '<div class=\"redactor-modal-tab redactor-modal-tab-upload\" data-title=\"## upload ##\"><form action=\"\"> \\\n                <input type=\"file\" name=\"file\"> \\\n            </form></div>',\n        'imageedit':\n            '<div class=\"redactor-modal-group\"> \\\n                <div id=\"redactor-modal-image-preview\" class=\"redactor-modal-side\"></div> \\\n                <form action=\"\" class=\"redactor-modal-area\"> \\\n                    <div class=\"form-item\"> \\\n                        <label for=\"modal-image-title\"> ## title ##</label> \\\n                        <input type=\"text\" id=\"modal-image-title\" name=\"title\" /> \\\n                    </div> \\\n                    <div class=\"form-item form-item-caption\"> \\\n                        <label for=\"modal-image-caption\">## caption ##</label> \\\n                        <input type=\"text\" id=\"modal-image-caption\" name=\"caption\" aria-label=\"## caption ##\" /> \\\n                    </div> \\\n                    <div class=\"form-item form-item-align\"> \\\n                        <label>## image-position ##</label> \\\n                        <select name=\"align\" aria-label=\"## image-position ##\"> \\\n                            <option value=\"none\">## none ##</option> \\\n                            <option value=\"left\">## left ##</option> \\\n                            <option value=\"center\">## center ##</option> \\\n                            <option value=\"right\">## right ##</option> \\\n                        </select> \\\n                    </div> \\\n                    <div class=\"form-item form-item-link\"> \\\n                        <label for=\"modal-image-url\">## link ##</label> \\\n                        <input type=\"text\" id=\"modal-image-url\" name=\"url\" aria-label=\"## link ##\" /> \\\n                    </div> \\\n                    <div class=\"form-item form-item-link\"> \\\n                        <label class=\"checkbox\"><input type=\"checkbox\" name=\"target\" aria-label=\"## link-in-new-tab ##\"> ## link-in-new-tab ##</label> \\\n                    </div> \\\n                </form> \\\n            </div>'\n    },\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.lang = app.lang;\n        this.caret = app.caret;\n        this.utils = app.utils;\n        this.editor = app.editor;\n        this.storage = app.storage;\n        this.component = app.component;\n        this.inspector = app.inspector;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n\n        // local\n        this.justResized = false;\n    },\n    // messages\n    oninsert: function()\n    {\n        this._observeImages();\n    },\n    onstarted: function()\n    {\n        // storage observe\n        this.storage.observeImages();\n\n        // resize\n        if (this.opts.imageResizable)\n        {\n            this.resizer = $R.create('image.resize', this.app);\n        }\n\n        // observe\n        this._observeImages();\n    },\n    ondropimage: function(e, files, clipboard)\n    {\n        if (!this.opts.imageUpload) return;\n\n        var options = {\n            url: this.opts.imageUpload,\n            event: (clipboard) ? false : e,\n            files: files,\n            name: 'imagedrop',\n            data: this.opts.imageData,\n            paramName: this.opts.imageUploadParam\n        };\n\n        this.app.api('module.upload.send', options);\n    },\n    onstop: function()\n    {\n        if (this.resizer) this.resizer.stop();\n    },\n    onbottomclick: function()\n    {\n        this.insertion.insertToEnd(this.editor.getLastNode(), 'image');\n    },\n    onimageresizer: {\n        stop: function()\n        {\n            if (this.resizer) this.resizer.hide();\n        }\n    },\n    onsource: {\n        open: function()\n        {\n            if (this.resizer) this.resizer.hide();\n        },\n        closed: function()\n        {\n            this._observeImages();\n            if (this.resizer) this.resizer.rebuild();\n        }\n    },\n    onupload: {\n        complete: function()\n        {\n            this._observeImages();\n        },\n        image: {\n            complete: function(response)\n            {\n                this._insert(response);\n            },\n            error: function(response)\n            {\n                this._uploadError(response);\n            }\n        },\n        imageedit: {\n            complete: function(response)\n            {\n                this._change(response);\n            },\n            error: function(response)\n            {\n                this._uploadError(response);\n            }\n        },\n        imagedrop: {\n            complete: function(response, e)\n            {\n                this._insert(response, e);\n            },\n            error: function(response)\n            {\n                this._uploadError(response);\n            }\n        },\n        imagereplace: {\n            complete: function(response)\n            {\n                this._change(response, false);\n            },\n            error: function(response)\n            {\n                this._uploadError(response);\n            }\n        }\n    },\n    onmodal: {\n        image: {\n            open: function($modal, $form)\n            {\n                this._setUpload($modal, $form);\n            }\n        },\n        imageedit: {\n            open: function($modal, $form)\n            {\n                this._setFormData($modal, $form);\n            },\n            opened: function($modal, $form)\n            {\n                this._setFormFocus($form);\n            },\n            remove: function()\n            {\n                this._remove(this.$image);\n            },\n            save: function($modal, $form)\n            {\n                this._save($modal, $form);\n            }\n        }\n    },\n    onimage: {\n        observe: function()\n        {\n            this._observeImages();\n        },\n        resized: function()\n        {\n            this.justResized = true;\n        }\n    },\n    oncontextbar: function(e, contextbar)\n    {\n        if (this.justResized)\n        {\n            this.justResized = false;\n            return;\n        }\n\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var $img = $R.dom(current).closest('img');\n\n        if (!data.isFigcaption() && data.isComponentType('image') || $img.length !== 0)\n        {\n            var node = ($img.length !== 0) ? $img.get() : data.getComponent();\n            var buttons = {\n                \"edit\": {\n                    title: this.lang.get('edit'),\n                    api: 'module.image.open'\n                },\n                \"remove\": {\n                    title: this.lang.get('delete'),\n                    api: 'module.image.remove',\n                    args: node\n                }\n            };\n\n            contextbar.set(e, node, buttons);\n        }\n    },\n\n    // public\n    open: function()\n    {\n        this.$image = this._getCurrent();\n        this.app.api('module.modal.build', this._getModalData());\n    },\n    insert: function(data)\n    {\n        this._insert(data);\n    },\n    remove: function(node)\n    {\n        this._remove(node);\n    },\n\n    // private\n    _getModalData: function()\n    {\n        var modalData;\n        if (this._isImage() && this.opts.imageEditable)\n        {\n            modalData = {\n                name: 'imageedit',\n                width: '800px',\n                title: this.lang.get('edit'),\n                handle: 'save',\n                commands: {\n                    save: { title: this.lang.get('save') },\n                    remove: { title: this.lang.get('delete'), type: 'danger' },\n                    cancel: { title: this.lang.get('cancel') }\n                }\n            };\n        }\n        else\n        {\n            modalData = {\n                name: 'image',\n                title: this.lang.get('image')\n            };\n        }\n\n        return modalData;\n    },\n    _isImage: function()\n    {\n        return this.$image;\n    },\n    _getCurrent: function()\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var $img = $R.dom(current).closest('img');\n\n        if ($img.length !== 0) {\n            return this.component.create('image', $img);\n        }\n        else {\n            return (data.isComponentType('image') && data.isComponentActive()) ? this.component.create('image', data.getComponent()) : false;\n        }\n    },\n    _insert: function(response, e)\n    {\n        this.app.api('module.modal.close');\n\n        if (Array.isArray(response))\n        {\n            var obj = {};\n            for (var i = 0; i < response.length; i++)\n            {\n                obj = $R.extend(obj, response[i]);\n            }\n\n            response = obj;\n        }\n        else if (typeof response === 'string')\n        {\n            response = { \"file\": { url: response }};\n        }\n\n        if (typeof response === 'object')\n        {\n\n            var multiple = 0;\n            for (var key in response)\n            {\n                if (typeof response[key] === 'object') multiple++;\n            }\n\n            if (multiple > 1)\n            {\n                this._insertMultiple(response, e);\n            }\n            else\n            {\n                this._insertSingle(response, e);\n            }\n        }\n    },\n    _insertSingle: function(response, e)\n    {\n        for (var key in response)\n        {\n            if (typeof response[key] === 'object')\n            {\n                var $img = this._createImageAndStore(response[key]);\n                var inserted = (e) ? this.insertion.insertToPoint(e, $img, false, false) : this.insertion.insertHtml($img, false);\n\n                this._removeSpaceBeforeFigure(inserted[0]);\n\n                // set is active\n                this.component.setActive(inserted[0]);\n                this.app.broadcast('image.uploaded', inserted[0], response);\n            }\n        }\n    },\n    _insertMultiple: function(response, e)\n    {\n        var z = 0;\n        var inserted = [];\n        var last;\n        for (var key in response)\n        {\n            if (typeof response[key] === 'object')\n            {\n                z++;\n\n                var $img = this._createImageAndStore(response[key]);\n\n                if (z === 1)\n                {\n                    inserted = (e) ? this.insertion.insertToPoint(e, $img, false, false) : this.insertion.insertHtml($img, false);\n                }\n                else\n                {\n                    var $inserted = $R.dom(inserted[0]);\n                    $inserted.after($img);\n                    inserted = [$img.get()];\n\n                    this.app.broadcast('image.inserted', $img);\n                }\n\n                last = inserted[0];\n\n                this._removeSpaceBeforeFigure(inserted[0]);\n                this.app.broadcast('image.uploaded', inserted[0], response);\n            }\n        }\n\n        // set last is active\n        this.component.setActive(last);\n    },\n    _createImageAndStore: function(item)\n    {\n        var $img = this.component.create('image');\n\n        $img.addClass('redactor-uploaded-figure');\n        $img.setData({\n            src: item.url,\n            id: (item.id) ? item.id : this.utils.getRandomId()\n        });\n\n        // add to storage\n        this.storage.add('image', $img.getElement());\n\n        return $img;\n    },\n    _removeSpaceBeforeFigure: function(img)\n    {\n        if (!img) return;\n\n        var prev = img.previousSibling;\n        var next = img.nextSibling;\n        var $prev = $R.dom(prev);\n        var $next = $R.dom(next);\n\n        if (this.opts.breakline) {\n            if (next && $next.attr('data-redactor-tag') === 'br') {\n                $next.find('br').first().remove();\n            }\n            if (prev && $prev.attr('data-redactor-tag') === 'br') {\n                $prev.find('br').last().remove();\n            }\n        }\n\n        if (prev)\n        {\n            this._removeInvisibleSpace(prev);\n            this._removeInvisibleSpace(prev.previousSibling);\n        }\n    },\n    _removeInvisibleSpace: function(el)\n    {\n        if (el && el.nodeType === 3 && this.utils.searchInvisibleChars(el.textContent) !== -1)\n        {\n            el.parentNode.removeChild(el);\n        }\n    },\n    _save: function($modal, $form)\n    {\n        var data = $form.getData();\n        var imageData = {\n            title: data.title\n        };\n\n        if (this.opts.imageLink) imageData.link = { url: data.url, target: data.target };\n        if (this.opts.imageCaption) imageData.caption = data.caption;\n        if (this.opts.imagePosition) imageData.align = data.align;\n\n        this.$image.setData(imageData);\n        if (this.resizer) this.resizer.rebuild();\n\n        this.app.broadcast('image.changed', this.$image);\n        this.app.api('module.modal.close');\n    },\n    _change: function(response, modal)\n    {\n        if (typeof response === 'string')\n        {\n            response = { \"file\": { url: response }};\n        }\n\n        if (typeof response === 'object')\n        {\n            var $img;\n            for (var key in response)\n            {\n                if (typeof response[key] === 'object')\n                {\n                    $img = $R.dom('<img>');\n                    $img.attr('src', response[key].url);\n\n                    this.$image.changeImage(response[key]);\n\n                    this.app.broadcast('image.changed', this.$image, response);\n                    this.app.broadcast('image.uploaded', this.$image, response);\n\n                    this.app.broadcast('hardsync');\n\n                    break;\n                }\n            }\n\n            if (modal !== false)\n            {\n                $img.on('load', function() { this.$previewBox.html($img); }.bind(this));\n            }\n        }\n    },\n    _uploadError: function(response)\n    {\n        this.app.broadcast('image.uploadError', response);\n    },\n    _remove: function(node)\n    {\n        this.app.api('module.modal.close');\n        this.component.remove(node);\n    },\n    _observeImages: function()\n    {\n        var $editor = this.editor.getElement();\n        var self = this;\n        $editor.find('img').each(function(node)\n        {\n            var $node = $R.dom(node);\n\n            $node.off('.drop-to-replace');\n            $node.on('dragover.drop-to-replace dragenter.drop-to-replace', function(e)\n            {\n                e.preventDefault();\n                return;\n            });\n\n            $node.on('drop.drop-to-replace', function(e)\n            {\n                if (!self.app.isDragComponentInside())\n                {\n                    return self._setReplaceUpload(e, $node);\n                }\n            });\n        });\n    },\n    _setFormData: function($modal, $form)\n    {\n        this._buildPreview();\n        this._buildPreviewUpload();\n\n        var imageData = this.$image.getData();\n        var data = {\n            title: imageData.title\n        };\n\n        // caption\n        if (this.opts.imageCaption) data.caption = imageData.caption;\n        else $modal.find('.form-item-caption').hide();\n\n        // position\n        if (this.opts.imagePosition) data.align = imageData.align;\n        else $modal.find('.form-item-align').hide();\n\n        // link\n        if (this.opts.imageLink)\n        {\n            if (imageData.link)\n            {\n                data.url = imageData.link.url;\n                if (imageData.link.target) data.target = true;\n            }\n        }\n        else $modal.find('.form-item-link').hide();\n\n        $form.setData(data);\n    },\n    _setFormFocus: function($form)\n    {\n        $form.getField('title').focus();\n    },\n    _setReplaceUpload: function(e, $node)\n    {\n        e = e.originalEvent || e;\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (!this.opts.imageUpload) return;\n\n        this.$image = this.component.create('image', $node);\n\n        var options = {\n            url: this.opts.imageUpload,\n            files: e.dataTransfer.files,\n            name: 'imagereplace',\n            data: this.opts.imageData,\n            paramName: this.opts.imageUploadParam\n        };\n\n        this.app.api('module.upload.send', options);\n\n        return;\n    },\n    _setUpload: function($modal, $form)\n    {\n        if (!this.opts.imageUpload) {\n            var $body = $modal.getBody();\n            var $tab = $body.find('.redactor-modal-tab-upload');\n            $tab.remove();\n        }\n\n        var options = {\n            url: this.opts.imageUpload,\n            element: $form.getField('file'),\n            name: 'image',\n            data: this.opts.imageData,\n            paramName: this.opts.imageUploadParam\n        };\n\n        this.app.api('module.upload.build', options);\n    },\n    _buildPreview: function()\n    {\n        this.$preview = $R.dom('#redactor-modal-image-preview');\n\n        var imageData = this.$image.getData();\n        var $previewImg = $R.dom('<img>');\n        $previewImg.attr('src', imageData.src);\n\n        this.$previewBox = $R.dom('<div>');\n        this.$previewBox.append($previewImg);\n\n        this.$preview.html('');\n        this.$preview.append(this.$previewBox);\n    },\n    _buildPreviewUpload: function()\n    {\n        if (!this.opts.imageUpload) return;\n\n        var $desc = $R.dom('<div class=\"desc\">');\n        $desc.html(this.lang.get('upload-change-label'));\n\n        this.$preview.append($desc);\n\n        var options = {\n            url: this.opts.imageUpload,\n            element: this.$previewBox,\n            name: 'imageedit',\n            data: this.opts.imageData,\n            paramName: this.opts.imageUploadParam\n        };\n\n        this.app.api('module.upload.build', options);\n    }\n});\n$R.add('class', 'image.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.selection = app.selection;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n    setData: function(data)\n    {\n        for (var name in data)\n        {\n            this._set(name, data[name]);\n        }\n    },\n    getData: function()\n    {\n        var names = ['src', 'title', 'caption', 'align', 'link', 'id'];\n        var data = {};\n\n        for (var i = 0; i < names.length; i++)\n        {\n            data[names[i]] = this._get(names[i]);\n        }\n\n        return data;\n    },\n    getElement: function()\n    {\n        return this.$element;\n    },\n    changeImage: function(data)\n    {\n        this.$element.attr('src', data.url);\n    },\n\n\n    // private\n    _init: function(el)\n    {\n        var $el = $R.dom(el);\n        var $figure = $el.closest('figure');\n\n        if (el === undefined)\n        {\n            this.$element = $R.dom('<img>');\n            this.parse('<figure>');\n            this.append(this.$element);\n        }\n        else if ($figure.length === 0)\n        {\n            this.parse('<figure>');\n            this.$element = $el;\n            this.$element.wrap(this);\n        }\n        else\n        {\n            this.parse($figure);\n            this.$element = this.find('img');\n        }\n\n        this._initWrapper();\n    },\n    _set: function(name, value)\n    {\n        this['_set_' + name](value);\n    },\n    _get: function(name)\n    {\n        return this['_get_' + name]();\n    },\n    _set_src: function(src)\n    {\n       this.$element.attr('src', src);\n    },\n    _set_id: function(id)\n    {\n        if (this.opts.imageObserve) {\n            this.$element.attr('data-image', id);\n        }\n    },\n    _set_title: function(title)\n    {\n        title = title.trim().replace(/(<([^>]+)>)/ig,\"\");\n\n        if (title === '')\n        {\n            this.$element.removeAttr('alt');\n        }\n        else\n        {\n            this.$element.attr('alt', title);\n        }\n\n    },\n    _set_caption: function(caption)\n    {\n        var $figcaption = this.find('figcaption');\n        if ($figcaption.length === 0)\n        {\n            $figcaption = $R.dom('<figcaption>');\n            $figcaption.attr('contenteditable', 'true');\n\n            this.append($figcaption);\n        }\n\n        if (caption === '') $figcaption.remove();\n        else $figcaption.html(caption);\n\n        return $figcaption;\n    },\n    _set_align: function(align)\n    {\n        var imageFloat = '';\n        var imageMargin = '';\n        var textAlign = '';\n        var $el = this;\n        var $img = this.find('img');\n        var $figcaption = this.find('figcaption');\n\n        if (typeof this.opts.imagePosition === 'object')\n        {\n            var positions = this.opts.imagePosition;\n            for (var key in positions)\n            {\n                $el.removeClass(positions[key]);\n            }\n\n            var alignClass = (typeof positions[align] !== 'undefined') ? positions[align] : false;\n            if (alignClass)\n            {\n                $el.addClass(alignClass);\n            }\n        }\n        else\n        {\n            var width = $img.width();\n\n            switch (align)\n            {\n                case 'left':\n                    imageFloat = 'left';\n                    imageMargin = '0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin + ' 0';\n                break;\n                case 'right':\n                    imageFloat = 'right';\n                    imageMargin = '0 0 ' + this.opts.imageFloatMargin + ' ' + this.opts.imageFloatMargin;\n                break;\n                case 'center':\n                    textAlign = 'center';\n                break;\n            }\n\n            $el.css({ 'float': imageFloat, width: width + 'px', maxWidth: width + 'px', 'margin': imageMargin, 'text-align': textAlign });\n            $el.attr('rel', $el.attr('style'));\n\n            if (align === 'none') {\n                $el.css('max-width', '');\n                $el.css('width', '');\n            }\n\n            if (align === 'center')\n            {\n                $el.css('max-width', '');\n                $el.css('width', '');\n                $figcaption.css('text-align', 'center');\n            }\n            else\n            {\n                $figcaption.css('text-align', '');\n            }\n        }\n    },\n    _set_link: function(data)\n    {\n        var $link = this._findLink();\n        if (data.url === '')\n        {\n            if ($link) $link.unwrap();\n\n            return;\n        }\n\n        if (!$link)\n        {\n            $link = $R.dom('<a>');\n            this.$element.wrap($link);\n        }\n\n        $link.attr('href', data.url);\n\n        if (data.target) $link.attr('target', (data.target === true) ? '_blank' : data.target);\n        else $link.removeAttr('target');\n\n        return $link;\n    },\n    _get_src: function()\n    {\n        return this.$element.attr('src');\n    },\n    _get_id: function()\n    {\n        return this.$element.attr('data-image');\n    },\n    _get_title: function()\n    {\n        var alt = this.$element.attr('alt');\n\n        return (alt) ? alt : '';\n    },\n    _get_caption: function()\n    {\n        var $figcaption = this.find('figcaption');\n\n        if ($figcaption.length === 0)\n        {\n            return '';\n        }\n        else\n        {\n            return $figcaption.html();\n        }\n    },\n    _get_align: function()\n    {\n        var align = '';\n        if (typeof this.opts.imagePosition === 'object')\n        {\n            align = 'none';\n            var positions = this.opts.imagePosition;\n            for (var key in positions)\n            {\n                if (this.hasClass(positions[key]))\n                {\n                    align = key;\n                    break;\n                }\n            }\n        }\n        else\n        {\n            align = (this.css('text-align') === 'center') ? 'center' : this.css('float');\n        }\n\n        return align;\n    },\n    _get_link: function()\n    {\n        var $link = this._findLink();\n        if ($link)\n        {\n            var target = ($link.attr('target')) ? true : false;\n\n            return {\n                url: $link.attr('href'),\n                target: target\n            };\n        }\n    },\n    _initWrapper: function()\n    {\n        this.addClass('redactor-component');\n        this.attr({\n            'data-redactor-type': 'image',\n            'tabindex': '-1',\n            'contenteditable': false\n        });\n    },\n    _findLink: function()\n    {\n        var $link = this.find('a').filter(function(node)\n        {\n            return ($R.dom(node).closest('figcaption').length === 0);\n        });\n\n        if ($link.length !== 0)\n        {\n            return $link;\n        }\n\n        return false;\n    }\n});\n$R.add('class', 'image.resize', {\n    init: function(app)\n    {\n        this.app = app;\n        this.$doc = app.$doc;\n        this.$win = app.$win;\n        this.$body = app.$body;\n        this.editor = app.editor;\n        this.toolbar = app.toolbar;\n        this.inspector = app.inspector;\n\n        // init\n        this.$target = (this.toolbar.isTarget()) ? this.toolbar.getTargetElement() : this.$body;\n        this._init();\n    },\n    // public\n    rebuild: function()\n    {\n        this._setResizerPosition();\n    },\n    hide: function()\n    {\n        this.$target.find('#redactor-image-resizer').remove();\n    },\n    stop: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.off('.redactor.image-resize');\n\n        this.$doc.off('.redactor.image-resize');\n        this.$win.off('resize.redactor.image-resize');\n        this.hide();\n    },\n\n    // private\n    _init: function()\n    {\n        var $editor = this.editor.getElement();\n        $editor.on('click.redactor.image-resize', this._build.bind(this));\n\n        this.$win.on('resize.redactor.image-resize', this._setResizerPosition.bind(this));\n    },\n    _build: function(e)\n    {\n        this.$target.find('#redactor-image-resizer').remove();\n\n        var data = this.inspector.parse(e.target);\n        var $editor = this.editor.getElement();\n\n        if (data.isComponentType('image'))\n        {\n            this.$resizableBox = $editor;\n            this.$resizableImage = $R.dom(data.getImageElement());\n\n            this.$resizer = $R.dom('<span>');\n            this.$resizer.attr('id', 'redactor-image-resizer');\n\n            this.$target.append(this.$resizer);\n\n            this._setResizerPosition();\n            this.$resizer.on('mousedown touchstart', this._set.bind(this));\n        }\n    },\n    _setResizerPosition: function()\n    {\n        if (this.$resizer)\n        {\n            var isTarget = this.toolbar.isTarget();\n            var targetOffset = this.$target.offset();\n            var offsetFix = 7;\n            var topOffset = (isTarget) ? (offsetFix - targetOffset.top + this.$target.scrollTop()) : offsetFix;\n            var leftOffset = (isTarget) ? (offsetFix - targetOffset.left) : offsetFix;\n            var pos = this.$resizableImage.offset();\n            var width = this.$resizableImage.width();\n            var height = this.$resizableImage.height();\n            var resizerWidth =  this.$resizer.width();\n            var resizerHeight =  this.$resizer.height();\n\n            this.$resizer.css({ top: Math.round(pos.top + height - resizerHeight + topOffset) + 'px', left: Math.round(pos.left + width - resizerWidth + leftOffset) + 'px' });\n        }\n    },\n    _set: function(e)\n    {\n        e.preventDefault();\n\n        this.resizeHandle = {\n            x : e.pageX,\n            y : e.pageY,\n            el : this.$resizableImage,\n            $figure: this.$resizableImage.closest('figure'),\n            ratio: this.$resizableImage.width() / this.$resizableImage.height(),\n            h: this.$resizableImage.height()\n        };\n\n        e = e.originalEvent || e;\n\n        if (e.targetTouches)\n        {\n             this.resizeHandle.x = e.targetTouches[0].pageX;\n             this.resizeHandle.y = e.targetTouches[0].pageY;\n        }\n\n        this.app.broadcast('contextbar.close');\n        this.app.broadcast('image.resize', this.$resizableImage);\n        this._start();\n    },\n    _start: function()\n    {\n        this.$doc.on('mousemove.redactor.image-resize touchmove.redactor.image-resize', this._move.bind(this));\n        this.$doc.on('mouseup.redactor.image-resize touchend.redactor.image-resize', this._stop.bind(this));\n    },\n    _stop: function()\n    {\n        this.$doc.off('.redactor.image-resize');\n        this.app.broadcast('image.resized', this.$resizableImage);\n    },\n    _move: function(e)\n    {\n        e.preventDefault();\n\n        e = e.originalEvent || e;\n\n        var height = this.resizeHandle.h;\n\n        if (e.targetTouches) height += (e.targetTouches[0].pageY -  this.resizeHandle.y);\n        else height += (e.pageY -  this.resizeHandle.y);\n\n        var width = height * this.resizeHandle.ratio;\n\n        width = Math.round(width);\n        height = Math.round(height);\n\n        if (height < 20 || width < 100) return;\n        if (this._getResizableBoxWidth() <= width) return;\n\n        if (this.resizeHandle.$figure.length !== 0 && this.resizeHandle.$figure.css('max-width') !== '') {\n            this.resizeHandle.$figure.css('max-width', width + 'px');\n        }\n\n        this.resizeHandle.el.attr({width: width, height: height});\n        this.resizeHandle.el.width(width);\n        this.resizeHandle.el.height(height);\n        this._setResizerPosition();\n    },\n    _getResizableBoxWidth: function()\n    {\n        var width = this.$resizableBox.width();\n        return width - parseInt(this.$resizableBox.css('padding-left')) - parseInt(this.$resizableBox.css('padding-right'));\n    }\n});\n$R.add('module', 'file', {\n    modals: {\n        'file':\n            '<div class=\"redactor-modal-tab\" data-title=\"## upload ##\"><form action=\"\"> \\\n                <div class=\"form-item form-item-title\"> \\\n                    <label for=\"modal-file-title\"> ## filename ## <span class=\"desc\">(## optional ##)</span></label> \\\n                    <input type=\"text\" id=\"modal-file-title\" name=\"title\" /> \\\n                </div> \\\n                <input type=\"file\" name=\"file\"> \\\n            </form></div>'\n    },\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.lang = app.lang;\n        this.caret = app.caret;\n        this.utils = app.utils;\n        this.storage = app.storage;\n        this.component = app.component;\n        this.inspector = app.inspector;\n        this.insertion = app.insertion;\n        this.selection = app.selection;\n    },\n    // messages\n    onstarted: function()\n    {\n        // storage observe\n        this.storage.observeFiles();\n    },\n    ondropfile: function(e, files, clipboard)\n    {\n        if (!this.opts.fileUpload) return;\n\n        var options = {\n            url: this.opts.fileUpload,\n            event: (clipboard) ? false : e,\n            files: files,\n            name: 'filedrop',\n            data: this.opts.fileData\n        };\n\n        this.app.api('module.upload.send', options);\n    },\n    onmodal: {\n        file: {\n            open: function($modal, $form)\n            {\n                this._setFormData($modal, $form);\n                this._setUpload($form);\n            },\n            opened: function($modal, $form)\n            {\n                this._setFormFocus($form);\n\n                this.$form = $form;\n            }\n        }\n    },\n    onupload: {\n        file: {\n            complete: function(response)\n            {\n                this._insert(response);\n            },\n            error: function(response)\n            {\n                this._uploadError(response);\n            }\n        },\n        filedrop: {\n            complete: function(response, e)\n            {\n                this._insert(response, e);\n            },\n            error: function(response)\n            {\n                this._uploadError(response);\n            }\n        }\n    },\n\n    // public\n    open: function()\n    {\n        this._open();\n    },\n    insert: function(data)\n    {\n        this._insert(data);\n    },\n    remove: function(node)\n    {\n        this._remove(node);\n    },\n\n    // private\n    _open: function()\n    {\n        this.app.api('module.modal.build', this._getModalData());\n    },\n    _getModalData: function()\n    {\n        var modalData = {\n            name: 'file',\n            title: this.lang.get('file')\n        };\n\n        return modalData;\n    },\n    _insert: function(response, e)\n    {\n        this.app.api('module.modal.close');\n        if (typeof response !== 'object') return;\n\n        if (Array.isArray(response))\n        {\n            var obj = {};\n            for (var i = 0; i < response.length; i++)\n            {\n                obj = $R.extend(obj, response[i]);\n            }\n\n            response = obj;\n        }\n\n        var multiple = (Object.keys(response).length  > 1);\n\n        if (multiple)\n        {\n            this._insertMultiple(response, e);\n        }\n        else\n        {\n            this._insertSingle(response, e);\n        }\n\n        this.$form = false;\n    },\n    _insertSingle: function(response, e)\n    {\n        var inserted = [];\n        for (var key in response)\n        {\n            var $file = this._createFileAndStore(response[key]);\n\n            if (this.opts.fileAttachment)\n            {\n                inserted = this._insertAsAttachment($file);\n            }\n            else\n            {\n                inserted = (e) ? this.insertion.insertToPoint(e, $file) : this.insertion.insertRaw($file);\n            }\n\n            this.app.broadcast('file.uploaded', inserted[0], response);\n        }\n    },\n    _insertMultiple: function(response, e)\n    {\n        var z = 0;\n        var inserted = [];\n        var $last;\n        for (var key in response)\n        {\n            z++;\n\n            var $file = this._createFileAndStore(response[key]);\n\n            if (this.opts.fileAttachment)\n            {\n                inserted = this._insertAsAttachment($file, response);\n            }\n            else\n            {\n                if (z === 1)\n                {\n                    inserted = (e) ? this.insertion.insertToPoint(e, $file) : this.insertion.insertRaw($file);\n                }\n                else\n                {\n                    var $inserted = $R.dom(inserted[0]);\n                    $inserted.after($file).after(' ');\n                    inserted = [$file.get()];\n\n                    this.app.broadcast('file.inserted', $file);\n                }\n            }\n\n            $last = $file;\n            this.app.broadcast('file.uploaded', inserted[0], response);\n        }\n\n        // set caret after last\n        if (!this.opts.fileAttachment)\n        {\n            this.caret.setAfter($last);\n        }\n    },\n    _insertAsAttachment: function($file, response)\n    {\n        var $box = $R.dom(this.opts.fileAttachment);\n        var $wrapper = $file.wrapAttachment();\n        $box.append($wrapper);\n\n        var inserted = [$wrapper.get()];\n        this.app.broadcast('file.appended', inserted[0], response);\n\n        return inserted;\n    },\n    _createFileAndStore: function(item)\n    {\n        var modalFormData = (this.$form) ? this.$form.getData() : false;\n        var name = (item.name) ? item.name : item.url;\n        var title = (!this.opts.fileAttachment && modalFormData && modalFormData.title !== '') ? modalFormData.title : this._truncateUrl(name);\n\n        var $file = this.component.create('file');\n        $file.attr('href', item.url);\n        $file.attr('data-file', (item.id) ? item.id : this.utils.getRandomId());\n        $file.attr('data-name', item.name);\n        $file.html(title);\n\n        // add to storage\n        this.storage.add('file', $file);\n\n        return $file;\n    },\n    _remove: function(node)\n    {\n        this.selection.save();\n\n        var $file = this.component.create('file', node);\n        var stop = this.app.broadcast('file.delete', $file);\n        if (stop !== false)\n        {\n            $file.unwrap();\n\n            this.selection.restore();\n\n            // callback\n            this.app.broadcast('file.deleted', $file);\n        }\n        else\n        {\n            this.selection.restore();\n        }\n    },\n    _truncateUrl: function(url)\n    {\n        return (url.search(/^http/) !== -1 && url.length > 20) ? url.substring(0, 20) + '...' : url;\n    },\n    _setUpload: function($form)\n    {\n        var options = {\n            url: this.opts.fileUpload,\n            element: $form.getField('file'),\n            name: 'file',\n            data: this.opts.fileData,\n            paramName: this.opts.fileUploadParam\n        };\n\n        this.app.api('module.upload.build', options);\n    },\n    _setFormData: function($modal, $form)\n    {\n        if (this.opts.fileAttachment)\n        {\n            $modal.find('.form-item-title').hide();\n        }\n        else\n        {\n            $form.setData({ title: this.selection.getText() });\n        }\n    },\n    _setFormFocus: function($form)\n    {\n        $form.getField('title').focus();\n    },\n    _uploadError: function(response)\n    {\n        this.app.broadcast('file.uploadError', response);\n    }\n});\n$R.add('class', 'file.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n        this.opts = app.opts;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n    wrapAttachment: function()\n    {\n        this.$wrapper = $R.dom('<span class=\"redactor-file-item\">');\n        this.$remover = $R.dom('<span class=\"redactor-file-remover\">');\n        this.$remover.html('&times;');\n        this.$remover.on('click', this.removeAttachment.bind(this));\n\n        this.$wrapper.append(this);\n        this.$wrapper.append(this.$remover);\n\n        return this.$wrapper;\n    },\n    removeAttachment: function(e)\n    {\n        e.preventDefault();\n\n        var stop = this.app.broadcast('file.delete', this, this.$wrapper);\n        if (stop !== false)\n        {\n            this.$wrapper.remove();\n            this.app.broadcast('file.deleted', this);\n            this.app.broadcast('file.removeAttachment', this);\n        }\n    },\n\n    // private\n    _init: function(el)\n    {\n        if (el === undefined)\n        {\n            this.parse('<a>');\n        }\n        else\n        {\n            var $a = $R.dom(el).closest('a');\n            this.parse($a);\n        }\n    }\n});\n$R.add('module', 'buffer', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.editor = app.editor;\n        this.offset = app.offset;\n        this.keycodes = app.keycodes;\n        this.selection = app.selection;\n\n        // local\n        this.state = false;\n        this.passed = false;\n        this.keyPressed = false;\n        this.undoStorage = [];\n        this.redoStorage = [];\n    },\n    // messages\n    onkeydown: function(e)\n    {\n        this._listen(e);\n    },\n    onsyncing: function()\n    {\n        if (!this.keyPressed)\n        {\n            this.trigger();\n        }\n\n        this.keyPressed = false;\n    },\n    onbuffer: {\n        trigger: function()\n        {\n            this.trigger();\n        }\n    },\n    onstate: function(e, html, offset)\n    {\n        if ((e && (e.ctrlKey || e.metaKey)) || (e && (this._isUndo(e) || this._isRedo(e))))\n        {\n            return;\n        }\n\n        this.passed = false;\n        this._saveState(html, offset);\n    },\n    onenable: function()\n    {\n        this.clear();\n    },\n\n    // public\n    clear: function()\n    {\n        this.state = false;\n        this.undoStorage = [];\n        this.redoStorage = [];\n    },\n    undo: function()\n    {\n        this._getUndo();\n    },\n    redo: function()\n    {\n        this._getRedo();\n    },\n    trigger: function()\n    {\n        if (this.state && this.passed === false) this._setUndo();\n    },\n\n    // private\n    _saveState: function(html, offset)\n    {\n        var $editor = this.editor.getElement();\n\n        this.state = {\n            html: html || $editor.html(),\n            offset: offset || this.offset.get()\n        };\n    },\n    _listen: function(e)\n    {\n        var key = e.which;\n        var ctrl = e.ctrlKey || e.metaKey;\n        var cmd = ctrl || e.shiftKey || e.altKey;\n        var keys = [this.keycodes.SPACE, this.keycodes.ENTER, this.keycodes.BACKSPACE, this.keycodes.DELETE, this.keycodes.TAB,\n                    this.keycodes.LEFT, this.keycodes.RIGHT, this.keycodes.UP, this.keycodes.DOWN];\n        // undo\n        if (this._isUndo(e)) // z key\n        {\n            e.preventDefault();\n            this.undo();\n            return;\n        }\n        // redo\n        else if (this._isRedo(e))\n        {\n            e.preventDefault();\n            this.redo();\n            return;\n        }\n        // spec keys\n        else if (!ctrl && keys.indexOf(key) !== -1)\n        {\n            cmd = true;\n            this.trigger();\n        }\n        // cut & copy\n        else if (ctrl && (key === 88 || key === 67))\n        {\n            cmd = true;\n            this.trigger();\n        }\n\n\n        // empty buffer\n        if (!cmd && !this._hasUndo())\n        {\n            this.trigger();\n        }\n\n        this.keyPressed = true;\n    },\n    _isUndo: function(e)\n    {\n        var key = e.which;\n        var ctrl = e.ctrlKey || e.metaKey;\n\n        return (ctrl && key === 90 && !e.shiftKey && !e.altKey);\n    },\n    _isRedo: function(e)\n    {\n        var key = e.which;\n        var ctrl = e.ctrlKey || e.metaKey;\n\n        return (ctrl && (key === 90 && e.shiftKey || key === 89 && !e.shiftKey) && !e.altKey);\n    },\n    _setUndo: function()\n    {\n        var last = this.undoStorage[this.undoStorage.length-1];\n        if (typeof last === 'undefined' || last[0] !== this.state.html)\n        {\n            this.undoStorage.push([this.state.html, this.state.offset]);\n            this._removeOverStorage();\n        }\n    },\n    _setRedo: function()\n    {\n        var $editor = this.editor.getElement();\n        var offset = this.offset.get();\n        var html = $editor.html();\n\n        this.redoStorage.push([html, offset]);\n        this.redoStorage = this.redoStorage.slice(0, this.opts.bufferLimit);\n    },\n    _getUndo: function()\n    {\n        if (!this._hasUndo()) return;\n\n        this.passed = true;\n\n        var $editor = this.editor.getElement();\n        var buffer = this.undoStorage.pop();\n\n        this._setRedo();\n\n        $editor.html(buffer[0]);\n        this.offset.set(buffer[1]);\n        this.selection.restore();\n\n        this.app.broadcast('undo', buffer[0], buffer[1]);\n\n    },\n    _getRedo: function()\n    {\n        if (!this._hasRedo()) return;\n\n        this.passed = true;\n\n        var $editor = this.editor.getElement();\n        var buffer = this.redoStorage.pop();\n\n        this._setUndo();\n        $editor.html(buffer[0]);\n        this.offset.set(buffer[1]);\n\n        this.app.broadcast('redo', buffer[0], buffer[1]);\n    },\n    _removeOverStorage: function()\n    {\n        if (this.undoStorage.length > this.opts.bufferLimit)\n        {\n            this.undoStorage = this.undoStorage.slice(0, (this.undoStorage.length - this.opts.bufferLimit));\n        }\n    },\n    _hasUndo: function()\n    {\n        return (this.undoStorage.length !== 0);\n    },\n    _hasRedo: function()\n    {\n        return (this.redoStorage.length !== 0);\n    }\n});\n$R.add('module', 'list', {\n    init: function(app)\n    {\n        this.app = app;\n        this.opts = app.opts;\n        this.utils = app.utils;\n        this.block = app.block;\n        this.toolbar = app.toolbar;\n        this.inspector = app.inspector;\n        this.selection = app.selection;\n    },\n    // messages\n    onbutton: {\n        list: {\n            observe: function(button)\n            {\n                this._observeButton(button);\n            }\n        }\n    },\n    ondropdown: {\n        list: {\n            observe: function(dropdown)\n            {\n                this._observeDropdown(dropdown);\n            }\n        }\n    },\n\n    // public\n    toggle: function(type)\n    {\n        var nodes = this._getBlocks();\n        var block = this.selection.getBlock();\n        var $list = $R.dom(block).parents('ul, ol',  '.redactor-in').last();\n        if (nodes.length === 0 && $list.length !== 0)\n        {\n            nodes = [$list.get()];\n        }\n\n        if (block && (block.tagName === 'TD' || block.tagName === 'TH'))\n        {\n            nodes = this.block.format('div');\n        }\n\n        this.selection.saveMarkers();\n\n        nodes = (nodes.length !== 0 && this._isUnformat(type, nodes)) ? this._unformat(type, nodes) : this._format(type, nodes);\n\n        this.selection.restoreMarkers();\n\n        return nodes;\n    },\n    indent: function()\n    {\n        var isCollapsed = this.selection.isCollapsed();\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var item = (data.isList()) ? data.getListItem() : false;\n        var $item = $R.dom(item);\n        var $prev = $item.prevElement();\n        var prev = $prev.get();\n        var isIndent = (isCollapsed && item && prev && prev.tagName === 'LI');\n\n        if (isIndent)\n        {\n            this.selection.saveMarkers();\n\n            $prev = $R.dom(prev);\n            var $prevChild = $prev.children('ul, ol');\n            var $list = $item.closest('ul, ol');\n\n            if ($prevChild.length !== 0)\n            {\n                $prevChild.append($item);\n            }\n            else\n            {\n                var listTag = $list.get().tagName.toLowerCase();\n                var $newList = $R.dom('<' + listTag + '>');\n\n                $newList.append($item);\n                $prev.append($newList);\n            }\n\n            this.selection.restoreMarkers();\n        }\n    },\n    outdent: function()\n    {\n        var isCollapsed = this.selection.isCollapsed();\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var item = (data.isList()) ? data.getListItem() : false;\n        var $item = $R.dom(item);\n\n        if (isCollapsed && item)\n        {\n\n            var $listItem = $item.parent();\n            var $liItem = $listItem.closest('li', '.redactor-in');\n            var $prev = $item.prevElement();\n            var $next = $item.nextElement();\n            var prev = $prev.get();\n            var next = $next.get();\n            var nextItems, nextList, $newList, $nextList;\n            var isTop = (prev === false);\n            var isMiddle = (prev !== false && next !== false);\n            var isBottom = (!isTop && next === false);\n\n            this.selection.saveMarkers();\n\n            // out\n            if ($liItem.length !== 0)\n            {\n                if (isMiddle)\n                {\n                    nextItems = this._getAllNext($item.get());\n                    $newList = $R.dom('<' + $listItem.get().tagName.toLowerCase() + '>');\n\n                    for (var i = 0; i < nextItems.length; i++)\n                    {\n                        $newList.append(nextItems[i]);\n                    }\n\n                    $liItem.after($item);\n                    $item.append($newList);\n                }\n                else\n                {\n                    $liItem.after($item);\n\n                    if ($listItem.children().length === 0)\n                    {\n                        $listItem.remove();\n                    }\n                    else\n                    {\n                        if (isTop) $item.append($listItem);\n                    }\n                }\n            }\n            // unformat\n            else\n            {\n                var $container =  this._createUnformatContainer($item);\n                var $childList = $container.find('ul, ol').first();\n\n                if (isTop) $listItem.before($container);\n                else if (isBottom) $listItem.after($container);\n                else if (isMiddle)\n                {\n                    $newList = $R.dom('<' + $listItem.get().tagName.toLowerCase() + '>');\n                    nextItems = this._getAllNext($item.get());\n\n                    for (var i = 0; i < nextItems.length; i++)\n                    {\n                        $newList.append(nextItems[i]);\n                    }\n\n                    $listItem.after($container);\n                    $container.after($newList);\n                }\n\n                if ($childList.length !== 0)\n                {\n                    $nextList = $container.nextElement();\n                    nextList = $nextList.get();\n                    if (nextList && nextList.tagName === $listItem.get().tagName)\n                    {\n                        $R.dom(nextList).prepend($childList);\n                        $childList.unwrap();\n                    }\n                    else\n                    {\n                        $container.after($childList);\n                    }\n                }\n\n                $item.remove();\n            }\n\n            this.selection.restoreMarkers();\n        }\n    },\n\n    // private\n    _getAllNext: function(next)\n    {\n        var nodes = [];\n\n        while (next)\n        {\n            var $next = $R.dom(next).nextElement();\n            next = $next.get();\n\n            if (next) nodes.push(next);\n            else return nodes;\n        }\n\n        return nodes;\n    },\n    _isUnformat: function(type, nodes)\n    {\n        var countLists = 0;\n        for (var i = 0; i < nodes.length; i++)\n        {\n            if (nodes[i].nodeType !== 3)\n            {\n                var tag = nodes[i].tagName.toLowerCase();\n                if (tag === type || tag === 'figure')\n                {\n                    countLists++;\n                }\n            }\n        }\n\n        return (countLists === nodes.length);\n    },\n    _format: function(type, nodes)\n    {\n        var tags = ['p', 'div', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol'];\n        var blocks = this._uniteBlocks(nodes, tags);\n        var lists = [];\n\n        for (var key in blocks)\n        {\n            var items = blocks[key];\n            var $list = this._createList(type, blocks[key]);\n\n            for (var i = 0; i < items.length; i++)\n            {\n                var $item;\n\n                // lists\n                if (items[i].nodeType !== 3 && (items[i].tagName === 'UL' || items[i].tagName === 'OL'))\n                {\n                    var $oldList = $R.dom(items[i]);\n\n                    $item = $oldList.contents();\n                    $list.append($item);\n\n                    // old is empty\n                    if (this.utils.isEmpty($oldList)) $oldList.remove();\n                }\n                // other blocks or texts\n                else\n                {\n                    $item = this._createListItem(items[i]);\n                    this.utils.normalizeTextNodes($item);\n                    $list.append($item);\n                }\n            }\n\n            lists.push($list.get());\n        }\n\n        return lists;\n    },\n    _uniteBlocks: function(nodes, tags)\n    {\n        var z = 0;\n        var blocks = { 0: [] };\n        var lastcell = false;\n        for (var i = 0; i < nodes.length; i++)\n        {\n            var $node = $R.dom(nodes[i]);\n            var $cell = $node.closest('th, td');\n\n            if ($cell.length !== 0)\n            {\n                if ($cell.get() !== lastcell)\n                {\n                    // create block\n                    z++;\n                    blocks[z] = [];\n                }\n\n                if (this._isUniteBlock(nodes[i], tags))\n                {\n                    blocks[z].push(nodes[i]);\n                }\n            }\n            else\n            {\n                if (this._isUniteBlock(nodes[i], tags))\n                {\n                    blocks[z].push(nodes[i]);\n                }\n                else\n                {\n                    // create block\n                    z++;\n                    blocks[z] = [];\n                }\n            }\n\n            lastcell = $cell.get();\n        }\n\n        return blocks;\n    },\n    _isUniteBlock: function(node, tags)\n    {\n        return (node.nodeType === 3 || tags.indexOf(node.tagName.toLowerCase()) !== -1);\n    },\n    _createList: function(type, blocks)\n    {\n        var last = blocks[blocks.length-1];\n        var $last = $R.dom(last);\n        var $list = $R.dom('<' + type + '>');\n        $last.after($list);\n\n        return $list;\n    },\n    _createListItem: function(item)\n    {\n        var $item = $R.dom('<li>');\n        if (item.nodeType === 3)\n        {\n            $item.append(item);\n        }\n        else\n        {\n            var $el = $R.dom(item);\n            $item.append($el.contents());\n            $el.remove();\n        }\n\n        return $item;\n    },\n    _unformat: function(type, nodes)\n    {\n        if (nodes.length === 1)\n        {\n            // one list\n            var $list = $R.dom(nodes[0]);\n            var $items = $list.find('li');\n\n            var selectedItems = this.selection.getNodes({ tags: ['li'] });\n            var block = this.selection.getBlock();\n            var $li = $R.dom(block).closest('li');\n            if (selectedItems.length === 0 && $li.length !== 0)\n            {\n                selectedItems = [$li.get()];\n            }\n\n\n            // 1) entire\n            if (selectedItems.length === $items.length)\n            {\n                return this._unformatEntire(nodes[0]);\n            }\n\n            var pos = this._getItemsPosition($items, selectedItems);\n\n            // 2) top\n            if (pos === 'Top')\n            {\n                return this._unformatAtSide('before', selectedItems, $list);\n            }\n\n            // 3) bottom\n            else if (pos === 'Bottom')\n            {\n                selectedItems.reverse();\n                return this._unformatAtSide('after', selectedItems, $list);\n            }\n\n            // 4) middle\n            else if (pos === 'Middle')\n            {\n                var $last = $R.dom(selectedItems[selectedItems.length-1]);\n\n                var ci = false;\n\n                var $parent = false;\n                var $secondList = $R.dom('<' + $list.get().tagName.toLowerCase() + '>');\n                $items.each(function(node)\n                {\n                    if (ci)\n                    {\n                        var $node = $R.dom(node);\n                        if ($node.closest('.redactor-split-item').length === 0 && ($parent === false || $node.closest($parent).length === 0))\n                        {\n                            $node.addClass('redactor-split-item');\n                        }\n\n                        $parent = $node;\n                    }\n\n                    if (node === $last.get())\n                    {\n                        ci = true;\n                    }\n                });\n\n                $items.filter('.redactor-split-item').each(function(node)\n                {\n                    var $node = $R.dom(node);\n                    $node.removeClass('redactor-split-item');\n                    $secondList.append(node);\n                });\n\n                $list.after($secondList);\n\n                selectedItems.reverse();\n                for (var i = 0; i < selectedItems.length; i++)\n                {\n                    var $item = $R.dom(selectedItems[i]);\n                    var $container = this._createUnformatContainer($item);\n\n                    $list.after($container);\n                    $container.find('ul, ol').remove();\n                    $item.remove();\n                }\n\n\n                return;\n            }\n\n        }\n        else\n        {\n            // unformat all\n            for (var i = 0; i < nodes.length; i++)\n            {\n                if (nodes[i].nodeType !== 3 && nodes[i].tagName.toLowerCase() === type)\n                {\n                    this._unformatEntire(nodes[i]);\n                }\n            }\n        }\n    },\n    _unformatEntire: function(list)\n    {\n        var $list = $R.dom(list);\n        var $items = $list.find('li');\n        $items.each(function(node)\n        {\n            var $item = $R.dom(node);\n            var $container = this._createUnformatContainer($item);\n\n            $item.remove();\n            $list.before($container);\n\n        }.bind(this));\n\n        $list.remove();\n    },\n    _unformatAtSide: function(type, selectedItems, $list)\n    {\n        for (var i = 0; i < selectedItems.length; i++)\n        {\n            var $item = $R.dom(selectedItems[i]);\n            var $container = this._createUnformatContainer($item);\n\n            $list[type]($container);\n\n            var $innerLists = $container.find('ul, ol').first();\n            $item.append($innerLists);\n\n            $innerLists.each(function(node)\n            {\n                var $node = $R.dom(node);\n                var $parent = $node.closest('li');\n\n                if ($parent.get() === selectedItems[i])\n                {\n                    $node.unwrap();\n                    $parent.addClass('r-unwrapped');\n                }\n\n            });\n\n            if (this.utils.isEmptyHtml($item.html())) $item.remove();\n        }\n\n        // clear empty\n        $list.find('.r-unwrapped').each(function(node)\n        {\n            var $node = $R.dom(node);\n            if ($node.html().trim() === '') $node.remove();\n            else $node.removeClass('r-unwrapped');\n        });\n    },\n    _getItemsPosition: function($items, selectedItems)\n    {\n        var pos = 'Middle';\n\n        var sFirst = selectedItems[0];\n        var sLast = selectedItems[selectedItems.length-1];\n\n        var first = $items.first().get();\n        var last = $items.last().get();\n\n        if (first === sFirst && last !== sLast)\n        {\n            pos = 'Top';\n        }\n        else if (first !== sFirst && last === sLast)\n        {\n            pos = 'Bottom';\n        }\n\n        return pos;\n    },\n    _createUnformatContainer: function($item)\n    {\n        var $container = $R.dom('<' + this.opts.markup + '>');\n        if (this.opts.breakline) $container.attr('data-redactor-tag', 'br');\n\n        $container.append($item.contents());\n\n        return $container;\n    },\n    _getBlocks: function()\n    {\n        return this.selection.getBlocks({ first: true });\n    },\n    _observeButton: function()\n    {\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var isDisabled = (data.isPre() || data.isCode() || data.isFigcaption());\n\n        this._observeButtonsList(isDisabled, ['lists', 'ul', 'ol', 'outdent', 'indent']);\n\n        var itemOutdent = this.toolbar.getButton('outdent');\n        var itemIndent = this.toolbar.getButton('indent');\n\n        this._observeIndent(itemIndent, itemOutdent);\n    },\n    _observeDropdown: function(dropdown)\n    {\n        var itemOutdent = dropdown.getItem('outdent');\n        var itemIndent = dropdown.getItem('indent');\n\n        this._observeIndent(itemIndent, itemOutdent);\n    },\n    _observeIndent: function(itemIndent, itemOutdent)\n    {\n        var isCollapsed = this.selection.isCollapsed();\n        var current = this.selection.getCurrent();\n        var data = this.inspector.parse(current);\n        var item = (data.isList()) ? data.getListItem() : false;\n        var $item = $R.dom(item);\n        var $prev = $item.prevElement();\n        var prev = $prev.get();\n        var isIndent = (isCollapsed && item && prev && prev.tagName === 'LI');\n\n        if (itemOutdent)\n        {\n            if (item && isCollapsed) itemOutdent.enable();\n            else itemOutdent.disable();\n        }\n\n        if (itemIndent)\n        {\n            if (item && isIndent) itemIndent.enable();\n            else itemIndent.disable();\n        }\n    },\n    _observeButtonsList: function(param, buttons)\n    {\n        for (var i = 0; i < buttons.length; i++)\n        {\n            var button = this.toolbar.getButton(buttons[i]);\n            if (button)\n            {\n                if (param) button.disable();\n                else button.enable();\n            }\n        }\n    }\n});\n$R.add('class', 'video.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n\n    // private\n    _init: function(el)\n    {\n        if (typeof el !== 'undefined')\n        {\n            var $node = $R.dom(el);\n            var $wrapper = $node.closest('figure');\n            if ($wrapper.length !== 0)\n            {\n                this.parse($wrapper);\n            }\n            else\n            {\n                this.parse('<figure>');\n                this.append(el);\n            }\n        }\n        else\n        {\n            this.parse('<figure>');\n        }\n\n\n        this._initWrapper();\n    },\n    _initWrapper: function()\n    {\n        this.addClass('redactor-component');\n        this.attr({\n            'data-redactor-type': 'video',\n            'tabindex': '-1',\n            'contenteditable': false\n        });\n    }\n});\n\n$R.add('class', 'widget.component', {\n    mixins: ['dom', 'component'],\n    init: function(app, el)\n    {\n        this.app = app;\n\n        // init\n        return (el && el.cmnt !== undefined) ? el : this._init(el);\n    },\n    getData: function()\n    {\n        return {\n            html: this._getHtml()\n        };\n    },\n\n    // private\n    _init: function(el)\n    {\n        if (typeof el !== 'undefined')\n        {\n            var $node = $R.dom(el);\n            var $figure = $node.closest('figure');\n            if ($figure.length !== 0)\n            {\n                this.parse($figure);\n            }\n            else\n            {\n                this.parse('<figure>');\n                this.html(el);\n            }\n        }\n        else\n        {\n            this.parse('<figure>');\n        }\n\n\n        this._initWrapper();\n    },\n    _getHtml: function()\n    {\n        var $wrapper = $R.dom('<div>');\n        $wrapper.html(this.html());\n        $wrapper.find('.redactor-component-caret').remove();\n\n        return $wrapper.html();\n    },\n    _initWrapper: function()\n    {\n        this.addClass('redactor-component');\n        this.attr({\n            'data-redactor-type': 'widget',\n            'tabindex': '-1',\n            'contenteditable': false\n        });\n    }\n});\n\n    window.Redactor = window.$R = $R;\n\n    // Data attribute load\n    window.addEventListener('load', function()\n    {\n        $R('[data-redactor]');\n    });\n\n}());","import Wysiwyg from './components/field/p-wysiwyg.vue';\n \npanel.plugin('sietseveenman/p-wysiwyg', {\n    fields: {\n        'p-wysiwyg': Wysiwyg,\n    },\n    components: {\n        'k-p-wysiwyg-field-preview': {\n          props: {\n            value: String,\n            column: Object,\n            field: Object\n          },\n          computed: {\n            stripped() {\n                let stripped = this.value.replace(/<[^>]+>/g, '');\n                return stripped.length > 24 \n                    ? stripped.substring(0,24) + '...'\n                    : stripped;\n            }\n          },\n          template: '<p style=\"padding: 0 1em;\">{{stripped}}</p>'\n        }\n      }\n});\n","// removed by extract-text-webpack-plugin"],"sourceRoot":""}